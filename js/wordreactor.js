(function(e,t){"use strict";function n(e,t){function n(){}n.prototype=e;var r=new n;for(var i in t)r[i]=t[i];if(t.toString!==Object.prototype.toString)r.toString=t.toString;return r}function Rs(e,t){if(t==null)return null;if(t.__id__==null)t.__id__=qs++;var n;if(e.hx__closures__==null)e.hx__closures__={};else n=e.hx__closures__[t.__id__];if(n==null){n=function(){return n.method.apply(n.scope,arguments)};n.scope=e;n.method=t;e.hx__closures__[t.__id__]=n}return n}var r=function(){};r.__name__=true;r.substr=function(e,t,n){if(t!=null&&t!=0&&n!=null&&n<0)return"";if(n==null)n=e.length;if(t<0){t=e.length+t;if(t<0)t=0}else if(n<0)n=e.length+n-t;return e.substr(t,n)};r.indexOf=function(e,t,n){var r=e.length;if(n<0){n+=r;if(n<0)n=0}while(n<r){if(e[n]===t)return n;n++}return-1};r.remove=function(e,t){var n=r.indexOf(e,t,0);if(n==-1)return false;e.splice(n,1);return true};r.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var i=function(){this.length=0};i.__name__=true;i.prototype={add:function(e){var t=[e];if(this.h==null)this.h=t;else this.q[1]=t;this.q=t;this.length++},pop:function(){if(this.h==null)return null;var e=this.h[0];this.h=this.h[1];if(this.h==null)this.q=null;this.length--;return e},isEmpty:function(){return this.h==null},__class__:i};var s=function(){};s.__name__=true;var o=function(){};o.__name__=true;var u=function(e,t,n,r){if(!(e!=null))throw new g("FAIL: container != null");if(!(t!=null))throw new g("FAIL: topic != null");this.container=e;if(r==0)this.set_text(t.name);else{if(!(n!=null))throw new g("FAIL: text != null");this.set_text(n)}this.topic=t;this.type=r};u.__name__=true;u.prototype={set_text:function(e){if(!(e!=null&&e.length>0))throw new g("FAIL: text != null && text.length > 0");this.text=e;this.container.getElementsByClassName("innerContent")[0].innerHTML=e;return this.text},__class__:u};var a=function(e,t){this.generator=e;this.trie=t};a.__name__=true;a.prototype={__class__:a};var f=function(e,t){this.name=e;this.color=t};f.__name__=true;f.prototype={__class__:f};var l=function(){this.lastAnimationTime=0;this.div=window.document.getElementById("simulation");this.currentTopicGroupCounter=0;window.onload=Rs(this,this.onWindowLoaded)};l.__name__=true;l.main=function(){var e=new l};l.prototype={onWindowLoaded:function(){var e=this;this.generatorMap=new m;this.napeGravity=new _t(0,600);this.resetSimulation();var t=function(t,n){e.isPointerDown=true;e.napeHand.get_anchor1().setxy(t,n);e.pointerPosition.setxy(t,n);var r=new qt;r=e.napeSpace.bodiesUnderPoint(e.pointerPosition,null,r);if(r==null||r.get_length()==0)l.backgroundTappingTopic=e.getNextTopic();var i;r.zpp_inner.valmod();i=It.get(r);while(i.hasNext()){var s;i.zpp_critical=false;s=i.zpp_inner.at(i.zpp_i++);if(s.zpp_inner.type==2){e.napeHand.set_body2(s);e.napeHand.set_anchor2(s.worldPointToLocal(e.pointerPosition,true));e.napeHand.set_active(true);break}}};var n=function(t,n){e.napeHand.get_anchor1().setxy(t,n);e.pointerPosition.setxy(t,n)};var r=function(){e.isPointerDown=false;e.napeHand.set_active(false)};window.document.addEventListener("mousedown",function(e){t(e.clientX,e.clientY);e.preventDefault()},true);window.document.addEventListener("mousemove",function(e){n(e.clientX,e.clientY);e.preventDefault()},true);window.document.addEventListener("mouseup",function(e){r();e.preventDefault()},true);window.document.addEventListener("touchstart",function(e){t(e.touches[0].clientX,e.touches[0].clientY);e.preventDefault()},true);window.document.addEventListener("touchmove",function(e){n(e.touches[0].clientX,e.touches[0].clientY);e.preventDefault()},true);window.document.addEventListener("touchend",function(e){r();e.preventDefault()},true);window.document.addEventListener("touchcancel",function(e){r();e.preventDefault()},true);window.addEventListener("resize",function(){},true);window.addEventListener("orientationchange",function(){var t=window.orientation;switch(t){case-90:case 90:e.napeGravity=_t.get(600,0,true);break;default:e.napeGravity=_t.get(0,600,true)}});window.requestAnimationFrame(Rs(this,this.animate))},animate:function(e){var t=(e-this.lastAnimationTime)*.001;this.lastAnimationTime=e;if(t>3){window.requestAnimationFrame(Rs(this,this.animate));return}this.napeSpace.step(t,10,10);if(this.napeHand.zpp_inner.active){var n=this.napeHand.get_body2();n.set_angularVel(n.zpp_inner.angvel*.95)}else if(this.isPointerDown)this.wordBalls.add(this.createWordBall(this.pointerPosition.get_x(),this.pointerPosition.get_y(),l.backgroundTappingTopic));var r=this.wordBalls.iterator();while(r.hasNext()){var i;r.zpp_critical=false;i=r.zpp_inner.at(r.zpp_i++);this.updateBallStyle(function(e){var t;if(i.zpp_inner_i.userData==null)i.zpp_inner_i.userData={};t=i.zpp_inner_i.userData;return t}(this).sprite.container.style,function(e){var t;if(i.zpp_inner.wrap_pos==null)i.zpp_inner.setupPosition();t=i.zpp_inner.wrap_pos;return t}(this).get_x(),function(e){var t;if(i.zpp_inner.wrap_pos==null)i.zpp_inner.setupPosition();t=i.zpp_inner.wrap_pos;return t}(this).get_y(),i.zpp_inner.rot)}var s=this.topicBalls.iterator();while(s.hasNext()){var o;s.zpp_critical=false;o=s.zpp_inner.at(s.zpp_i++);this.updateBallStyle(function(e){var t;if(o.zpp_inner_i.userData==null)o.zpp_inner_i.userData={};t=o.zpp_inner_i.userData;return t}(this).sprite.container.style,function(e){var t;if(o.zpp_inner.wrap_pos==null)o.zpp_inner.setupPosition();t=o.zpp_inner.wrap_pos;return t}(this).get_x(),function(e){var t;if(o.zpp_inner.wrap_pos==null)o.zpp_inner.setupPosition();t=o.zpp_inner.wrap_pos;return t}(this).get_y(),o.zpp_inner.rot)}var u=0;var a=[this.instructionsBall,this.githubBall,this.twitterBall,this.resetBall];while(u<a.length){var f=a[u];++u;if(f!=null)this.updateBallStyle(function(e){var t;if(f.zpp_inner_i.userData==null)f.zpp_inner_i.userData={};t=f.zpp_inner_i.userData;return t}(this).sprite.style,function(e){var t;if(f.zpp_inner.wrap_pos==null)f.zpp_inner.setupPosition();t=f.zpp_inner.wrap_pos;return t}(this).get_x(),function(e){var t;if(f.zpp_inner.wrap_pos==null)f.zpp_inner.setupPosition();t=f.zpp_inner.wrap_pos;return t}(this).get_y(),f.zpp_inner.rot)}window.requestAnimationFrame(Rs(this,this.animate))},resetSimulation:function(){var e=this;while(this.div.firstChild!=null)this.div.removeChild(this.div.firstChild);this.lastAnimationTime=0;var t=window.innerWidth;var n=window.innerHeight;this.wordFontSizePixels=h["int"](Math.max(Math.min(t,n)*.01,12));this.wordBallPixelPadding=this.wordFontSizePixels*2;this.topicFontSizePixels=h["int"](Math.max(Math.min(t,n)*.015,18));this.topicBallPixelPadding=this.topicFontSizePixels*2;this.napeSpace=new ln(this.napeGravity);this.napeHand=new Z(this.napeSpace.zpp_inner.__static,null,_t.get(0,0,true),_t.get(0,0,true));this.napeHand.set_active(false);this.napeHand.set_stiff(false);this.napeHand.set_maxForce(15e5);this.napeHand.set_space(this.napeSpace);this.worldBorder=this.createWorldBorder(0,0,window.innerWidth,window.innerHeight,100);this.worldBorder.set_space(this.napeSpace);this.wordBallCollisionType=new M;this.napeSpace.zpp_inner.wrap_listeners.add(new j(function(e){var t;if(Tn.CbEvent_BEGIN==null){Tn.internal=true;Tn.CbEvent_BEGIN=new O;Tn.internal=false}t=Tn.CbEvent_BEGIN;return t}(this),function(e){var t;if(Tn.InteractionType_COLLISION==null){Tn.internal=true;Tn.InteractionType_COLLISION=new F;Tn.internal=false}t=Tn.InteractionType_COLLISION;return t}(this),this.wordBallCollisionType,this.wordBallCollisionType,Rs(this,this.wordOnWordCollision)));this.topicBallCollisionType=new M;this.napeSpace.zpp_inner.wrap_listeners.add(new j(function(e){var t;if(Tn.CbEvent_BEGIN==null){Tn.internal=true;Tn.CbEvent_BEGIN=new O;Tn.internal=false}t=Tn.CbEvent_BEGIN;return t}(this),function(e){var t;if(Tn.InteractionType_COLLISION==null){Tn.internal=true;Tn.InteractionType_COLLISION=new F;Tn.internal=false}t=Tn.InteractionType_COLLISION;return t}(this),this.topicBallCollisionType,this.topicBallCollisionType,Rs(this,this.topicOnTopicCollision)));this.topicBalls=new qt;this.currentTopicGroup=this.getNextTopicGroup();var r=0;var i=this.currentTopicGroup.length;while(r<i){var s=r++;this.topicBalls.add(this.createTopicBall(t*.5,n*.5,this.currentTopicGroup[s]))}this.wordBalls=new qt;this.instructionsBall=this.createInstructions(300,t*.5,n*.5);this.githubBall=this.createClickableBall(96,t*.2,n*.1,function(){window.open("https://github.com/Tw1ddle/word-reactor")},'<img src="assets/images/githublogo.png" />');this.twitterBall=this.createClickableBall(96,t*.5,n*.1,function(){window.open("https://twitter.com/Sam_Twidale/status/756230840821092352")},'<img src="assets/images/twitterlogo.png" />');this.resetBall=this.createClickableBall(96,t*.8,n*.1,function(){e.resetSimulation()},'<img src="assets/images/reseticon.png" />');this.isPointerDown=false;this.pointerPosition=new _t(0,0)},updateBallStyle:function(e,t,n,r){e.left=h.string(t-h["int"](h.parseFloat(p.replace(e.width,"px",""))/2))+"px";e.top=h.string(n-h["int"](h.parseFloat(p.replace(e.height,"px",""))/2))+"px";var i="rotate("+r*57.2957795+"deg) translateZ(0)";e.WebkitTransform=i;e.MozTransform=i;e.OTransform=i;e.msTransform=i;e.transform=i},createWorldBorder:function(e,t,n,r,i){var s=new Ft(function(e){var t;if(Tn.BodyType_STATIC==null){Tn.internal=true;Tn.BodyType_STATIC=new Rt;Tn.internal=false}t=Tn.BodyType_STATIC;return t}(this));s.zpp_inner.wrap_shapes.add(new rn(rn.rect(e,t-i,n,i)));s.zpp_inner.wrap_shapes.add(new rn(rn.rect(e,t+r,n,i)));s.zpp_inner.wrap_shapes.add(new rn(rn.rect(e-i,t,i,r)));s.zpp_inner.wrap_shapes.add(new rn(rn.rect(e+n,t,i,r)));return s},createWrappedContent:function(e){var t;var n=window.document;t=n.createElement("div");t.className="contentWrapper";var r;var i=window.document;r=i.createElement("span");r.className="innerContent";r.innerHTML="";if(e!=null)r.style.fontSize=(e==null?"null":""+e)+"px";t.appendChild(r);return t},createTopicBall:function(e,t,n){var r=this.createWrappedContent(this.topicFontSizePixels);var i=n.name.length*this.topicFontSizePixels*.5+this.topicBallPixelPadding;var s=this.createVisualBall(i,e,t,r,n,null,null);this.div.appendChild(s);var o=this.createNapeBall(i,e,t);(function(e){var t;if(o.zpp_inner_i.userData==null)o.zpp_inner_i.userData={};t=o.zpp_inner_i.userData;return t})(this).sprite=new u(s,n,null,0);(function(e){var t;if(o.zpp_inner_i.wrap_cbTypes==null)o.zpp_inner_i.setupcbTypes();t=o.zpp_inner_i.wrap_cbTypes;return t})(this).add(this.topicBallCollisionType);return o},createWordBall:function(e,t,n){var r=this.createWrappedContent(this.wordFontSizePixels);var i=c.field(o,n.name);if(!(i!=null))throw new g("FAIL: words != null");var s=this.generate(n.name);var a=s.length*this.wordFontSizePixels*.5+this.wordBallPixelPadding;var f=this.createVisualBall(a,e,t,r,n,null,null);this.div.appendChild(f);var l=new u(f,n,s,1);var h=this.createNapeBall(a,e,t);(function(e){var t;if(h.zpp_inner_i.userData==null)h.zpp_inner_i.userData={};t=h.zpp_inner_i.userData;return t})(this).sprite=l;(function(e){var t;if(h.zpp_inner_i.wrap_cbTypes==null)h.zpp_inner_i.setupcbTypes();t=h.zpp_inner_i.wrap_cbTypes;return t})(this).add(this.wordBallCollisionType);return h},createInstructions:function(e,t,n){var r=this.createWrappedContent(null);var i=r.childNodes[0];i.innerHTML='<h1>Word Reactor</h1><br/><span style="font-size:15px;"><strong>Instructions:</strong><br/><br/>1. Drag and collide balls.<br/>2. Tap the background.<br/>3. Tap reset ball.<br/>4. Have fun!</span>';var s=this.createVisualBall(e,t,n,r,this.currentTopicGroup[0],null,null);this.div.appendChild(s);var o=this.createNapeBall(e,t,n);(function(e){var t;if(o.zpp_inner_i.userData==null)o.zpp_inner_i.userData={};t=o.zpp_inner_i.userData;return t})(this).sprite=s;return o},createClickableBall:function(e,t,n,r,i){var s=this.createWrappedContent(null);var o=this.createVisualBall(e,t,n,s,l.topicGroups[0][0],false,null);this.div.appendChild(o);o.addEventListener("click",function(e){r()},false);o.addEventListener("touchstart",function(e){r()},false);o.innerHTML=i;var u=this.createNapeBall(e,t,n);(function(e){var t;if(u.zpp_inner_i.userData==null)u.zpp_inner_i.userData={};t=u.zpp_inner_i.userData;return t})(this).sprite=o;return u},createVisualBall:function(e,t,n,r,i,s,o){if(s==null)s=true;var u;var a=window.document;u=a.createElement("div");u.className="ballContainer";u.style.width=(e==null?"null":""+e)+"px";u.style.height=(e==null?"null":""+e)+"px";u.style.left=(t==null?"null":""+t)+"px";u.style.top=(n==null?"null":""+n)+"px";if(s){var f;var l=window.document;f=l.createElement("canvas");f.width=e|0;f.height=e|0;var c=f.getContext("2d",null);if(o!=null)o(c,e|0,e|0);else{c.fillStyle=i.color;c.beginPath();c.arc(e/2,e/2,e/2,0,Math.PI*2);c.closePath();c.fill()}u.appendChild(f)}u.appendChild(r);return u},createNapeBall:function(e,t,n){var r=new Ft(function(e){var t;if(Tn.BodyType_DYNAMIC==null){Tn.internal=true;Tn.BodyType_DYNAMIC=new Rt;Tn.internal=false}t=Tn.BodyType_DYNAMIC;return t}(this));(function(e){var t;if(r.zpp_inner.wrap_pos==null)r.zpp_inner.setupPosition();t=r.zpp_inner.wrap_pos;return t})(this).setxy(t,n);r.zpp_inner.wrap_shapes.add(new Zt(e/2|0));r.set_space(this.napeSpace);r.set_angularVel(Math.random()*2-1);return r},wordOnWordCollision:function(e){},topicOnTopicCollision:function(e){var t=e.zpp_inner.int1.outer_i.get_userData().sprite;var n=e.zpp_inner.int2.outer_i.get_userData().sprite;var r=this.createWordBall(h["int"](e.zpp_inner.int1.outer_i.get_castBody().get_position().get_x()),h["int"](e.zpp_inner.int1.outer_i.get_castBody().get_position().get_y()),t.topic);this.wordBalls.add(r)},generate:function(e){var t=this.getGenerator(e);var n=function(){var e="";while(e==null||e.length==0)e=t.generator.generate();return p.replace(e,"#","")};var r=n();while(t.trie.find(r)||r.length<5||r.length>13)r=n();var i=r.charAt(0).toUpperCase();return i+r.substring(1,r.length)},getGenerator:function(e){var t=this.generatorMap.get(e);if(t==null){var n=c.field(o,e);if(!(n!=null))throw new g("FAIL: data != null");var r=new b(n,3,0);var i=new S;var s=0;while(s<n.length){var u=n[s];++s;i.insert(u)}t=new a(r,i);this.generatorMap.set(e,t)}return t},getNextTopicGroup:function(){this.currentTopicCounter=0;var e=l.topicGroups[this.currentTopicGroupCounter%l.topicGroups.length];this.currentTopicGroupCounter++;return e},getNextTopic:function(){this.currentTopicCounter++;var e=this.currentTopicGroup[this.currentTopicCounter%this.currentTopicGroup.length];return e},__class__:l};Math.__name__=true;var c=function(){};c.__name__=true;c.field=function(e,t){try{return e[t]}catch(n){if(n instanceof g)n=n.val;return null}};c.setField=function(e,t,n){e[t]=n};c.fields=function(e){var t=[];if(e!=null){var n=Object.prototype.hasOwnProperty;for(var r in e){if(r!="__id__"&&r!="hx__closures__"&&n.call(e,r))t.push(r)}}return t};c.copy=function(e){var t={};var n=0;var r=c.fields(e);while(n<r.length){var i=r[n];++n;c.setField(t,i,c.field(e,i))}return t};var h=function(){};h.__name__=true;h.string=function(e){return y.__string_rec(e,"")};h["int"]=function(e){return e|0};h.parseFloat=function(e){return parseFloat(e)};var p=function(){};p.__name__=true;p.replace=function(e,t,n){return e.split(t).join(n)};p.hex=function(e,t){var n="";var r="0123456789ABCDEF";do{n=r.charAt(e&15)+n;e>>>=4}while(e>0);if(t!=null)while(n.length<t)n="0"+n;return n};var d={};d.__name__=true;d.gte=function(e,t){var n=e<0;var r=t<0;if(n!=r)return n;else return e>=t};var v=function(){};v.__name__=true;var m=function(){this.h={}};m.__name__=true;m.__interfaces__=[v];m.prototype={set:function(e,t){if(Js[e]!=null)this.setReserved(e,t);else this.h[e]=t},get:function(e){if(Js[e]!=null)return this.getReserved(e);return this.h[e]},setReserved:function(e,t){if(this.rh==null)this.rh={};this.rh["$"+e]=t},getReserved:function(e){if(this.rh==null)return null;else return this.rh["$"+e]},keys:function(){var e=this.arrayKeys();return r.iter(e)},arrayKeys:function(){var e=[];for(var t in this.h){if(this.h.hasOwnProperty(t))e.push(t)}if(this.rh!=null){for(var t in this.rh){if(t.charCodeAt(0)==36)e.push(t.substr(1))}}return e},__class__:m};var g=function(e){Error.call(this);this.val=e;this.message=String(e);if(Error.captureStackTrace)Error.captureStackTrace(this,g)};g.__name__=true;g.__super__=Error;g.prototype=n(Error.prototype,{__class__:g});var y=function(){};y.__name__=true;y.getClass=function(e){if(e instanceof Array&&e.__enum__==null)return Array;else{var t=e.__class__;if(t!=null)return t;var n=y.__nativeClassName(e);if(n!=null)return y.__resolveNativeClass(n);return null}};y.__string_rec=function(e,t){if(e==null)return"null";if(t.length>=5)return"<...>";var n=typeof e;if(n=="function"&&(e.__name__||e.__ename__))n="object";switch(n){case"object":if(e instanceof Array){if(e.__enum__){if(e.length==2)return e[0];var r=e[0]+"(";t+="	";var i=2;var s=e.length;while(i<s){var o=i++;if(o!=2)r+=","+y.__string_rec(e[o],t);else r+=y.__string_rec(e[o],t)}return r+")"}var u=e.length;var a;var f="[";t+="	";var l=0;while(l<u){var c=l++;f+=(c>0?",":"")+y.__string_rec(e[c],t)}f+="]";return f}var h;try{h=e.toString}catch(p){if(p instanceof g)p=p.val;return"???"}if(h!=null&&h!=Object.toString&&typeof h=="function"){var d=e.toString();if(d!="[object Object]")return d}var v=null;var m="{\n";t+="	";var b=e.hasOwnProperty!=null;for(var v in e){if(b&&!e.hasOwnProperty(v)){continue}if(v=="prototype"||v=="__class__"||v=="__super__"||v=="__interfaces__"||v=="__properties__"){continue}if(m.length!=2)m+=", \n";m+=t+v+" : "+y.__string_rec(e[v],t)}t=t.substring(1);m+="\n"+t+"}";return m;case"function":return"<function>";case"string":return e;default:return String(e)}};y.__interfLoop=function(e,t){if(e==null)return false;if(e==t)return true;var n=e.__interfaces__;if(n!=null){var r=0;var i=n.length;while(r<i){var s=r++;var o=n[s];if(o==t||y.__interfLoop(o,t))return true}}return y.__interfLoop(e.__super__,t)};y.__instanceof=function(e,t){if(t==null)return false;switch(t){case Us:return(e|0)===e;case Ws:return typeof e=="number";case Xs:return typeof e=="boolean";case String:return typeof e=="string";case Array:return e instanceof Array&&e.__enum__==null;case zs:return true;default:if(e!=null){if(typeof t=="function"){if(e instanceof t)return true;if(y.__interfLoop(y.getClass(e),t))return true}else if(typeof t=="object"&&y.__isNativeObj(t)){if(e instanceof t)return true}}else return false;if(t==Vs&&e.__name__!=null)return true;if(t==$s&&e.__ename__!=null)return true;return e.__enum__==t}};y.__nativeClassName=function(e){var t=y.__toStr.call(e).slice(8,-1);if(t=="Object"||t=="Function"||t=="Math"||t=="JSON")return null;return t};y.__isNativeObj=function(e){return y.__nativeClassName(e)!=null};y.__resolveNativeClass=function(e){return t[e]};var b=function(e,t,n){if(!(e!=null))throw new g("FAIL: data != null");if(!d.gte(t,1))throw new g("FAIL: order >= 1");if(!(n>=0))throw new g("FAIL: prior >= 0");this.order=t;this.prior=n;var r=E.create();var i=0;while(i<e.length){var s=e[i];++i;var o=0;var u=s.length;while(o<u){var a=o++;E.add(r,s.charAt(a))}}r.sort(function(e,t){if(e<t)return-1;if(e>t)return 1;return 0});var f=E.toArray(r);f.splice(0,0,"#");this.models=[];var l=0;while(l<t){var c=l++;this.models.push(new w(e.slice(),t-c,n,f))}};b.__name__=true;b.prototype={generate:function(){var e=T.repeat("#",this.order);var t=this.getLetter(e);while(t!="#"){if(t!=null)e+=t;t=this.getLetter(e)}return e},getLetter:function(e){if(!(e!=null))throw new g("FAIL: context != null");if(!(e.length>0))throw new g("FAIL: context.length > 0");var t=null;var n=e.substring(e.length-this.order,e.length);var r=0;var i=this.models;while(r<i.length){var s=i[r];++r;t=s.generate(n);if(t==null)n=n.substring(1);else break}return t},__class__:b};var w=function(e,t,n,r){if(!(r!=null&&e!=null))throw new g("FAIL: alphabet != null && data != null");if(!(r.length>0&&e.length>0))throw new g("FAIL: alphabet.length > 0 && data.length > 0");if(!(n>=0&&n<=1))throw new g("FAIL: prior >= 0 && prior <= 1");this.order=t;this.prior=n;this.alphabet=r;this.observations=new m;this.train(e);this.buildChains()};w.__name__=true;w.countMatches=function(e,t){if(e==null)return 0;var n=0;var r=0;while(r<e.length){var i=e[r];++r;if(i==t)n++}return n};w.selectIndex=function(e){var t=[];var n=0;var r=0;while(r<e.length){var i=e[r];++r;n+=i;t.push(n)}var s=Math.random()*n;var o=0;var u=t.length;while(o<u){var a=o++;if(s<t[a])return a}return 0};w.prototype={generate:function(e){if(!(e!=null))throw new g("FAIL: context != null");var t=this.chains.get(e);if(t==null)return null;else{if(!(t.length>0))throw new g("FAIL: chain.length > 0");return this.alphabet[w.selectIndex(t)]}},retrain:function(e){if(!(e!=null))throw new g("FAIL: data != null");this.train(e);this.buildChains()},train:function(e){while(e.length!=0){var t=e.pop();t=T.repeat("#",this.order)+t+"#";var n=0;var r=t.length-this.order;while(n<r){var i=n++;var s=t.substring(i,i+this.order);var o=this.observations.get(s);if(o==null){o=[];this.observations.set(s,o)}o.push(t.charAt(i+this.order))}}},buildChains:function(){this.chains=new m;var e=this.observations.keys();while(e.hasNext()){var t=e.next();var n=0;var r=this.alphabet;while(n<r.length){var i=r[n];++n;var s=this.chains.get(t);if(s==null){s=[];this.chains.set(t,s)}s.push(this.prior+w.countMatches(this.observations.get(t),i))}}},__class__:w};var E={};E.__name__=true;E.create=function(e){if(e==null)return[];return E.toSet(e)};E.intersection=function(e,t){var n=[];var r=0;while(r<e.length){var i=e[r];++r;if(E.contains(t,i))n.push(i)}return n};E.union=function(e,t){return E.toSet(e.concat(E.toArray(t)))};E.unionArray=function(e,t){return E.toSet(e.concat(t))};E.difference=function(e,t){var n;var i=e.slice();n=i;var s=r.iter(t);while(s.hasNext()){var o=s.next();r.remove(n,o)}var u=E.toArray(n);return u};E.add=function(e,t){if(!(t!=null))throw new g("FAIL: element != null");if(E.contains(e,t))return false;e.push(t);return true};E.contains=function(e,t){var n=0;while(n<e.length){var r=e[n];++n;if(r==t)return true}return false};E.copy=function(e){var t=e.slice();return t};E.slice=function(e,t,n){var r=e.slice(t,n);return r};E.splice=function(e,t,n){var r=e.splice(t,n);return r};E.toArray=function(e){return e.slice()};E.toSet=function(e){var t=[];var n=0;while(n<e.length){var r=e[n];++n;E.add(t,r)}return t};E._new=function(e){return e};var S=function(){this.root=new x(null,"",0)};S.__name__=true;S.findChild=function(e,t){var n=0;var r=e.children;while(n<r.length){var i=r[n];++n;if(i.letter==t)return i}return null};S.prototype={insert:function(e){var t=this.root;var n=0;var r=e.length;while(n<r){var i=n++;var s=e.charAt(i);var o=S.findChild(t,s);if(o==null){o=new x(t,s,i);t.children.push(o)}else o.frequency++;t=o}t.word=true;return t.frequency},find:function(e){var t=this.root;var n=0;var r=e.length;while(n<r){var i=n++;t=S.findChild(t,e.charAt(i));if(t==null)return false}if(!t.word)return false;return true},getWords:function(){var e=new i;e.add(this.root);var t=[];while(!e.isEmpty()){var n=e.pop();if(n.word){var r=n.letter;var s=n.parent;while(s!=null){r+=s.letter;s=s.parent}t.push(T.reverse(r))}var o=0;var u=n.children;while(o<u.length){var a=u[o];++o;e.add(a)}}return t},__class__:S};var x=function(e,t,n){if(!(t.length==1||e==null&&n==0))throw new g("FAIL: letter.length == 1 || (parent == null && depth == 0)");this.parent=e;this.children=[];this.letter=t;this.depth=n;this.frequency=1;this.word=false};x.__name__=true;x.prototype={__class__:x};var T=function(){};T.__name__=true;T.reverse=function(e){if(!(e!=null))throw new g("FAIL: str != null");var t=e.split("");t.reverse();return t.join("")};T.repeat=function(e,t){if(!(e!=null))throw new g("FAIL: str != null");if(!(t>=1))throw new g("FAIL: times >= 1");var n="";var r=0;while(r<t){var i=r++;n+=e}return n};T.contains=function(e,t){if(!(e!=null))throw new g("FAIL: str != null");if(!(t!=null))throw new g("FAIL: substr != null");return e.indexOf(t)>=0};T.capitalize=function(e){if(!(e!=null))throw new g("FAIL: str != null");return r.substr(e,0,1).toUpperCase()+r.substr(e,1,e.length-1)};var N=function(){};N.__name__=true;N.prototype={__class__:N};var C=function(){this.zpp_inner=null;if(!dn.internal)throw new g("Error: Callback cannot be instantiated derp!")};C.__name__=true;C.prototype={get_event:function(){return Nn.events[this.zpp_inner.event]},get_listener:function(){return this.zpp_inner.listener.outer},toString:function(){return""},__class__:C};var k=function(){C.call(this)};k.__name__=true;k.__super__=C;k.prototype=n(C.prototype,{get_body:function(){return this.zpp_inner.body.outer},toString:function(){var e="Cb:";e+=["WAKE","SLEEP"][this.zpp_inner.event-2];e+=":"+this.zpp_inner.body.outer.toString();e+=" : listener: "+h.string(this.zpp_inner.listener.outer);return e},__class__:k});var L=function(){this.zpp_inner=null;if(!Nn.internal)throw new g("Error: Cannot instantiate Listener derp!")};L.__name__=true;L.prototype={get_type:function(){return Nn.types[this.zpp_inner.type]},get_event:function(){return Nn.events[this.zpp_inner.event]},set_event:function(e){if(e==null)throw new g("Error: Cannot set listener event type to null");if(Nn.events[this.zpp_inner.event]!=e){var t;if(e==function(e){var t;if(Tn.CbEvent_BEGIN==null){Tn.internal=true;Tn.CbEvent_BEGIN=new O;Tn.internal=false}t=Tn.CbEvent_BEGIN;return t}(this))t=0;else if(e==function(e){var t;if(Tn.CbEvent_ONGOING==null){Tn.internal=true;Tn.CbEvent_ONGOING=new O;Tn.internal=false}t=Tn.CbEvent_ONGOING;return t}(this))t=6;else if(e==function(e){var t;if(Tn.CbEvent_END==null){Tn.internal=true;Tn.CbEvent_END=new O;Tn.internal=false}t=Tn.CbEvent_END;return t}(this))t=1;else if(e==function(e){var t;if(Tn.CbEvent_SLEEP==null){Tn.internal=true;Tn.CbEvent_SLEEP=new O;Tn.internal=false}t=Tn.CbEvent_SLEEP;return t}(this))t=3;else if(e==function(e){var t;if(Tn.CbEvent_WAKE==null){Tn.internal=true;Tn.CbEvent_WAKE=new O;Tn.internal=false}t=Tn.CbEvent_WAKE;return t}(this))t=2;else if(e==function(e){var t;if(Tn.CbEvent_PRE==null){Tn.internal=true;Tn.CbEvent_PRE=new O;Tn.internal=false}t=Tn.CbEvent_PRE;return t}(this))t=5;else t=4;this.zpp_inner.swapEvent(t)}return Nn.events[this.zpp_inner.event]},get_precedence:function(){return this.zpp_inner.precedence},set_precedence:function(e){if(this.zpp_inner.precedence!=e){this.zpp_inner.precedence=e;this.zpp_inner.invalidate_precedence()}return this.zpp_inner.precedence},get_space:function(){if(this.zpp_inner.space==null)return null;else return this.zpp_inner.space.outer},set_space:function(e){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=e){if(this.zpp_inner.space!=null)this.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(this);if(e!=null)e.zpp_inner.wrap_listeners.add(this);else this.zpp_inner.space=null}if(this.zpp_inner.space==null)return null;else return this.zpp_inner.space.outer},toString:function(){var e=["BEGIN","END","WAKE","SLEEP","BREAK","PRE","ONGOING"][this.zpp_inner.event];if(this.zpp_inner.type==0){var t=this.zpp_inner.body;return"BodyListener{"+e+"::"+h.string(t.outer_zn.zpp_inner_zn.options.outer)+"}"}else if(this.zpp_inner.type==1){var n=this.zpp_inner.constraint;return"ConstraintListener{"+e+"::"+h.string(n.outer_zn.zpp_inner_zn.options.outer)+"}"}else{var r=this.zpp_inner.interaction;var i;var s=r.itype;switch(s){case 1:i="COLLISION";break;case 2:i="SENSOR";break;case 4:i="FLUID";break;default:i="ALL"}return(this.zpp_inner.type==2?"InteractionListener{"+e+"#"+i+"::"+h.string(r.outer_zni.zpp_inner_zn.options1.outer)+":"+h.string(r.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+i+"::"+h.string(r.outer_znp.zpp_inner_zn.options1.outer)+":"+h.string(r.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence}},__class__:L};var A=function(e,t,n,r){if(r==null)r=0;this.zpp_inner_zn=null;Nn.internal=true;L.call(this);Nn.internal=false;if(n==null)throw new g("Error: BodyListener::handler cannot be null");var i=-1;if(e==function(e){var t;if(Tn.CbEvent_WAKE==null){Tn.internal=true;Tn.CbEvent_WAKE=new O;Tn.internal=false}t=Tn.CbEvent_WAKE;return t}(this))i=2;else if(e==function(e){var t;if(Tn.CbEvent_SLEEP==null){Tn.internal=true;Tn.CbEvent_SLEEP=new O;Tn.internal=false}t=Tn.CbEvent_SLEEP;return t}(this))i=3;else throw new g("Error: cbEvent '"+e.toString()+"' is not a valid event type for a BodyListener");this.zpp_inner_zn=new Cn(On.argument(t),i,n);this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner.precedence=r};A.__name__=true;A.__super__=L;A.prototype=n(L.prototype,{get_options:function(){return this.zpp_inner_zn.options.outer},set_options:function(e){this.zpp_inner_zn.options.set(e.zpp_inner);return this.zpp_inner_zn.options.outer},get_handler:function(){return this.zpp_inner_zn.handler},set_handler:function(e){if(e==null)throw new g("Error: BodyListener::handler cannot be null");this.zpp_inner_zn.handler=e;return this.zpp_inner_zn.handler},__class__:A});var O=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"CbEvent"+" derp!")};O.__name__=true;O.get_BEGIN=function(){if(Tn.CbEvent_BEGIN==null){Tn.internal=true;Tn.CbEvent_BEGIN=new O;Tn.internal=false}return Tn.CbEvent_BEGIN};O.get_ONGOING=function(){if(Tn.CbEvent_ONGOING==null){Tn.internal=true;Tn.CbEvent_ONGOING=new O;Tn.internal=false}return Tn.CbEvent_ONGOING};O.get_END=function(){if(Tn.CbEvent_END==null){Tn.internal=true;Tn.CbEvent_END=new O;Tn.internal=false}return Tn.CbEvent_END};O.get_WAKE=function(){if(Tn.CbEvent_WAKE==null){Tn.internal=true;Tn.CbEvent_WAKE=new O;Tn.internal=false}return Tn.CbEvent_WAKE};O.get_SLEEP=function(){if(Tn.CbEvent_SLEEP==null){Tn.internal=true;Tn.CbEvent_SLEEP=new O;Tn.internal=false}return Tn.CbEvent_SLEEP};O.get_BREAK=function(){if(Tn.CbEvent_BREAK==null){Tn.internal=true;Tn.CbEvent_BREAK=new O;Tn.internal=false}return Tn.CbEvent_BREAK};O.get_PRE=function(){if(Tn.CbEvent_PRE==null){Tn.internal=true;Tn.CbEvent_PRE=new O;Tn.internal=false}return Tn.CbEvent_PRE};O.prototype={toString:function(){if(this==function(e){var t;if(Tn.CbEvent_PRE==null){Tn.internal=true;Tn.CbEvent_PRE=new O;Tn.internal=false}t=Tn.CbEvent_PRE;return t}(this))return"PRE";else if(this==function(e){var t;if(Tn.CbEvent_BEGIN==null){Tn.internal=true;Tn.CbEvent_BEGIN=new O;Tn.internal=false}t=Tn.CbEvent_BEGIN;return t}(this))return"BEGIN";else if(this==function(e){var t;if(Tn.CbEvent_ONGOING==null){Tn.internal=true;Tn.CbEvent_ONGOING=new O;Tn.internal=false}t=Tn.CbEvent_ONGOING;return t}(this))return"ONGOING";else if(this==function(e){var t;if(Tn.CbEvent_END==null){Tn.internal=true;Tn.CbEvent_END=new O;Tn.internal=false}t=Tn.CbEvent_END;return t}(this))return"END";else if(this==function(e){var t;if(Tn.CbEvent_WAKE==null){Tn.internal=true;Tn.CbEvent_WAKE=new O;Tn.internal=false}t=Tn.CbEvent_WAKE;return t}(this))return"WAKE";else if(this==function(e){var t;if(Tn.CbEvent_SLEEP==null){Tn.internal=true;Tn.CbEvent_SLEEP=new O;Tn.internal=false}t=Tn.CbEvent_SLEEP;return t}(this))return"SLEEP";else if(this==function(e){var t;if(Tn.CbEvent_BREAK==null){Tn.internal=true;Tn.CbEvent_BREAK=new O;Tn.internal=false}t=Tn.CbEvent_BREAK;return t}(this))return"BREAK";else return""},__class__:O};var M=function(){this.zpp_inner=null;this.zpp_inner=new xn;this.zpp_inner.outer=this};M.__name__=true;M.get_ANY_BODY=function(){return xn.ANY_BODY};M.get_ANY_CONSTRAINT=function(){return xn.ANY_CONSTRAINT};M.get_ANY_SHAPE=function(){return xn.ANY_SHAPE};M.get_ANY_COMPOUND=function(){return xn.ANY_COMPOUND};M.prototype={get_id:function(){return this.zpp_inner.id},including:function(e){return(new U(this)).including(e)},excluding:function(e){return(new U(this)).excluding(e)},get_userData:function(){if(this.zpp_inner.userData==null)this.zpp_inner.userData={};return this.zpp_inner.userData},get_interactors:function(){if(this.zpp_inner.wrap_interactors==null)this.zpp_inner.wrap_interactors=ms.get(this.zpp_inner.interactors,true);return this.zpp_inner.wrap_interactors},get_constraints:function(){if(this.zpp_inner.wrap_constraints==null)this.zpp_inner.wrap_constraints=ds.get(this.zpp_inner.constraints,true);return this.zpp_inner.wrap_constraints},toString:function(){if(this==xn.ANY_BODY)return"ANY_BODY";else if(this==xn.ANY_SHAPE)return"ANY_SHAPE";else if(this==xn.ANY_COMPOUND)return"ANY_COMPOUND";else if(this==xn.ANY_CONSTRAINT)return"ANY_CONSTRAINT";else return"CbType#"+this.zpp_inner.id},__class__:M};var _=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!bs.internal)throw new g("Error: Cannot instantiate "+"CbType"+"Iterator derp!")};_.__name__=true;_.get=function(e){var t;if(_.zpp_pool==null){bs.internal=true;var n=new _;bs.internal=false;t=n}else{var r=_.zpp_pool;_.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};_.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=_.zpp_pool;_.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:_};var D=function(){this.zpp_inner=null;this.zpp_inner=new bs;this.zpp_inner.outer=this};D.__name__=true;D.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new D;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};D.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.outer},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"CbType"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"CbType"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"CbType"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.outer;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"CbType"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.outer;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"CbType"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"CbType"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return _.get(this)},copy:function(e){if(e==null)e=false;var t=new D;var n;this.zpp_inner.valmod();n=_.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"CbType"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=_.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=_.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=_.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=_.zpp_pool;_.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:D};var P=function(){C.call(this)};P.__name__=true;P.__super__=C;P.prototype=n(C.prototype,{get_constraint:function(){return this.zpp_inner.constraint.outer},toString:function(){var e="Cb:";e+=["WAKE","SLEEP","BREAK"][this.zpp_inner.event-2];e+=":"+this.zpp_inner.constraint.outer.toString();e+=" : listener: "+h.string(this.zpp_inner.listener.outer);return e},__class__:P});var H=function(e,t,n,r){if(r==null)r=0;this.zpp_inner_zn=null;Nn.internal=true;L.call(this);Nn.internal=false;if(n==null)throw new g("Error: ConstraintListener::handler cannot be null");var i=-1;if(e==function(e){var t;if(Tn.CbEvent_WAKE==null){Tn.internal=true;Tn.CbEvent_WAKE=new O;Tn.internal=false}t=Tn.CbEvent_WAKE;return t}(this))i=2;else if(e==function(e){var t;if(Tn.CbEvent_SLEEP==null){Tn.internal=true;Tn.CbEvent_SLEEP=new O;Tn.internal=false}t=Tn.CbEvent_SLEEP;return t}(this))i=3;else if(e==function(e){var t;if(Tn.CbEvent_BREAK==null){Tn.internal=true;Tn.CbEvent_BREAK=new O;Tn.internal=false}t=Tn.CbEvent_BREAK;return t}(this))i=4;else throw new g("Error: cbEvent '"+e.toString()+"' is not a valid event type for a ConstraintListener");this.zpp_inner_zn=new kn(On.argument(t),i,n);this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner.precedence=r};H.__name__=true;H.__super__=L;H.prototype=n(L.prototype,{get_options:function(){return this.zpp_inner_zn.options.outer},set_options:function(e){this.zpp_inner_zn.options.set(e.zpp_inner);return this.zpp_inner_zn.options.outer},get_handler:function(){return this.zpp_inner_zn.handler},set_handler:function(e){if(e==null)throw new g("Error: ConstraintListener::handler cannot be null");this.zpp_inner_zn.handler=e;return this.zpp_inner_zn.handler},__class__:H});var B=function(){C.call(this)};B.__name__=true;B.__super__=C;B.prototype=n(C.prototype,{get_int1:function(){return this.zpp_inner.int1.outer_i},get_int2:function(){return this.zpp_inner.int2.outer_i},get_arbiters:function(){return this.zpp_inner.wrap_arbiters},toString:function(){var e="Cb:";e+=["BEGIN","END","","","","","ONGOING"][this.zpp_inner.event];e+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString();e+=" : "+this.zpp_inner.wrap_arbiters.toString();e+=" : listener: "+h.string(this.zpp_inner.listener.outer);return e},__class__:B});var j=function(e,t,n,r,i,s){if(s==null)s=0;this.zpp_inner_zn=null;Nn.internal=true;L.call(this);Nn.internal=false;if(i==null)throw new g("Error: InteractionListener::handler cannot be null");if(e==null)throw new g("Error: CbEvent cannot be null for InteractionListener");var o=-1;if(e==function(e){var t;if(Tn.CbEvent_BEGIN==null){Tn.internal=true;Tn.CbEvent_BEGIN=new O;Tn.internal=false}t=Tn.CbEvent_BEGIN;return t}(this))o=0;else if(e==function(e){var t;if(Tn.CbEvent_END==null){Tn.internal=true;Tn.CbEvent_END=new O;Tn.internal=false}t=Tn.CbEvent_END;return t}(this))o=1;else if(e==function(e){var t;if(Tn.CbEvent_ONGOING==null){Tn.internal=true;Tn.CbEvent_ONGOING=new O;Tn.internal=false}t=Tn.CbEvent_ONGOING;return t}(this))o=6;else throw new g("Error: CbEvent '"+e.toString()+"' is not a valid event type for InteractionListener");this.zpp_inner_zn=new An(On.argument(n),On.argument(r),o,2);this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zni=this;this.zpp_inner.precedence=s;this.zpp_inner_zn.handleri=i;this.set_interactionType(t)};j.__name__=true;j.__super__=L;j.prototype=n(L.prototype,{get_options1:function(){return this.zpp_inner_zn.options1.outer},set_options1:function(e){this.zpp_inner_zn.options1.set(e.zpp_inner);return this.zpp_inner_zn.options1.outer},get_options2:function(){return this.zpp_inner_zn.options2.outer},set_options2:function(e){this.zpp_inner_zn.options2.set(e.zpp_inner);return this.zpp_inner_zn.options2.outer},get_interactionType:function(){var e=this.zpp_inner_zn.itype;if(e==1){if(Tn.InteractionType_COLLISION==null){Tn.internal=true;Tn.InteractionType_COLLISION=new F;Tn.internal=false}return Tn.InteractionType_COLLISION}else if(e==2){if(Tn.InteractionType_SENSOR==null){Tn.internal=true;Tn.InteractionType_SENSOR=new F;Tn.internal=false}return Tn.InteractionType_SENSOR}else if(e==4){if(Tn.InteractionType_FLUID==null){Tn.internal=true;Tn.InteractionType_FLUID=new F;Tn.internal=false}return Tn.InteractionType_FLUID}else if(e==7){if(Tn.InteractionType_ANY==null){Tn.internal=true;Tn.InteractionType_ANY=new F;Tn.internal=false}return Tn.InteractionType_ANY}else return null},set_interactionType:function(e){if(e==null)throw new g("Error: Cannot set listener interaction type to null");if(this.get_interactionType()!=e){var t;if(e==function(e){var t;if(Tn.InteractionType_COLLISION==null){Tn.internal=true;Tn.InteractionType_COLLISION=new F;Tn.internal=false}t=Tn.InteractionType_COLLISION;return t}(this))t=1;else if(e==function(e){var t;if(Tn.InteractionType_SENSOR==null){Tn.internal=true;Tn.InteractionType_SENSOR=new F;Tn.internal=false}t=Tn.InteractionType_SENSOR;return t}(this))t=2;else if(e==function(e){var t;if(Tn.InteractionType_FLUID==null){Tn.internal=true;Tn.InteractionType_FLUID=new F;Tn.internal=false}t=Tn.InteractionType_FLUID;return t}(this))t=4;else t=7;this.zpp_inner_zn.itype=t}return this.get_interactionType()},get_handler:function(){return this.zpp_inner_zn.handleri},set_handler:function(e){if(e==null)throw new g("Error: InteractionListener::handler cannot be null");this.zpp_inner_zn.handleri=e;return this.zpp_inner_zn.handleri},get_allowSleepingCallbacks:function(){return this.zpp_inner_zn.allowSleepingCallbacks},set_allowSleepingCallbacks:function(e){this.zpp_inner_zn.allowSleepingCallbacks=e;return this.zpp_inner_zn.allowSleepingCallbacks},__class__:j});var F=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"InteractionType"+" derp!")};F.__name__=true;F.get_COLLISION=function(){if(Tn.InteractionType_COLLISION==null){Tn.internal=true;Tn.InteractionType_COLLISION=new F;Tn.internal=false}return Tn.InteractionType_COLLISION};F.get_SENSOR=function(){if(Tn.InteractionType_SENSOR==null){Tn.internal=true;Tn.InteractionType_SENSOR=new F;Tn.internal=false}return Tn.InteractionType_SENSOR};F.get_FLUID=function(){if(Tn.InteractionType_FLUID==null){Tn.internal=true;Tn.InteractionType_FLUID=new F;Tn.internal=false}return Tn.InteractionType_FLUID};F.get_ANY=function(){if(Tn.InteractionType_ANY==null){Tn.internal=true;Tn.InteractionType_ANY=new F;Tn.internal=false}return Tn.InteractionType_ANY};F.prototype={toString:function(){if(this==function(e){var t;if(Tn.InteractionType_COLLISION==null){Tn.internal=true;Tn.InteractionType_COLLISION=new F;Tn.internal=false}t=Tn.InteractionType_COLLISION;return t}(this))return"COLLISION";else if(this==function(e){var t;if(Tn.InteractionType_SENSOR==null){Tn.internal=true;Tn.InteractionType_SENSOR=new F;Tn.internal=false}t=Tn.InteractionType_SENSOR;return t}(this))return"SENSOR";else if(this==function(e){var t;if(Tn.InteractionType_FLUID==null){Tn.internal=true;Tn.InteractionType_FLUID=new F;Tn.internal=false}t=Tn.InteractionType_FLUID;return t}(this))return"FLUID";else if(this==function(e){var t;if(Tn.InteractionType_ANY==null){Tn.internal=true;Tn.InteractionType_ANY=new F;Tn.internal=false}t=Tn.InteractionType_ANY;return t}(this))return"ANY";else return""},__class__:F};var I=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!ys.internal)throw new g("Error: Cannot instantiate "+"Listener"+"Iterator derp!")};I.__name__=true;I.get=function(e){var t;if(I.zpp_pool==null){ys.internal=true;var n=new I;ys.internal=false;t=n}else{var r=I.zpp_pool;I.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};I.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=I.zpp_pool;I.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:I};var q=function(){this.zpp_inner=null;this.zpp_inner=new ys;this.zpp_inner.outer=this};q.__name__=true;q.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new q;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};q.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.outer},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Listener"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Listener"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Listener"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.outer;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Listener"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.outer;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Listener"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Listener"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return I.get(this)},copy:function(e){if(e==null)e=false;var t=new q;var n;this.zpp_inner.valmod();n=I.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"Listener"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=I.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=I.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=I.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=I.zpp_pool;I.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:q};var R=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"ListenerType"+" derp!")};R.__name__=true;R.get_BODY=function(){if(Tn.ListenerType_BODY==null){Tn.internal=true;Tn.ListenerType_BODY=new R;Tn.internal=false}return Tn.ListenerType_BODY};R.get_CONSTRAINT=function(){if(Tn.ListenerType_CONSTRAINT==null){Tn.internal=true;Tn.ListenerType_CONSTRAINT=new R;Tn.internal=false}return Tn.ListenerType_CONSTRAINT};R.get_INTERACTION=function(){if(Tn.ListenerType_INTERACTION==null){Tn.internal=true;Tn.ListenerType_INTERACTION=new R;Tn.internal=false}return Tn.ListenerType_INTERACTION};R.get_PRE=function(){if(Tn.ListenerType_PRE==null){Tn.internal=true;Tn.ListenerType_PRE=new R;Tn.internal=false}return Tn.ListenerType_PRE};R.prototype={toString:function(){if(this==function(e){var t;if(Tn.ListenerType_BODY==null){Tn.internal=true;Tn.ListenerType_BODY=new R;Tn.internal=false}t=Tn.ListenerType_BODY;return t}(this))return"BODY";else if(this==function(e){var t;if(Tn.ListenerType_CONSTRAINT==null){Tn.internal=true;Tn.ListenerType_CONSTRAINT=new R;Tn.internal=false}t=Tn.ListenerType_CONSTRAINT;return t}(this))return"CONSTRAINT";else if(this==function(e){var t;if(Tn.ListenerType_INTERACTION==null){Tn.internal=true;Tn.ListenerType_INTERACTION=new R;Tn.internal=false}t=Tn.ListenerType_INTERACTION;return t}(this))return"INTERACTION";else if(this==function(e){var t;if(Tn.ListenerType_PRE==null){Tn.internal=true;Tn.ListenerType_PRE=new R;Tn.internal=false}t=Tn.ListenerType_PRE;return t}(this))return"PRE";else return""},__class__:R};var U=function(e,t){this.zpp_inner=null;this.zpp_inner=new On;this.zpp_inner.outer=this;if(e!=null)this.including(e);if(t!=null)this.excluding(t)};U.__name__=true;U.prototype={get_includes:function(){if(this.zpp_inner.wrap_includes==null)this.zpp_inner.setup_includes();return this.zpp_inner.wrap_includes},get_excludes:function(){if(this.zpp_inner.wrap_excludes==null)this.zpp_inner.setup_excludes();return this.zpp_inner.wrap_excludes},including:function(e){this.zpp_inner.append(this.zpp_inner.includes,e);return this},excluding:function(e){this.zpp_inner.append(this.zpp_inner.excludes,e);return this},toString:function(){var e=function(e){var t;if(e.zpp_inner.wrap_includes==null)e.zpp_inner.setup_includes();t=e.zpp_inner.wrap_includes;return t}(this).toString();var t=function(e){var t;if(e.zpp_inner.wrap_excludes==null)e.zpp_inner.setup_excludes();t=e.zpp_inner.wrap_excludes;return t}(this).toString();return"@{"+e+" excluding "+t+"}"},__class__:U};var z=function(){C.call(this)};z.__name__=true;z.__super__=C;z.prototype=n(C.prototype,{get_arbiter:function(){return this.zpp_inner.pre_arbiter.wrapper()},get_int1:function(){return this.zpp_inner.int1.outer_i},get_int2:function(){return this.zpp_inner.int2.outer_i},get_swapped:function(){return this.zpp_inner.pre_swapped},toString:function(){var e="Cb:PRE:";e+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString();e+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString();e+=" : listnener: "+h.string(this.zpp_inner.listener.outer);return e},__class__:z});var W=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"PreFlag"+" derp!")};W.__name__=true;W.get_ACCEPT=function(){if(Tn.PreFlag_ACCEPT==null){Tn.internal=true;Tn.PreFlag_ACCEPT=new W;Tn.internal=false}return Tn.PreFlag_ACCEPT};W.get_IGNORE=function(){if(Tn.PreFlag_IGNORE==null){Tn.internal=true;Tn.PreFlag_IGNORE=new W;Tn.internal=false}return Tn.PreFlag_IGNORE};W.get_ACCEPT_ONCE=function(){if(Tn.PreFlag_ACCEPT_ONCE==null){Tn.internal=true;Tn.PreFlag_ACCEPT_ONCE=new W;Tn.internal=false}return Tn.PreFlag_ACCEPT_ONCE};W.get_IGNORE_ONCE=function(){if(Tn.PreFlag_IGNORE_ONCE==null){Tn.internal=true;Tn.PreFlag_IGNORE_ONCE=new W;Tn.internal=false}return Tn.PreFlag_IGNORE_ONCE};W.prototype={toString:function(){if(this==function(e){var t;if(Tn.PreFlag_ACCEPT==null){Tn.internal=true;Tn.PreFlag_ACCEPT=new W;Tn.internal=false}t=Tn.PreFlag_ACCEPT;return t}(this))return"ACCEPT";else if(this==function(e){var t;if(Tn.PreFlag_IGNORE==null){Tn.internal=true;Tn.PreFlag_IGNORE=new W;Tn.internal=false}t=Tn.PreFlag_IGNORE;return t}(this))return"IGNORE";else if(this==function(e){var t;if(Tn.PreFlag_ACCEPT_ONCE==null){Tn.internal=true;Tn.PreFlag_ACCEPT_ONCE=new W;Tn.internal=false}t=Tn.PreFlag_ACCEPT_ONCE;return t}(this))return"ACCEPT_ONCE";else if(this==function(e){var t;if(Tn.PreFlag_IGNORE_ONCE==null){Tn.internal=true;Tn.PreFlag_IGNORE_ONCE=new W;Tn.internal=false}t=Tn.PreFlag_IGNORE_ONCE;return t}(this))return"IGNORE_ONCE";else return""},__class__:W};var X=function(e,t,n,r,i,s){if(s==null)s=false;if(i==null)i=0;this.zpp_inner_zn=null;Nn.internal=true;L.call(this);Nn.internal=false;if(r==null)throw new g("Error: PreListener must take a handler!");this.zpp_inner_zn=new An(On.argument(t),On.argument(n),5,3);this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_znp=this;this.zpp_inner.precedence=i;this.zpp_inner_zn.pure=s;this.zpp_inner_zn.handlerp=r;this.set_interactionType(e)};X.__name__=true;X.__super__=L;X.prototype=n(L.prototype,{get_options1:function(){return this.zpp_inner_zn.options1.outer},set_options1:function(e){this.zpp_inner_zn.options1.set(e.zpp_inner);return this.zpp_inner_zn.options1.outer},get_options2:function(){return this.zpp_inner_zn.options2.outer},set_options2:function(e){this.zpp_inner_zn.options2.set(e.zpp_inner);return this.zpp_inner_zn.options2.outer},get_handler:function(){return this.zpp_inner_zn.handlerp},set_handler:function(e){if(e==null)throw new g("Error: PreListener must take a non-null handler!");this.zpp_inner_zn.handlerp=e;this.zpp_inner_zn.wake();return this.zpp_inner_zn.handlerp},get_pure:function(){return this.zpp_inner_zn.pure},set_pure:function(e){if(!e)this.zpp_inner_zn.wake();this.zpp_inner_zn.pure=e;return this.zpp_inner_zn.pure},get_interactionType:function(){var e=this.zpp_inner_zn.itype;if(e==1){if(Tn.InteractionType_COLLISION==null){Tn.internal=true;Tn.InteractionType_COLLISION=new F;Tn.internal=false}return Tn.InteractionType_COLLISION}else if(e==2){if(Tn.InteractionType_SENSOR==null){Tn.internal=true;Tn.InteractionType_SENSOR=new F;Tn.internal=false}return Tn.InteractionType_SENSOR}else if(e==4){if(Tn.InteractionType_FLUID==null){Tn.internal=true;Tn.InteractionType_FLUID=new F;Tn.internal=false}return Tn.InteractionType_FLUID}else if(e==7){if(Tn.InteractionType_ANY==null){Tn.internal=true;Tn.InteractionType_ANY=new F;Tn.internal=false}return Tn.InteractionType_ANY}else return null},set_interactionType:function(e){if(e==null)throw new g("Error: Cannot set listener interaction type to null");if(this.get_interactionType()!=e){var t;if(e==function(e){var t;if(Tn.InteractionType_COLLISION==null){Tn.internal=true;Tn.InteractionType_COLLISION=new F;Tn.internal=false}t=Tn.InteractionType_COLLISION;return t}(this))t=1;else if(e==function(e){var t;if(Tn.InteractionType_SENSOR==null){Tn.internal=true;Tn.InteractionType_SENSOR=new F;Tn.internal=false}t=Tn.InteractionType_SENSOR;return t}(this))t=2;else if(e==function(e){var t;if(Tn.InteractionType_FLUID==null){Tn.internal=true;Tn.InteractionType_FLUID=new F;Tn.internal=false}t=Tn.InteractionType_FLUID;return t}(this))t=4;else t=7;this.zpp_inner_zn.itype=t}return this.get_interactionType()},__class__:X});var V=function(){this.debugDraw=true;this.zpp_inner.insert_cbtype(xn.ANY_CONSTRAINT.zpp_inner);if(!V.zpp_internalAlloc)throw new g("Error: Constraint cannot be instantiated derp!")};V.__name__=true;V.prototype={get_userData:function(){if(this.zpp_inner.userData==null)this.zpp_inner.userData={};return this.zpp_inner.userData},get_compound:function(){if(this.zpp_inner.compound==null)return null;else return this.zpp_inner.compound.outer},set_compound:function(e){if((this.zpp_inner.compound==null?null:this.zpp_inner.compound.outer)!=e){if((this.zpp_inner.compound==null?null:this.zpp_inner.compound.outer)!=null)(this.zpp_inner.compound==null?null:this.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(this);if(e!=null)e.zpp_inner.wrap_constraints.add(this)}if(this.zpp_inner.compound==null)return null;else return this.zpp_inner.compound.outer},get_space:function(){if(this.zpp_inner.space==null)return null;else return this.zpp_inner.space.outer},set_space:function(e){if(this.zpp_inner.compound!=null)throw new g("Error: Cannot set the space of a Constraint belonging to"+" a Compound, only the root Compound space can be set");if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=e){if(this.zpp_inner.component!=null)this.zpp_inner.component.woken=false;this.zpp_inner.clearcache();if(this.zpp_inner.space!=null)this.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(this);if(e!=null)e.zpp_inner.wrap_constraints.add(this);else this.zpp_inner.space=null}if(this.zpp_inner.space==null)return null;else return this.zpp_inner.space.outer},get_isSleeping:function(){if(this.zpp_inner.space==null||!this.zpp_inner.active)throw new g("Error: isSleeping only makes sense if constraint is"+" active and inside a space");return this.zpp_inner.component.sleeping},get_active:function(){return this.zpp_inner.active},set_active:function(e){if(this.zpp_inner.active!=e){if(this.zpp_inner.component!=null)this.zpp_inner.component.woken=false;this.zpp_inner.clearcache();if(e){this.zpp_inner.active=e;this.zpp_inner.activate();if(this.zpp_inner.space!=null){if(this.zpp_inner.component!=null)this.zpp_inner.component.sleeping=true;this.zpp_inner.space.wake_constraint(this.zpp_inner,true)}}else{if(this.zpp_inner.space!=null){this.zpp_inner.wake();this.zpp_inner.space.live_constraints.remove(this.zpp_inner)}this.zpp_inner.active=e;this.zpp_inner.deactivate()}}return this.zpp_inner.active},get_ignore:function(){return this.zpp_inner.ignore},set_ignore:function(e){if(this.zpp_inner.ignore!=e){this.zpp_inner.ignore=e;this.zpp_inner.wake()}return this.zpp_inner.ignore},get_stiff:function(){return this.zpp_inner.stiff},set_stiff:function(e){if(this.zpp_inner.stiff!=e){this.zpp_inner.stiff=e;this.zpp_inner.wake()}return this.zpp_inner.stiff},get_frequency:function(){return this.zpp_inner.frequency},set_frequency:function(e){if(e!=e)throw new g("Error: Constraint::Frequency cannot be NaN");if(e<=0)throw new g("Error: Constraint::Frequency must be >0");if(this.zpp_inner.frequency!=e){this.zpp_inner.frequency=e;if(!this.zpp_inner.stiff)this.zpp_inner.wake()}return this.zpp_inner.frequency},get_damping:function(){return this.zpp_inner.damping},set_damping:function(e){if(e!=e)throw new g("Error: Constraint::Damping cannot be Nan");if(e<0)throw new g("Error: Constraint::Damping must be >=0");if(this.zpp_inner.damping!=e){this.zpp_inner.damping=e;if(!this.zpp_inner.stiff)this.zpp_inner.wake()}return this.zpp_inner.damping},get_maxForce:function(){return this.zpp_inner.maxForce},set_maxForce:function(e){if(e!=e)throw new g("Error: Constraint::maxForce cannot be NaN");if(e<0)throw new g("Error: Constraint::maxForce must be >=0");if(this.zpp_inner.maxForce!=e){this.zpp_inner.maxForce=e;this.zpp_inner.wake()}return this.zpp_inner.maxForce},get_maxError:function(){return this.zpp_inner.maxError},set_maxError:function(e){if(e!=e)throw new g("Error: Constraint::maxError cannot be NaN");if(e<0)throw new g("Error: Constraint::maxError must be >=0");if(this.zpp_inner.maxError!=e){this.zpp_inner.maxError=e;this.zpp_inner.wake()}return this.zpp_inner.maxError},get_breakUnderForce:function(){return this.zpp_inner.breakUnderForce},set_breakUnderForce:function(e){if(this.zpp_inner.breakUnderForce!=e){this.zpp_inner.breakUnderForce=e;this.zpp_inner.wake()}return this.zpp_inner.breakUnderForce},get_breakUnderError:function(){return this.zpp_inner.breakUnderError},set_breakUnderError:function(e){if(this.zpp_inner.breakUnderError!=e){this.zpp_inner.breakUnderError=e;this.zpp_inner.wake()}return this.zpp_inner.breakUnderError},get_removeOnBreak:function(){return this.zpp_inner.removeOnBreak},set_removeOnBreak:function(e){this.zpp_inner.removeOnBreak=e;return this.zpp_inner.removeOnBreak},impulse:function(){return null},bodyImpulse:function(e){return null},visitBodies:function(e){},get_cbTypes:function(){if(this.zpp_inner.wrap_cbTypes==null)this.zpp_inner.setupcbTypes();return this.zpp_inner.wrap_cbTypes},toString:function(){return"{Constraint}"},copy:function(){return this.zpp_inner.copy()},__class__:V};var $=function(e,t,n,r,i){if(i==null)i=1;this.zpp_inner_zn=null;this.zpp_inner_zn=new _n;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;V.zpp_internalAlloc=true;V.call(this);V.zpp_internalAlloc=false;this.set_body1(e);this.set_body2(t);this.zpp_inner.immutable_midstep("AngleJoint::jointMin");if(n!=n)throw new g("Error: AngleJoint::jointMin cannot be NaN");if(this.zpp_inner_zn.jointMin!=n){this.zpp_inner_zn.jointMin=n;this.zpp_inner.wake()}this.zpp_inner_zn.jointMin;this.zpp_inner.immutable_midstep("AngleJoint::jointMax");if(r!=r)throw new g("Error: AngleJoint::jointMax cannot be NaN");if(this.zpp_inner_zn.jointMax!=r){this.zpp_inner_zn.jointMax=r;this.zpp_inner.wake()}this.zpp_inner_zn.jointMax;this.zpp_inner.immutable_midstep("AngleJoint::ratio");if(i!=i)throw new g("Error: AngleJoint::ratio cannot be NaN");if(this.zpp_inner_zn.ratio!=i){this.zpp_inner_zn.ratio=i;this.zpp_inner.wake()}this.zpp_inner_zn.ratio};$.__name__=true;$.__super__=V;$.prototype=n(V.prototype,{get_body1:function(){if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},set_body1:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body1");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null)this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b1.wake()}this.zpp_inner_zn.b1=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b2!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},get_body2:function(){if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},set_body2:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body2");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null)this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b2.wake()}this.zpp_inner_zn.b2=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b1!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(e){this.zpp_inner.immutable_midstep("AngleJoint::jointMin");if(e!=e)throw new g("Error: AngleJoint::jointMin cannot be NaN");if(this.zpp_inner_zn.jointMin!=e){this.zpp_inner_zn.jointMin=e;this.zpp_inner.wake()}return this.zpp_inner_zn.jointMin},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(e){this.zpp_inner.immutable_midstep("AngleJoint::jointMax");if(e!=e)throw new g("Error: AngleJoint::jointMax cannot be NaN");if(this.zpp_inner_zn.jointMax!=e){this.zpp_inner_zn.jointMax=e;this.zpp_inner.wake()}return this.zpp_inner_zn.jointMax},get_ratio:function(){return this.zpp_inner_zn.ratio},set_ratio:function(e){this.zpp_inner.immutable_midstep("AngleJoint::ratio");if(e!=e)throw new g("Error: AngleJoint::ratio cannot be NaN");if(this.zpp_inner_zn.ratio!=e){this.zpp_inner_zn.ratio=e;this.zpp_inner.wake()}return this.zpp_inner_zn.ratio},isSlack:function(){if((this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)==null||(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)==null)throw new g("Error: Cannot compute slack for AngleJoint if either body is null.");return this.zpp_inner_zn.is_slack()},impulse:function(){var e=new kt(1,1);if(0>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc;return e},bodyImpulse:function(e){if(e==null)throw new g("Error: Cannot evaluate impulse on null body");if(e!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)&&e!=(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer))throw new g("Error: Body is not linked to this constraint");if(!this.zpp_inner.active)return Ht.get(0,0,0);else return this.zpp_inner_zn.bodyImpulse(e.zpp_inner)},visitBodies:function(e){if(e==null)throw new g("Error: Cannot apply null lambda to bodies");if((this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)!=null)e(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer);if((this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=null&&(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer))e(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)},__class__:$});var J=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!ds.internal)throw new g("Error: Cannot instantiate "+"Constraint"+"Iterator derp!")};J.__name__=true;J.get=function(e){var t;if(J.zpp_pool==null){ds.internal=true;var n=new J;ds.internal=false;t=n}else{var r=J.zpp_pool;J.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};J.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=J.zpp_pool;J.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:J};var K=function(){this.zpp_inner=null;this.zpp_inner=new ds;this.zpp_inner.outer=this};K.__name__=true;K.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new K;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};K.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.outer},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Constraint"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Constraint"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Constraint"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.outer;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Constraint"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.outer;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Constraint"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Constraint"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return J.get(this)},copy:function(e){if(e==null)e=false;var t=new K;var n;this.zpp_inner.valmod();n=J.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"Constraint"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=J.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=J.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=J.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=J.zpp_pool;J.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:K};var Q=function(e,t,n,r,i,s){this.zpp_inner_zn=null;this.zpp_inner_zn=new Pn;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;V.zpp_internalAlloc=true;V.call(this);V.zpp_internalAlloc=false;this.set_body1(e);this.set_body2(t);if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(n==null)throw new g("Error: Constraint::"+"anchor1"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a1==null)e.zpp_inner_zn.setup_a1();t=e.zpp_inner_zn.wrap_a1;return t})(this).set(n);if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();this.zpp_inner_zn.wrap_a1;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(r==null)throw new g("Error: Constraint::"+"anchor2"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a2==null)e.zpp_inner_zn.setup_a2();t=e.zpp_inner_zn.wrap_a2;return t})(this).set(r);if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();this.zpp_inner_zn.wrap_a2;this.zpp_inner.immutable_midstep("DistanceJoint::jointMin");if(i!=i)throw new g("Error: DistanceJoint::jointMin cannot be NaN");if(i<0)throw new g("Error: DistanceJoint::jointMin must be >= 0");if(this.zpp_inner_zn.jointMin!=i){this.zpp_inner_zn.jointMin=i;this.zpp_inner.wake()}this.zpp_inner_zn.jointMin;this.zpp_inner.immutable_midstep("DistanceJoint::jointMax");if(s!=s)throw new g("Error: DistanceJoint::jointMax cannot be NaN");if(s<0)throw new g("Error: DistanceJoint::jointMax must be >= 0");if(this.zpp_inner_zn.jointMax!=s){this.zpp_inner_zn.jointMax=s;this.zpp_inner.wake()}this.zpp_inner_zn.jointMax};Q.__name__=true;Q.__super__=V;Q.prototype=n(V.prototype,{get_body1:function(){if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},set_body1:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body1");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null)this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b1.wake()}this.zpp_inner_zn.b1=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b2!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},get_body2:function(){if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},set_body2:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body2");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null)this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b2.wake()}this.zpp_inner_zn.b2=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b1!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},get_anchor1:function(){if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},set_anchor1:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor1"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a1==null)e.zpp_inner_zn.setup_a1();t=e.zpp_inner_zn.wrap_a1;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},get_anchor2:function(){if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},set_anchor2:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor2"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a2==null)e.zpp_inner_zn.setup_a2();t=e.zpp_inner_zn.wrap_a2;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(e){this.zpp_inner.immutable_midstep("DistanceJoint::jointMin");if(e!=e)throw new g("Error: DistanceJoint::jointMin cannot be NaN");if(e<0)throw new g("Error: DistanceJoint::jointMin must be >= 0");if(this.zpp_inner_zn.jointMin!=e){this.zpp_inner_zn.jointMin=e;this.zpp_inner.wake()}return this.zpp_inner_zn.jointMin},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(e){this.zpp_inner.immutable_midstep("DistanceJoint::jointMax");if(e!=e)throw new g("Error: DistanceJoint::jointMax cannot be NaN");if(e<0)throw new g("Error: DistanceJoint::jointMax must be >= 0");if(this.zpp_inner_zn.jointMax!=e){this.zpp_inner_zn.jointMax=e;this.zpp_inner.wake()}return this.zpp_inner_zn.jointMax},isSlack:function(){if((this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)==null||(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)==null)throw new g("Error: Cannot compute slack for DistanceJoint if either body is null.");return this.zpp_inner_zn.slack},impulse:function(){var e=new kt(1,1);if(0>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc;return e},bodyImpulse:function(e){if(e==null)throw new g("Error: Cannot evaluate impulse on null body");if(e!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)&&e!=(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer))throw new g("Error: Body is not linked to this constraint");if(!this.zpp_inner.active)return Ht.get();else return this.zpp_inner_zn.bodyImpulse(e.zpp_inner)},visitBodies:function(e){if((this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)!=null)e(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer);if((this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=null&&(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer))e(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)},__class__:Q});var G=function(e,t,n,r,i,s,o){this.zpp_inner_zn=null;this.zpp_inner_zn=new Hn;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;V.zpp_internalAlloc=true;V.call(this);V.zpp_internalAlloc=false;this.set_body1(e);this.set_body2(t);if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(n==null)throw new g("Error: Constraint::"+"anchor1"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a1==null)e.zpp_inner_zn.setup_a1();t=e.zpp_inner_zn.wrap_a1;return t})(this).set(n);if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();this.zpp_inner_zn.wrap_a1;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(r==null)throw new g("Error: Constraint::"+"anchor2"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a2==null)e.zpp_inner_zn.setup_a2();t=e.zpp_inner_zn.wrap_a2;return t})(this).set(r);if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();this.zpp_inner_zn.wrap_a2;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(i==null)throw new g("Error: Constraint::"+"direction"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_n==null)e.zpp_inner_zn.setup_n();t=e.zpp_inner_zn.wrap_n;return t})(this).set(i);if(this.zpp_inner_zn.wrap_n==null)this.zpp_inner_zn.setup_n();this.zpp_inner_zn.wrap_n;this.zpp_inner.immutable_midstep("LineJoint::jointMin");if(s!=s)throw new g("Error: AngleJoint::jointMin cannot be NaN");if(this.zpp_inner_zn.jointMin!=s){this.zpp_inner_zn.jointMin=s;this.zpp_inner.wake()}this.zpp_inner_zn.jointMin;this.zpp_inner.immutable_midstep("LineJoint::jointMax");if(o!=o)throw new g("Error: AngleJoint::jointMax cannot be NaN");if(this.zpp_inner_zn.jointMax!=o){this.zpp_inner_zn.jointMax=o;this.zpp_inner.wake()}this.zpp_inner_zn.jointMax};G.__name__=true;G.__super__=V;G.prototype=n(V.prototype,{get_body1:function(){if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},set_body1:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body1");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null)this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b1.wake()}this.zpp_inner_zn.b1=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b2!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},get_body2:function(){if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},set_body2:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body2");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null)this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b2.wake()}this.zpp_inner_zn.b2=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b1!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},get_anchor1:function(){if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},set_anchor1:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor1"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a1==null)e.zpp_inner_zn.setup_a1();t=e.zpp_inner_zn.wrap_a1;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},get_anchor2:function(){if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},set_anchor2:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor2"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a2==null)e.zpp_inner_zn.setup_a2();t=e.zpp_inner_zn.wrap_a2;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},get_direction:function(){if(this.zpp_inner_zn.wrap_n==null)this.zpp_inner_zn.setup_n();return this.zpp_inner_zn.wrap_n},set_direction:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"direction"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_n==null)e.zpp_inner_zn.setup_n();t=e.zpp_inner_zn.wrap_n;return t})(this).set(e);if(this.zpp_inner_zn.wrap_n==null)this.zpp_inner_zn.setup_n();return this.zpp_inner_zn.wrap_n},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(e){this.zpp_inner.immutable_midstep("LineJoint::jointMin");if(e!=e)throw new g("Error: AngleJoint::jointMin cannot be NaN");if(this.zpp_inner_zn.jointMin!=e){this.zpp_inner_zn.jointMin=e;this.zpp_inner.wake()}return this.zpp_inner_zn.jointMin},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(e){this.zpp_inner.immutable_midstep("LineJoint::jointMax");if(e!=e)throw new g("Error: AngleJoint::jointMax cannot be NaN");if(this.zpp_inner_zn.jointMax!=e){this.zpp_inner_zn.jointMax=e;this.zpp_inner.wake()}return this.zpp_inner_zn.jointMax},impulse:function(){var e=new kt(2,1);if(0>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx;if(1>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy;return e},bodyImpulse:function(e){if(e==null)throw new g("Error: Cannot evaluate impulse on null body");if(e!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)&&e!=(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer))throw new g("Error: Body is not linked to this constraint");if(!this.zpp_inner.active)return Ht.get();else return this.zpp_inner_zn.bodyImpulse(e.zpp_inner)},visitBodies:function(e){if((this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)!=null)e(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer);if((this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=null&&(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer))e(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)},__class__:G});var Y=function(e,t,n,r){if(r==null)r=1;if(n==null)n=0;this.zpp_inner_zn=null;this.zpp_inner_zn=new Bn;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;V.zpp_internalAlloc=true;V.call(this);V.zpp_internalAlloc=false;this.set_body1(e);this.set_body2(t);this.zpp_inner.immutable_midstep("MotorJoint::rate");if(n!=n)throw new g("Error: MotorJoint::rate cannot be NaN");if(this.zpp_inner_zn.rate!=n){this.zpp_inner_zn.rate=n;this.zpp_inner.wake()}this.zpp_inner_zn.rate;this.zpp_inner.immutable_midstep("MotorJoint::ratio");if(r!=r)throw new g("Error: MotorJoint::ratio cannot be NaN");if(this.zpp_inner_zn.ratio!=r){this.zpp_inner_zn.ratio=r;this.zpp_inner.wake()}this.zpp_inner_zn.ratio};Y.__name__=true;Y.__super__=V;Y.prototype=n(V.prototype,{get_body1:function(){if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},set_body1:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body1");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null)this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b1.wake()}this.zpp_inner_zn.b1=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b2!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},get_body2:function(){if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},set_body2:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body2");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null)this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b2.wake()}this.zpp_inner_zn.b2=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b1!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},get_ratio:function(){return this.zpp_inner_zn.ratio},set_ratio:function(e){this.zpp_inner.immutable_midstep("MotorJoint::ratio");if(e!=e)throw new g("Error: MotorJoint::ratio cannot be NaN");if(this.zpp_inner_zn.ratio!=e){this.zpp_inner_zn.ratio=e;this.zpp_inner.wake()}return this.zpp_inner_zn.ratio},get_rate:function(){return this.zpp_inner_zn.rate},set_rate:function(e){this.zpp_inner.immutable_midstep("MotorJoint::rate");if(e!=e)throw new g("Error: MotorJoint::rate cannot be NaN");if(this.zpp_inner_zn.rate!=e){this.zpp_inner_zn.rate=e;this.zpp_inner.wake()}return this.zpp_inner_zn.rate},impulse:function(){var e=new kt(1,1);if(0>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc;return e},bodyImpulse:function(e){if(e==null)throw new g("Error: Cannot evaluate impulse on null body");if(e!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)&&e!=(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer))throw new g("Error: Body is not linked to this constraint");if(!this.zpp_inner.active)return Ht.get();else return this.zpp_inner_zn.bodyImpulse(e.zpp_inner)},visitBodies:function(e){if((this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)!=null)e(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer);if((this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=null&&(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer))e(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)},__class__:Y});var Z=function(e,t,n,r){this.zpp_inner_zn=null;this.zpp_inner_zn=new jn;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;V.zpp_internalAlloc=true;V.call(this);V.zpp_internalAlloc=false;this.set_body1(e);this.set_body2(t);if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(n==null)throw new g("Error: Constraint::"+"anchor1"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a1==null)e.zpp_inner_zn.setup_a1();t=e.zpp_inner_zn.wrap_a1;return t})(this).set(n);if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();this.zpp_inner_zn.wrap_a1;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(r==null)throw new g("Error: Constraint::"+"anchor2"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a2==null)e.zpp_inner_zn.setup_a2();t=e.zpp_inner_zn.wrap_a2;return t})(this).set(r);if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();this.zpp_inner_zn.wrap_a2};Z.__name__=true;Z.__super__=V;Z.prototype=n(V.prototype,{get_body1:function(){if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},set_body1:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body1");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null)this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b1.wake()}this.zpp_inner_zn.b1=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b2!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},get_body2:function(){if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},set_body2:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body2");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null)this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b2.wake()}this.zpp_inner_zn.b2=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b1!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},get_anchor1:function(){if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},set_anchor1:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor1"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a1==null)e.zpp_inner_zn.setup_a1();t=e.zpp_inner_zn.wrap_a1;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},get_anchor2:function(){if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},set_anchor2:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor2"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a2==null)e.zpp_inner_zn.setup_a2();t=e.zpp_inner_zn.wrap_a2;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},impulse:function(){var e=new kt(2,1);if(0>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx;if(1>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy;return e},bodyImpulse:function(e){if(e==null)throw new g("Error: Cannot evaluate impulse on null body");if(e!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)&&e!=(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer))throw new g("Error: Body is not linked to this constraint");if(!this.zpp_inner.active)return Ht.get();else return this.zpp_inner_zn.bodyImpulse(e.zpp_inner)},visitBodies:function(e){if((this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)!=null)e(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer);if((this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=null&&(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer))e(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)},__class__:Z});var et=function(e,t,n,r,i,s,o,u,a,f,l){if(l==null)l=1;this.zpp_inner_zn=null;this.zpp_inner_zn=new Fn;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;V.zpp_internalAlloc=true;V.call(this);V.zpp_internalAlloc=false;this.set_body1(e);this.set_body2(t);this.set_body3(n);this.set_body4(r);if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(i==null)throw new g("Error: Constraint::"+"anchor1"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a1==null)e.zpp_inner_zn.setup_a1();t=e.zpp_inner_zn.wrap_a1;return t})(this).set(i);if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();this.zpp_inner_zn.wrap_a1;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(s==null)throw new g("Error: Constraint::"+"anchor2"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a2==null)e.zpp_inner_zn.setup_a2();t=e.zpp_inner_zn.wrap_a2;return t})(this).set(s);if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();this.zpp_inner_zn.wrap_a2;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(o==null)throw new g("Error: Constraint::"+"anchor3"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a3==null)e.zpp_inner_zn.setup_a3();t=e.zpp_inner_zn.wrap_a3;return t})(this).set(o);if(this.zpp_inner_zn.wrap_a3==null)this.zpp_inner_zn.setup_a3();this.zpp_inner_zn.wrap_a3;if(u!=null&&u.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(u==null)throw new g("Error: Constraint::"+"anchor4"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a4==null)e.zpp_inner_zn.setup_a4();t=e.zpp_inner_zn.wrap_a4;return t})(this).set(u);if(this.zpp_inner_zn.wrap_a4==null)this.zpp_inner_zn.setup_a4();this.zpp_inner_zn.wrap_a4;this.zpp_inner.immutable_midstep("PulleyJoint::ratio");if(l!=l)throw new g("Error: PulleyJoint::ratio cannot be NaN");if(this.zpp_inner_zn.ratio!=l){this.zpp_inner_zn.ratio=l;this.zpp_inner.wake()}this.zpp_inner_zn.ratio;this.zpp_inner.immutable_midstep("PulleyJoint::jointMin");if(a!=a)throw new g("Error: PulleyJoint::jointMin cannot be NaN");if(a<0)throw new g("Error: PulleyJoint::jointMin must be >= 0");if(this.zpp_inner_zn.jointMin!=a){this.zpp_inner_zn.jointMin=a;this.zpp_inner.wake()}this.zpp_inner_zn.jointMin;this.zpp_inner.immutable_midstep("PulleyJoint::jointMax");if(f!=f)throw new g("Error: PulleyJoint::jointMax cannot be NaN");if(f<0)throw new g("Error: PulleyJoint::jointMax must be >= 0");if(this.zpp_inner_zn.jointMax!=f){this.zpp_inner_zn.jointMax=f;this.zpp_inner.wake()}this.zpp_inner_zn.jointMax};et.__name__=true;et.__super__=V;et.prototype=n(V.prototype,{get_body1:function(){if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},set_body1:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body1");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null)this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b1.wake()}this.zpp_inner_zn.b1=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b3!=t&&this.zpp_inner_zn.b4!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},get_body2:function(){if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},set_body2:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body2");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null)this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b2.wake()}this.zpp_inner_zn.b2=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b3!=t&&this.zpp_inner_zn.b4!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},get_body3:function(){if(this.zpp_inner_zn.b3==null)return null;else return this.zpp_inner_zn.b3.outer},set_body3:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body3");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b3){if(this.zpp_inner_zn.b3!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3){if(this.zpp_inner_zn.b3!=null)this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b3.wake()}this.zpp_inner_zn.b3=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b4!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b3==null)return null;else return this.zpp_inner_zn.b3.outer},get_body4:function(){if(this.zpp_inner_zn.b4==null)return null;else return this.zpp_inner_zn.b4.outer},set_body4:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body4");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b4){if(this.zpp_inner_zn.b4!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4){if(this.zpp_inner_zn.b4!=null)this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b4.wake()}this.zpp_inner_zn.b4=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b3!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b4==null)return null;else return this.zpp_inner_zn.b4.outer},get_anchor1:function(){if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},set_anchor1:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor1"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a1==null)e.zpp_inner_zn.setup_a1();t=e.zpp_inner_zn.wrap_a1;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},get_anchor2:function(){if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},set_anchor2:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor2"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a2==null)e.zpp_inner_zn.setup_a2();t=e.zpp_inner_zn.wrap_a2;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},get_anchor3:function(){if(this.zpp_inner_zn.wrap_a3==null)this.zpp_inner_zn.setup_a3();return this.zpp_inner_zn.wrap_a3},set_anchor3:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor3"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a3==null)e.zpp_inner_zn.setup_a3();t=e.zpp_inner_zn.wrap_a3;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a3==null)this.zpp_inner_zn.setup_a3();return this.zpp_inner_zn.wrap_a3},get_anchor4:function(){if(this.zpp_inner_zn.wrap_a4==null)this.zpp_inner_zn.setup_a4();return this.zpp_inner_zn.wrap_a4},set_anchor4:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor4"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a4==null)e.zpp_inner_zn.setup_a4();t=e.zpp_inner_zn.wrap_a4;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a4==null)this.zpp_inner_zn.setup_a4();return this.zpp_inner_zn.wrap_a4},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(e){this.zpp_inner.immutable_midstep("PulleyJoint::jointMin");if(e!=e)throw new g("Error: PulleyJoint::jointMin cannot be NaN");if(e<0)throw new g("Error: PulleyJoint::jointMin must be >= 0");if(this.zpp_inner_zn.jointMin!=e){this.zpp_inner_zn.jointMin=e;this.zpp_inner.wake()}return this.zpp_inner_zn.jointMin},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(e){this.zpp_inner.immutable_midstep("PulleyJoint::jointMax");if(e!=e)throw new g("Error: PulleyJoint::jointMax cannot be NaN");if(e<0)throw new g("Error: PulleyJoint::jointMax must be >= 0");if(this.zpp_inner_zn.jointMax!=e){this.zpp_inner_zn.jointMax=e;this.zpp_inner.wake()}return this.zpp_inner_zn.jointMax},get_ratio:function(){return this.zpp_inner_zn.ratio},set_ratio:function(e){this.zpp_inner.immutable_midstep("PulleyJoint::ratio");if(e!=e)throw new g("Error: PulleyJoint::ratio cannot be NaN");if(this.zpp_inner_zn.ratio!=e){this.zpp_inner_zn.ratio=e;this.zpp_inner.wake()}return this.zpp_inner_zn.ratio},isSlack:function(){if((this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)==null||(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)==null||(this.zpp_inner_zn.b3==null?null:this.zpp_inner_zn.b3.outer)==null||(this.zpp_inner_zn.b4==null?null:this.zpp_inner_zn.b4.outer)==null)throw new g("Error: Cannot compute slack for PulleyJoint if either body is null.");return this.zpp_inner_zn.slack},impulse:function(){var e=new kt(1,1);if(0>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc;return e},bodyImpulse:function(e){if(e==null)throw new g("Error: Cannot evaluate impulse on null body");if(e!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)&&e!=(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)&&e!=(this.zpp_inner_zn.b3==null?null:this.zpp_inner_zn.b3.outer)&&e!=(this.zpp_inner_zn.b4==null?null:this.zpp_inner_zn.b4.outer))throw new g("Error: Body is not linked to this constraint");if(!this.zpp_inner.active)return Ht.get();else return this.zpp_inner_zn.bodyImpulse(e.zpp_inner)},visitBodies:function(e){if((this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)!=null)e(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer);if((this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=null&&(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer))e(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer);if((this.zpp_inner_zn.b3==null?null:this.zpp_inner_zn.b3.outer)!=null&&(this.zpp_inner_zn.b3==null?null:this.zpp_inner_zn.b3.outer)!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)&&(this.zpp_inner_zn.b3==null?null:this.zpp_inner_zn.b3.outer)!=(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer))e(this.zpp_inner_zn.b3==null?null:this.zpp_inner_zn.b3.outer);if((this.zpp_inner_zn.b4==null?null:this.zpp_inner_zn.b4.outer)!=null&&(this.zpp_inner_zn.b4==null?null:this.zpp_inner_zn.b4.outer)!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)&&(this.zpp_inner_zn.b4==null?null:this.zpp_inner_zn.b4.outer)!=(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)&&(this.zpp_inner_zn.b4==null?null:this.zpp_inner_zn.b4.outer)!=(this.zpp_inner_zn.b3==null?null:this.zpp_inner_zn.b3.outer))e(this.zpp_inner_zn.b4==null?null:this.zpp_inner_zn.b4.outer)},__class__:et});var tt=function(e,t){if(t==null)t=false;this.zpp_inner_zn=null;if(e<1)throw new g("Error: Constraint dimension must be at least 1");this.zpp_inner_zn=new In(e,t);this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;V.zpp_internalAlloc=true;V.call(this);V.zpp_internalAlloc=false};tt.__name__=true;tt.__super__=V;tt.prototype=n(V.prototype,{__bindVec2:function(){var e=new _t;e.zpp_inner._inuse=true;e.zpp_inner._invalidate=(Is=this.zpp_inner_zn,Rs(Is,Is.bindVec2_invalidate));return e},__copy:function(){throw new g("Error: UserConstraint::__copy must be overriden");return null},__broken:function(){},__validate:function(){},__draw:function(e){},__prepare:function(){},__position:function(e){throw new g("Error: UserConstraint::__position must be overriden")},__velocity:function(e){throw new g("Error: Userconstraint::__velocity must be overriden")},__eff_mass:function(e){throw new g("Error: UserConstraint::__eff_mass must be overriden")},__clamp:function(e){},__impulse:function(e,t,n){throw new g("Error: UserConstraint::__impulse must be overriden")},impulse:function(){var e=new kt(this.zpp_inner_zn.dim,1);var t=0;var n=this.zpp_inner_zn.dim;while(t<n){var r=t++;if(r<0||r>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[r*e.zpp_inner.n]=this.zpp_inner_zn.jAcc[r]}return e},bodyImpulse:function(e){if(e==null)throw new g("Error: Cannot evaluate impulse on null body");var t=false;var n=0;var r=this.zpp_inner_zn.bodies;while(n<r.length){var i=r[n];++n;if(i.body==e.zpp_inner){t=true;break}}if(!t)throw new g("Error: Body is not linked to this constraint");if(!this.zpp_inner.active)return Ht.get();else return this.zpp_inner_zn.bodyImpulse(e.zpp_inner)},visitBodies:function(e){var t=0;var n=this.zpp_inner_zn.bodies.length;while(t<n){var r=this.zpp_inner_zn.bodies[t];if(r.body!=null){var i=false;var s=t+1;while(s<n){var o=s++;var u=this.zpp_inner_zn.bodies[o];if(u.body==r.body){i=true;break}}if(!i)e(r.body.outer)}t++}},__invalidate:function(){this.zpp_inner.immutable_midstep("UserConstraint::invalidate()");if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner.wake()},__registerBody:function(e,t){this.zpp_inner.immutable_midstep("UserConstraint::registerBody(..)");if(e!=t){if(e!=null){if(!this.zpp_inner_zn.remBody(e.zpp_inner))throw new g("Error: oldBody is not registered to the cosntraint");if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)e.zpp_inner.wake()}if(t!=null)this.zpp_inner_zn.addBody(t.zpp_inner);this.zpp_inner.wake();if(t!=null)t.zpp_inner.wake()}return t},__class__:tt});var nt=function(e,t,n,r,i){if(i==null)i=0;this.zpp_inner_zn=null;this.zpp_inner_zn=new Rn;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;V.zpp_internalAlloc=true;V.call(this);V.zpp_internalAlloc=false;this.set_body1(e);this.set_body2(t);if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(n==null)throw new g("Error: Constraint::"+"anchor1"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a1==null)e.zpp_inner_zn.setup_a1();t=e.zpp_inner_zn.wrap_a1;return t})(this).set(n);if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();this.zpp_inner_zn.wrap_a1;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(r==null)throw new g("Error: Constraint::"+"anchor2"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a2==null)e.zpp_inner_zn.setup_a2();t=e.zpp_inner_zn.wrap_a2;return t})(this).set(r);if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();this.zpp_inner_zn.wrap_a2;this.zpp_inner.immutable_midstep("WeldJoint::phase");if(i!=i)throw new g("Error: WeldJoint::phase cannot be NaN");if(this.zpp_inner_zn.phase!=i){this.zpp_inner_zn.phase=i;this.zpp_inner.wake()}this.zpp_inner_zn.phase};nt.__name__=true;nt.__super__=V;nt.prototype=n(V.prototype,{get_body1:function(){if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},set_body1:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body1");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null)this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b1.wake()}this.zpp_inner_zn.b1=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b2!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b1==null)return null;else return this.zpp_inner_zn.b1.outer},get_body2:function(){if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},set_body2:function(e){this.zpp_inner.immutable_midstep("Constraint::"+"body2");var t;if(e==null)t=null;else t=e.zpp_inner;if(t!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null)this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner_zn.b2.wake()}this.zpp_inner_zn.b2=t;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&t!=null&&this.zpp_inner_zn.b1!=t){if(t!=null)t.constraints.add(this.zpp_inner)}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(t!=null)t.wake()}}if(this.zpp_inner_zn.b2==null)return null;else return this.zpp_inner_zn.b2.outer},get_anchor1:function(){if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},set_anchor1:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor1"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a1==null)e.zpp_inner_zn.setup_a1();t=e.zpp_inner_zn.wrap_a1;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a1==null)this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},get_anchor2:function(){if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},set_anchor2:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Constraint::"+"anchor2"+" cannot be null");(function(e){var t;if(e.zpp_inner_zn.wrap_a2==null)e.zpp_inner_zn.setup_a2();t=e.zpp_inner_zn.wrap_a2;return t})(this).set(e);if(this.zpp_inner_zn.wrap_a2==null)this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},get_phase:function(){return this.zpp_inner_zn.phase},set_phase:function(e){this.zpp_inner.immutable_midstep("WeldJoint::phase");if(e!=e)throw new g("Error: WeldJoint::phase cannot be NaN");if(this.zpp_inner_zn.phase!=e){this.zpp_inner_zn.phase=e;this.zpp_inner.wake()}return this.zpp_inner_zn.phase},impulse:function(){var e=new kt(3,1);if(0>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx;if(1>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy;if(1>=e.zpp_inner.m||0>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccz;return e},bodyImpulse:function(e){if(e==null)throw new g("Error: Cannot evaluate impulse on null body");if(e!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)&&e!=(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer))throw new g("Error: Body is not linked to this constraint");if(!this.zpp_inner.active)return Ht.get();else return this.zpp_inner_zn.bodyImpulse(e.zpp_inner)},visitBodies:function(e){if((this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer)!=null)e(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer);if((this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=null&&(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)!=(this.zpp_inner_zn.b1==null?null:this.zpp_inner_zn.b1.outer))e(this.zpp_inner_zn.b2==null?null:this.zpp_inner_zn.b2.outer)},__class__:nt});var rt=function(){this.zpp_inner=null;if(!Un.internal)throw new g("Error: Cannot instantiate Arbiter derp!")};rt.__name__=true;rt.prototype={get_isSleeping:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");return this.zpp_inner.sleeping},get_type:function(){return Un.types[this.zpp_inner.type]},isCollisionArbiter:function(){return this.zpp_inner.type==Un.COL},isFluidArbiter:function(){return this.zpp_inner.type==Un.FLUID},isSensorArbiter:function(){return this.zpp_inner.type==Un.SENSOR},get_collisionArbiter:function(){if(this.zpp_inner.type==Un.COL)return this.zpp_inner.colarb.outer_zn;else return null},get_fluidArbiter:function(){if(this.zpp_inner.type==Un.FLUID)return this.zpp_inner.fluidarb.outer_zn;else return null},get_shape1:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id)return this.zpp_inner.ws2.outer;else return this.zpp_inner.ws1.outer},get_shape2:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id)return this.zpp_inner.ws1.outer;else return this.zpp_inner.ws2.outer},get_body1:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id)return this.zpp_inner.b2.outer;else return this.zpp_inner.b1.outer},get_body2:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id)return this.zpp_inner.b1.outer;else return this.zpp_inner.b2.outer},get_state:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");var e=this.zpp_inner.immState;var t=e;if(t==5){if(Tn.PreFlag_ACCEPT==null){Tn.internal=true;Tn.PreFlag_ACCEPT=new W;Tn.internal=false}return Tn.PreFlag_ACCEPT}else{var n=e;switch(e){case 1:if(Tn.PreFlag_ACCEPT_ONCE==null){Tn.internal=true;Tn.PreFlag_ACCEPT_ONCE=new W;Tn.internal=false}return Tn.PreFlag_ACCEPT_ONCE;default:if(n==6){if(Tn.PreFlag_IGNORE==null){Tn.internal=true;Tn.PreFlag_IGNORE=new W;Tn.internal=false}return Tn.PreFlag_IGNORE}else{if(Tn.PreFlag_IGNORE_ONCE==null){Tn.internal=true;Tn.PreFlag_IGNORE_ONCE=new W;Tn.internal=false}return Tn.PreFlag_IGNORE_ONCE}}}},totalImpulse:function(e,t){if(t==null)t=false;if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(e!=null&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b2.outer:e.zpp_inner.b1.outer;return t}(this)&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b1.outer:e.zpp_inner.b2.outer;return t}(this))throw new g("Error: Arbiter does not relate to body");return Ht.get(0,0,0)},toString:function(){var e;if(this.zpp_inner.type==Un.COL)e="CollisionArbiter";else if(this.zpp_inner.type==Un.FLUID)e="FluidArbiter";else e="SensorArbiter";if(this.zpp_inner.cleared)return e+"(object-pooled)";else return e+"("+function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.ws2.outer:e.zpp_inner.ws1.outer;return t}(this).toString()+"|"+function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.ws1.outer:e.zpp_inner.ws2.outer;return t}(this).toString()+")"+(this.zpp_inner.type==Un.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-"+this.get_state().toString()},__class__:rt};var it=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!ks.internal)throw new g("Error: Cannot instantiate "+"Arbiter"+"Iterator derp!")};it.__name__=true;it.get=function(e){var t;if(it.zpp_pool==null){ks.internal=true;var n=new it;ks.internal=false;t=n}else{var r=it.zpp_pool;it.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};it.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.zpp_gl();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=it.zpp_pool;it.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:it};var st=function(){this.zpp_inner=null;this.zpp_inner=new ks;this.zpp_inner.outer=this};st.__name__=true;st.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new st;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};st.prototype={get_length:function(){return this.zpp_gl()},zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=0;var e=this.zpp_inner.inner.head;while(e!=null){var t=e.elt;if(t.active)this.zpp_inner.user_length++;e=e.next}}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},has:function(e){this.zpp_vm();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_vm();if(e<0||e>=this.zpp_gl())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.zpp_gl()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=0;this.zpp_inner.at_ite=this.zpp_inner.inner.head;while(true){var t=this.zpp_inner.at_ite.elt;if(t.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;while(true){var n=this.zpp_inner.at_ite.elt;if(n.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.wrapper()},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Arbiter"+"List is immutable");this.zpp_inner.modify_test();this.zpp_vm();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.empty())this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Arbiter"+"List is immutable");this.zpp_inner.modify_test();this.zpp_vm();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.empty())this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Arbiter"+"List is immutable");this.zpp_inner.modify_test();if(this.empty())throw new g("Error: Cannot remove from empty list");this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.zpp_gl()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.wrapper();return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Arbiter"+"List is immutable");this.zpp_inner.modify_test();if(this.empty())throw new g("Error: Cannot remove from empty list");this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.zpp_gl()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.wrapper();return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Arbiter"+"List is immutable");this.zpp_inner.modify_test();this.zpp_vm();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Arbiter"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!this.empty())this.pop();else while(!this.empty())this.shift()},empty:function(){return this.zpp_gl()==0},iterator:function(){this.zpp_vm();return it.get(this)},copy:function(e){if(e==null)e=false;var t=new st;var n=this.iterator();while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"Arbiter"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t=e.iterator();while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n))this.add(n)}},toString:function(){var e="[";var t=true;var n=this.iterator();while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t=this.iterator();while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=it.zpp_pool;it.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.zpp_gl()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:st};var ot=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"ArbiterType"+" derp!")};ot.__name__=true;ot.get_COLLISION=function(){if(Tn.ArbiterType_COLLISION==null){Tn.internal=true;Tn.ArbiterType_COLLISION=new ot;Tn.internal=false}return Tn.ArbiterType_COLLISION};ot.get_SENSOR=function(){if(Tn.ArbiterType_SENSOR==null){Tn.internal=true;Tn.ArbiterType_SENSOR=new ot;Tn.internal=false}return Tn.ArbiterType_SENSOR};ot.get_FLUID=function(){if(Tn.ArbiterType_FLUID==null){Tn.internal=true;Tn.ArbiterType_FLUID=new ot;Tn.internal=false}return Tn.ArbiterType_FLUID};ot.prototype={toString:function(){if(this==function(e){var t;if(Tn.ArbiterType_COLLISION==null){Tn.internal=true;Tn.ArbiterType_COLLISION=new ot;Tn.internal=false}t=Tn.ArbiterType_COLLISION;return t}(this))return"COLLISION";else if(this==function(e){var t;if(Tn.ArbiterType_SENSOR==null){Tn.internal=true;Tn.ArbiterType_SENSOR=new ot;Tn.internal=false}t=Tn.ArbiterType_SENSOR;return t}(this))return"SENSOR";else if(this==function(e){var t;if(Tn.ArbiterType_FLUID==null){Tn.internal=true;Tn.ArbiterType_FLUID=new ot;Tn.internal=false}t=Tn.ArbiterType_FLUID;return t}(this))return"FLUID";else return""},__class__:ot};var ut=function(){if(!Un.internal)throw new g("Error: Cannot instantiate CollisionArbiter derp!");rt.call(this)};ut.__name__=true;ut.__super__=rt;ut.prototype=n(rt.prototype,{get_contacts:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(this.zpp_inner.colarb.wrap_contacts==null)this.zpp_inner.colarb.setupcontacts();return this.zpp_inner.colarb.wrap_contacts},get_normal:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(this.zpp_inner.colarb.wrap_normal==null)this.zpp_inner.colarb.getnormal();return this.zpp_inner.colarb.wrap_normal},get_radius:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");return this.zpp_inner.colarb.radius},get_referenceEdge1:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");var e=this.zpp_inner.colarb.__ref_edge1;if(e!=null&&(!function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.ws2.outer:e.zpp_inner.ws1.outer;return t}(this).isPolygon()||function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.ws2.outer:e.zpp_inner.ws1.outer;return t}(this).zpp_inner!=e.polygon))e=this.zpp_inner.colarb.__ref_edge2;if(e==null)return null;else return e.wrapper()},get_referenceEdge2:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");var e=this.zpp_inner.colarb.__ref_edge1;if(e!=null&&(!function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.ws1.outer:e.zpp_inner.ws2.outer;return t}(this).isPolygon()||function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.ws1.outer:e.zpp_inner.ws2.outer;return t}(this).zpp_inner!=e.polygon))e=this.zpp_inner.colarb.__ref_edge2;if(e==null)return null;else return e.wrapper()},firstVertex:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");var e=this.zpp_inner.colarb.__ref_edge1!=null!=(this.zpp_inner.colarb.__ref_edge2!=null);if(e)return this.zpp_inner.colarb.__ref_vertex==-1;else return false},secondVertex:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");var e=this.zpp_inner.colarb.__ref_edge1!=null!=(this.zpp_inner.colarb.__ref_edge2!=null);if(e)return this.zpp_inner.colarb.__ref_vertex==1;else return false},normalImpulse:function(e,t){if(t==null)t=false;if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(e!=null&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b2.outer:e.zpp_inner.b1.outer;return t}(this)&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b1.outer:e.zpp_inner.b2.outer;return t}(this))throw new g("Error: Arbiter does not relate to body");var n=0;var r=0;var i=0;var s=this.zpp_inner.colarb;if(!t||s.oc1.fresh){var o=s.oc1.wrapper().normalImpulse(e);var u=1;var a=u;n+=function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.x;return t}(this)*a;r+=function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.y;return t}(this)*a;i+=function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.z;return t}(this)*u;o.dispose()}if(s.hc2){if(!t||s.oc2.fresh){var f=s.oc2.wrapper().normalImpulse(e);var l=1;var c=l;n+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(this)*c;r+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this)*c;i+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.z;return t}(this)*l;f.dispose()}}return Ht.get(n,r,i)},tangentImpulse:function(e,t){if(t==null)t=false;if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(e!=null&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b2.outer:e.zpp_inner.b1.outer;return t}(this)&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b1.outer:e.zpp_inner.b2.outer;return t}(this))throw new g("Error: Arbiter does not relate to body");var n=0;var r=0;var i=0;var s=this.zpp_inner.colarb;if(!t||s.oc1.fresh){var o=s.oc1.wrapper().tangentImpulse(e);var u=1;var a=u;n+=function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.x;return t}(this)*a;r+=function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.y;return t}(this)*a;i+=function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.z;return t}(this)*u;o.dispose()}if(s.hc2){if(!t||s.oc2.fresh){var f=s.oc2.wrapper().tangentImpulse(e);var l=1;var c=l;n+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(this)*c;r+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this)*c;i+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.z;return t}(this)*l;f.dispose()}}return Ht.get(n,r,i)},totalImpulse:function(e,t){if(t==null)t=false;if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(e!=null&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b2.outer:e.zpp_inner.b1.outer;return t}(this)&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b1.outer:e.zpp_inner.b2.outer;return t}(this))throw new g("Error: Arbiter does not relate to body");var n=0;var r=0;var i=0;var s=this.zpp_inner.colarb;if(!t||s.oc1.fresh){var o=s.oc1.wrapper().totalImpulse(e);var u=1;var a=u;n+=function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.x;return t}(this)*a;r+=function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.y;return t}(this)*a;i+=function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.z;return t}(this)*u;o.dispose()}if(s.hc2){if(!t||s.oc2.fresh){var f=s.oc2.wrapper().totalImpulse(e);var l=1;var c=l;n+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(this)*c;r+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this)*c;i+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.z;return t}(this)*l;f.dispose()}}return Ht.get(n,r,i)},rollingImpulse:function(e,t){if(t==null)t=false;if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(e!=null&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b2.outer:e.zpp_inner.b1.outer;return t}(this)&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b1.outer:e.zpp_inner.b2.outer;return t}(this))throw new g("Error: Arbiter does not relate to body");var n=this.zpp_inner.colarb;if(!t||n.oc1.fresh)return n.oc1.wrapper().rollingImpulse(e);else return 0},get_elasticity:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");var e=this.zpp_inner.colarb;if(e.invalidated){e.invalidated=false;if(!e.userdef_restitution){if(e.s1.material.elasticity<=-Infinity||e.s2.material.elasticity<=-Infinity)e.restitution=0;else if(e.s1.material.elasticity>=Infinity||e.s2.material.elasticity>=Infinity)e.restitution=1;else e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2;if(e.restitution<0)e.restitution=0;if(e.restitution>1)e.restitution=1}if(!e.userdef_dyn_fric)e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction);if(!e.userdef_stat_fric)e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction);if(!e.userdef_rfric)e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction)}return e.restitution},set_elasticity:function(e){if(!this.zpp_inner.colarb.mutable)throw new g("Error: CollisionArbiter::"+"elasticity"+" is only mutable during a pre-handler");if(e!=e)throw new g("Error: CollisionArbiter::"+"elasticity"+" cannot be NaN");if(e<0)throw new g("Error: CollisionArbiter::"+"elasticity"+" cannot be negative");var t=this.zpp_inner.colarb;t.restitution=e;t.userdef_restitution=true;return this.get_elasticity()},get_dynamicFriction:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");var e=this.zpp_inner.colarb;if(e.invalidated){e.invalidated=false;if(!e.userdef_restitution){if(e.s1.material.elasticity<=-Infinity||e.s2.material.elasticity<=-Infinity)e.restitution=0;else if(e.s1.material.elasticity>=Infinity||e.s2.material.elasticity>=Infinity)e.restitution=1;else e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2;if(e.restitution<0)e.restitution=0;if(e.restitution>1)e.restitution=1}if(!e.userdef_dyn_fric)e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction);if(!e.userdef_stat_fric)e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction);if(!e.userdef_rfric)e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction)}return e.dyn_fric},set_dynamicFriction:function(e){if(!this.zpp_inner.colarb.mutable)throw new g("Error: CollisionArbiter::"+"dynamicFriction"+" is only mutable during a pre-handler");if(e!=e)throw new g("Error: CollisionArbiter::"+"dynamicFriction"+" cannot be NaN");if(e<0)throw new g("Error: CollisionArbiter::"+"dynamicFriction"+" cannot be negative");var t=this.zpp_inner.colarb;t.dyn_fric=e;t.userdef_dyn_fric=true;return this.get_dynamicFriction()},get_staticFriction:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");var e=this.zpp_inner.colarb;if(e.invalidated){e.invalidated=false;if(!e.userdef_restitution){if(e.s1.material.elasticity<=-Infinity||e.s2.material.elasticity<=-Infinity)e.restitution=0;else if(e.s1.material.elasticity>=Infinity||e.s2.material.elasticity>=Infinity)e.restitution=1;else e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2;if(e.restitution<0)e.restitution=0;if(e.restitution>1)e.restitution=1}if(!e.userdef_dyn_fric)e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction);if(!e.userdef_stat_fric)e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction);if(!e.userdef_rfric)e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction)}return e.stat_fric},set_staticFriction:function(e){if(!this.zpp_inner.colarb.mutable)throw new g("Error: CollisionArbiter::"+"staticFriction"+" is only mutable during a pre-handler");if(e!=e)throw new g("Error: CollisionArbiter::"+"staticFriction"+" cannot be NaN");if(e<0)throw new g("Error: CollisionArbiter::"+"staticFriction"+" cannot be negative");var t=this.zpp_inner.colarb;t.stat_fric=e;t.userdef_stat_fric=true;return this.get_staticFriction()},get_rollingFriction:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");var e=this.zpp_inner.colarb;if(e.invalidated){e.invalidated=false;if(!e.userdef_restitution){if(e.s1.material.elasticity<=-Infinity||e.s2.material.elasticity<=-Infinity)e.restitution=0;else if(e.s1.material.elasticity>=Infinity||e.s2.material.elasticity>=Infinity)e.restitution=1;else e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2;if(e.restitution<0)e.restitution=0;if(e.restitution>1)e.restitution=1}if(!e.userdef_dyn_fric)e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction);if(!e.userdef_stat_fric)e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction);if(!e.userdef_rfric)e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction)}return e.rfric},set_rollingFriction:function(e){if(!this.zpp_inner.colarb.mutable)throw new g("Error: CollisionArbiter::"+"rollingFriction"+" is only mutable during a pre-handler");if(e!=e)throw new g("Error: CollisionArbiter::"+"rollingFriction"+" cannot be NaN");if(e<0)throw new g("Error: CollisionArbiter::"+"rollingFriction"+" cannot be negative");var t=this.zpp_inner.colarb;t.rfric=e;t.userdef_rfric=true;return this.get_rollingFriction()},__class__:ut});var at=function(){this.zpp_inner=null;if(!Vn.internal)throw new g("Error: Cannot instantiate Contact derp!")};at.__name__=true;at.prototype={get_arbiter:function(){if(this.zpp_inner.arbiter==null)return null;else return this.zpp_inner.arbiter.outer.get_collisionArbiter()},get_penetration:function(){if(this.zpp_inner.inactiveme())throw new g("Error: Contact not currently in use");return-this.zpp_inner.dist},get_position:function(){if(this.zpp_inner.inactiveme())throw new g("Error: Contact not currently in use");if(this.zpp_inner.wrap_position==null)this.zpp_inner.getposition();return this.zpp_inner.wrap_position},get_fresh:function(){if(this.zpp_inner.inactiveme())throw new g("Error: Contact not currently in use");return this.zpp_inner.fresh},normalImpulse:function(e){if(this.zpp_inner.inactiveme())throw new g("Error: Contact not currently in use");var t=this.zpp_inner.arbiter.colarb;var n=this.zpp_inner.inner;var r=n.jnAcc;if(e==null)return Ht.get(t.nx*r,t.ny*r);else{if(e!=t.b1.outer&&e!=t.b2.outer)throw new g("Error: Contact does not relate to the given body");if(e==t.b1.outer)return Ht.get(t.nx*-r,t.ny*-r,-(t.ny*n.r1x-t.nx*n.r1y)*r);else return Ht.get(t.nx*r,t.ny*r,(t.ny*n.r2x-t.nx*n.r2y)*r)}},tangentImpulse:function(e){if(this.zpp_inner.inactiveme())throw new g("Error: Contact not currently in use");var t=this.zpp_inner.arbiter.colarb;var n=this.zpp_inner.inner;var r=n.jtAcc;if(e==null)return Ht.get(-t.ny*r,t.nx*r);else{if(e!=t.b1.outer&&e!=t.b2.outer)throw new g("Error: Contact does not relate to the given body");if(e==t.b1.outer)return Ht.get(t.ny*r,-t.nx*r,-(n.r1x*t.nx+n.r1y*t.ny)*r);else return Ht.get(-t.ny*r,t.nx*r,(n.r2x*t.nx+n.r2y*t.ny)*r)}},rollingImpulse:function(e){if(this.zpp_inner.inactiveme())throw new g("Error: Contact not currently in use");var t=this.zpp_inner.arbiter.colarb;var n=this.zpp_inner.arbiter.colarb.jrAcc;if(e==null)return n;else{if(e!=t.b1.outer&&e!=t.b2.outer)throw new g("Error: Contact does not relate to the given body");if(e==t.b1.outer)return-n;else return n}},totalImpulse:function(e){if(this.zpp_inner.inactiveme())throw new g("Error: Contact not currently in use");var t=this.zpp_inner.arbiter.colarb;var n=this.zpp_inner.inner;var r=n.jnAcc;var i=n.jtAcc;var s=t.jrAcc;if(e==null)return Ht.get(t.nx*r-t.ny*i,t.ny*r+t.nx*i,s);else{if(e!=t.b1.outer&&e!=t.b2.outer)throw new g("Error: Contact does not relate to the given body");var o=t.nx*r-t.ny*i;var u=t.ny*r+t.nx*i;if(e==t.b1.outer)return Ht.get(-o,-u,-(u*n.r1x-o*n.r1y)-s);else return Ht.get(o,u,u*n.r2x-o*n.r2y+s)}},get_friction:function(){if(this.zpp_inner.inactiveme())throw new g("Error: Contact not currently in use");return this.zpp_inner.inner.friction},toString:function(){if(this.zpp_inner.arbiter==null||this.zpp_inner.arbiter.cleared)return"{object-pooled}";else return"{Contact}"},__class__:at};var ft=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!Ls.internal)throw new g("Error: Cannot instantiate "+"Contact"+"Iterator derp!")};ft.__name__=true;ft.get=function(e){var t;if(ft.zpp_pool==null){Ls.internal=true;var n=new ft;Ls.internal=false;t=n}else{var r=ft.zpp_pool;ft.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};ft.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=ft.zpp_pool;ft.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:ft};var lt=function(){this.zpp_inner=null;this.zpp_inner=new Ls;this.zpp_inner.outer=this};lt.__name__=true;lt.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new lt;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};lt.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=0;var e=this.zpp_inner.inner.next;while(e!=null){var t=e;if(t.active&&t.arbiter.active)this.zpp_inner.user_length++;e=e.next}}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=0;this.zpp_inner.at_ite=this.zpp_inner.inner.next;while(true){var t=this.zpp_inner.at_ite;if(t.active&&t.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;while(true){var n=this.zpp_inner.at_ite;if(n.active&&n.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.wrapper()},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Contact"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.get_length()==0)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Contact"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.get_length()==0)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Contact"+"List is immutable");this.zpp_inner.modify_test();if(this.get_length()==0)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.next;var t=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.next;else e=n.next;var r=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.wrapper();return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Contact"+"List is immutable");this.zpp_inner.modify_test();if(this.get_length()==0)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.next;else e=t.next;var n=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.next;var r=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.wrapper();return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Contact"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.next;while(n!=null){var r=n;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Contact"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.get_length()==0))this.pop();else while(!(this.get_length()==0))this.shift()},empty:function(){return this.get_length()==0},iterator:function(){this.zpp_inner.valmod();return ft.get(this)},copy:function(e){if(e==null)e=false;var t=new lt;var n;this.zpp_inner.valmod();n=ft.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"Contact"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=ft.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=ft.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=ft.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=ft.zpp_pool;ft.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:lt};var ct=function(){if(!Un.internal)throw new g("Error: Cannot instantiate FluidArbiter derp!");rt.call(this)};ct.__name__=true;ct.__super__=rt;ct.prototype=n(rt.prototype,{get_position:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(this.zpp_inner.fluidarb.wrap_position==null)this.zpp_inner.fluidarb.getposition();return this.zpp_inner.fluidarb.wrap_position},set_position:function(e){if(!this.zpp_inner.fluidarb.mutable)throw new g("Error: Arbiter is mutable only within a pre-handler");if(e==null)throw new g("Error: FluidArbiter::position cannot be null");(function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(e.zpp_inner.fluidarb.wrap_position==null)e.zpp_inner.fluidarb.getposition();t=e.zpp_inner.fluidarb.wrap_position;return t})(this).set(e);if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(this.zpp_inner.fluidarb.wrap_position==null)this.zpp_inner.fluidarb.getposition();return this.zpp_inner.fluidarb.wrap_position},get_overlap:function(){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");return this.zpp_inner.fluidarb.overlap},set_overlap:function(e){if(!this.zpp_inner.fluidarb.mutable)throw new g("Error: Arbiter is mutable only within a pre-handler");if(e!=e)throw new g("Error: FluidArbiter::overlap cannot be NaN");if(e<=0||e==Infinity)throw new g("Error: FluidArbiter::overlap must be strictly positive and non infinite");this.zpp_inner.fluidarb.overlap=e;if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");return this.zpp_inner.fluidarb.overlap},buoyancyImpulse:function(e){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(e!=null&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b2.outer:e.zpp_inner.b1.outer;return t}(this)&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b1.outer:e.zpp_inner.b2.outer;return t}(this))throw new g("Error: Arbiter does not relate to body");var t=this.zpp_inner.fluidarb;if(e==null)return Ht.get(t.buoyx,t.buoyy,0);else if(e.zpp_inner==this.zpp_inner.b2)return Ht.get(t.buoyx,t.buoyy,t.buoyy*t.r2x-t.buoyx*t.r2y);else return Ht.get(-t.buoyx,-t.buoyy,-(t.buoyy*t.r1x-t.buoyx*t.r1y))},dragImpulse:function(e){if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(e!=null&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b2.outer:e.zpp_inner.b1.outer;return t}(this)&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b1.outer:e.zpp_inner.b2.outer;return t}(this))throw new g("Error: Arbiter does not relate to body");var t=this.zpp_inner.fluidarb;var n;if(e==null||e.zpp_inner==this.zpp_inner.b2)n=1;else n=-1;return Ht.get(t.dampx*n,t.dampy*n,t.adamp*n)},totalImpulse:function(e,t){if(t==null)t=false;if(!this.zpp_inner.active)throw new g("Error: Arbiter not currently in use");if(e!=null&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b2.outer:e.zpp_inner.b1.outer;return t}(this)&&e!=function(e){var t;if(!e.zpp_inner.active)throw new g("Error: Arbiter not currently in use");t=e.zpp_inner.ws1.id>e.zpp_inner.ws2.id?e.zpp_inner.b1.outer:e.zpp_inner.b2.outer;return t}(this))throw new g("Error: Arbiter does not relate to body");var n=this.buoyancyImpulse(e);var r=this.dragImpulse(e);var i=r;i.set_x(function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.x;return t}(this)+function(e){var t;if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");n.zpp_inner.validate();t=n.zpp_inner.x;return t}(this));var s=r;s.set_y(function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.y;return t}(this)+function(e){var t;if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");n.zpp_inner.validate();t=n.zpp_inner.y;return t}(this));var o=r;o.set_z(function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.z;return t}(this)+function(e){var t;if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");n.zpp_inner.validate();t=n.zpp_inner.z;return t}(this));n.dispose();return r},__class__:ct});var ht=function(e,t,n,r,i,s){if(s==null)s=-1;if(i==null)i=1;if(r==null)r=-1;if(n==null)n=1;if(t==null)t=-1;if(e==null)e=1;this.zpp_inner=null;if(Jn.zpp_pool==null)this.zpp_inner=new Jn;else{this.zpp_inner=Jn.zpp_pool;Jn.zpp_pool=this.zpp_inner.next;this.zpp_inner.next=null}null;this.zpp_inner.outer=this;if(this.zpp_inner.collisionGroup!=e){this.zpp_inner.collisionGroup=e;this.zpp_inner.invalidate()}this.zpp_inner.collisionGroup;if(this.zpp_inner.collisionMask!=t){this.zpp_inner.collisionMask=t;this.zpp_inner.invalidate()}this.zpp_inner.collisionMask;if(this.zpp_inner.sensorGroup!=n){this.zpp_inner.sensorGroup=n;this.zpp_inner.invalidate()}this.zpp_inner.sensorGroup;if(this.zpp_inner.sensorMask!=r){this.zpp_inner.sensorMask=r;this.zpp_inner.invalidate()}this.zpp_inner.sensorMask;if(this.zpp_inner.fluidGroup!=i){this.zpp_inner.fluidGroup=i;this.zpp_inner.invalidate()}this.zpp_inner.fluidGroup;if(this.zpp_inner.fluidMask!=s){this.zpp_inner.fluidMask=s;this.zpp_inner.invalidate()}this.zpp_inner.fluidMask};ht.__name__=true;ht.prototype={get_userData:function(){if(this.zpp_inner.userData==null)this.zpp_inner.userData={};return this.zpp_inner.userData},get_shapes:function(){if(this.zpp_inner.wrap_shapes==null)this.zpp_inner.wrap_shapes=Ns.get(this.zpp_inner.shapes,true);return this.zpp_inner.wrap_shapes},get_collisionGroup:function(){return this.zpp_inner.collisionGroup},set_collisionGroup:function(e){if(this.zpp_inner.collisionGroup!=e){this.zpp_inner.collisionGroup=e;this.zpp_inner.invalidate()}return this.zpp_inner.collisionGroup},get_collisionMask:function(){return this.zpp_inner.collisionMask},set_collisionMask:function(e){if(this.zpp_inner.collisionMask!=e){this.zpp_inner.collisionMask=e;this.zpp_inner.invalidate()}return this.zpp_inner.collisionMask},get_sensorGroup:function(){return this.zpp_inner.sensorGroup},set_sensorGroup:function(e){if(this.zpp_inner.sensorGroup!=e){this.zpp_inner.sensorGroup=e;this.zpp_inner.invalidate()}return this.zpp_inner.sensorGroup},get_sensorMask:function(){return this.zpp_inner.sensorMask},set_sensorMask:function(e){if(this.zpp_inner.sensorMask!=e){this.zpp_inner.sensorMask=e;this.zpp_inner.invalidate()}return this.zpp_inner.sensorMask},get_fluidGroup:function(){return this.zpp_inner.fluidGroup},set_fluidGroup:function(e){if(this.zpp_inner.fluidGroup!=e){this.zpp_inner.fluidGroup=e;this.zpp_inner.invalidate()}return this.zpp_inner.fluidGroup},get_fluidMask:function(){return this.zpp_inner.fluidMask},set_fluidMask:function(e){if(this.zpp_inner.fluidMask!=e){this.zpp_inner.fluidMask=e;this.zpp_inner.invalidate()}return this.zpp_inner.fluidMask},shouldCollide:function(e){if(e==null)throw new g("Error: filter argument cannot be null for shouldCollide");return this.zpp_inner.shouldCollide(e.zpp_inner)},shouldSense:function(e){if(e==null)throw new g("Error: filter argument cannot be null for shouldSense");return this.zpp_inner.shouldSense(e.zpp_inner)},shouldFlow:function(e){if(e==null)throw new g("Error: filter argument cannot be null for shouldFlow");return this.zpp_inner.shouldFlow(e.zpp_inner)},copy:function(){return new ht(this.zpp_inner.collisionGroup,this.zpp_inner.collisionMask,this.zpp_inner.sensorGroup,this.zpp_inner.sensorMask,this.zpp_inner.fluidGroup,this.zpp_inner.fluidMask)},toString:function(){return"{ collision: "+p.hex(this.zpp_inner.collisionGroup,8)+"~"+p.hex(this.zpp_inner.collisionMask,8)+" sensor: "+p.hex(this.zpp_inner.sensorGroup,8)+"~"+p.hex(this.zpp_inner.sensorMask,8)+" fluid: "+p.hex(this.zpp_inner.fluidGroup,8)+"~"+p.hex(this.zpp_inner.fluidMask,8)+" }"},__class__:ht};var pt=function(e){if(e==null)e=false;this.zpp_inner=null;this.zpp_inner=new Kn;this.zpp_inner.outer=this;if(this.zpp_inner.ignore!=e){this.zpp_inner.invalidate(true);this.zpp_inner.ignore=e}this.zpp_inner.ignore};pt.__name__=true;pt.prototype={get_group:function(){if(this.zpp_inner.group==null)return null;else return this.zpp_inner.group.outer},set_group:function(e){if(e==this)throw new g("Error: Cannot assign InteractionGroup to itself");this.zpp_inner.setGroup(e==null?null:e.zpp_inner);if(this.zpp_inner.group==null)return null;else return this.zpp_inner.group.outer},get_ignore:function(){return this.zpp_inner.ignore},set_ignore:function(e){if(this.zpp_inner.ignore!=e){this.zpp_inner.invalidate(true);this.zpp_inner.ignore=e}return this.zpp_inner.ignore},get_interactors:function(){if(this.zpp_inner.wrap_interactors==null)this.zpp_inner.wrap_interactors=ms.get(this.zpp_inner.interactors,true);return this.zpp_inner.wrap_interactors},get_groups:function(){if(this.zpp_inner.wrap_groups==null)this.zpp_inner.wrap_groups=Cs.get(this.zpp_inner.groups,true);return this.zpp_inner.wrap_groups},toString:function(){var e="InteractionGroup";if(this.zpp_inner.ignore)e+=":ignore";return e},__class__:pt};var dt=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!Cs.internal)throw new g("Error: Cannot instantiate "+"InteractionGroup"+"Iterator derp!")};dt.__name__=true;dt.get=function(e){var t;if(dt.zpp_pool==null){Cs.internal=true;var n=new dt;Cs.internal=false;t=n}else{var r=dt.zpp_pool;dt.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};dt.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=dt.zpp_pool;dt.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:dt};var vt=function(){this.zpp_inner=null;this.zpp_inner=new Cs;this.zpp_inner.outer=this};vt.__name__=true;vt.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new vt;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};vt.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.outer},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"InteractionGroup"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"InteractionGroup"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"InteractionGroup"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.outer;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"InteractionGroup"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.outer;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"InteractionGroup"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"InteractionGroup"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return dt.get(this)},copy:function(e){if(e==null)e=false;var t=new vt;var n;this.zpp_inner.valmod();n=dt.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"InteractionGroup"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=dt.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=dt.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=dt.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=dt.zpp_pool;dt.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:vt};var mt=function(e,t,n,r){if(r==null)r=0;if(n==null)n=0;if(t==null)t=0;if(e==null)e=0;this.zpp_inner=null;if(e!=e||t!=t)throw new g("Error: AABB position cannot be NaN");if(n!=n||r!=r)throw new g("Error: AABB dimensions cannot be NaN");this.zpp_inner=Gn.get(e,t,e+n,t+r);this.zpp_inner.outer=this};mt.__name__=true;mt.prototype={copy:function(){this.zpp_inner.validate();return this.zpp_inner.copy().wrapper()},get_min:function(){return this.zpp_inner.getmin()},set_min:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(this.zpp_inner._immutable)throw new g("Error: AABB is immutable");if(e==null)throw new g("Error: Cannot assign null to AABB::"+"min");if(function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.minx;return t}(this)!=function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.minx;return t}(this)||function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.miny;return t}(this)!=function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.miny;return t}(this))throw new g("Error: AABB::"+"min"+" components cannot be NaN");if(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)>this.zpp_inner.getmax().get_x())throw new g("Error: Assignment would cause negative width");if(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)>this.zpp_inner.getmax().get_y())throw new g("Error: Assignment would cause negative height");this.zpp_inner.getmin().set(e);return this.zpp_inner.getmin()},get_max:function(){return this.zpp_inner.getmax()},set_max:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(this.zpp_inner._immutable)throw new g("Error: AABB is immutable");if(e==null)throw new g("Error: Cannot assign null to AABB::"+"max");if(function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.minx;return t}(this)!=function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.minx;return t}(this)||function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.miny;return t}(this)!=function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.miny;return t}(this))throw new g("Error: AABB::"+"max"+" components cannot be NaN");if(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)<this.zpp_inner.getmin().get_x())throw new g("Error: Assignment would cause negative width");if(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)<this.zpp_inner.getmin().get_y())throw new g("Error: Assignment would cause negative height");this.zpp_inner.getmax().set(e);return this.zpp_inner.getmax()},get_x:function(){this.zpp_inner.validate();return this.zpp_inner.minx},set_x:function(e){if(this.zpp_inner._immutable)throw new g("Error: AABB is immutable");if(function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.minx;return t}(this)!=e){if(e!=e)throw new g("Error: AABB::"+"x"+" cannot be NaN");this.zpp_inner.maxx+=e-this.zpp_inner.minx;this.zpp_inner.minx=e;this.zpp_inner.invalidate()}this.zpp_inner.validate();return this.zpp_inner.minx},get_y:function(){this.zpp_inner.validate();return this.zpp_inner.miny},set_y:function(e){if(this.zpp_inner._immutable)throw new g("Error: AABB is immutable");if(function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.miny;return t}(this)!=e){if(e!=e)throw new g("Error: AABB::"+"y"+" cannot be NaN");this.zpp_inner.maxy+=e-this.zpp_inner.miny;this.zpp_inner.miny=e;this.zpp_inner.invalidate()}this.zpp_inner.validate();return this.zpp_inner.miny},get_width:function(){this.zpp_inner.validate();return this.zpp_inner.width()},set_width:function(e){if(this.zpp_inner._immutable)throw new g("Error: AABB is immutable");if(function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.width();return t}(this)!=e){if(e!=e)throw new g("Error: AABB::"+"width"+" cannot be NaN");if(e<0)throw new g("Error: AABB::"+"width"+" ("+e+") must be >= 0");this.zpp_inner.maxx=function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.minx;return t}(this)+e;this.zpp_inner.invalidate()}this.zpp_inner.validate();return this.zpp_inner.width()},get_height:function(){this.zpp_inner.validate();return this.zpp_inner.height()},set_height:function(e){if(this.zpp_inner._immutable)throw new g("Error: AABB is immutable");if(function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.height();return t}(this)!=e){if(e!=e)throw new g("Error: AABB::"+"height"+" cannot be NaN");if(e<0)throw new g("Error: AABB::"+"height"+" ("+e+") must be >= 0");this.zpp_inner.maxy=function(e){var t;e.zpp_inner.validate();t=e.zpp_inner.miny;return t}(this)+e;this.zpp_inner.invalidate()}this.zpp_inner.validate();return this.zpp_inner.height()},toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:mt};var gt=function(){this.zpp_inner=null;if(!tr.internal)throw new g("Error: ConvexResult cannot be instantiated derp!")};gt.__name__=true;gt.prototype={get_normal:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");return this.zpp_inner.normal},get_position:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");return this.zpp_inner.position},get_toi:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");return this.zpp_inner.toiDistance},get_shape:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");return this.zpp_inner.shape},dispose:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");this.zpp_inner.free()},toString:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");return"{ shape: "+h.string(function(e){var t;if(e.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=e.zpp_inner.shape;return t}(this))+" toi: "+function(e){var t;if(e.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=e.zpp_inner.toiDistance;return t}(this)+" }"},__class__:gt};var yt=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!xs.internal)throw new g("Error: Cannot instantiate "+"ConvexResult"+"Iterator derp!")};yt.__name__=true;yt.get=function(e){var t;if(yt.zpp_pool==null){xs.internal=true;var n=new yt;xs.internal=false;t=n}else{var r=yt.zpp_pool;yt.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};yt.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=yt.zpp_pool;yt.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:yt};var bt=function(){this.zpp_inner=null;this.zpp_inner=new xs;this.zpp_inner.outer=this};bt.__name__=true;bt.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new bt;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};bt.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"ConvexResult"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"ConvexResult"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}else this.zpp_inner.inner.add(e);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"ConvexResult"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"ConvexResult"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"ConvexResult"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"ConvexResult"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return yt.get(this)},copy:function(e){if(e==null)e=false;var t=new bt;var n;this.zpp_inner.valmod();n=yt.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"ConvexResult"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=yt.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=yt.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=yt.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=yt.zpp_pool;yt.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:bt};var wt=function(){};wt.__name__=true;wt.distanceBody=function(e,t,n,r){if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");n.zpp_inner.immutable();r.zpp_inner.immutable();if(e.zpp_inner.wrap_shapes.empty()||t.zpp_inner.wrap_shapes.empty())throw new g("Error: Bodies cannot be empty in calculating distances");var i=e.zpp_inner.shapes.head;while(i!=null){var s=i.elt;sr.validateShape(s);i=i.next}var o=t.zpp_inner.shapes.head;while(o!=null){var u=o.elt;sr.validateShape(u);o=o.next}return kr.distanceBody(e.zpp_inner,t.zpp_inner,n.zpp_inner,r.zpp_inner)};wt.distance=function(e,t,n,r){if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");n.zpp_inner.immutable();r.zpp_inner.immutable();if((e.zpp_inner.body!=null?e.zpp_inner.body.outer:null)==null||(t.zpp_inner.body!=null?t.zpp_inner.body.outer:null)==null)throw new g("Error: Shape must be part of a Body to calculate distances");sr.validateShape(e.zpp_inner);sr.validateShape(t.zpp_inner);var i;if(Or.zpp_pool==null)i=new Or;else{i=Or.zpp_pool;Or.zpp_pool=i.next;i.next=null}i.weak=false;var s=kr.distance(e.zpp_inner,t.zpp_inner,n.zpp_inner,r.zpp_inner,i,1e100);var o=i;if(o.outer!=null){o.outer.zpp_inner=null;o.outer=null}o._isimmutable=null;o._validate=null;o._invalidate=null;o.next=Or.zpp_pool;Or.zpp_pool=o;return s};wt.intersectsBody=function(e,t){if(e.zpp_inner.wrap_shapes.empty()||t.zpp_inner.wrap_shapes.empty())throw new g("Error: Bodies must have shapes to test for intersection.");var n=e.zpp_inner.shapes.head;while(n!=null){var r=n.elt;sr.validateShape(r);n=n.next}var i=t.zpp_inner.shapes.head;while(i!=null){var s=i.elt;sr.validateShape(s);i=i.next}if(!e.zpp_inner.aabb.intersect(t.zpp_inner.aabb))return false;else{var o=e.zpp_inner.shapes.head;while(o!=null){var u=o.elt;var a=t.zpp_inner.shapes.head;while(a!=null){var f=a.elt;if(Zn.testCollide_safe(u,f))return true;a=a.next}o=o.next}return false}};wt.intersects=function(e,t){if((e.zpp_inner.body!=null?e.zpp_inner.body.outer:null)==null||(t.zpp_inner.body!=null?t.zpp_inner.body.outer:null)==null)throw new g("Error: Shape must be part of a Body to calculate intersection");sr.validateShape(e.zpp_inner);sr.validateShape(t.zpp_inner);return e.zpp_inner.aabb.intersect(t.zpp_inner.aabb)&&Zn.testCollide_safe(e.zpp_inner,t.zpp_inner)};wt.contains=function(e,t){if((e.zpp_inner.body!=null?e.zpp_inner.body.outer:null)==null||(t.zpp_inner.body!=null?t.zpp_inner.body.outer:null)==null)throw new g("Error: Shape must be part of a Body to calculate containment");sr.validateShape(e.zpp_inner);sr.validateShape(t.zpp_inner);return Zn.containTest(e.zpp_inner,t.zpp_inner)};var Et=function(e){this.zpp_inner=null;this.zpp_pool=null;this.zpp_inner=new ur(this);if(e!=null){if(e instanceof Array&&e.__enum__==null){var t=e;var n=0;while(n<t.length){var r=t[n];++n;if(r==null)throw new g("Error: Array<Vec2> contains null objects");if(!y.__instanceof(r,_t))throw new g("Error: Array<Vec2> contains non Vec2 objects");var i=r;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");var s=or.get(function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.x;return t}(this),function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.y;return t}(this));if(this.zpp_inner.vertices==null)this.zpp_inner.vertices=s.prev=s.next=s;else{s.prev=this.zpp_inner.vertices;s.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=s;this.zpp_inner.vertices.next=s}this.zpp_inner.vertices=s}}else if(y.__instanceof(e,Pt)){var o=e;var u=o.iterator();while(u.hasNext()){var a;u.zpp_critical=false;a=u.zpp_inner.at(u.zpp_i++);if(a==null)throw new g("Error: Vec2List contains null objects");if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");var f=or.get(function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.x;return t}(this),function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.y;return t}(this));if(this.zpp_inner.vertices==null)this.zpp_inner.vertices=f.prev=f.next=f;else{f.prev=this.zpp_inner.vertices;f.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=f;this.zpp_inner.vertices.next=f}this.zpp_inner.vertices=f}}else if(y.__instanceof(e,Et)){var l=e;if(l!=null&&l.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");var c=l.zpp_inner.vertices;if(c!=null){var h=c;do{var p=_t.get(h.x,h.y,null);h=h.next;var d=or.get(function(e){var t;if(p!=null&&p.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");p.zpp_inner.validate();t=p.zpp_inner.x;return t}(this),function(e){var t;if(p!=null&&p.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");p.zpp_inner.validate();t=p.zpp_inner.y;return t}(this));if(this.zpp_inner.vertices==null)this.zpp_inner.vertices=d.prev=d.next=d;else{d.prev=this.zpp_inner.vertices;d.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=d;this.zpp_inner.vertices.next=d}this.zpp_inner.vertices=d;p.dispose()}while(h!=c)}}else throw new g("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");this.skipForward(1);if(e instanceof Array&&e.__enum__==null){var v=e;var m=0;while(m<v.length){var b=v[m];if(b.zpp_inner.weak?function(e){var t;b.dispose();t=true;return t}(this):false){v.splice(m,1);continue}m++}}else if(y.__instanceof(e,Pt)){var w=e;if(w.zpp_inner._validate!=null)w.zpp_inner._validate();var E=w.zpp_inner.inner;var S=null;var x=E.head;while(x!=null){var T=x.elt;if(T.outer.zpp_inner.weak){x=E.erase(S);if(T.outer.zpp_inner.weak){T.outer.dispose();true}else false}else{S=x;x=x.next}}}}};Et.__name__=true;Et.get=function(e){var t;if(Os.poolGeomPoly==null)t=new Et;else{t=Os.poolGeomPoly;Os.poolGeomPoly=t.zpp_pool;t.zpp_pool=null;t.zpp_disp=false;if(t==Os.nextGeomPoly)Os.nextGeomPoly=null}if(e!=null){if(e instanceof Array&&e.__enum__==null){var n=e;var r=0;while(r<n.length){var i=n[r];++r;if(i==null)throw new g("Error: Array<Vec2> contains null objects");if(!y.__instanceof(i,_t))throw new g("Error: Array<Vec2> contains non Vec2 objects");var s=i;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");var o=or.get(function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.x;return t}(this),function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.y;return t}(this));if(t.zpp_inner.vertices==null)t.zpp_inner.vertices=o.prev=o.next=o;else{o.prev=t.zpp_inner.vertices;o.next=t.zpp_inner.vertices.next;t.zpp_inner.vertices.next.prev=o;t.zpp_inner.vertices.next=o}t.zpp_inner.vertices=o}}else if(y.__instanceof(e,Pt)){var u=e;var a=u.iterator();while(a.hasNext()){var f;a.zpp_critical=false;f=a.zpp_inner.at(a.zpp_i++);if(f==null)throw new g("Error: Vec2List contains null objects");if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");var l=or.get(function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(this),function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this));if(t.zpp_inner.vertices==null)t.zpp_inner.vertices=l.prev=l.next=l;else{l.prev=t.zpp_inner.vertices;l.next=t.zpp_inner.vertices.next;t.zpp_inner.vertices.next.prev=l;t.zpp_inner.vertices.next=l}t.zpp_inner.vertices=l}}else if(y.__instanceof(e,Et)){var c=e;if(c!=null&&c.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");var h=c.zpp_inner.vertices;if(h!=null){var p=h;do{var d=_t.get(p.x,p.y,null);p=p.next;var v=or.get(function(e){var t;if(d!=null&&d.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");d.zpp_inner.validate();t=d.zpp_inner.x;return t}(this),function(e){var t;if(d!=null&&d.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");d.zpp_inner.validate();t=d.zpp_inner.y;return t}(this));if(t.zpp_inner.vertices==null)t.zpp_inner.vertices=v.prev=v.next=v;else{v.prev=t.zpp_inner.vertices;v.next=t.zpp_inner.vertices.next;t.zpp_inner.vertices.next.prev=v;t.zpp_inner.vertices.next=v}t.zpp_inner.vertices=v;d.dispose()}while(p!=h)}}else throw new g("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");t.skipForward(1);if(e instanceof Array&&e.__enum__==null){var m=e;var b=0;while(b<m.length){var w=m[b];if(w.zpp_inner.weak?function(e){var t;w.dispose();t=true;return t}(this):false){m.splice(b,1);continue}b++}}else if(y.__instanceof(e,Pt)){var E=e;if(E.zpp_inner._validate!=null)E.zpp_inner._validate();var S=E.zpp_inner.inner;var x=null;var T=S.head;while(T!=null){var N=T.elt;if(N.outer.zpp_inner.weak){T=S.erase(x);if(N.outer.zpp_inner.weak){N.outer.dispose();true}else false}else{x=T;T=T.next}}}}return t};Et.prototype={empty:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");return this.zpp_inner.vertices==null},size:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");var e=0;var t=this.zpp_inner.vertices;var n=this.zpp_inner.vertices;if(t!=null){var r=t;do{var i=r;e++;r=r.next}while(r!=n)}return e},iterator:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");return ar.get(this.zpp_inner.vertices,true)},forwardIterator:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");return ar.get(this.zpp_inner.vertices,true)},backwardsIterator:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");return ar.get(this.zpp_inner.vertices,false)},current:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");t=e.zpp_inner.vertices==null;return t}(this))throw new g("Error: GeomPoly is empty");return this.zpp_inner.vertices.wrapper()},push:function(e){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot push null vertex");var t=or.get(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this));if(this.zpp_inner.vertices==null)this.zpp_inner.vertices=t.prev=t.next=t;else{t.prev=this.zpp_inner.vertices;t.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=t;this.zpp_inner.vertices.next=t}this.zpp_inner.vertices=t;if(e.zpp_inner.weak){e.dispose();true}else false;return this},pop:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null)throw new g("Error: Cannot pop from empty polygon");var e=this.zpp_inner.vertices;if(this.zpp_inner.vertices!=null&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices){this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null;this.zpp_inner.vertices=null}else{var t=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null;this.zpp_inner.vertices=null;this.zpp_inner.vertices=t}var n=e;if(n.wrap!=null){n.wrap.zpp_inner._inuse=false;n.wrap.dispose();n.wrap=null}n.prev=n.next=null;n.next=or.zpp_pool;or.zpp_pool=n;return this},unshift:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot unshift null vertex");var t=or.get(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this));if(this.zpp_inner.vertices==null)this.zpp_inner.vertices=t.prev=t.next=t;else{t.next=this.zpp_inner.vertices;t.prev=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=t;this.zpp_inner.vertices.prev=t}this.zpp_inner.vertices=t;if(e.zpp_inner.weak){e.dispose();true}else false;return this},shift:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null)throw new g("Error: Cannot shift from empty polygon");var e=this.zpp_inner.vertices;if(this.zpp_inner.vertices!=null&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices){this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null;this.zpp_inner.vertices=this.zpp_inner.vertices=null}else{var t=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null;this.zpp_inner.vertices=null;this.zpp_inner.vertices=t}var n=e;if(n.wrap!=null){n.wrap.zpp_inner._inuse=false;n.wrap.dispose();n.wrap=null}n.prev=n.next=null;n.next=or.zpp_pool;or.zpp_pool=n;return this},skipForward:function(e){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(!(this.zpp_inner.vertices==null)){if(e>0)while(e-->0)this.zpp_inner.vertices=this.zpp_inner.vertices.next;else if(e<0)while(e++<0)this.zpp_inner.vertices=this.zpp_inner.vertices.prev}return this},skipBackwards:function(e){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");return this.skipForward(-e)},erase:function(e){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");while(e!=0&&!(this.zpp_inner.vertices==null)){var t=this.zpp_inner.vertices;if(e>0){if(this.zpp_inner.vertices!=null&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices){this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null;this.zpp_inner.vertices=this.zpp_inner.vertices=null}else{var n=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null;this.zpp_inner.vertices=null;this.zpp_inner.vertices=n}e--}else if(e<0){if(this.zpp_inner.vertices!=null&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices){this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null;this.zpp_inner.vertices=null}else{var r=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null;this.zpp_inner.vertices=null;this.zpp_inner.vertices=r}e++}var i=t;if(i.wrap!=null){i.wrap.zpp_inner._inuse=false;i.wrap.dispose();i.wrap=null}i.prev=i.next=null;i.next=or.zpp_pool;or.zpp_pool=i}return this},clear:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");while(!(this.zpp_inner.vertices==null)){var e=this.zpp_inner.vertices;if(this.zpp_inner.vertices!=null&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices){this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null;this.zpp_inner.vertices=this.zpp_inner.vertices=null}else{var t=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null;this.zpp_inner.vertices=null;this.zpp_inner.vertices=t}var n=e;if(n.wrap!=null){n.wrap.zpp_inner._inuse=false;n.wrap.dispose();n.wrap=null}n.prev=n.next=null;n.next=or.zpp_pool;or.zpp_pool=n}return this},copy:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");var e=Et.get();var t=this.zpp_inner.vertices;var n=this.zpp_inner.vertices;if(t!=null){var r=t;do{var i=r;var s=or.get(i.x,i.y);if(e.zpp_inner.vertices==null)e.zpp_inner.vertices=s.prev=s.next=s;else{s.prev=e.zpp_inner.vertices;s.next=e.zpp_inner.vertices.next;e.zpp_inner.vertices.next.prev=s;e.zpp_inner.vertices.next=s}e.zpp_inner.vertices=s;r=r.next}while(r!=n)}return e.skipForward(1)},dispose:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");this.clear();var e=this;e.zpp_pool=null;if(Os.nextGeomPoly!=null)Os.nextGeomPoly.zpp_pool=e;else Os.poolGeomPoly=e;Os.nextGeomPoly=e;e.zpp_disp=true},toString:function(){var e="GeomPoly[";var t=this.zpp_inner.vertices;var n=this.zpp_inner.vertices;if(t!=null){var r=t;do{var i=r;if(i!=this.zpp_inner.vertices)e+=",";e+="{"+i.x+","+i.y+"}";r=r.next}while(r!=n)}return e+"]"},area:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return 0;else{var e;var t=0;var n=this.zpp_inner.vertices;var r=this.zpp_inner.vertices;if(n!=null){var i=n;do{var s=i;t+=s.x*(s.next.y-s.prev.y);i=i.next}while(i!=r)}e=t*.5;if(e<0)return-e;else return e}},winding:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next){if(Tn.Winding_UNDEFINED==null){Tn.internal=true;Tn.Winding_UNDEFINED=new Bt;Tn.internal=false}return Tn.Winding_UNDEFINED}else{var e;var t=0;var n=this.zpp_inner.vertices;var r=this.zpp_inner.vertices;if(n!=null){var i=n;do{var s=i;t+=s.x*(s.next.y-s.prev.y);i=i.next}while(i!=r)}e=t*.5;if(e>0){if(Tn.Winding_CLOCKWISE==null){Tn.internal=true;Tn.Winding_CLOCKWISE=new Bt;Tn.internal=false}return Tn.Winding_CLOCKWISE}else if(e==0){if(Tn.Winding_UNDEFINED==null){Tn.internal=true;Tn.Winding_UNDEFINED=new Bt;Tn.internal=false}return Tn.Winding_UNDEFINED}else{if(Tn.Winding_ANTICLOCKWISE==null){Tn.internal=true;Tn.Winding_ANTICLOCKWISE=new Bt;Tn.internal=false}return Tn.Winding_ANTICLOCKWISE}}},contains:function(e){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: GeomPoly::contains point cannot be null");var t;var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;var r;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();r=e.zpp_inner.y;var i=false;var s=this.zpp_inner.vertices;var o=this.zpp_inner.vertices;if(s!=null){var u=s;do{var a=u;var f=a.prev;if((a.y<r&&f.y>=r||f.y<r&&a.y>=r)&&(a.x<=n||f.x<=n)){if(a.x+(r-a.y)/(f.y-a.y)*(f.x-a.x)<n)i=!i}u=u.next}while(u!=o)}t=i;if(e.zpp_inner.weak){e.dispose();true}else false;return t},isClockwise:function(){return this.winding()==function(e){var t;if(Tn.Winding_CLOCKWISE==null){Tn.internal=true;Tn.Winding_CLOCKWISE=new Bt;Tn.internal=false}t=Tn.Winding_CLOCKWISE;return t}(this)},isConvex:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return true;else{var e=false;var t=false;var n=true;var r=this.zpp_inner.vertices;var i=this.zpp_inner.vertices;if(r!=null){var s=r;do{var o=s;var u=o.prev;var a=o.next;var f=0;var l=0;f=a.x-o.x;l=a.y-o.y;var c=0;var h=0;c=o.x-u.x;h=o.y-u.y;var p=h*f-c*l;if(p>0)t=true;else if(p<0)e=true;if(t&&e){n=false;break}s=s.next}while(s!=i)}return n}},isSimple:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return true;else return Sr.isSimple(this.zpp_inner.vertices)},isMonotone:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return true;else return dr.isMonotone(this.zpp_inner.vertices)},isDegenerate:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return true;else return this.area()<N.epsilon},simplify:function(e){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(e<=0)throw new g("Error: Epsilon should be > 0 for simplifying a GeomPoly");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return this.copy();else{var t=Nr.simplify(this.zpp_inner.vertices,e);var n=Et.get();n.zpp_inner.vertices=t;return n}},simpleDecomposition:function(e){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw new g("Error: Cannot decompose a degenerate polygon");var t=Sr.decompose(this.zpp_inner.vertices,function(e){var t;if(mr.sharedGVList==null)mr.sharedGVList=new mi;t=mr.sharedGVList;return t}(this));var n;if(e==null)n=new xt;else n=e;while(!(t.head==null)){var r=t.pop_unsafe();var i=Et.get();i.zpp_inner.vertices=r;if(n.zpp_inner.reverse_flag)n.push(i);else n.unshift(i)}return n},monotoneDecomposition:function(e){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw new g("Error: Cannot decompose a degenerate polygon");var t=dr.decompose(this.zpp_inner.vertices,function(e){var t;if(dr.sharedPPoly==null)dr.sharedPPoly=new mr;t=dr.sharedPPoly;return t}(this));var n=t.extract(function(e){var t;if(mr.sharedGVList==null)mr.sharedGVList=new mi;t=mr.sharedGVList;return t}(this));var r;if(e==null)r=new xt;else r=e;while(!(n.head==null)){var i=n.pop_unsafe();var s=Et.get();s.zpp_inner.vertices=i;if(r.zpp_inner.reverse_flag)r.push(s);else r.unshift(s)}return r},convexDecomposition:function(e,t){if(e==null)e=false;if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw new g("Error: Cannot decompose a degenerate polygon");var n=dr.decompose(this.zpp_inner.vertices,function(e){var t;if(dr.sharedPPoly==null)dr.sharedPPoly=new mr;t=dr.sharedPPoly;return t}(this));var r=n.extract_partitions(function(e){var t;if(mr.sharedPPList==null)mr.sharedPPList=new vi;t=mr.sharedPPList;return t}(this));var i;if(t==null)i=new xt;else i=t;while(!(r.head==null)){var s=r.pop_unsafe();Ar.triangulate(s);if(e)Ar.optimise(s);er.optimise(s);var o=s.extract(function(e){var t;if(mr.sharedGVList==null)mr.sharedGVList=new mi;t=mr.sharedGVList;return t}(this));var u=s;u.next=mr.zpp_pool;mr.zpp_pool=u;while(!(o.head==null)){var a=o.pop_unsafe();var f=Et.get();f.zpp_inner.vertices=a;if(i.zpp_inner.reverse_flag)i.push(f);else i.unshift(f)}}return i},triangularDecomposition:function(e,t){if(e==null)e=false;if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(this.zpp_inner.vertices==null||this.zpp_inner.vertices.next==null||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw new g("Error: Cannot decompose a degenerate polygon");var n=dr.decompose(this.zpp_inner.vertices,function(e){var t;if(dr.sharedPPoly==null)dr.sharedPPoly=new mr;t=dr.sharedPPoly;return t}(this));var r=n.extract_partitions(function(e){var t;if(mr.sharedPPList==null)mr.sharedPPList=new vi;t=mr.sharedPPList;return t}(this));var i;if(t==null)i=new xt;else i=t;while(!(r.head==null)){var s=r.pop_unsafe();Ar.triangulate(s);if(e)Ar.optimise(s);var o=s.extract(function(e){var t;if(mr.sharedGVList==null)mr.sharedGVList=new mi;t=mr.sharedGVList;return t}(this));var u=s;u.next=mr.zpp_pool;mr.zpp_pool=u;while(!(o.head==null)){var a=o.pop_unsafe();var f=Et.get();f.zpp_inner.vertices=a;if(i.zpp_inner.reverse_flag)i.push(f);else i.unshift(f)}}return i},inflate:function(e){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");var t=Et.get();if(this.winding()==function(e){var t;if(Tn.Winding_CLOCKWISE==null){Tn.internal=true;Tn.Winding_CLOCKWISE=new Bt;Tn.internal=false}t=Tn.Winding_CLOCKWISE;return t}(this))e=-e;var n=this.zpp_inner.vertices;var r=this.zpp_inner.vertices;if(n!=null){var i=n;do{var s=i;var o=s.prev;var u=s.next;var a=0;var f=0;var l=0;var c=0;a=s.x-o.x;f=s.y-o.y;l=u.x-s.x;c=u.y-s.y;var h=0;var p=0;var d=0;var v=0;h=a;p=f;var m=h*h+p*p;var y=1/Math.sqrt(m);var b=y;h*=b;p*=b;var w=h;h=-p;p=w;var E=e;h*=E;p*=E;d=l;v=c;var S=d*d+v*v;var x=1/Math.sqrt(S);var T=x;d*=T;v*=T;var N=d;d=-v;v=N;var C=e;d*=C;v*=C;var k=0;var L=0;k=d-h;L=v-p;var A=c*k-l*L;var O;if(A==0)O=0;else O=A/(c*a-l*f);var M=0;var _=0;M=s.x+h;_=s.y+p;var D=O;M+=a*D;_+=f*D;t.push(_t.get(M,_,null));i=i.next}while(i!=r)}return t.skipForward(1)},cut:function(e,t,n,r,i){if(r==null)r=false;if(n==null)n=false;if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(!function(e){var t;if(e.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");t=e.zpp_inner.vertices==null||e.zpp_inner.vertices.next==null||e.zpp_inner.vertices.prev==e.zpp_inner.vertices.next?true:Sr.isSimple(e.zpp_inner.vertices);return t}(this))throw new g("Error: Cut requires a truly simple polygon");if(e==null||t==null)throw new g("Error: Cannot cut with null start/end's");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");var s=ir.run(this.zpp_inner.vertices,e,t,n,r,i);if(e.zpp_inner.weak){e.dispose();true}else false;if(t.zpp_inner.weak){t.dispose();true}else false;return s},transform:function(e){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot transform by null matrix");var t=this.zpp_inner.vertices;var n=this.zpp_inner.vertices;if(t!=null){var r=t;do{var i=r;var s=e.zpp_inner.a*i.x+e.zpp_inner.b*i.y+e.zpp_inner.tx;i.y=e.zpp_inner.c*i.x+e.zpp_inner.d*i.y+e.zpp_inner.ty;i.x=s;r=r.next}while(r!=n)}return this},bounds:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");t=e.zpp_inner.vertices==null;return t}(this))throw new g("Error: empty GeomPoly has no defineable bounds");var e=1e100;var t=1e100;var n=-1e100;var r=-1e100;var i=this.zpp_inner.vertices;var s=this.zpp_inner.vertices;if(i!=null){var o=i;do{var u=o;if(u.x<e)e=u.x;if(u.y<t)t=u.y;if(u.x>n)n=u.x;if(u.y>r)r=u.y;o=o.next}while(o!=s)}return new mt(e,t,n-e,r-t)},top:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");t=e.zpp_inner.vertices==null;return t}(this))throw new g("Error: empty GeomPoly has no defineable topmost vertex");var e=this.zpp_inner.vertices;var t=this.zpp_inner.vertices.next;var n=this.zpp_inner.vertices;if(t!=null){var r=t;do{var i=r;if(i.y<e.y)e=i;r=r.next}while(r!=n)}if(e.wrap==null){e.wrap=_t.get(e.x,e.y,null);e.wrap.zpp_inner._inuse=true;e.wrap.zpp_inner._invalidate=Rs(e,e.modwrap);e.wrap.zpp_inner._validate=Rs(e,e.getwrap)}return e.wrap},bottom:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");t=e.zpp_inner.vertices==null;return t}(this))throw new g("Error: empty GeomPoly has no defineable bottommost vertex");var e=this.zpp_inner.vertices;var t=this.zpp_inner.vertices.next;var n=this.zpp_inner.vertices;if(t!=null){var r=t;do{var i=r;if(i.y>e.y)e=i;r=r.next}while(r!=n)}if(e.wrap==null){e.wrap=_t.get(e.x,e.y,null);e.wrap.zpp_inner._inuse=true;e.wrap.zpp_inner._invalidate=Rs(e,e.modwrap);e.wrap.zpp_inner._validate=Rs(e,e.getwrap)}return e.wrap},left:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");t=e.zpp_inner.vertices==null;return t}(this))throw new g("Error: empty GeomPoly has no defineable leftmost vertex");var e=this.zpp_inner.vertices;var t=this.zpp_inner.vertices.next;var n=this.zpp_inner.vertices;if(t!=null){var r=t;do{var i=r;if(i.x<e.x)e=i;r=r.next}while(r!=n)}if(e.wrap==null){e.wrap=_t.get(e.x,e.y,null);e.wrap.zpp_inner._inuse=true;e.wrap.zpp_inner._invalidate=Rs(e,e.modwrap);e.wrap.zpp_inner._validate=Rs(e,e.getwrap)}return e.wrap},right:function(){if(this.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");t=e.zpp_inner.vertices==null;return t}(this))throw new g("Error: empty GeomPoly has no defineable rightmmost vertex");var e=this.zpp_inner.vertices;var t=this.zpp_inner.vertices.next;var n=this.zpp_inner.vertices;if(t!=null){var r=t;do{var i=r;if(i.x>e.x)e=i;r=r.next}while(r!=n)}if(e.wrap==null){e.wrap=_t.get(e.x,e.y,null);e.wrap.zpp_inner._inuse=true;e.wrap.zpp_inner._invalidate=Rs(e,e.modwrap);e.wrap.zpp_inner._validate=Rs(e,e.getwrap)}return e.wrap},__class__:Et};var St=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!Es.internal)throw new g("Error: Cannot instantiate "+"GeomPoly"+"Iterator derp!")};St.__name__=true;St.get=function(e){var t;if(St.zpp_pool==null){Es.internal=true;var n=new St;Es.internal=false;t=n}else{var r=St.zpp_pool;St.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};St.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=St.zpp_pool;St.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:St};var xt=function(){this.zpp_inner=null;this.zpp_inner=new Es;this.zpp_inner.outer=this};xt.__name__=true;xt.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new xt;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};xt.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.outer},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"GeomPoly"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"GeomPoly"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"GeomPoly"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.outer;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"GeomPoly"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.outer;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"GeomPoly"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"GeomPoly"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return St.get(this)},copy:function(e){if(e==null)e=false;var t=new xt;var n;this.zpp_inner.valmod();n=St.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"GeomPoly"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=St.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=St.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=St.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=St.zpp_pool;St.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:xt};var Tt=function(){if(!ar.internal)throw new g("Error: Cannot instantiate GeomVertexIterator")};Tt.__name__=true;Tt.prototype={hasNext:function(){if(this.zpp_inner==null)throw new g("Error: Iterator has been disposed");var e=this.zpp_inner.ptr!=this.zpp_inner.start||this.zpp_inner.first;this.zpp_inner.first=false;if(!e){var t=this.zpp_inner;t.outer.zpp_inner=null;t.ptr=t.start=null;t.next=ar.zpp_pool;ar.zpp_pool=t}return e},next:function(){if(this.zpp_inner==null)throw new g("Error: Iterator has been disposed");var e=this.zpp_inner.ptr.wrapper();if(this.zpp_inner.forward)this.zpp_inner.ptr=this.zpp_inner.ptr.next;else this.zpp_inner.ptr=this.zpp_inner.ptr.prev;return e},__class__:Tt};var Nt=function(){};Nt.__name__=true;Nt.run=function(e,t,n,r,i,s,o){if(s==null)s=true;if(r==null)r=2;if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: MarchingSquares requires an iso function to operate");if(t==null)throw new g("Error: MarchingSquares requires an AABB to define bounds of surface extraction");if(n==null)throw new g("Error: MarchingSquares requires a Vec2 to define cell size for surface extraction");if(function(e){var t;if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");n.zpp_inner.validate();t=n.zpp_inner.x;return t}(this)<=0||function(e){var t;if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");n.zpp_inner.validate();t=n.zpp_inner.y;return t}(this)<=0)throw new g("Error: MarchingSquares cannot operate with non-positive cell dimensions");if(r<0)throw new g("Error: MarchingSquares cannot use a negative quality value for interpolation");if(i!=null&&(function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.x;return t}(this)<=0||function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.y;return t}(this)<=0))throw new g("Error: MarchingSquares cannot with non-positive sub-grid dimensions");var u;if(o!=null)u=o;else u=new xt;if(i==null)cr.run(e,function(e){var n;t.zpp_inner.validate();n=t.zpp_inner.minx;return n}(this),function(e){var n;t.zpp_inner.validate();n=t.zpp_inner.miny;return n}(this),t.zpp_inner.getmax().get_x(),t.zpp_inner.getmax().get_y(),n,r,s,u);else{var a;a=function(e){var n;t.zpp_inner.validate();n=t.zpp_inner.width();return n}(this)/function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.x;return t}(this);var f;f=function(e){var n;t.zpp_inner.validate();n=t.zpp_inner.height();return n}(this)/function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.y;return t}(this);var l=a|0;var c=f|0;if(l!=a)l++;if(c!=f)c++;var h=0;while(h<l){var p=h++;var d;d=function(e){var n;t.zpp_inner.validate();n=t.zpp_inner.minx;return n}(this)+function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.x;return t}(this)*p;var v;if(p==l-1)v=t.zpp_inner.getmax().get_x();else v=d+function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.x;return t}(this);var m=0;while(m<c){var y=m++;var b;b=function(e){var n;t.zpp_inner.validate();n=t.zpp_inner.miny;return n}(this)+function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.y;return t}(this)*y;var w;if(y==c-1)w=t.zpp_inner.getmax().get_y();else w=b+function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.y;return t}(this);cr.run(e,d,b,v,w,n,r,s,u)}}}if(n.zpp_inner.weak){n.dispose();true}else false;if(i!=null){if(i.zpp_inner.weak){i.dispose();true}else false}return u};var Ct=function(e,t,n,r,i,s){if(s==null)s=0;if(i==null)i=0;if(r==null)r=1;if(n==null)n=0;if(t==null)t=0;if(e==null)e=1;this.zpp_inner=null;this.zpp_inner=hr.get();this.zpp_inner.outer=this;if(e!=e)throw new g("Error: Mat23::"+"a"+" cannot be NaN");this.zpp_inner.a=e;this.zpp_inner.invalidate();this.zpp_inner.a;if(t!=t)throw new g("Error: Mat23::"+"b"+" cannot be NaN");this.zpp_inner.b=t;this.zpp_inner.invalidate();this.zpp_inner.b;if(i!=i)throw new g("Error: Mat23::"+"tx"+" cannot be NaN");this.zpp_inner.tx=i;this.zpp_inner.invalidate();this.zpp_inner.tx;if(n!=n)throw new g("Error: Mat23::"+"c"+" cannot be NaN");this.zpp_inner.c=n;this.zpp_inner.invalidate();this.zpp_inner.c;if(r!=r)throw new g("Error: Mat23::"+"d"+" cannot be NaN");this.zpp_inner.d=r;this.zpp_inner.invalidate();this.zpp_inner.d;if(s!=s)throw new g("Error: Mat23::"+"ty"+" cannot be NaN");this.zpp_inner.ty=s;this.zpp_inner.invalidate();this.zpp_inner.ty};Ct.__name__=true;Ct.rotation=function(e){if(e!=e)throw new g("Error: Cannot create rotation matrix with NaN angle");var t=Math.cos(e);var n=Math.sin(e);return new Ct(t,-n,n,t,0,0)};Ct.translation=function(e,t){return new Ct(1,0,0,1,e,t)};Ct.scale=function(e,t){return new Ct(e,0,0,t,0,0)};Ct.prototype={get_a:function(){return this.zpp_inner.a},set_a:function(e){if(e!=e)throw new g("Error: Mat23::"+"a"+" cannot be NaN");this.zpp_inner.a=e;this.zpp_inner.invalidate();return this.zpp_inner.a},get_b:function(){return this.zpp_inner.b},set_b:function(e){if(e!=e)throw new g("Error: Mat23::"+"b"+" cannot be NaN");this.zpp_inner.b=e;this.zpp_inner.invalidate();return this.zpp_inner.b},get_c:function(){return this.zpp_inner.c},set_c:function(e){if(e!=e)throw new g("Error: Mat23::"+"c"+" cannot be NaN");this.zpp_inner.c=e;this.zpp_inner.invalidate();return this.zpp_inner.c},get_d:function(){return this.zpp_inner.d},set_d:function(e){if(e!=e)throw new g("Error: Mat23::"+"d"+" cannot be NaN");this.zpp_inner.d=e;this.zpp_inner.invalidate();return this.zpp_inner.d},get_tx:function(){return this.zpp_inner.tx},set_tx:function(e){if(e!=e)throw new g("Error: Mat23::"+"tx"+" cannot be NaN");this.zpp_inner.tx=e;this.zpp_inner.invalidate();return this.zpp_inner.tx},get_ty:function(){return this.zpp_inner.ty},set_ty:function(e){if(e!=e)throw new g("Error: Mat23::"+"ty"+" cannot be NaN");this.zpp_inner.ty=e;this.zpp_inner.invalidate();return this.zpp_inner.ty},copy:function(){return new Ct(this.zpp_inner.a,this.zpp_inner.b,this.zpp_inner.c,this.zpp_inner.d,this.zpp_inner.tx,this.zpp_inner.ty)},set:function(e){if(e==null)throw new g("Error: Cannot set form null matrix");this.zpp_inner.set(e.zpp_inner);this.zpp_inner.invalidate();return this},setAs:function(e,t,n,r,i,s){if(s==null)s=0;if(i==null)i=0;if(r==null)r=1;if(n==null)n=0;if(t==null)t=0;if(e==null)e=1;this.zpp_inner.setas(e,t,n,r,i,s);this.zpp_inner.invalidate();return this},reset:function(){return this.setAs()},get_determinant:function(){return this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c},singular:function(){var e=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d;var t=this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c;if(t<0)t=-t;return e>N.illConditionedThreshold*t},inverse:function(){if(this.singular())throw new g("Error: Matrix is singular and cannot be inverted");var e=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);return new Ct(this.zpp_inner.d*e,-this.zpp_inner.b*e,-this.zpp_inner.c*e,this.zpp_inner.a*e,(this.zpp_inner.b*this.zpp_inner.ty-this.zpp_inner.d*this.zpp_inner.tx)*e,(this.zpp_inner.c*this.zpp_inner.tx-this.zpp_inner.a*this.zpp_inner.ty)*e)},transpose:function(){return new Ct(this.zpp_inner.a,this.zpp_inner.c,this.zpp_inner.b,this.zpp_inner.d,-this.zpp_inner.a*this.zpp_inner.tx-this.zpp_inner.c*this.zpp_inner.ty,-this.zpp_inner.b*this.zpp_inner.tx-this.zpp_inner.d*this.zpp_inner.ty)},concat:function(e){var t=e;if(t==null)throw new g("Error: Cannot concatenate with null Mat23");return new Ct(t.zpp_inner.a*this.zpp_inner.a+t.zpp_inner.b*this.zpp_inner.c,t.zpp_inner.a*this.zpp_inner.b+t.zpp_inner.b*this.zpp_inner.d,t.zpp_inner.c*this.zpp_inner.a+t.zpp_inner.d*this.zpp_inner.c,t.zpp_inner.c*this.zpp_inner.b+t.zpp_inner.d*this.zpp_inner.d,t.zpp_inner.a*this.zpp_inner.tx+t.zpp_inner.b*this.zpp_inner.ty+t.zpp_inner.tx,t.zpp_inner.c*this.zpp_inner.tx+t.zpp_inner.d*this.zpp_inner.ty+t.zpp_inner.ty)},transform:function(e,t,n){if(n==null)n=false;if(t==null)t=false;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot transform null Vec2");var r;if(t)r=_t.get(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*this.zpp_inner.a+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*this.zpp_inner.b,function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*this.zpp_inner.c+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*this.zpp_inner.d,n);else r=_t.get(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*this.zpp_inner.a+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*this.zpp_inner.b+this.zpp_inner.tx,function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*this.zpp_inner.c+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*this.zpp_inner.d+this.zpp_inner.ty,n);if(e.zpp_inner.weak){e.dispose();true}else false;return r},inverseTransform:function(e,t,n){if(n==null)n=false;if(t==null)t=false;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot transform null Vec2");if(this.singular())throw new g("Error: Matrix is singular and inverse transformation cannot be performed");var r=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);var i;if(t)i=_t.get((function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*this.zpp_inner.d-function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*this.zpp_inner.b)*r,(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*this.zpp_inner.a-function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*this.zpp_inner.c)*r,n);else{var s;s=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)-this.zpp_inner.tx;var o;o=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)-this.zpp_inner.ty;i=_t.get((s*this.zpp_inner.d-o*this.zpp_inner.b)*r,(o*this.zpp_inner.a-s*this.zpp_inner.c)*r,n)}if(e.zpp_inner.weak){e.dispose();true}else false;return i},toString:function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},equiorthogonal:function(){if(this.singular())return false;else{var e=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(e*e<N.epsilon){var t=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-this.zpp_inner.c*this.zpp_inner.c-this.zpp_inner.d*this.zpp_inner.d;return t*t<N.epsilon}else return false}},orthogonal:function(){var e=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(e*e<N.epsilon){var t=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-1;var n=this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d-1;return t*t<N.epsilon&&n*n<N.epsilon}else return false},equiorthogonalise:function(){if(!this.equiorthogonal()){var e=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c);var t=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d);if(e*e<N.epsilon||t*t<N.epsilon)throw new g("Error: Matrix is singular and cannot be "+"equiorthogonal"+"ised");var n=(e+t)/2;e=n/e;t=n/t;var r=this;r.set_a(r.zpp_inner.a*e);var i=this;i.set_c(i.zpp_inner.c*e);var s=this;s.set_b(s.zpp_inner.b*t);var o=this;o.set_d(o.zpp_inner.d*t);var u=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;var a=.25*Math.PI-.5*Math.acos(u/(n*n));if(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c>0)a=-a;var f=Math.sin(a);var l=Math.cos(a);var c=this.zpp_inner.a*l-this.zpp_inner.c*f;var h=this.zpp_inner.b*l+this.zpp_inner.d*f;this.set_c(this.zpp_inner.c*l+this.zpp_inner.a*f);if(c!=c)throw new g("Error: Mat23::"+"a"+" cannot be NaN");this.zpp_inner.a=c;this.zpp_inner.invalidate();this.zpp_inner.a;this.set_d(this.zpp_inner.d*l-this.zpp_inner.b*f);if(h!=h)throw new g("Error: Mat23::"+"b"+" cannot be NaN");this.zpp_inner.b=h;this.zpp_inner.invalidate();this.zpp_inner.b;this.zpp_inner.invalidate()}return this},orthogonalise:function(){if(!this.orthogonal()){var e=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c);var t=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d);if(e*e<N.epsilon||t*t<N.epsilon)throw new g("Error: Matrix is singular and cannot be "+"orthogonal"+"ised");var n=1;e=n/e;t=n/t;var r=this;r.set_a(r.zpp_inner.a*e);var i=this;i.set_c(i.zpp_inner.c*e);var s=this;s.set_b(s.zpp_inner.b*t);var o=this;o.set_d(o.zpp_inner.d*t);var u=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;var a=.25*Math.PI-.5*Math.acos(u/(n*n));if(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c>0)a=-a;var f=Math.sin(a);var l=Math.cos(a);var c=this.zpp_inner.a*l-this.zpp_inner.c*f;var h=this.zpp_inner.b*l+this.zpp_inner.d*f;this.set_c(this.zpp_inner.c*l+this.zpp_inner.a*f);if(c!=c)throw new g("Error: Mat23::"+"a"+" cannot be NaN");this.zpp_inner.a=c;this.zpp_inner.invalidate();this.zpp_inner.a;this.set_d(this.zpp_inner.d*l-this.zpp_inner.b*f);if(h!=h)throw new g("Error: Mat23::"+"b"+" cannot be NaN");this.zpp_inner.b=h;this.zpp_inner.invalidate();this.zpp_inner.b;this.zpp_inner.invalidate()}return this},__class__:Ct};var kt=function(e,t){this.zpp_inner=null;if(e<=0||t<=0)throw new g("Error: MatMN::dimensions cannot be < 1");this.zpp_inner=new pr(e,t);this.zpp_inner.outer=this};kt.__name__=true;kt.prototype={get_rows:function(){return this.zpp_inner.m},get_cols:function(){return this.zpp_inner.n},x:function(e,t){if(e<0||t<0||e>=this.zpp_inner.m||t>=this.zpp_inner.n)throw new g("Error: MatMN indices out of range");return this.zpp_inner.x[e*this.zpp_inner.n+t]},setx:function(e,t,n){if(e<0||t<0||e>=this.zpp_inner.m||t>=this.zpp_inner.n)throw new g("Error: MatMN indices out of range");return this.zpp_inner.x[e*this.zpp_inner.n+t]=n},toString:function(){var e="{ ";var t=true;var n=0;var r=this.zpp_inner.m;while(n<r){var i=n++;if(!t)e+="; ";t=false;var s=0;var o=this.zpp_inner.n;while(s<o){var u=s++;e+=function(e){var t;if(i<0||u<0||i>=e.zpp_inner.m||u>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");t=e.zpp_inner.x[i*e.zpp_inner.n+u];return t}(this)+" "}}e+="}";return e},transpose:function(){var e=new kt(this.zpp_inner.n,this.zpp_inner.m);var t=0;var n=this.zpp_inner.m;while(t<n){var r=t++;var i=0;var s=this.zpp_inner.n;while(i<s){var o=i++;e.setx(o,r,function(e){var t;if(r<0||o<0||r>=e.zpp_inner.m||o>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");t=e.zpp_inner.x[r*e.zpp_inner.n+o];return t}(this))}}return e},mul:function(e){var t=e;if(this.zpp_inner.n!=t.zpp_inner.m)throw new g("Error: Matrix dimensions aren't compatible");var n=new kt(this.zpp_inner.m,t.zpp_inner.n);var r=0;var i=this.zpp_inner.m;while(r<i){var s=r++;var o=0;var u=t.zpp_inner.n;while(o<u){var a=o++;var f=0;var l=0;var c=this.zpp_inner.n;while(l<c){var h=l++;f+=function(e){var t;if(s<0||h<0||s>=e.zpp_inner.m||h>=e.zpp_inner.n)throw new g("Error: MatMN indices out of range");t=e.zpp_inner.x[s*e.zpp_inner.n+h];return t}(this)*function(e){var n;if(h<0||a<0||h>=t.zpp_inner.m||a>=t.zpp_inner.n)throw new g("Error: MatMN indices out of range");n=t.zpp_inner.x[h*t.zpp_inner.n+a];return n}(this)}if(s<0||a<0||s>=n.zpp_inner.m||a>=n.zpp_inner.n)throw new g("Error: MatMN indices out of range");n.zpp_inner.x[s*n.zpp_inner.n+a]=f}}return n},__class__:kt};var Lt=function(e,t){this.zpp_inner=null;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner=new gr;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Ray::origin cannot be null");this.zpp_inner.origin.set(e);this.zpp_inner.origin;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(t==null)throw new g("Error: Ray::direction cannot be null");this.zpp_inner.direction.set(t);this.zpp_inner.zip_dir=true;this.zpp_inner.direction;this.zpp_inner.maxdist=Infinity};Lt.__name__=true;Lt.fromSegment=function(e,t){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Ray::fromSegment::start is null");if(t==null)throw new g("Error: Ray::fromSegment::end is null");var n=t.sub(e,true);var r=new Lt(e,n);r.set_maxDistance(Math.sqrt(_r.vec_dsq(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this),function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.x;return n}(this),function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.y;return n}(this))));if(e.zpp_inner.weak){e.dispose();true}else false;if(t.zpp_inner.weak){t.dispose();true}else false;return r};Lt.prototype={get_userData:function(){if(this.zpp_inner.userData==null)this.zpp_inner.userData={};return this.zpp_inner.userData},get_origin:function(){return this.zpp_inner.origin},set_origin:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Ray::origin cannot be null");this.zpp_inner.origin.set(e);return this.zpp_inner.origin},get_direction:function(){return this.zpp_inner.direction},set_direction:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Ray::direction cannot be null");this.zpp_inner.direction.set(e);this.zpp_inner.zip_dir=true;return this.zpp_inner.direction},get_maxDistance:function(){return this.zpp_inner.maxdist},set_maxDistance:function(e){if(e!=e)throw new g("Error: maxDistance cannot be NaN");this.zpp_inner.maxdist=e;return this.zpp_inner.maxdist},aabb:function(){return this.zpp_inner.rayAABB().wrapper()},at:function(e,t){if(t==null)t=false;this.zpp_inner.validate_dir();return _t.get(this.zpp_inner.origin.get_x()+e*this.zpp_inner.dirx,this.zpp_inner.origin.get_y()+e*this.zpp_inner.diry,t)},copy:function(){var e=new Lt(this.zpp_inner.origin,this.zpp_inner.direction);e.set_maxDistance(this.zpp_inner.maxdist);return e},__class__:Lt};var At=function(){this.zpp_inner=null;if(!tr.internal)throw new g("Error: RayResult cannot be instantiated derp!")};At.__name__=true;At.prototype={get_normal:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");return this.zpp_inner.normal},get_distance:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");return this.zpp_inner.toiDistance},get_inner:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");return this.zpp_inner.inner},get_shape:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");return this.zpp_inner.shape},dispose:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");this.zpp_inner.free()},toString:function(){if(this.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");return"{ shape: "+h.string(function(e){var t;if(e.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=e.zpp_inner.shape;return t}(this))+" distance: "+function(e){var t;if(e.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=e.zpp_inner.toiDistance;return t}(this)+" ?inner: "+h.string(function(e){var t;if(e.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=e.zpp_inner.inner;return t}(this))+" }"},__class__:At};var Ot=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!Ss.internal)throw new g("Error: Cannot instantiate "+"RayResult"+"Iterator derp!")};Ot.__name__=true;Ot.get=function(e){var t;if(Ot.zpp_pool==null){Ss.internal=true;var n=new Ot;Ss.internal=false;t=n}else{var r=Ot.zpp_pool;Ot.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};Ot.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=Ot.zpp_pool;Ot.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:Ot};var Mt=function(){this.zpp_inner=null;this.zpp_inner=new Ss;this.zpp_inner.outer=this};Mt.__name__=true;Mt.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new Mt;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};Mt.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"RayResult"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"RayResult"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}else this.zpp_inner.inner.add(e);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"RayResult"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"RayResult"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"RayResult"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"RayResult"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return Ot.get(this)},copy:function(e){if(e==null)e=false;var t=new Mt;var n;this.zpp_inner.valmod();n=Ot.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"RayResult"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=Ot.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=Ot.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=Ot.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=Ot.zpp_pool;Ot.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:Mt};var _t=function(e,t){if(t==null)t=0;if(e==null)e=0;this.zpp_pool=null;this.zpp_inner=null;if(e!=e||t!=t)throw new g("Error: Vec2 components cannot be NaN");this.zpp_inner=Or.get(e,t,null);this.zpp_inner.outer=this};_t.__name__=true;_t.weak=function(e,t){if(t==null)t=0;if(e==null)e=0;return _t.get(e,t,true)};_t.get=function(e,t,n){if(n==null)n=false;if(t==null)t=0;if(e==null)e=0;if(e!=e||t!=t)throw new g("Error: Vec2 components cannot be NaN");var r;if(Os.poolVec2==null)r=new _t;else{r=Os.poolVec2;Os.poolVec2=r.zpp_pool;r.zpp_pool=null;r.zpp_disp=false;if(r==Os.nextVec2)Os.nextVec2=null}if(r.zpp_inner==null){r.zpp_inner=Or.get(e,t,null);r.zpp_inner.outer=r}else{if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");r.zpp_inner.immutable();if(e!=e||t!=t)throw new g("Error: Vec2 components cannot be NaN");if(!(function(e){var t;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");r.zpp_inner.validate();t=r.zpp_inner.x;return t}(this)==e&&function(e){var t;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");r.zpp_inner.validate();t=r.zpp_inner.y;return t}(this)==t)){r.zpp_inner.x=e;r.zpp_inner.y=t;r.zpp_inner.invalidate()}r}r.zpp_inner.weak=n;return r};_t.fromPolar=function(e,t,n){if(n==null)n=false;if(e!=e)throw new g("Error: Vec2::length cannot be NaN");if(t!=t)throw new g("Error: Vec2::angle cannot be NaN");return _t.get(e*Math.cos(t),e*Math.sin(t),n)};_t.dsq=function(e,t){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null||t==null)throw new g("Error: Cannot compute squared distance between null Vec2");var n=_r.vec_dsq(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this),function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.x;return n}(this),function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.y;return n}(this));if(e.zpp_inner.weak){e.dispose();true}else false;if(t.zpp_inner.weak){t.dispose();true}else false;return n};_t.distance=function(e,t){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null||t==null)throw new g("Error: Cannot compute squared distance between null Vec2");var n=Math.sqrt(_r.vec_dsq(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this),function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.x;return n}(this),function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.y;return n}(this)));if(e.zpp_inner.weak){e.dispose();true}else false;if(t.zpp_inner.weak){t.dispose();true}else false;return n};_t.prototype={dispose:function(){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(this.zpp_inner._inuse)throw new g("Error: This Vec2 is not disposable");var e=this.zpp_inner;this.zpp_inner.outer=null;this.zpp_inner=null;var t=this;t.zpp_pool=null;if(Os.nextVec2!=null)Os.nextVec2.zpp_pool=t;else Os.poolVec2=t;Os.nextVec2=t;t.zpp_disp=true;var n=e;if(n.outer!=null){n.outer.zpp_inner=null;n.outer=null}n._isimmutable=null;n._validate=null;n._invalidate=null;n.next=Or.zpp_pool;Or.zpp_pool=n},copy:function(e){if(e==null)e=false;if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");return _t.get(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this),function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this),e)},get_x:function(){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.x},set_x:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)!=e){if(e!=e)throw new g("Error: Vec2::"+"x"+" cannot be NaN");this.zpp_inner.x=e;this.zpp_inner.invalidate()}if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.x},get_y:function(){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.y},set_y:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)!=e){if(e!=e)throw new g("Error: Vec2::"+"y"+" cannot be NaN");this.zpp_inner.y=e;this.zpp_inner.invalidate()}if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.y},get_length:function(){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");return Math.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this))},set_length:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(e!=e)throw new g("Error: Vec2::length cannot be NaN");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)==0)throw new g("Error: Cannot set length of a zero vector");var t=e/Math.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this));var n=this;n.set_x(function(e){var t;if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");n.zpp_inner.validate();t=n.zpp_inner.x;return t}(this)*t);var r=this;r.set_y(function(e){var t;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");r.zpp_inner.validate();t=r.zpp_inner.y;return t}(this)*t);this.zpp_inner.invalidate();if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");return Math.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this))},lsq:function(){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");return function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)},set:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(e==null)throw new g("Error: Cannot assign null Vec2");var t=this.setxy(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this));if(e.zpp_inner.weak){e.dispose();true}else false;return t},setxy:function(e,t){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(e!=e||t!=t)throw new g("Error: Vec2 components cannot be NaN");if(!(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)==e&&function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)==t)){this.zpp_inner.x=e;this.zpp_inner.y=t;this.zpp_inner.invalidate()}return this},get_angle:function(){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)==function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)&&function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)==0)return 0;else return Math.atan2(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this),function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this))},set_angle:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(e!=e)throw new g("Error: Vec2::angle cannot be NaN");var t;if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t=Math.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this));this.setxy(t*Math.cos(e),t*Math.sin(e));if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)==function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)&&function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)==0)return 0;else return Math.atan2(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this),function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this))},rotate:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(e!=e)throw new g("Error: Cannot rotate Vec2 by NaN");if(e%(Math.PI*2)!=0){var t=Math.sin(e);var n=Math.cos(e);var r=n*this.zpp_inner.x-t*this.zpp_inner.y;this.zpp_inner.y=this.zpp_inner.x*t+this.zpp_inner.y*n;this.zpp_inner.x=r;this.zpp_inner.invalidate()}return this},reflect:function(e,t){if(t==null)t=false;if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t=Math.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(e)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(e)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(e)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(e));return t}(this)==0)throw new g("Error: Cannot reflect in zero vector");var n=function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t=_t.get(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(e),function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(e),true);return t}(this).normalise();var r=e.sub(n.muleq(2*n.dot(e)),t);if(e.zpp_inner.weak){e.dispose();true}else false;return r},normalise:function(){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t=Math.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(e)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(e)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(e)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(e));return t}(this)==0)throw new g("Error: Cannot normalise vector of length 0");var e;e=function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this);var t=1/Math.sqrt(e);var n=t;var r=this;r.set_x(function(e){var t;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");r.zpp_inner.validate();t=r.zpp_inner.x;return t}(this)*n);var i=this;i.set_y(function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.y;return t}(this)*n);this.zpp_inner.invalidate();return this},unit:function(e){if(e==null)e=false;if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t=Math.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(e)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(e)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(e)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(e));return t}(this)==0)throw new g("Error: Cannot normalise vector of length 0");var t=1/As.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this));return _t.get(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*t,function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*t,e)},add:function(e,t){if(t==null)t=false;if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot add null vectors");var n=_t.get(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this),t);if(e.zpp_inner.weak){e.dispose();true}else false;return n},addMul:function(e,t,n){if(n==null)n=false;if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot add null vectors");var r=_t.get(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*t,function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*t,n);if(e.zpp_inner.weak){e.dispose();true}else false;return r},sub:function(e,t){if(t==null)t=false;if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot subtract null vectors");var n=_t.get(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)-function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)-function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this),t);if(e.zpp_inner.weak){e.dispose();true}else false;return n},mul:function(e,t){if(t==null)t=false;if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e!=e)throw new g("Error: Cannot multiply with NaN");return _t.get(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*e,function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*e,t)},addeq:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(e==null)throw new g("Error: Cannot add null vectors");this.setxy(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this));if(e.zpp_inner.weak){e.dispose();true}else false;return this},subeq:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(e==null)throw new g("Error: Cannot subtract null vectors");this.setxy(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)-function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)-function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this));if(e.zpp_inner.weak){e.dispose();true}else false;return this},muleq:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.immutable();if(e!=e)throw new g("Error: Cannot multiply with NaN");return this.setxy(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*e,function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*e)},dot:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot take dot product with null vector");var t;t=function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this);if(e.zpp_inner.weak){e.dispose();true}else false;return t},cross:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot take cross product with null vector");var t;t=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)-function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this);if(e.zpp_inner.weak){e.dispose();true}else false;return t},perp:function(e){if(e==null)e=false;if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");return _t.get(-function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this),function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this),e)},toString:function(){if(this.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:_t};var Dt=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!ws.internal)throw new g("Error: Cannot instantiate "+"Vec2"+"Iterator derp!")};Dt.__name__=true;Dt.get=function(e){var t;if(Dt.zpp_pool==null){ws.internal=true;var n=new Dt;ws.internal=false;t=n}else{var r=Dt.zpp_pool;Dt.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};Dt.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.zpp_gl();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=Dt.zpp_pool;Dt.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:Dt};var Pt=function(){this.zpp_inner=null;this.zpp_inner=new ws;this.zpp_inner.outer=this};Pt.__name__=true;Pt.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new Pt;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};Pt.prototype={get_length:function(){return this.zpp_gl()},zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},has:function(e){this.zpp_vm();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_vm();if(e<0||e>=this.zpp_gl())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.zpp_gl()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");this.zpp_inner.modify_test();this.zpp_vm();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.empty())this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");this.zpp_inner.modify_test();this.zpp_vm();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.empty())this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");this.zpp_inner.modify_test();if(this.empty())throw new g("Error: Cannot remove from empty list");this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.zpp_gl()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.wrapper();return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");this.zpp_inner.modify_test();if(this.empty())throw new g("Error: Cannot remove from empty list");this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.zpp_gl()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.wrapper();return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");this.zpp_inner.modify_test();this.zpp_vm();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!this.empty())this.pop();else while(!this.empty())this.shift()},empty:function(){return this.zpp_gl()==0},iterator:function(){this.zpp_vm();return Dt.get(this)},copy:function(e){if(e==null)e=false;var t=new Pt;var n=this.iterator();while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t=_t.get(function(e){var t;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");r.zpp_inner.validate();t=r.zpp_inner.x;return t}(e),function(e){var t;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");r.zpp_inner.validate();t=r.zpp_inner.y;return t}(e),false);return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t=e.iterator();while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n))this.add(n)}},toString:function(){var e="[";var t=true;var n=this.iterator();while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t=this.iterator();while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=Dt.zpp_pool;Dt.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.zpp_gl()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:Pt};var Ht=function(e,t,n){if(n==null)n=0;if(t==null)t=0;if(e==null)e=0;this.zpp_pool=null;this.zpp_inner=null;this.zpp_inner=new Mr;this.zpp_inner.outer=this;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new g("Error: Vec3 is immutable");this.zpp_inner.x=e;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();this.zpp_inner.x;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new g("Error: Vec3 is immutable");this.zpp_inner.y=t;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();this.zpp_inner.y;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new g("Error: Vec3 is immutable");this.zpp_inner.z=n;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();this.zpp_inner.z};Ht.__name__=true;Ht.get=function(e,t,n){if(n==null)n=0;if(t==null)t=0;if(e==null)e=0;var r;if(Os.poolVec3==null)r=new Ht;else{r=Os.poolVec3;Os.poolVec3=r.zpp_pool;r.zpp_pool=null;r.zpp_disp=false;if(r==Os.nextVec3)Os.nextVec3=null}r.setxyz(e,t,n);r.zpp_inner.immutable=false;r.zpp_inner._validate=null;return r};Ht.prototype={get_x:function(){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.x},set_x:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new g("Error: Vec3 is immutable");this.zpp_inner.x=e;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.x},get_y:function(){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.y},set_y:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new g("Error: Vec3 is immutable");this.zpp_inner.y=e;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.y},get_z:function(){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.z},set_z:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new g("Error: Vec3 is immutable");this.zpp_inner.z=e;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();return this.zpp_inner.z},dispose:function(){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new g("Error: This Vec3 is not disposable");var e=this;e.zpp_pool=null;if(Os.nextVec3!=null)Os.nextVec3.zpp_pool=e;else Os.poolVec3=e;Os.nextVec3=e;e.zpp_disp=true},get_length:function(){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");return Math.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(this))},set_length:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(e!=e)throw new g("Error: Vec3::length cannot be NaN");if(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(this)==0)throw new g("Error: Cannot set length of a zero vector");var t;t=e/function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");t=Math.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(e)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(e)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(e)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(e)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(e)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(e));return t}(this);var n=t;var r=this;r.set_x(function(e){var t;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");r.zpp_inner.validate();t=r.zpp_inner.x;return t}(this)*n);var i=this;i.set_y(function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.y;return t}(this)*n);var s=this;s.set_z(function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.z;return t}(this)*t);if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");return Math.sqrt(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(this))},lsq:function(){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");return function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(this)*function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(this)},set:function(e){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot assign null Vec3");return this.setxyz(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.z;return n}(this))},setxyz:function(e,t,n){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new g("Error: Vec3 is immutable");this.zpp_inner.x=e;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();this.zpp_inner.x;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new g("Error: Vec3 is immutable");this.zpp_inner.y=t;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();this.zpp_inner.y;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new g("Error: Vec3 is immutable");this.zpp_inner.z=n;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");this.zpp_inner.validate();this.zpp_inner.z;return this},xy:function(e){if(e==null)e=false;if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");return _t.get(function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this),function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this),e)},toString:function(){if(this.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");return"{ x: "+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.x;return t}(this)+" y: "+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.y;return t}(this)+" z: "+function(e){var t;if(e.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");e.zpp_inner.validate();t=e.zpp_inner.z;return t}(this)+" }"},__class__:Ht};var Bt=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"Winding"+" derp!")};Bt.__name__=true;Bt.get_UNDEFINED=function(){if(Tn.Winding_UNDEFINED==null){Tn.internal=true;Tn.Winding_UNDEFINED=new Bt;Tn.internal=false}return Tn.Winding_UNDEFINED};Bt.get_CLOCKWISE=function(){if(Tn.Winding_CLOCKWISE==null){Tn.internal=true;Tn.Winding_CLOCKWISE=new Bt;Tn.internal=false}return Tn.Winding_CLOCKWISE};Bt.get_ANTICLOCKWISE=function(){if(Tn.Winding_ANTICLOCKWISE==null){Tn.internal=true;Tn.Winding_ANTICLOCKWISE=new Bt;Tn.internal=false}return Tn.Winding_ANTICLOCKWISE};Bt.prototype={toString:function(){if(this==function(e){var t;if(Tn.Winding_UNDEFINED==null){Tn.internal=true;Tn.Winding_UNDEFINED=new Bt;Tn.internal=false}t=Tn.Winding_UNDEFINED;return t}(this))return"UNDEFINED";else if(this==function(e){var t;if(Tn.Winding_CLOCKWISE==null){Tn.internal=true;Tn.Winding_CLOCKWISE=new Bt;Tn.internal=false}t=Tn.Winding_CLOCKWISE;return t}(this))return"CLOCKWISE";else if(this==function(e){var t;if(Tn.Winding_ANTICLOCKWISE==null){Tn.internal=true;Tn.Winding_ANTICLOCKWISE=new Bt;Tn.internal=false}t=Tn.Winding_ANTICLOCKWISE;return t}(this))return"ANTICLOCKWISE";else return""},__class__:Bt};var jt=function(){this.zpp_inner_i=null;if(!jt.zpp_internalAlloc)throw new g("Error: Cannot instantiate an Interactor, only Shape/Body/Compound")};jt.__name__=true;jt.prototype={get_id:function(){return this.zpp_inner_i.id},get_userData:function(){if(this.zpp_inner_i.userData==null)this.zpp_inner_i.userData={};return this.zpp_inner_i.userData},isShape:function(){return this.zpp_inner_i.ishape!=null},isBody:function(){return this.zpp_inner_i.ibody!=null},isCompound:function(){return this.zpp_inner_i.icompound!=null},get_castShape:function(){if(this.zpp_inner_i.ishape!=null)return this.zpp_inner_i.ishape.outer;else return null},get_castBody:function(){if(this.zpp_inner_i.ibody!=null)return this.zpp_inner_i.ibody.outer;else return null},get_castCompound:function(){if(this.zpp_inner_i.icompound!=null)return this.zpp_inner_i.icompound.outer;else return null},get_group:function(){if(this.zpp_inner_i.group==null)return null;else return this.zpp_inner_i.group.outer},set_group:function(e){this.zpp_inner_i.immutable_midstep("Interactor::group");this.zpp_inner_i.setGroup(e==null?null:e.zpp_inner);if(this.zpp_inner_i.group==null)return null;else return this.zpp_inner_i.group.outer},get_cbTypes:function(){if(this.zpp_inner_i.wrap_cbTypes==null)this.zpp_inner_i.setupcbTypes();return this.zpp_inner_i.wrap_cbTypes},toString:function(){return""},__class__:jt};var Ft=function(e,t){this.debugDraw=true;this.zpp_inner=null;jt.zpp_internalAlloc=true;jt.call(this);jt.zpp_internalAlloc=false;this.zpp_inner=new Pr;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;if(t!=null){if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();this.zpp_inner.posx=t.zpp_inner.x;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();this.zpp_inner.posy=t.zpp_inner.y}else{this.zpp_inner.posx=0;this.zpp_inner.posy=0}this.set_type(e==null?function(e){var t;if(Tn.BodyType_DYNAMIC==null){Tn.internal=true;Tn.BodyType_DYNAMIC=new Rt;Tn.internal=false}t=Tn.BodyType_DYNAMIC;return t}(this):e);if(t!=null){if(t.zpp_inner.weak){t.dispose();true}else false}this.zpp_inner_i.insert_cbtype(xn.ANY_BODY.zpp_inner)};Ft.__name__=true;Ft.__super__=jt;Ft.prototype=n(jt.prototype,{get_type:function(){return Pr.types[this.zpp_inner.type]},set_type:function(e){this.zpp_inner.immutable_midstep("Body::type");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(Pr.types[this.zpp_inner.type]!=e){if(e==null)throw new g("Error: Cannot use null BodyType");var t;if(e==function(e){var t;if(Tn.BodyType_DYNAMIC==null){Tn.internal=true;Tn.BodyType_DYNAMIC=new Rt;Tn.internal=false}t=Tn.BodyType_DYNAMIC;return t}(this))t=2;else if(e==function(e){var t;if(Tn.BodyType_KINEMATIC==null){Tn.internal=true;Tn.BodyType_KINEMATIC=new Rt;Tn.internal=false}t=Tn.BodyType_KINEMATIC;return t}(this))t=3;else t=1;if(t==1&&this.zpp_inner.space!=null){this.zpp_inner.velx=0;this.zpp_inner.vely=0;this.zpp_inner.angvel=0}this.zpp_inner.invalidate_type();if(this.zpp_inner.space!=null)this.zpp_inner.space.transmitType(this.zpp_inner,t);else this.zpp_inner.type=t}return Pr.types[this.zpp_inner.type]},get_isBullet:function(){return this.zpp_inner.bulletEnabled},set_isBullet:function(e){this.zpp_inner.bulletEnabled=e;return this.zpp_inner.bulletEnabled},get_disableCCD:function(){return this.zpp_inner.disableCCD},set_disableCCD:function(e){this.zpp_inner.disableCCD=e;return this.zpp_inner.disableCCD},integrate:function(e){if(e!=e)throw new g("Cannot integrate by NaN time");this.zpp_inner.immutable_midstep("Body::space");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(e==0)return this;var t=this.zpp_inner;t.sweepTime=0;t.sweep_angvel=t.angvel;t.sweepIntegrate(e);t.invalidate_pos();t.invalidate_rot();t.sweepTime=0;return this},isStatic:function(){return this.zpp_inner.type==1},isDynamic:function(){return this.zpp_inner.type==2},isKinematic:function(){return this.zpp_inner.type==3},get_shapes:function(){return this.zpp_inner.wrap_shapes},get_compound:function(){if(this.zpp_inner.compound==null)return null;else return this.zpp_inner.compound.outer},set_compound:function(e){if((this.zpp_inner.compound==null?null:this.zpp_inner.compound.outer)!=e){if((this.zpp_inner.compound==null?null:this.zpp_inner.compound.outer)!=null)(this.zpp_inner.compound==null?null:this.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(this);if(e!=null)e.zpp_inner.wrap_bodies.add(this)}if(this.zpp_inner.compound==null)return null;else return this.zpp_inner.compound.outer},get_space:function(){if(this.zpp_inner.space==null)return null;else return this.zpp_inner.space.outer},set_space:function(e){if(this.zpp_inner.compound!=null)throw new g("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");this.zpp_inner.immutable_midstep("Body::space");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=e){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)this.zpp_inner.component.woken=false;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)(this.zpp_inner.space==null?null:this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this);if(e!=null)e.zpp_inner.wrap_bodies.add(this)}if(this.zpp_inner.space==null)return null;else return this.zpp_inner.space.outer},get_arbiters:function(){if(this.zpp_inner.wrap_arbiters==null)this.zpp_inner.wrap_arbiters=ks.get(this.zpp_inner.arbiters,true);return this.zpp_inner.wrap_arbiters},get_isSleeping:function(){if(this.zpp_inner.space==null)throw new g("Error: isSleeping makes no sense if the object is not contained within a Space");return this.zpp_inner.component.sleeping},get_constraints:function(){if(this.zpp_inner.wrap_constraints==null)this.zpp_inner.wrap_constraints=ds.get(this.zpp_inner.constraints,true);return this.zpp_inner.wrap_constraints},copy:function(){if(this.zpp_inner.world)throw new g("Error: Space::world cannot be copied");return this.zpp_inner.copy()},get_position:function(){if(this.zpp_inner.wrap_pos==null)this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},set_position:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Body::"+"position"+" cannot be null");(function(e){var t;if(e.zpp_inner.wrap_pos==null)e.zpp_inner.setupPosition();t=e.zpp_inner.wrap_pos;return t})(this).set(e);if(this.zpp_inner.wrap_pos==null)this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},get_velocity:function(){if(this.zpp_inner.wrap_vel==null)this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},set_velocity:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Body::"+"velocity"+" cannot be null");(function(e){var t;if(e.zpp_inner.wrap_vel==null)e.zpp_inner.setupVelocity();t=e.zpp_inner.wrap_vel;return t})(this).set(e);if(this.zpp_inner.wrap_vel==null)this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},setVelocityFromTarget:function(e,t,n){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Cannot set velocity for null target position");if(n==0)throw new g("deltaTime cannot be 0 for setVelocityFromTarget");var r=1/n;(function(e){var t;if(e.zpp_inner.wrap_vel==null)e.zpp_inner.setupVelocity();t=e.zpp_inner.wrap_vel;return t})(this).set(e.sub(function(e){var t;if(e.zpp_inner.wrap_pos==null)e.zpp_inner.setupPosition();t=e.zpp_inner.wrap_pos;return t}(this),true).muleq(r));this.set_angularVel((t-this.zpp_inner.rot)*r);if(e.zpp_inner.weak){e.dispose();true}else false;return this},get_kinematicVel:function(){if(this.zpp_inner.wrap_kinvel==null)this.zpp_inner.setupkinvel();return this.zpp_inner.wrap_kinvel},set_kinematicVel:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Body::"+"kinematicVel"+" cannot be null");(function(e){var t;if(e.zpp_inner.wrap_kinvel==null)e.zpp_inner.setupkinvel();t=e.zpp_inner.wrap_kinvel;return t})(this).set(e);if(this.zpp_inner.wrap_kinvel==null)this.zpp_inner.setupkinvel();return this.zpp_inner.wrap_kinvel},get_surfaceVel:function(){if(this.zpp_inner.wrap_svel==null)this.zpp_inner.setupsvel();return this.zpp_inner.wrap_svel},set_surfaceVel:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Body::"+"surfaceVel"+" cannot be null");(function(e){var t;if(e.zpp_inner.wrap_svel==null)e.zpp_inner.setupsvel();t=e.zpp_inner.wrap_svel;return t})(this).set(e);if(this.zpp_inner.wrap_svel==null)this.zpp_inner.setupsvel();return this.zpp_inner.wrap_svel},get_force:function(){if(this.zpp_inner.wrap_force==null)this.zpp_inner.setupForce();return this.zpp_inner.wrap_force},set_force:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Body::"+"force"+" cannot be null");(function(e){var t;if(e.zpp_inner.wrap_force==null)e.zpp_inner.setupForce();t=e.zpp_inner.wrap_force;return t})(this).set(e);if(this.zpp_inner.wrap_force==null)this.zpp_inner.setupForce();return this.zpp_inner.wrap_force},get_constraintVelocity:function(){if(this.zpp_inner.wrapcvel==null)this.zpp_inner.setup_cvel();return this.zpp_inner.wrapcvel},get_rotation:function(){return this.zpp_inner.rot},set_rotation:function(e){this.zpp_inner.immutable_midstep("Body::rotation");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(this.zpp_inner.type==1&&this.zpp_inner.space!=null)throw new g("Error: Static objects cannot be rotated once inside a Space");if(this.zpp_inner.rot!=e){if(e!=e)throw new g("Error: Body::rotation cannot be NaN");this.zpp_inner.rot=e;this.zpp_inner.invalidate_rot();this.zpp_inner.wake()}return this.zpp_inner.rot},get_angularVel:function(){return this.zpp_inner.angvel},set_angularVel:function(e){if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(this.zpp_inner.angvel!=e){if(e!=e)throw new g("Error: Body::angularVel cannot be NaN");if(this.zpp_inner.type==1)throw new g("Error: A static object cannot be given a velocity");this.zpp_inner.angvel=e;this.zpp_inner.wake()}return this.zpp_inner.angvel},get_kinAngVel:function(){return this.zpp_inner.kinangvel},set_kinAngVel:function(e){if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(this.zpp_inner.kinangvel!=e){if(e!=e)throw new g("Error: Body::kinAngVel cannot be NaN");this.zpp_inner.kinangvel=e;this.zpp_inner.wake()}return this.zpp_inner.kinangvel},get_torque:function(){return this.zpp_inner.torque},set_torque:function(e){if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(!(this.zpp_inner.type==2))throw new g("Error: Non-dynamic body cannot have torque applied.");if(e!=e)throw new g("Error: Body::torque cannot be NaN");if(this.zpp_inner.torque!=e){this.zpp_inner.torque=e;this.zpp_inner.wake()}return this.zpp_inner.torque},get_bounds:function(){if(this.zpp_inner.world)throw new g("Error: Space::world has no bounds");return this.zpp_inner.aabb.wrapper()},get_allowMovement:function(){return!this.zpp_inner.nomove},set_allowMovement:function(e){this.zpp_inner.immutable_midstep("Body::"+(e==null?"null":""+e));if(!this.zpp_inner.nomove!=e){this.zpp_inner.nomove=!e;this.zpp_inner.invalidate_mass()}return!this.zpp_inner.nomove},get_allowRotation:function(){return!this.zpp_inner.norotate},set_allowRotation:function(e){this.zpp_inner.immutable_midstep("Body::"+(e==null?"null":""+e));if(!this.zpp_inner.norotate!=e){this.zpp_inner.norotate=!e;this.zpp_inner.invalidate_inertia()}return!this.zpp_inner.norotate},get_massMode:function(){return[function(e){var t;if(Tn.MassMode_DEFAULT==null){Tn.internal=true;Tn.MassMode_DEFAULT=new Qt;Tn.internal=false}t=Tn.MassMode_DEFAULT;return t}(this),function(e){var t;if(Tn.MassMode_FIXED==null){Tn.internal=true;Tn.MassMode_FIXED=new Qt;Tn.internal=false}t=Tn.MassMode_FIXED;return t}(this)][this.zpp_inner.massMode]},set_massMode:function(e){this.zpp_inner.immutable_midstep("Body::massMode");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(e==null)throw new g("Error: cannot use null massMode");if(e==function(e){var t;if(Tn.MassMode_DEFAULT==null){Tn.internal=true;Tn.MassMode_DEFAULT=new Qt;Tn.internal=false}t=Tn.MassMode_DEFAULT;return t}(this))this.zpp_inner.massMode=0;else this.zpp_inner.massMode=1;this.zpp_inner.invalidate_mass();return[function(e){var t;if(Tn.MassMode_DEFAULT==null){Tn.internal=true;Tn.MassMode_DEFAULT=new Qt;Tn.internal=false}t=Tn.MassMode_DEFAULT;return t}(this),function(e){var t;if(Tn.MassMode_FIXED==null){Tn.internal=true;Tn.MassMode_FIXED=new Qt;Tn.internal=false}t=Tn.MassMode_FIXED;return t}(this)][this.zpp_inner.massMode]},get_constraintMass:function(){if(!this.zpp_inner.world)this.zpp_inner.validate_mass();return this.zpp_inner.smass},get_mass:function(){if(this.zpp_inner.world)throw new g("Error: Space::world has no mass");this.zpp_inner.validate_mass();if(this.zpp_inner.massMode==0&&this.zpp_inner.shapes.head==null)throw new g("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");return this.zpp_inner.cmass},set_mass:function(e){this.zpp_inner.immutable_midstep("Body::mass");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(e!=e)throw new g("Error: Mass cannot be NaN");if(e<=0)throw new g("Error: Mass must be strictly positive");if(e>=Infinity)throw new g("Error: Mass cannot be infinite, use allowMovement = false instead");this.zpp_inner.massMode=1;this.zpp_inner.cmass=e;this.zpp_inner.invalidate_mass();if(this.zpp_inner.world)throw new g("Error: Space::world has no mass");this.zpp_inner.validate_mass();if(this.zpp_inner.massMode==0&&this.zpp_inner.shapes.head==null)throw new g("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");return this.zpp_inner.cmass},get_gravMassMode:function(){return[function(e){var t;if(Tn.GravMassMode_DEFAULT==null){Tn.internal=true;Tn.GravMassMode_DEFAULT=new Vt;Tn.internal=false}t=Tn.GravMassMode_DEFAULT;return t}(this),function(e){var t;if(Tn.GravMassMode_FIXED==null){Tn.internal=true;Tn.GravMassMode_FIXED=new Vt;Tn.internal=false}t=Tn.GravMassMode_FIXED;return t}(this),function(e){var t;if(Tn.GravMassMode_SCALED==null){Tn.internal=true;Tn.GravMassMode_SCALED=new Vt;Tn.internal=false}t=Tn.GravMassMode_SCALED;return t}(this)][this.zpp_inner.massMode]},set_gravMassMode:function(e){this.zpp_inner.immutable_midstep("Body::gravMassMode");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(e==null)throw new g("Error: Cannot use null gravMassMode");if(e==function(e){var t;if(Tn.GravMassMode_SCALED==null){Tn.internal=true;Tn.GravMassMode_SCALED=new Vt;Tn.internal=false}t=Tn.GravMassMode_SCALED;return t}(this))this.zpp_inner.gravMassMode=2;else if(e==function(e){var t;if(Tn.GravMassMode_DEFAULT==null){Tn.internal=true;Tn.GravMassMode_DEFAULT=new Vt;Tn.internal=false}t=Tn.GravMassMode_DEFAULT;return t}(this))this.zpp_inner.gravMassMode=0;else this.zpp_inner.gravMassMode=1;this.zpp_inner.invalidate_gravMass();return[function(e){var t;if(Tn.GravMassMode_DEFAULT==null){Tn.internal=true;Tn.GravMassMode_DEFAULT=new Vt;Tn.internal=false}t=Tn.GravMassMode_DEFAULT;return t}(this),function(e){var t;if(Tn.GravMassMode_FIXED==null){Tn.internal=true;Tn.GravMassMode_FIXED=new Vt;Tn.internal=false}t=Tn.GravMassMode_FIXED;return t}(this),function(e){var t;if(Tn.GravMassMode_SCALED==null){Tn.internal=true;Tn.GravMassMode_SCALED=new Vt;Tn.internal=false}t=Tn.GravMassMode_SCALED;return t}(this)][this.zpp_inner.massMode]},get_gravMass:function(){if(this.zpp_inner.world)throw new g("Error: Space::world has no gravMass");this.zpp_inner.validate_gravMass();if(this.zpp_inner.shapes.head==null){if(this.zpp_inner.massMode==0&&this.zpp_inner.gravMassMode!=1)throw new g("Error: Given current mass/gravMass modes; Body::gravMass only makes sense if it contains Shapes")}return this.zpp_inner.gravMass},set_gravMass:function(e){this.zpp_inner.immutable_midstep("Body::gravMass");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(e!=e)throw new g("Error: gravMass cannot be NaN");this.zpp_inner.gravMassMode=1;this.zpp_inner.gravMass=e;this.zpp_inner.invalidate_gravMass();if(this.zpp_inner.world)throw new g("Error: Space::world has no gravMass");this.zpp_inner.validate_gravMass();if(this.zpp_inner.shapes.head==null){if(this.zpp_inner.massMode==0&&this.zpp_inner.gravMassMode!=1)throw new g("Error: Given current mass/gravMass modes; Body::gravMass only makes sense if it contains Shapes")}return this.zpp_inner.gravMass},get_gravMassScale:function(){this.zpp_inner.validate_gravMassScale();if(this.zpp_inner.shapes.head==null){if(this.zpp_inner.massMode==0&&this.zpp_inner.gravMassMode!=2)throw new g("Error: Given current mass/gravMass modes; Body::gravMassScale only makes sense if it contains Shapes")}return this.zpp_inner.gravMassScale},set_gravMassScale:function(e){this.zpp_inner.immutable_midstep("Body::gravMassScale");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(e!=e)throw new g("Error: gravMassScale cannot be NaN");this.zpp_inner.gravMassMode=2;this.zpp_inner.gravMassScale=e;this.zpp_inner.invalidate_gravMassScale();this.zpp_inner.validate_gravMassScale();if(this.zpp_inner.shapes.head==null){if(this.zpp_inner.massMode==0&&this.zpp_inner.gravMassMode!=2)throw new g("Error: Given current mass/gravMass modes; Body::gravMassScale only makes sense if it contains Shapes")}return this.zpp_inner.gravMassScale},get_inertiaMode:function(){return[function(e){var t;if(Tn.InertiaMode_DEFAULT==null){Tn.internal=true;Tn.InertiaMode_DEFAULT=new $t;Tn.internal=false}t=Tn.InertiaMode_DEFAULT;return t}(this),function(e){var t;if(Tn.InertiaMode_FIXED==null){Tn.internal=true;Tn.InertiaMode_FIXED=new $t;Tn.internal=false}t=Tn.InertiaMode_FIXED;return t}(this)][this.zpp_inner.inertiaMode]},set_inertiaMode:function(e){this.zpp_inner.immutable_midstep("Body::inertiaMode");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(e==null)throw new g("Error: Cannot use null InertiaMode");if(e==function(e){var t;if(Tn.InertiaMode_FIXED==null){Tn.internal=true;Tn.InertiaMode_FIXED=new $t;Tn.internal=false}t=Tn.InertiaMode_FIXED;return t}(this))this.zpp_inner.inertiaMode=1;else this.zpp_inner.inertiaMode=0;this.zpp_inner.invalidate_inertia();return[function(e){var t;if(Tn.InertiaMode_DEFAULT==null){Tn.internal=true;Tn.InertiaMode_DEFAULT=new $t;Tn.internal=false}t=Tn.InertiaMode_DEFAULT;return t}(this),function(e){var t;if(Tn.InertiaMode_FIXED==null){Tn.internal=true;Tn.InertiaMode_FIXED=new $t;Tn.internal=false}t=Tn.InertiaMode_FIXED;return t}(this)][this.zpp_inner.inertiaMode]},get_constraintInertia:function(){if(!this.zpp_inner.world)this.zpp_inner.validate_inertia();return this.zpp_inner.sinertia},get_inertia:function(){if(this.zpp_inner.world)throw new g("Error: Space::world has no inertia");this.zpp_inner.validate_inertia();if(this.zpp_inner.inertiaMode==0&&this.zpp_inner.wrap_shapes.empty())throw new g("Error: Given current inertia mode flag, Body::inertia only makes sense if Body contains Shapes");return this.zpp_inner.cinertia},set_inertia:function(e){this.zpp_inner.immutable_midstep("Body::inertia");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(e!=e)throw new g("Error: Inertia cannot be NaN");if(e<=0)throw new g("Error: Inertia must be strictly positive");if(e>=Infinity)throw new g("Error: Inertia cannot be infinite, use allowRotation = false instead");this.zpp_inner.inertiaMode=1;this.zpp_inner.cinertia=e;this.zpp_inner.invalidate_inertia();if(this.zpp_inner.world)throw new g("Error: Space::world has no inertia");this.zpp_inner.validate_inertia();if(this.zpp_inner.inertiaMode==0&&this.zpp_inner.wrap_shapes.empty())throw new g("Error: Given current inertia mode flag, Body::inertia only makes sense if Body contains Shapes");return this.zpp_inner.cinertia},connectedBodies:function(e,t){if(e==null)e=-1;return this.zpp_inner.connectedBodies(e,t)},interactingBodies:function(e,t,n){if(t==null)t=-1;var r;if(e==null)r=Un.COL|Un.SENSOR|Un.FLUID;else if(e==function(e){var t;if(Tn.InteractionType_COLLISION==null){Tn.internal=true;Tn.InteractionType_COLLISION=new F;Tn.internal=false}t=Tn.InteractionType_COLLISION;return t}(this))r=Un.COL;else if(e==function(e){var t;if(Tn.InteractionType_SENSOR==null){Tn.internal=true;Tn.InteractionType_SENSOR=new F;Tn.internal=false}t=Tn.InteractionType_SENSOR;return t}(this))r=Un.SENSOR;else r=Un.FLUID;return this.zpp_inner.interactingBodies(r,t,n)},crushFactor:function(){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)==null)throw new g("Error: Makes no sense to see how much an object not taking part in a simulation is being crushed");var e=0;var t=_t.get(null,null,null);var n=function(e){var t;if(e.zpp_inner.wrap_arbiters==null)e.zpp_inner.wrap_arbiters=ks.get(e.zpp_inner.arbiters,true);t=e.zpp_inner.wrap_arbiters;return t}(this).iterator();while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);var i=r.totalImpulse(this);var s=i.xy();t.addeq(s);if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e+=Math.sqrt(function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.x;return t}(this)*function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.x;return t}(this)+function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.y;return t}(this)*function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.y;return t}(this));s.dispose();i.dispose()}var o=function(e){var t;if(e.zpp_inner.wrap_constraints==null)e.zpp_inner.wrap_constraints=ds.get(e.zpp_inner.constraints,true);t=e.zpp_inner.wrap_constraints;return t}(this).iterator();while(o.hasNext()){var u;o.zpp_critical=false;u=o.zpp_inner.at(o.zpp_i++);var a=u.bodyImpulse(this);var f=a.xy();t.addeq(f);if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e+=Math.sqrt(function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(this)*function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(this)+function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this)*function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this));f.dispose();a.dispose()}var l;l=(e-function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");n=Math.sqrt(function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.x;return n}(e)*function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.x;return n}(e)+function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.y;return n}(e)*function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.y;return n}(e));return n}(this))/(function(e){var t;if(e.zpp_inner.world)throw new g("Error: Space::world has no mass");e.zpp_inner.validate_mass();if(e.zpp_inner.massMode==0&&e.zpp_inner.shapes.head==null)throw new g("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");t=e.zpp_inner.cmass;return t}(this)*(this.zpp_inner.space==null?null:this.zpp_inner.space.outer).zpp_inner.pre_dt);t.dispose();return l},localPointToWorld:function(e,t){if(t==null)t=false;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot transform null Vec2");this.zpp_inner.validate_axis();var n=0;var r=0;n=this.zpp_inner.axisy*function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)-this.zpp_inner.axisx*function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this);r=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*this.zpp_inner.axisx+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*this.zpp_inner.axisy;if(e.zpp_inner.weak){e.dispose();true}else false;return _t.get(n+this.zpp_inner.posx,r+this.zpp_inner.posy,t)},worldPointToLocal:function(e,t){if(t==null)t=false;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot transform null Vec2");this.zpp_inner.validate_axis();var n=0;var r=0;var i=0;var s=0;i=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)-this.zpp_inner.posx;s=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)-this.zpp_inner.posy;n=i*this.zpp_inner.axisy+s*this.zpp_inner.axisx;r=s*this.zpp_inner.axisy-i*this.zpp_inner.axisx;if(e.zpp_inner.weak){e.dispose();true}else false;return _t.get(n,r,t)},localVectorToWorld:function(e,t){if(t==null)t=false;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot transform null Vec2");this.zpp_inner.validate_axis();var n=0;var r=0;n=this.zpp_inner.axisy*function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)-this.zpp_inner.axisx*function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this);r=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*this.zpp_inner.axisx+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*this.zpp_inner.axisy;if(e.zpp_inner.weak){e.dispose();true}else false;return _t.get(n,r,t)},worldVectorToLocal:function(e,t){if(t==null)t=false;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot transform null Vec2");this.zpp_inner.validate_axis();var n=0;var r=0;n=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*this.zpp_inner.axisy+function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*this.zpp_inner.axisx;r=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*this.zpp_inner.axisy-function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*this.zpp_inner.axisx;if(e.zpp_inner.weak){e.dispose();true}else false;return _t.get(n,r,t)},applyImpulse:function(e,t,n){if(n==null)n=false;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(e==null)throw new g("Error: Cannot apply null impulse to Body");if(n&&function(e){var t;if(e.zpp_inner.space==null)throw new g("Error: isSleeping makes no sense if the object is not contained within a Space");t=e.zpp_inner.component.sleeping;return t}(this)){if(e.zpp_inner.weak){e.dispose();true}else false;if(t!=null){if(t.zpp_inner.weak){t.dispose();true}else false}return this}this.zpp_inner.validate_mass();var r=this.zpp_inner.imass;this.zpp_inner.velx+=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*r;this.zpp_inner.vely+=function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*r;if(t!=null){var i=0;var s=0;i=function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.x;return n}(this)-this.zpp_inner.posx;s=function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.y;return n}(this)-this.zpp_inner.posy;this.zpp_inner.validate_inertia();this.zpp_inner.angvel+=(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this)*i-function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this)*s)*this.zpp_inner.iinertia;if(t.zpp_inner.weak){t.dispose();true}else false}if(!n){if(this.zpp_inner.type==2)this.zpp_inner.wake()}if(e.zpp_inner.weak){e.dispose();true}else false;return this},applyAngularImpulse:function(e,t){if(t==null)t=false;if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(t&&function(e){var t;if(e.zpp_inner.space==null)throw new g("Error: isSleeping makes no sense if the object is not contained within a Space");t=e.zpp_inner.component.sleeping;return t}(this))return this;this.zpp_inner.validate_inertia();this.zpp_inner.angvel+=e*this.zpp_inner.iinertia;if(!t){if(this.zpp_inner.type==2)this.zpp_inner.wake()}return this},translateShapes:function(e){this.zpp_inner.immutable_midstep("Body::translateShapes()");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(e==null)throw new g("Error: Cannot displace by null Vec2");var t=e.zpp_inner.weak;e.zpp_inner.weak=false;var n=this.zpp_inner.shapes.head;while(n!=null){var r=n.elt;r.outer.translate(e);n=n.next}e.zpp_inner.weak=t;if(e.zpp_inner.weak){e.dispose();true}else false;return this},rotateShapes:function(e){this.zpp_inner.immutable_midstep("Body::rotateShapes()");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");var t=this.zpp_inner.shapes.head;while(t!=null){var n=t.elt;n.outer.rotate(e);t=t.next}return this},scaleShapes:function(e,t){this.zpp_inner.immutable_midstep("Body::scaleShapes()");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");var n=this.zpp_inner.shapes.head;while(n!=null){var r=n.elt;r.outer.scale(e,t);n=n.next}return this},transformShapes:function(e){this.zpp_inner.immutable_midstep("Body::transformShapes()");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");var t=this.zpp_inner.shapes.head;while(t!=null){var n=t.elt;n.outer.transform(e);t=t.next}return this},align:function(){this.zpp_inner.immutable_midstep("Body::align()");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");if(this.zpp_inner.shapes.head==null)throw new g("Error: Cannot align empty Body");this.zpp_inner.validate_localCOM();var e=_t.get(-this.zpp_inner.localCOMx,-this.zpp_inner.localCOMy,null);this.translateShapes(e);var t=this.localVectorToWorld(e);(function(e){var t;if(e.zpp_inner.wrap_pos==null)e.zpp_inner.setupPosition();t=e.zpp_inner.wrap_pos;return t})(this).subeq(t);if(this.zpp_inner.pre_posx<Infinity){var n=1;this.zpp_inner.pre_posx-=function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.x;return n}(this)*n;this.zpp_inner.pre_posy-=function(e){var n;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();n=t.zpp_inner.y;return n}(this)*n}e.dispose();t.dispose();return this},rotate:function(e,t){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot rotate about a null Vec2");if(t!=t)throw new g("Error: Cannot rotate by NaN radians");var n=e.zpp_inner.weak;e.zpp_inner.weak=false;var r=function(e){var t;if(e.zpp_inner.wrap_pos==null)e.zpp_inner.setupPosition();t=e.zpp_inner.wrap_pos;return t}(this).sub(e);r.rotate(t);this.set_position(e.add(r,true));r.dispose();var i=this;i.set_rotation(i.zpp_inner.rot+t);e.zpp_inner.weak=n;if(e.zpp_inner.weak){e.dispose();true}else false;return this},setShapeMaterials:function(e){this.zpp_inner.immutable_midstep("Body::setShapeMaterials()");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");var t=this.zpp_inner.shapes.head;while(t!=null){var n=t.elt;n.outer.set_material(e);t=t.next}return this},setShapeFilters:function(e){this.zpp_inner.immutable_midstep("Body::setShapeFilters()");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");var t=this.zpp_inner.shapes.head;while(t!=null){var n=t.elt;n.outer.set_filter(e);t=t.next}return this},setShapeFluidProperties:function(e){this.zpp_inner.immutable_midstep("Body::setShapeFluidProperties()");if(this.zpp_inner.world)throw new g("Error: Space::world is immutable");var t=this.zpp_inner.shapes.head;while(t!=null){var n=t.elt;n.outer.set_fluidProperties(e);t=t.next}return this},get_localCOM:function(){if(this.zpp_inner.world)throw new g("Error: Space::world has no "+"localCOM");if(this.zpp_inner.wrap_localCOM==null){this.zpp_inner.wrap_localCOM=_t.get(this.zpp_inner.localCOMx,this.zpp_inner.localCOMy,null);this.zpp_inner.wrap_localCOM.zpp_inner._inuse=true;this.zpp_inner.wrap_localCOM.zpp_inner._immutable=true;this.zpp_inner.wrap_localCOM.zpp_inner._validate=(Is=this.zpp_inner,Rs(Is,Is.getlocalCOM))}return this.zpp_inner.wrap_localCOM},get_worldCOM:function(){if(this.zpp_inner.world)throw new g("Error: Space::world has no "+"worldCOM");if(this.zpp_inner.wrap_worldCOM==null){this.zpp_inner.wrap_worldCOM=_t.get(this.zpp_inner.worldCOMx,this.zpp_inner.worldCOMy,null);this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=true;this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=true;this.zpp_inner.wrap_worldCOM.zpp_inner._validate=(Is=this.zpp_inner,Rs(Is,Is.getworldCOM))}return this.zpp_inner.wrap_worldCOM},normalImpulse:function(e,t){if(t==null)t=false;var n=0;var r=0;var i=0;var s=this.zpp_inner.arbiters;var o=function(e){var t;if(e.zpp_inner.wrap_arbiters==null)e.zpp_inner.wrap_arbiters=ks.get(e.zpp_inner.arbiters,true);t=e.zpp_inner.wrap_arbiters;return t}(this).iterator();while(o.hasNext()){var u;o.zpp_critical=false;u=o.zpp_inner.at(o.zpp_i++);var a=u.zpp_inner;if(a.type!=Un.COL)continue;if(e!=null&&a.b2!=e.zpp_inner&&a.b1!=e.zpp_inner)continue;var f=a.wrapper().get_collisionArbiter().normalImpulse(this,t);var l=1;var c=l;n+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(this)*c;r+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this)*c;i+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.z;return t}(this)*l;f.dispose()}return Ht.get(n,r,i)},tangentImpulse:function(e,t){if(t==null)t=false;var n=0;var r=0;var i=0;var s=this.zpp_inner.arbiters;var o=function(e){var t;if(e.zpp_inner.wrap_arbiters==null)e.zpp_inner.wrap_arbiters=ks.get(e.zpp_inner.arbiters,true);t=e.zpp_inner.wrap_arbiters;return t}(this).iterator();while(o.hasNext()){var u;o.zpp_critical=false;u=o.zpp_inner.at(o.zpp_i++);var a=u.zpp_inner;if(a.type!=Un.COL)continue;if(e!=null&&a.b2!=e.zpp_inner&&a.b1!=e.zpp_inner)continue;var f=a.wrapper().get_collisionArbiter().tangentImpulse(this,t);var l=1;var c=l;n+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(this)*c;r+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this)*c;i+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.z;return t}(this)*l;f.dispose()}return Ht.get(n,r,i)},totalContactsImpulse:function(e,t){if(t==null)t=false;var n=0;var r=0;var i=0;var s=this.zpp_inner.arbiters;var o=function(e){var t;if(e.zpp_inner.wrap_arbiters==null)e.zpp_inner.wrap_arbiters=ks.get(e.zpp_inner.arbiters,true);t=e.zpp_inner.wrap_arbiters;return t}(this).iterator();while(o.hasNext()){var u;o.zpp_critical=false;u=o.zpp_inner.at(o.zpp_i++);var a=u.zpp_inner;if(a.type!=Un.COL)continue;if(e!=null&&a.b2!=e.zpp_inner&&a.b1!=e.zpp_inner)continue;var f=a.wrapper().get_collisionArbiter().totalImpulse(this,t);var l=1;var c=l;n+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(this)*c;r+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this)*c;i+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.z;return t}(this)*l;f.dispose()}return Ht.get(n,r,i)},rollingImpulse:function(e,t){if(t==null)t=false;var n=0;var r=this.zpp_inner.arbiters;var i=function(e){var t;if(e.zpp_inner.wrap_arbiters==null)e.zpp_inner.wrap_arbiters=ks.get(e.zpp_inner.arbiters,true);t=e.zpp_inner.wrap_arbiters;return t}(this).iterator();while(i.hasNext()){var s;i.zpp_critical=false;s=i.zpp_inner.at(i.zpp_i++);var o=s.zpp_inner;if(o.type!=Un.COL)continue;if(e!=null&&o.b2!=e.zpp_inner&&o.b1!=e.zpp_inner)continue;n+=o.wrapper().get_collisionArbiter().rollingImpulse(this,t)}return n},buoyancyImpulse:function(e){var t=0;var n=0;var r=0;var i=this.zpp_inner.arbiters;var s=function(e){var t;if(e.zpp_inner.wrap_arbiters==null)e.zpp_inner.wrap_arbiters=ks.get(e.zpp_inner.arbiters,true);t=e.zpp_inner.wrap_arbiters;return t}(this).iterator();while(s.hasNext()){var o;s.zpp_critical=false;o=s.zpp_inner.at(s.zpp_i++);var u=o.zpp_inner;if(u.type!=Un.FLUID)continue;if(e!=null&&u.b2!=e.zpp_inner&&u.b1!=e.zpp_inner)continue;var a=u.wrapper().get_fluidArbiter().buoyancyImpulse(this);var f=1;var l=f;t+=function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.x;return t}(this)*l;n+=function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.y;return t}(this)*l;r+=function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.z;return t}(this)*f;a.dispose()}return Ht.get(t,n,r)},dragImpulse:function(e){var t=0;var n=0;var r=0;var i=this.zpp_inner.arbiters;var s=function(e){var t;if(e.zpp_inner.wrap_arbiters==null)e.zpp_inner.wrap_arbiters=ks.get(e.zpp_inner.arbiters,true);t=e.zpp_inner.wrap_arbiters;return t}(this).iterator();while(s.hasNext()){var o;s.zpp_critical=false;o=s.zpp_inner.at(s.zpp_i++);var u=o.zpp_inner;if(u.type!=Un.FLUID)continue;if(e!=null&&u.b2!=e.zpp_inner&&u.b1!=e.zpp_inner)continue;var a=u.wrapper().get_fluidArbiter().dragImpulse(this);var f=1;var l=f;t+=function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.x;return t}(this)*l;n+=function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.y;return t}(this)*l;r+=function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.z;return t}(this)*f;a.dispose()}return Ht.get(t,n,r)},totalFluidImpulse:function(e){var t=0;var n=0;var r=0;var i=this.zpp_inner.arbiters;var s=function(e){var t;if(e.zpp_inner.wrap_arbiters==null)e.zpp_inner.wrap_arbiters=ks.get(e.zpp_inner.arbiters,true);t=e.zpp_inner.wrap_arbiters;return t}(this).iterator();while(s.hasNext()){var o;s.zpp_critical=false;o=s.zpp_inner.at(s.zpp_i++);var u=o.zpp_inner;if(u.type!=Un.FLUID)continue;if(e!=null&&u.b2!=e.zpp_inner&&u.b1!=e.zpp_inner)continue;var a=u.wrapper().get_fluidArbiter().totalImpulse(this);var f=1;var l=f;t+=function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.x;return t}(this)*l;n+=function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.y;return t}(this)*l;r+=function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.z;return t}(this)*f;a.dispose()}return Ht.get(t,n,r)},constraintsImpulse:function(){var e=0;var t=0;var n=0;var r=this.zpp_inner.constraints.head;while(r!=null){var i=r.elt;var s=i.outer.bodyImpulse(this);var o=1;var u=o;e+=function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.x;return t}(this)*u;t+=function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.y;return t}(this)*u;n+=function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.z;return t}(this)*o;s.dispose();r=r.next}return Ht.get(e,t,n)},totalImpulse:function(e,t){if(t==null)t=false;var n=0;var r=0;var i=0;var s=this.zpp_inner.arbiters;var o=function(e){var t;if(e.zpp_inner.wrap_arbiters==null)e.zpp_inner.wrap_arbiters=ks.get(e.zpp_inner.arbiters,true);t=e.zpp_inner.wrap_arbiters;return t}(this).iterator();while(o.hasNext()){var u;o.zpp_critical=false;u=o.zpp_inner.at(o.zpp_i++);var a=u.zpp_inner;if(a.type==Un.SENSOR)continue;if(e!=null&&a.b2!=e.zpp_inner&&a.b1!=e.zpp_inner)continue;var f=a.wrapper().totalImpulse(this,t);var l=1;var c=l;n+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(this)*c;r+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this)*c;i+=function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.z;return t}(this)*l;f.dispose()}var h=this.zpp_inner.constraints.head;while(h!=null){var p=h.elt;if(p.active){var d=p.outer.bodyImpulse(this);var v=1;var m=v;n+=function(e){var t;if(d!=null&&d.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");d.zpp_inner.validate();t=d.zpp_inner.x;return t}(this)*m;r+=function(e){var t;if(d!=null&&d.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");d.zpp_inner.validate();t=d.zpp_inner.y;return t}(this)*m;i+=function(e){var t;if(d!=null&&d.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");d.zpp_inner.validate();t=d.zpp_inner.z;return t}(this)*v;d.dispose()}h=h.next}return Ht.get(n,r,i)},contains:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot check containment of null point");var t=e.zpp_inner.weak;e.zpp_inner.weak=false;var n;n=false;var r=this.zpp_inner.shapes.head;while(r!=null){var i=r.elt;if(i.outer.contains(e)){n=true;break}r=r.next}e.zpp_inner.weak=t;if(e.zpp_inner.weak){e.dispose();true}else false;return n},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(this.zpp_inner.type==2?"dynamic":this.zpp_inner.type==1?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:Ft});var It=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!vs.internal)throw new g("Error: Cannot instantiate "+"Body"+"Iterator derp!")};It.__name__=true;It.get=function(e){var t;if(It.zpp_pool==null){vs.internal=true;var n=new It;vs.internal=false;t=n}else{var r=It.zpp_pool;It.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};It.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=It.zpp_pool;It.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:It};var qt=function(){this.zpp_inner=null;this.zpp_inner=new vs;this.zpp_inner.outer=this};qt.__name__=true;qt.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new qt;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};qt.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.outer},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Body"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Body"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Body"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.outer;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Body"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.outer;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Body"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Body"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return It.get(this)},copy:function(e){if(e==null)e=false;var t=new qt;var n;this.zpp_inner.valmod();n=It.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"Body"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=It.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=It.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=It.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=It.zpp_pool;It.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:qt};var Rt=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"BodyType"+" derp!")};Rt.__name__=true;Rt.get_STATIC=function(){if(Tn.BodyType_STATIC==null){Tn.internal=true;Tn.BodyType_STATIC=new Rt;Tn.internal=false}return Tn.BodyType_STATIC};Rt.get_DYNAMIC=function(){if(Tn.BodyType_DYNAMIC==null){Tn.internal=true;Tn.BodyType_DYNAMIC=new Rt;Tn.internal=false}return Tn.BodyType_DYNAMIC};Rt.get_KINEMATIC=function(){if(Tn.BodyType_KINEMATIC==null){Tn.internal=true;Tn.BodyType_KINEMATIC=new Rt;Tn.internal=false}return Tn.BodyType_KINEMATIC};Rt.prototype={toString:function(){if(this==function(e){var t;if(Tn.BodyType_STATIC==null){Tn.internal=true;Tn.BodyType_STATIC=new Rt;Tn.internal=false}t=Tn.BodyType_STATIC;return t}(this))return"STATIC";else if(this==function(e){var t;if(Tn.BodyType_DYNAMIC==null){Tn.internal=true;Tn.BodyType_DYNAMIC=new Rt;Tn.internal=false}t=Tn.BodyType_DYNAMIC;return t}(this))return"DYNAMIC";else if(this==function(e){var t;if(Tn.BodyType_KINEMATIC==null){Tn.internal=true;Tn.BodyType_KINEMATIC=new Rt;Tn.internal=false}t=Tn.BodyType_KINEMATIC;return t}(this))return"KINEMATIC";else return""},__class__:Rt};var Ut=function(){this.zpp_inner=null;jt.zpp_internalAlloc=true;jt.call(this);jt.zpp_internalAlloc=false;this.zpp_inner=new Hr;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;this.zpp_inner.insert_cbtype(xn.ANY_COMPOUND.zpp_inner)};Ut.__name__=true;Ut.__super__=jt;Ut.prototype=n(jt.prototype,{get_bodies:function(){return this.zpp_inner.wrap_bodies},get_constraints:function(){return this.zpp_inner.wrap_constraints},get_compounds:function(){return this.zpp_inner.wrap_compounds},get_compound:function(){if(this.zpp_inner.compound==null)return null;else return this.zpp_inner.compound.outer},set_compound:function(e){this.zpp_inner.immutable_midstep("Compound::compound");if((this.zpp_inner.compound==null?null:this.zpp_inner.compound.outer)!=e){if((this.zpp_inner.compound==null?null:this.zpp_inner.compound.outer)!=null)(this.zpp_inner.compound==null?null:this.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(this);if(e!=null)e.zpp_inner.wrap_compounds.add(this)}if(this.zpp_inner.compound==null)return null;else return this.zpp_inner.compound.outer},get_space:function(){if(this.zpp_inner.space==null)return null;else return this.zpp_inner.space.outer},set_space:function(e){if(this.zpp_inner.compound!=null)throw new g("Error: Cannot set the space of an inner Compound, only the root Compound space can be set");this.zpp_inner.immutable_midstep("Compound::space");if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=e){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null)(this.zpp_inner.space==null?null:this.zpp_inner.space.outer).zpp_inner.wrap_compounds.remove(this);if(e!=null)e.zpp_inner.wrap_compounds.add(this)}if(this.zpp_inner.space==null)return null;else return this.zpp_inner.space.outer},toString:function(){return"Compound"+this.zpp_inner_i.id},copy:function(){return this.zpp_inner.copy()},breakApart:function(){this.zpp_inner.breakApart()},visitBodies:function(e){if(e==null)throw new g("Error: lambda cannot be null for Compound::visitBodies");var t=this.zpp_inner.wrap_bodies.iterator();while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);e(n)}var r=this.zpp_inner.wrap_compounds.iterator();while(r.hasNext()){var i;r.zpp_critical=false;i=r.zpp_inner.at(r.zpp_i++);i.visitBodies(e)}},visitConstraints:function(e){if(e==null)throw new g("Error: lambda cannot be null for Compound::visitConstraints");var t=this.zpp_inner.wrap_constraints.iterator();while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);e(n)}var r=this.zpp_inner.wrap_compounds.iterator();while(r.hasNext()){var i;r.zpp_critical=false;i=r.zpp_inner.at(r.zpp_i++);i.visitConstraints(e)}},visitCompounds:function(e){if(e==null)throw new g("Error: lambda cannot be null for Compound::visitConstraints");var t=this.zpp_inner.wrap_compounds.iterator();while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);e(n);n.visitCompounds(e)}},COM:function(e){if(e==null)e=false;var t=_t.get(0,0,e);var n=0;this.visitBodies(function(e){if(!e.zpp_inner.wrap_shapes.empty()){t.addeq(function(t){var n;if(e.zpp_inner.world)throw new g("Error: Space::world has no "+"worldCOM");if(e.zpp_inner.wrap_worldCOM==null){e.zpp_inner.wrap_worldCOM=_t.get(e.zpp_inner.worldCOMx,e.zpp_inner.worldCOMy,null);e.zpp_inner.wrap_worldCOM.zpp_inner._inuse=true;e.zpp_inner.wrap_worldCOM.zpp_inner._immutable=true;e.zpp_inner.wrap_worldCOM.zpp_inner._validate=(Is=e.zpp_inner,Rs(Is,Is.getworldCOM))}n=e.zpp_inner.wrap_worldCOM;return n}(this).mul(function(t){var n;if(e.zpp_inner.world)throw new g("Error: Space::world has no mass");e.zpp_inner.validate_mass();if(e.zpp_inner.massMode==0&&e.zpp_inner.shapes.head==null)throw new g("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");n=e.zpp_inner.cmass;return n}(this),true));if(e.zpp_inner.world)throw new g("Error: Space::world has no mass");e.zpp_inner.validate_mass();if(e.zpp_inner.massMode==0&&e.zpp_inner.shapes.head==null)throw new g("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");n+=e.zpp_inner.cmass}});if(n==0)throw new g("Error: COM of an empty Compound is undefined silly");t.muleq(1/n);return t},translate:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot translate by null Vec2");var t=e.zpp_inner.weak;e.zpp_inner.weak=false;this.visitBodies(function(t){(function(e){var n;if(t.zpp_inner.wrap_pos==null)t.zpp_inner.setupPosition();n=t.zpp_inner.wrap_pos;return n})(this).addeq(e)});e.zpp_inner.weak=t;if(e.zpp_inner.weak){e.dispose();true}else false;return this},rotate:function(e,t){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot rotate about a null Vec2");if(t!=t)throw new g("Error: Cannot rotate by NaN radians");var n=e.zpp_inner.weak;e.zpp_inner.weak=false;this.visitBodies(function(n){n.rotate(e,t)});e.zpp_inner.weak=n;if(e.zpp_inner.weak){e.dispose();true}else false;return this},__class__:Ut});var zt=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!gs.internal)throw new g("Error: Cannot instantiate "+"Compound"+"Iterator derp!")};zt.__name__=true;zt.get=function(e){var t;if(zt.zpp_pool==null){gs.internal=true;var n=new zt;gs.internal=false;t=n}else{var r=zt.zpp_pool;zt.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};zt.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=zt.zpp_pool;zt.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:zt};var Wt=function(){this.zpp_inner=null;this.zpp_inner=new gs;this.zpp_inner.outer=this};Wt.__name__=true;Wt.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new Wt;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};Wt.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.outer},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Compound"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Compound"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Compound"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.outer;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Compound"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.outer;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Compound"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Compound"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return zt.get(this)},copy:function(e){if(e==null)e=false;var t=new Wt;var n;this.zpp_inner.valmod();n=zt.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"Compound"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=zt.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=zt.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=zt.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=zt.zpp_pool;zt.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:Wt};var Xt=function(e,t){if(t==null)t=1;if(e==null)e=1;this.zpp_inner=null;if(Br.zpp_pool==null)this.zpp_inner=new Br;else{this.zpp_inner=Br.zpp_pool;Br.zpp_pool=this.zpp_inner.next;this.zpp_inner.next=null}null;this.zpp_inner.outer=this;if(e!=this.zpp_inner.density*1e3){if(e!=e)throw new g("Error: FluidProperties::"+"density"+" cannot be NaN");this.zpp_inner.density=e/1e3;this.zpp_inner.invalidate()}this.zpp_inner.density*1e3;if(t!=this.zpp_inner.viscosity){if(t!=t)throw new g("Error: FluidProperties::"+"viscosity"+" cannot be NaN");if(t<0)throw new g("Error: FluidProperties::"+"viscosity"+" ("+t+") must be >= 0");this.zpp_inner.viscosity=t/1;this.zpp_inner.invalidate()}this.zpp_inner.viscosity};Xt.__name__=true;Xt.prototype={get_userData:function(){if(this.zpp_inner.userData==null)this.zpp_inner.userData={};return this.zpp_inner.userData},get_shapes:function(){if(this.zpp_inner.wrap_shapes==null)this.zpp_inner.wrap_shapes=Ns.get(this.zpp_inner.shapes,true);return this.zpp_inner.wrap_shapes},copy:function(){var e=new Xt(this.zpp_inner.density*1e3,this.zpp_inner.viscosity);if(this.zpp_inner.userData!=null)e.zpp_inner.userData=c.copy(this.zpp_inner.userData);e.set_gravity(this.zpp_inner.wrap_gravity);return e},get_density:function(){return this.zpp_inner.density*1e3},set_density:function(e){if(e!=this.zpp_inner.density*1e3){if(e!=e)throw new g("Error: FluidProperties::"+"density"+" cannot be NaN");this.zpp_inner.density=e/1e3;this.zpp_inner.invalidate()}return this.zpp_inner.density*1e3},get_viscosity:function(){return this.zpp_inner.viscosity},set_viscosity:function(e){if(e!=this.zpp_inner.viscosity){if(e!=e)throw new g("Error: FluidProperties::"+"viscosity"+" cannot be NaN");if(e<0)throw new g("Error: FluidProperties::"+"viscosity"+" ("+e+") must be >= 0");this.zpp_inner.viscosity=e/1;this.zpp_inner.invalidate()}return this.zpp_inner.viscosity},get_gravity:function(){return this.zpp_inner.wrap_gravity},set_gravity:function(e){if(e==null){if(this.zpp_inner.wrap_gravity!=null){this.zpp_inner.wrap_gravity.zpp_inner._inuse=false;this.zpp_inner.wrap_gravity.dispose();this.zpp_inner.wrap_gravity=null}}else{if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(this.zpp_inner.wrap_gravity==null)this.zpp_inner.getgravity();this.zpp_inner.wrap_gravity.set(e)}return this.zpp_inner.wrap_gravity},toString:function(){return"{ density: "+this.zpp_inner.density*1e3+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+h.string(this.zpp_inner.wrap_gravity)+" }"},__class__:Xt};var Vt=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"GravMassMode"+" derp!")};Vt.__name__=true;Vt.get_DEFAULT=function(){if(Tn.GravMassMode_DEFAULT==null){Tn.internal=true;Tn.GravMassMode_DEFAULT=new Vt;Tn.internal=false}return Tn.GravMassMode_DEFAULT};Vt.get_FIXED=function(){if(Tn.GravMassMode_FIXED==null){Tn.internal=true;Tn.GravMassMode_FIXED=new Vt;Tn.internal=false}return Tn.GravMassMode_FIXED};Vt.get_SCALED=function(){if(Tn.GravMassMode_SCALED==null){Tn.internal=true;Tn.GravMassMode_SCALED=new Vt;Tn.internal=false}return Tn.GravMassMode_SCALED};Vt.prototype={toString:function(){if(this==function(e){var t;if(Tn.GravMassMode_DEFAULT==null){Tn.internal=true;Tn.GravMassMode_DEFAULT=new Vt;Tn.internal=false}t=Tn.GravMassMode_DEFAULT;return t}(this))return"DEFAULT";else if(this==function(e){var t;if(Tn.GravMassMode_FIXED==null){Tn.internal=true;Tn.GravMassMode_FIXED=new Vt;Tn.internal=false}t=Tn.GravMassMode_FIXED;return t}(this))return"FIXED";else if(this==function(e){var t;if(Tn.GravMassMode_SCALED==null){Tn.internal=true;Tn.GravMassMode_SCALED=new Vt;Tn.internal=false}t=Tn.GravMassMode_SCALED;return t}(this))return"SCALED";else return""},__class__:Vt};var $t=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"InertiaMode"+" derp!")};$t.__name__=true;$t.get_DEFAULT=function(){if(Tn.InertiaMode_DEFAULT==null){Tn.internal=true;Tn.InertiaMode_DEFAULT=new $t;Tn.internal=false}return Tn.InertiaMode_DEFAULT};$t.get_FIXED=function(){if(Tn.InertiaMode_FIXED==null){Tn.internal=true;Tn.InertiaMode_FIXED=new $t;Tn.internal=false}return Tn.InertiaMode_FIXED};$t.prototype={toString:function(){if(this==function(e){var t;if(Tn.InertiaMode_DEFAULT==null){Tn.internal=true;Tn.InertiaMode_DEFAULT=new $t;Tn.internal=false}t=Tn.InertiaMode_DEFAULT;return t}(this))return"DEFAULT";else if(this==function(e){var t;if(Tn.InertiaMode_FIXED==null){Tn.internal=true;Tn.InertiaMode_FIXED=new $t;Tn.internal=false}t=Tn.InertiaMode_FIXED;return t}(this))return"FIXED";else return""},__class__:$t};var Jt=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!ms.internal)throw new g("Error: Cannot instantiate "+"Interactor"+"Iterator derp!")};Jt.__name__=true;Jt.get=function(e){var t;if(Jt.zpp_pool==null){ms.internal=true;var n=new Jt;ms.internal=false;t=n}else{var r=Jt.zpp_pool;Jt.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};Jt.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=Jt.zpp_pool;Jt.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:Jt};var Kt=function(){this.zpp_inner=null;this.zpp_inner=new ms;this.zpp_inner.outer=this};Kt.__name__=true;Kt.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new Kt;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};Kt.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner_i)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.outer_i},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Interactor"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner_i);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner_i)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Interactor"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner_i)}else this.zpp_inner.inner.add(e.zpp_inner_i);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Interactor"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.outer_i;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.outer_i;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.outer_i;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Interactor"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.outer_i;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.outer_i;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.outer_i;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Interactor"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner_i){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner_i);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Interactor"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return Jt.get(this)},copy:function(e){if(e==null)e=false;var t=new Kt;var n;this.zpp_inner.valmod();n=Jt.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"Interactor"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=Jt.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=Jt.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=Jt.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=Jt.zpp_pool;Jt.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:Kt};var Qt=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"MassMode"+" derp!")};Qt.__name__=true;Qt.get_DEFAULT=function(){if(Tn.MassMode_DEFAULT==null){Tn.internal=true;Tn.MassMode_DEFAULT=new Qt;Tn.internal=false}return Tn.MassMode_DEFAULT};Qt.get_FIXED=function(){if(Tn.MassMode_FIXED==null){Tn.internal=true;Tn.MassMode_FIXED=new Qt;Tn.internal=false}return Tn.MassMode_FIXED};Qt.prototype={toString:function(){if(this==function(e){var t;if(Tn.MassMode_DEFAULT==null){Tn.internal=true;Tn.MassMode_DEFAULT=new Qt;Tn.internal=false}t=Tn.MassMode_DEFAULT;return t}(this))return"DEFAULT";else if(this==function(e){var t;if(Tn.MassMode_FIXED==null){Tn.internal=true;Tn.MassMode_FIXED=new Qt;Tn.internal=false}t=Tn.MassMode_FIXED;return t}(this))return"FIXED";else return""},__class__:Qt};var Gt=function(e,t,n,r,i){if(i==null)i=.001;if(r==null)r=1;if(n==null)n=2;if(t==null)t=1;if(e==null)e=0;this.zpp_inner=null;if(jr.zpp_pool==null)this.zpp_inner=new jr;else{this.zpp_inner=jr.zpp_pool;jr.zpp_pool=this.zpp_inner.next;this.zpp_inner.next=null}null;this.zpp_inner.outer=this;if(e!=this.zpp_inner.elasticity){if(e!=e)throw new g("Error: Material::"+"elasticity"+" cannot be NaN");this.zpp_inner.elasticity=e/1;this.zpp_inner.invalidate(jr.WAKE|jr.ARBITERS)}this.zpp_inner.elasticity;if(t!=this.zpp_inner.dynamicFriction){if(t!=t)throw new g("Error: Material::"+"dynamicFriction"+" cannot be NaN");if(t<0)throw new g("Error: Material::"+"dynamicFriction"+" cannot be negative");this.zpp_inner.dynamicFriction=t/1;this.zpp_inner.invalidate(jr.WAKE|jr.ANGDRAG|jr.ARBITERS)}this.zpp_inner.dynamicFriction;if(n!=this.zpp_inner.staticFriction){if(n!=n)throw new g("Error: Material::"+"staticFriction"+" cannot be NaN");if(n<0)throw new g("Error: Material::"+"staticFriction"+" cannot be negative");this.zpp_inner.staticFriction=n/1;this.zpp_inner.invalidate(jr.WAKE|jr.ARBITERS)}this.zpp_inner.staticFriction;if(r!=this.zpp_inner.density*1e3){if(r!=r)throw new g("Error: Material::"+"density"+" cannot be NaN");if(r<0)throw new g("Error: Material::density must be positive");if(r<0)throw new g("Error: Material::"+"density"+" cannot be negative");this.zpp_inner.density=r/1e3;this.zpp_inner.invalidate(jr.WAKE|jr.PROPS)}this.zpp_inner.density*1e3;if(i!=this.zpp_inner.rollingFriction){if(i!=i)throw new g("Error: Material::"+"rollingFriction"+" cannot be NaN");if(i<0)throw new g("Error: Material::"+"rollingFriction"+" cannot be negative");this.zpp_inner.rollingFriction=i/1;this.zpp_inner.invalidate(jr.WAKE|jr.ARBITERS)}this.zpp_inner.rollingFriction};Gt.__name__=true;Gt.wood=function(){return new Gt(.4,.2,.38,.7,.005)};Gt.steel=function(){return new Gt(.2,.57,.74,7.8,.001)};Gt.ice=function(){return new Gt(.3,.03,.1,.9,1e-4)};Gt.rubber=function(){return new Gt(.8,1,1.4,1.5,.01)};Gt.glass=function(){return new Gt(.4,.4,.94,2.6,.002)};Gt.sand=function(){return new Gt(-1,.45,.6,1.6,16)};Gt.prototype={get_userData:function(){if(this.zpp_inner.userData==null)this.zpp_inner.userData={};return this.zpp_inner.userData},get_shapes:function(){if(this.zpp_inner.wrap_shapes==null)this.zpp_inner.wrap_shapes=Ns.get(this.zpp_inner.shapes,true);return this.zpp_inner.wrap_shapes},copy:function(){var e=new Gt(this.zpp_inner.elasticity,this.zpp_inner.dynamicFriction,this.zpp_inner.staticFriction,this.zpp_inner.density*1e3,this.zpp_inner.rollingFriction);if(this.zpp_inner.userData!=null)e.zpp_inner.userData=c.copy(this.zpp_inner.userData);return e},get_elasticity:function(){return this.zpp_inner.elasticity},set_elasticity:function(e){if(e!=this.zpp_inner.elasticity){if(e!=e)throw new g("Error: Material::"+"elasticity"+" cannot be NaN");this.zpp_inner.elasticity=e/1;this.zpp_inner.invalidate(jr.WAKE|jr.ARBITERS)}return this.zpp_inner.elasticity},get_dynamicFriction:function(){return this.zpp_inner.dynamicFriction},set_dynamicFriction:function(e){if(e!=this.zpp_inner.dynamicFriction){if(e!=e)throw new g("Error: Material::"+"dynamicFriction"+" cannot be NaN");if(e<0)throw new g("Error: Material::"+"dynamicFriction"+" cannot be negative");this.zpp_inner.dynamicFriction=e/1;this.zpp_inner.invalidate(jr.WAKE|jr.ANGDRAG|jr.ARBITERS)}return this.zpp_inner.dynamicFriction},get_staticFriction:function(){return this.zpp_inner.staticFriction},set_staticFriction:function(e){if(e!=this.zpp_inner.staticFriction){if(e!=e)throw new g("Error: Material::"+"staticFriction"+" cannot be NaN");if(e<0)throw new g("Error: Material::"+"staticFriction"+" cannot be negative");this.zpp_inner.staticFriction=e/1;this.zpp_inner.invalidate(jr.WAKE|jr.ARBITERS)}return this.zpp_inner.staticFriction},get_density:function(){return this.zpp_inner.density*1e3},set_density:function(e){if(e!=this.zpp_inner.density*1e3){if(e!=e)throw new g("Error: Material::"+"density"+" cannot be NaN");if(e<0)throw new g("Error: Material::density must be positive");if(e<0)throw new g("Error: Material::"+"density"+" cannot be negative");this.zpp_inner.density=e/1e3;this.zpp_inner.invalidate(jr.WAKE|jr.PROPS)}return this.zpp_inner.density*1e3},get_rollingFriction:function(){return this.zpp_inner.rollingFriction},set_rollingFriction:function(e){if(e!=this.zpp_inner.rollingFriction){if(e!=e)throw new g("Error: Material::"+"rollingFriction"+" cannot be NaN");if(e<0)throw new g("Error: Material::"+"rollingFriction"+" cannot be negative");this.zpp_inner.rollingFriction=e/1;this.zpp_inner.invalidate(jr.WAKE|jr.ARBITERS)}return this.zpp_inner.rollingFriction},toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+this.zpp_inner.density*1e3+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},__class__:Gt};var Yt=function(){this.zpp_inner=null;jt.zpp_internalAlloc=true;jt.call(this);jt.zpp_internalAlloc=false;if(!Yt.zpp_internalAlloc)throw new g("Error: Shape cannot be instantiated derp!")};Yt.__name__=true;Yt.__super__=jt;Yt.prototype=n(jt.prototype,{get_type:function(){return Fr.types[this.zpp_inner.type]},isCircle:function(){return this.zpp_inner.type==0},isPolygon:function(){return this.zpp_inner.type==1},get_body:function(){if(this.zpp_inner.body!=null)return this.zpp_inner.body.outer;else return null},set_body:function(e){this.zpp_inner.immutable_midstep("Shape::body");if((this.zpp_inner.body!=null?this.zpp_inner.body.outer:null)!=e){if(this.zpp_inner.body!=null)(this.zpp_inner.body!=null?this.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(this);if(e!=null)e.zpp_inner.wrap_shapes.add(this)}if(this.zpp_inner.body!=null)return this.zpp_inner.body.outer;else return null},get_castCircle:function(){if(this.zpp_inner.type==0)return this.zpp_inner.circle.outer_zn;else return null},get_castPolygon:function(){if(this.zpp_inner.type==1)return this.zpp_inner.polygon.outer_zn;else return null},get_worldCOM:function(){if(this.zpp_inner.wrap_worldCOM==null){this.zpp_inner.wrap_worldCOM=_t.get(this.zpp_inner.worldCOMx,this.zpp_inner.worldCOMy,null);this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=true;this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=true;this.zpp_inner.wrap_worldCOM.zpp_inner._validate=(Is=this.zpp_inner,Rs(Is,Is.getworldCOM))}return this.zpp_inner.wrap_worldCOM},get_localCOM:function(){if(this.zpp_inner.wrap_localCOM==null){if(this.zpp_inner.type==0)this.zpp_inner.circle.setupLocalCOM();else this.zpp_inner.polygon.setupLocalCOM()}return this.zpp_inner.wrap_localCOM},set_localCOM:function(e){this.zpp_inner.immutable_midstep("Body::localCOM");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(this.zpp_inner.body!=null&&this.zpp_inner.body.space!=null&&this.zpp_inner.body.type==1)throw new g("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(e==null)throw new g("Error: Shape::localCOM cannot be null");(function(e){var t;if(e.zpp_inner.wrap_localCOM==null){if(e.zpp_inner.type==0)e.zpp_inner.circle.setupLocalCOM();else e.zpp_inner.polygon.setupLocalCOM()}t=e.zpp_inner.wrap_localCOM;return t})(this).set(e);if(this.zpp_inner.wrap_localCOM==null){if(this.zpp_inner.type==0)this.zpp_inner.circle.setupLocalCOM();else this.zpp_inner.polygon.setupLocalCOM()}return this.zpp_inner.wrap_localCOM},get_area:function(){this.zpp_inner.validate_area_inertia();return this.zpp_inner.area},get_inertia:function(){this.zpp_inner.validate_area_inertia();return this.zpp_inner.inertia},get_angDrag:function(){this.zpp_inner.validate_angDrag();return this.zpp_inner.angDrag},get_material:function(){return this.zpp_inner.material.wrapper()},set_material:function(e){this.zpp_inner.immutable_midstep("Shape::material");if(e==null)throw new g("Error: Cannot assign null as Shape material");this.zpp_inner.setMaterial(e.zpp_inner);return this.zpp_inner.material.wrapper()},get_filter:function(){return this.zpp_inner.filter.wrapper()},set_filter:function(e){this.zpp_inner.immutable_midstep("Shape::filter");if(e==null)throw new g("Error: Cannot assign null as Shape filter");this.zpp_inner.setFilter(e.zpp_inner);return this.zpp_inner.filter.wrapper()},get_fluidProperties:function(){this.zpp_inner.immutable_midstep("Shape::fluidProperties");if(this.zpp_inner.fluidProperties==null)this.zpp_inner.setFluid((new Xt).zpp_inner);return this.zpp_inner.fluidProperties.wrapper()},set_fluidProperties:function(e){if(e==null)throw new g("Error: Cannot assign null as Shape fluidProperties, disable fluids by setting fluidEnabled to false");this.zpp_inner.setFluid(e.zpp_inner);this.zpp_inner.immutable_midstep("Shape::fluidProperties");if(this.zpp_inner.fluidProperties==null)this.zpp_inner.setFluid((new Xt).zpp_inner);return this.zpp_inner.fluidProperties.wrapper()},get_fluidEnabled:function(){return this.zpp_inner.fluidEnabled},set_fluidEnabled:function(e){this.zpp_inner.immutable_midstep("Shape::fluidEnabled");this.zpp_inner.fluidEnabled=e;if(e&&this.zpp_inner.fluidProperties==null)this.set_fluidProperties(new Xt);this.zpp_inner.wake();return this.zpp_inner.fluidEnabled},get_sensorEnabled:function(){return this.zpp_inner.sensorEnabled},set_sensorEnabled:function(e){this.zpp_inner.immutable_midstep("Shape::sensorEnabled");this.zpp_inner.sensorEnabled=e;this.zpp_inner.wake();return this.zpp_inner.sensorEnabled},get_bounds:function(){return this.zpp_inner.aabb.wrapper()},translate:function(e){this.zpp_inner.immutable_midstep("Shape::translate()");if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(this.zpp_inner.body!=null&&this.zpp_inner.body.space!=null&&this.zpp_inner.body.type==1)throw new g("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(e==null)throw new g("Error: Cannot displace Shape by null Vec2");if(e.lsq()>0){if(this.zpp_inner.type==0)this.zpp_inner.circle.__translate(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this));else this.zpp_inner.polygon.__translate(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this))}if(e.zpp_inner.weak){e.dispose();true}else false;return this},scale:function(e,t){this.zpp_inner.immutable_midstep("Shape::scale()");if(this.zpp_inner.body!=null&&this.zpp_inner.body.space!=null&&this.zpp_inner.body.type==1)throw new g("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(e!=e||t!=t)throw new g("Error: Cannot scale Shape by NaN");if(e==0||t==0)throw new g("Error: Cannot Scale shape by a factor of 0");if(this.zpp_inner.type==0){var n=e*e-t*t;if(n*n<N.epsilon*N.epsilon)this.zpp_inner.circle.__scale(e,t);else throw new g("Error: Cannot perform a non equal scaling on a Circle")}else this.zpp_inner.polygon.__scale(e,t);return this},rotate:function(e){this.zpp_inner.immutable_midstep("Shape::rotate()");if(this.zpp_inner.body!=null&&this.zpp_inner.body.space!=null&&this.zpp_inner.body.type==1)throw new g("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(e!=e)throw new g("Error: Cannot rotate Shape by NaN");var t=e%(2*Math.PI);if(t!=0){var n=Math.cos(e);var r=Math.sin(e);if(this.zpp_inner.type==0)this.zpp_inner.circle.__rotate(r,n);else this.zpp_inner.polygon.__rotate(r,n)}return this},transform:function(e){this.zpp_inner.immutable_midstep("Shape::transform()");if(this.zpp_inner.body!=null&&this.zpp_inner.body.space!=null&&this.zpp_inner.body.type==1)throw new g("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(e==null)throw new g("Error: Cannot transform Shape by null matrix");if(e.singular())throw new g("Error: Cannot transform Shape by a singular matrix");if(this.zpp_inner.type==0){if(e.equiorthogonal())this.zpp_inner.circle.__transform(e);else throw new g("Error: Cannot transform Circle by a non equiorthogonal matrix")}else this.zpp_inner.polygon.__transform(e);return this},contains:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Cannot check null point for containment");if((this.zpp_inner.body!=null?this.zpp_inner.body.outer:null)==null)throw new g("Error: Shape is not well defined without a Body");sr.validateShape(this.zpp_inner);e.zpp_inner.validate();var t=Zn.shapeContains(this.zpp_inner,e.zpp_inner);if(e.zpp_inner.weak){e.dispose();true}else false;return t},copy:function(){return this.zpp_inner.copy()},toString:function(){var e;if(this.zpp_inner.type==0)e="Circle";else e="Polygon";return e+"#"+this.zpp_inner_i.id},__class__:Yt});var Zt=function(e,t,n,r){this.zpp_inner_zn=null;Yt.zpp_internalAlloc=true;Yt.call(this);Yt.zpp_internalAlloc=false;this.zpp_inner_zn=new Ir;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i=this.zpp_inner;this.zpp_inner_i.outer_i=this;this.zpp_inner.immutable_midstep("Circle::radius");if(this.zpp_inner.body!=null&&this.zpp_inner.body.type==1&&this.zpp_inner.body.space!=null)throw new g("Error: Cannot modifiy radius of Circle contained in static object once added to space");if(e!=this.zpp_inner_zn.radius){if(e!=e)throw new g("Error: Circle::radius cannot be NaN");if(e<N.epsilon)throw new g("Error: Circle::radius ("+e+") must be > Config.epsilon");if(e>1e100)throw new g("Error: Circle::radius ("+e+") must be < PR(Const).FMAX");this.zpp_inner_zn.radius=e;this.zpp_inner_zn.invalidate_radius()}this.zpp_inner_zn.radius;if(t==null){this.zpp_inner.localCOMx=0;this.zpp_inner.localCOMy=0}else{if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();this.zpp_inner.localCOMx=t.zpp_inner.x;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();this.zpp_inner.localCOMy=t.zpp_inner.y;if(t.zpp_inner.weak){t.dispose();true}else false}if(n==null){if(jr.zpp_pool==null)this.zpp_inner.material=new jr;else{this.zpp_inner.material=jr.zpp_pool;jr.zpp_pool=this.zpp_inner.material.next;this.zpp_inner.material.next=null}null}else{this.zpp_inner.immutable_midstep("Shape::material");if(n==null)throw new g("Error: Cannot assign null as Shape material");this.zpp_inner.setMaterial(n.zpp_inner);this.zpp_inner.material.wrapper()}if(r==null){if(Jn.zpp_pool==null)this.zpp_inner.filter=new Jn;else{this.zpp_inner.filter=Jn.zpp_pool;Jn.zpp_pool=this.zpp_inner.filter.next;this.zpp_inner.filter.next=null}null}else{this.zpp_inner.immutable_midstep("Shape::filter");if(r==null)throw new g("Error: Cannot assign null as Shape filter");this.zpp_inner.setFilter(r.zpp_inner);this.zpp_inner.filter.wrapper()}this.zpp_inner_i.insert_cbtype(xn.ANY_SHAPE.zpp_inner)};Zt.__name__=true;Zt.__super__=Yt;Zt.prototype=n(Yt.prototype,{get_radius:function(){return this.zpp_inner_zn.radius},set_radius:function(e){this.zpp_inner.immutable_midstep("Circle::radius");if(this.zpp_inner.body!=null&&this.zpp_inner.body.type==1&&this.zpp_inner.body.space!=null)throw new g("Error: Cannot modifiy radius of Circle contained in static object once added to space");if(e!=this.zpp_inner_zn.radius){if(e!=e)throw new g("Error: Circle::radius cannot be NaN");if(e<N.epsilon)throw new g("Error: Circle::radius ("+e+") must be > Config.epsilon");if(e>1e100)throw new g("Error: Circle::radius ("+e+") must be < PR(Const).FMAX");this.zpp_inner_zn.radius=e;this.zpp_inner_zn.invalidate_radius()}return this.zpp_inner_zn.radius},__class__:Zt});var en=function(){this.zpp_inner=null;if(!qr.internal)throw new g("Error: Cannot instantiate an Edge derp!")};en.__name__=true;en.prototype={get_polygon:function(){if(this.zpp_inner.polygon==null)throw new g("Error: Edge not current in use");return this.zpp_inner.polygon.outer_zn},get_localNormal:function(){if(this.zpp_inner.polygon==null)throw new g("Error: Edge not current in use");if(this.zpp_inner.wrap_lnorm==null)this.zpp_inner.getlnorm();return this.zpp_inner.wrap_lnorm},get_worldNormal:function(){if(this.zpp_inner.polygon==null)throw new g("Error: Edge not current in use");if(this.zpp_inner.wrap_gnorm==null)this.zpp_inner.getgnorm();return this.zpp_inner.wrap_gnorm},get_length:function(){if(this.zpp_inner.polygon==null)throw new g("Error: Edge not current in use");this.zpp_inner.polygon.validate_laxi();return this.zpp_inner.length},get_localProjection:function(){if(this.zpp_inner.polygon==null)throw new g("Error: Edge not current in use");this.zpp_inner.polygon.validate_laxi();return this.zpp_inner.lprojection},get_worldProjection:function(){if(this.zpp_inner.polygon==null)throw new g("Error: Edge not current in use");if(this.zpp_inner.polygon.body==null)throw new g("Error: Edge world projection only makes sense for Polygons contained within a rigid body");this.zpp_inner.polygon.validate_gaxi();return this.zpp_inner.gprojection},get_localVertex1:function(){if(this.zpp_inner.polygon==null)throw new g("Error: Edge not current in use");this.zpp_inner.polygon.validate_laxi();return this.zpp_inner.lp0.wrapper()},get_localVertex2:function(){if(this.zpp_inner.polygon==null)throw new g("Error: Edge not current in use");this.zpp_inner.polygon.validate_laxi();return this.zpp_inner.lp1.wrapper()},get_worldVertex1:function(){if(this.zpp_inner.polygon==null)throw new g("Error: Edge not current in use");this.zpp_inner.polygon.validate_gaxi();return this.zpp_inner.gp0.wrapper()},get_worldVertex2:function(){if(this.zpp_inner.polygon==null)throw new g("Error: Edge not current in use");this.zpp_inner.polygon.validate_gaxi();return this.zpp_inner.gp1.wrapper()},toString:function(){if(this.zpp_inner.polygon==null)return"Edge(object-pooled)";else if(this.zpp_inner.polygon.body==null){this.zpp_inner.polygon.validate_laxi();return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" }"}else{this.zpp_inner.polygon.validate_gaxi();return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+("{ x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" }")+" }"}},__class__:en};var tn=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!Ts.internal)throw new g("Error: Cannot instantiate "+"Edge"+"Iterator derp!")};tn.__name__=true;tn.get=function(e){var t;if(tn.zpp_pool==null){Ts.internal=true;var n=new tn;Ts.internal=false;t=n}else{var r=tn.zpp_pool;tn.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};tn.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=tn.zpp_pool;tn.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:tn};var nn=function(){this.zpp_inner=null;this.zpp_inner=new Ts;this.zpp_inner.outer=this};nn.__name__=true;nn.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new nn;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};nn.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)if(e==this.get_length()-1)e=e;else e=this.get_length()-2-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Edge"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Edge"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Edge"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.wrapper();return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Edge"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.wrapper();return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Edge"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Edge"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return tn.get(this)},copy:function(e){if(e==null)e=false;var t=new nn;var n;this.zpp_inner.valmod();n=tn.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"Edge"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=tn.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=tn.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=tn.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=tn.zpp_pool;tn.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:nn};var rn=function(e,t,n){this.zpp_inner_zn=null;Yt.zpp_internalAlloc=true;Yt.call(this);Yt.zpp_internalAlloc=false;if(e==null)throw new g("Error: localVerts cannot be null");this.zpp_inner_zn=new Rr;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i=this.zpp_inner;this.zpp_inner_i.outer_i=this;if(e instanceof Array&&e.__enum__==null){var r=e;var i=0;while(i<r.length){var s=r[i];++i;if(s==null)throw new g("Error: Array<Vec2> contains null objects");if(!y.__instanceof(s,_t))throw new g("Error: Array<Vec2> contains non Vec2 objects");var o=s;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");(function(e){var t;if(e.zpp_inner_zn.wrap_lverts==null)e.zpp_inner_zn.getlverts();t=e.zpp_inner_zn.wrap_lverts;return t})(this).push(function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t=_t.get(function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.x;return t}(e),function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.y;return t}(e),false);return t}(this))}}else if(y.__instanceof(e,Pt)){var u=e;var a=u.iterator();while(a.hasNext()){var f;a.zpp_critical=false;f=a.zpp_inner.at(a.zpp_i++);if(f==null)throw new g("Error: Vec2List contains null objects");if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");(function(e){var t;if(e.zpp_inner_zn.wrap_lverts==null)e.zpp_inner_zn.getlverts();t=e.zpp_inner_zn.wrap_lverts;return t})(this).push(function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t=_t.get(function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.x;return t}(e),function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(e),false);return t}(this))}}else if(y.__instanceof(e,Et)){var l=e;if(l!=null&&l.zpp_disp)throw new g("Error: "+"GeomPoly"+" has been disposed and cannot be used!");var c=l.zpp_inner.vertices;if(c!=null){var h=c;do{var p=_t.get(h.x,h.y,null);h=h.next;(function(e){var t;if(e.zpp_inner_zn.wrap_lverts==null)e.zpp_inner_zn.getlverts();t=e.zpp_inner_zn.wrap_lverts;return t})(this).push(function(e){var t;if(p!=null&&p.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t=_t.get(function(e){var t;if(p!=null&&p.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");p.zpp_inner.validate();t=p.zpp_inner.x;return t}(e),function(e){var t;if(p!=null&&p.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");p.zpp_inner.validate();t=p.zpp_inner.y;return t}(e),false);return t}(this));p.dispose()}while(h!=c)}}else throw new g("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");if(e instanceof Array&&e.__enum__==null){var d=e;var v=0;while(v<d.length){var m=d[v];if(m.zpp_inner.weak?function(e){var t;m.dispose();t=true;return t}(this):false){d.splice(v,1);continue}v++}}else if(y.__instanceof(e,Pt)){var b=e;if(b.zpp_inner._validate!=null)b.zpp_inner._validate();var w=b.zpp_inner.inner;var E=null;var S=w.head;while(S!=null){var x=S.elt;if(x.outer.zpp_inner.weak){S=w.erase(E);if(x.outer.zpp_inner.weak){x.outer.dispose();true}else false}else{E=S;S=S.next}}}if(t==null){if(jr.zpp_pool==null)this.zpp_inner.material=new jr;else{this.zpp_inner.material=jr.zpp_pool;jr.zpp_pool=this.zpp_inner.material.next;this.zpp_inner.material.next=null}null}else{this.zpp_inner.immutable_midstep("Shape::material");if(t==null)throw new g("Error: Cannot assign null as Shape material");this.zpp_inner.setMaterial(t.zpp_inner);this.zpp_inner.material.wrapper()}if(n==null){if(Jn.zpp_pool==null)this.zpp_inner.filter=new Jn;else{this.zpp_inner.filter=Jn.zpp_pool;Jn.zpp_pool=this.zpp_inner.filter.next;this.zpp_inner.filter.next=null}null}else{this.zpp_inner.immutable_midstep("Shape::filter");if(n==null)throw new g("Error: Cannot assign null as Shape filter");this.zpp_inner.setFilter(n.zpp_inner);this.zpp_inner.filter.wrapper()}this.zpp_inner_i.insert_cbtype(xn.ANY_SHAPE.zpp_inner)};rn.__name__=true;rn.rect=function(e,t,n,r,i){if(i==null)i=false;if(e!=e||t!=t||n!=n||r!=r)throw new g("Error: Polygon.rect cannot accept NaN arguments");return[_t.get(e,t,i),_t.get(e+n,t,i),_t.get(e+n,t+r,i),_t.get(e,t+r,i)]};rn.box=function(e,t,n){if(n==null)n=false;if(e!=e||t!=t)throw new g("Error: Polygon.box cannot accept NaN arguments");return rn.rect(-e/2,-t/2,e,t,n)};rn.regular=function(e,t,n,r,i){if(i==null)i=false;if(r==null)r=0;if(e!=e||t!=t||r!=r)throw new g("Error: Polygon.regular cannot accept NaN arguments");var s=[];var o=Math.PI*2/n;var u=0;while(u<n){var a=u++;var f=a*o+r;var l=_t.get(Math.cos(f)*e,Math.sin(f)*t,i);s.push(l)}return s};rn.__super__=Yt;rn.prototype=n(Yt.prototype,{get_localVerts:function(){if(this.zpp_inner_zn.wrap_lverts==null)this.zpp_inner_zn.getlverts();return this.zpp_inner_zn.wrap_lverts},get_worldVerts:function(){if(this.zpp_inner_zn.wrap_gverts==null)this.zpp_inner_zn.getgverts();return this.zpp_inner_zn.wrap_gverts},get_edges:function(){if(this.zpp_inner_zn.wrap_edges==null)this.zpp_inner_zn.getedges();return this.zpp_inner_zn.wrap_edges},validity:function(){return this.zpp_inner_zn.valid()},__class__:rn});var sn=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null;if(!Ns.internal)throw new g("Error: Cannot instantiate "+"Shape"+"Iterator derp!")};sn.__name__=true;sn.get=function(e){var t;if(sn.zpp_pool==null){Ns.internal=true;var n=new sn;Ns.internal=false;t=n}else{var r=sn.zpp_pool;sn.zpp_pool=r.zpp_next;t=r}t.zpp_i=0;t.zpp_inner=e;t.zpp_critical=false;return t};sn.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.get_length();this.zpp_critical=true;if(this.zpp_i<e)return true;else{this.zpp_next=sn.zpp_pool;sn.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:sn};var on=function(){this.zpp_inner=null;this.zpp_inner=new Ns;this.zpp_inner.outer=this};on.__name__=true;on.fromArray=function(e){if(e==null)throw new g("Error: Cannot convert null Array to Nape list");var t=new on;var n=0;while(n<e.length){var r=e[n];++n;t.push(r)}return t};on.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},has:function(e){this.zpp_inner.valmod();return this.zpp_inner.inner.has(e.zpp_inner)},at:function(e){this.zpp_inner.valmod();if(e<0||e>=this.get_length())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.get_length()-1-e;if(e<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=e;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e)}else while(this.zpp_inner.at_index!=e){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.outer},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Shape"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Shape"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null)if(this.zpp_inner.inner.head==null)this.zpp_inner.push_ite=null;else this.zpp_inner.push_ite=this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Shape"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){e=this.zpp_inner.inner.head.elt;var t=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var n;if(this.get_length()==1)n=null;else n=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(n==null)e=this.zpp_inner.inner.head.elt;else e=n.next.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(n)}this.zpp_inner.invalidate();var i=e.outer;return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Shape"+"List is immutable");this.zpp_inner.modify_test();if(this.zpp_inner.inner.head==null)throw new g("Error: Cannot remove from empty list");this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null)this.zpp_inner.at_ite=null;var t;if(this.get_length()==1)t=null;else t=this.zpp_inner.inner.iterator_at(this.get_length()-2);if(t==null)e=this.zpp_inner.inner.head.elt;else e=t.next.elt;var n=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.erase(t)}else{e=this.zpp_inner.inner.head.elt;var r=e.outer;if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.pop()}this.zpp_inner.invalidate();var i=e.outer;return i},add:function(e){if(this.zpp_inner.reverse_flag)return this.push(e);else return this.unshift(e)},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Shape"+"List is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var t;t=false;var n=this.zpp_inner.inner.head;while(n!=null){var r=n.elt;if(r==e.zpp_inner){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.zpp_inner.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Shape"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!(this.zpp_inner.inner.head==null))this.pop();else while(!(this.zpp_inner.inner.head==null))this.shift()},empty:function(){return this.zpp_inner.inner.head==null},iterator:function(){this.zpp_inner.valmod();return sn.get(this)},copy:function(e){if(e==null)e=false;var t=new on;var n;this.zpp_inner.valmod();n=sn.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);t.push(e?function(e){var t;throw new g("Error: "+"Shape"+" is not a copyable type");t=null;return t}(this):r)}return t},merge:function(e){if(e==null)throw new g("Error: Cannot merge with null list");var t;e.zpp_inner.valmod();t=sn.get(e);while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);if(!this.has(n)){if(this.zpp_inner.reverse_flag)this.push(n);else this.unshift(n)}}},toString:function(){var e="[";var t=true;var n;this.zpp_inner.valmod();n=sn.get(this);while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);if(!t)e+=",";if(r==null)e+="NULL";else e+=r.toString();t=false}return e+"]"},foreach:function(e){if(e==null)throw new g("Error: Cannot execute null on list elements");var t;this.zpp_inner.valmod();t=sn.get(this);while(t.hasNext())try{e(function(e){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);return n}(this))}catch(n){if(n instanceof g)n=n.val;t.zpp_next=sn.zpp_pool;sn.zpp_pool=t;t.zpp_inner=null;break}return this},filter:function(e){if(e==null)throw new g("Error: Cannot select elements of list with null");var t=0;while(t<this.get_length()){var n=this.at(t);try{if(e(n))t++;else this.remove(n)}catch(r){if(r instanceof g)r=r.val;break}}return this},__class__:on};var un=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"ShapeType"+" derp!")};un.__name__=true;un.get_CIRCLE=function(){if(Tn.ShapeType_CIRCLE==null){Tn.internal=true;Tn.ShapeType_CIRCLE=new un;Tn.internal=false}return Tn.ShapeType_CIRCLE};un.get_POLYGON=function(){if(Tn.ShapeType_POLYGON==null){Tn.internal=true;Tn.ShapeType_POLYGON=new un;Tn.internal=false}return Tn.ShapeType_POLYGON};un.prototype={toString:function(){if(this==function(e){var t;if(Tn.ShapeType_CIRCLE==null){Tn.internal=true;Tn.ShapeType_CIRCLE=new un;Tn.internal=false}t=Tn.ShapeType_CIRCLE;return t}(this))return"CIRCLE";else if(this==function(e){var t;if(Tn.ShapeType_POLYGON==null){Tn.internal=true;Tn.ShapeType_POLYGON=new un;Tn.internal=false}t=Tn.ShapeType_POLYGON;return t}(this))return"POLYGON";else return""},__class__:un};var an=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"ValidationResult"+" derp!")};an.__name__=true;an.get_VALID=function(){if(Tn.ValidationResult_VALID==null){Tn.internal=true;Tn.ValidationResult_VALID=new an;Tn.internal=false}return Tn.ValidationResult_VALID};an.get_DEGENERATE=function(){if(Tn.ValidationResult_DEGENERATE==null){Tn.internal=true;Tn.ValidationResult_DEGENERATE=new an;Tn.internal=false}return Tn.ValidationResult_DEGENERATE};an.get_CONCAVE=function(){if(Tn.ValidationResult_CONCAVE==null){Tn.internal=true;Tn.ValidationResult_CONCAVE=new an;Tn.internal=false}return Tn.ValidationResult_CONCAVE};an.get_SELF_INTERSECTING=function(){if(Tn.ValidationResult_SELF_INTERSECTING==null){Tn.internal=true;Tn.ValidationResult_SELF_INTERSECTING=new an;Tn.internal=false}return Tn.ValidationResult_SELF_INTERSECTING};an.prototype={toString:function(){if(this==function(e){var t;if(Tn.ValidationResult_VALID==null){Tn.internal=true;Tn.ValidationResult_VALID=new an;Tn.internal=false}t=Tn.ValidationResult_VALID;return t}(this))return"VALID";else if(this==function(e){var t;if(Tn.ValidationResult_DEGENERATE==null){Tn.internal=true;Tn.ValidationResult_DEGENERATE=new an;Tn.internal=false}t=Tn.ValidationResult_DEGENERATE;return t}(this))return"DEGENERATE";else if(this==function(e){var t;if(Tn.ValidationResult_CONCAVE==null){Tn.internal=true;Tn.ValidationResult_CONCAVE=new an;Tn.internal=false}t=Tn.ValidationResult_CONCAVE;return t}(this))return"CONCAVE";else if(this==function(e){var t;if(Tn.ValidationResult_SELF_INTERSECTING==null){Tn.internal=true;Tn.ValidationResult_SELF_INTERSECTING=new an;Tn.internal=false}t=Tn.ValidationResult_SELF_INTERSECTING;return t}(this))return"SELF_INTERSECTING";else return""},__class__:an};var fn=function(){if(!Tn.internal)throw new g("Error: Cannot instantiate "+"Broadphase"+" derp!")};fn.__name__=true;fn.get_DYNAMIC_AABB_TREE=function(){if(Tn.Broadphase_DYNAMIC_AABB_TREE==null){Tn.internal=true;Tn.Broadphase_DYNAMIC_AABB_TREE=new fn;Tn.internal=false}return Tn.Broadphase_DYNAMIC_AABB_TREE};fn.get_SWEEP_AND_PRUNE=function(){if(Tn.Broadphase_SWEEP_AND_PRUNE==null){Tn.internal=true;Tn.Broadphase_SWEEP_AND_PRUNE=new fn;Tn.internal=false}return Tn.Broadphase_SWEEP_AND_PRUNE};fn.prototype={toString:function(){if(this==function(e){var t;if(Tn.Broadphase_DYNAMIC_AABB_TREE==null){Tn.internal=true;Tn.Broadphase_DYNAMIC_AABB_TREE=new fn;Tn.internal=false}t=Tn.Broadphase_DYNAMIC_AABB_TREE;return t}(this))return"DYNAMIC_AABB_TREE";else if(this==function(e){var t;if(Tn.Broadphase_SWEEP_AND_PRUNE==null){Tn.internal=true;Tn.Broadphase_SWEEP_AND_PRUNE=new fn;Tn.internal=false}t=Tn.Broadphase_SWEEP_AND_PRUNE;return t}(this))return"SWEEP_AND_PRUNE";else return""},__class__:fn};var ln=function(e,t){this.zpp_inner=null;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");this.zpp_inner=new Gr(e==null?null:e.zpp_inner,t);this.zpp_inner.outer=this;if(e!=null){if(e.zpp_inner.weak){e.dispose();true}else false}};ln.__name__=true;ln.prototype={get_userData:function(){if(this.zpp_inner.userData==null)this.zpp_inner.userData={};return this.zpp_inner.userData},get_gravity:function(){if(this.zpp_inner.wrap_gravity==null)this.zpp_inner.getgravity();return this.zpp_inner.wrap_gravity},set_gravity:function(e){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Space::gravity cannot be null");(function(e){var t;if(e.zpp_inner.wrap_gravity==null)e.zpp_inner.getgravity();t=e.zpp_inner.wrap_gravity;return t})(this).set(e);if(this.zpp_inner.wrap_gravity==null)this.zpp_inner.getgravity();return this.zpp_inner.wrap_gravity},get_broadphase:function(){if(this.zpp_inner.bphase.is_sweep){if(Tn.Broadphase_SWEEP_AND_PRUNE==null){Tn.internal=true;Tn.Broadphase_SWEEP_AND_PRUNE=new fn;Tn.internal=false}return Tn.Broadphase_SWEEP_AND_PRUNE}else{if(Tn.Broadphase_DYNAMIC_AABB_TREE==null){Tn.internal=true;Tn.Broadphase_DYNAMIC_AABB_TREE=new fn;Tn.internal=false}return Tn.Broadphase_DYNAMIC_AABB_TREE}},get_sortContacts:function(){return this.zpp_inner.sortcontacts},set_sortContacts:function(e){this.zpp_inner.sortcontacts=e;return this.zpp_inner.sortcontacts},get_worldAngularDrag:function(){return this.zpp_inner.global_ang_drag},set_worldAngularDrag:function(e){var t=e;if(t!=t)throw new g("Error: Space::worldAngularDrag cannot be NaN");this.zpp_inner.global_ang_drag=t;return this.zpp_inner.global_ang_drag},get_worldLinearDrag:function(){return this.zpp_inner.global_lin_drag},set_worldLinearDrag:function(e){var t=e;if(t!=t)throw new g("Error: Space::worldLinearDrag cannot be NaN");this.zpp_inner.global_lin_drag=t;return this.zpp_inner.global_lin_drag},get_compounds:function(){return this.zpp_inner.wrap_compounds},get_bodies:function(){return this.zpp_inner.wrap_bodies},get_liveBodies:function(){return this.zpp_inner.wrap_live},get_constraints:function(){return this.zpp_inner.wrap_constraints},get_liveConstraints:function(){return this.zpp_inner.wrap_livecon},visitBodies:function(e){if(e==null)throw new g("Error: lambda cannot be null for Space::visitBodies");var t=this.zpp_inner.wrap_bodies.iterator();while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);e(n)}var r=this.zpp_inner.wrap_compounds.iterator();while(r.hasNext()){var i;r.zpp_critical=false;i=r.zpp_inner.at(r.zpp_i++);i.visitBodies(e)}},visitConstraints:function(e){if(e==null)throw new g("Error: lambda cannot be null for Space::visitConstraints");var t=this.zpp_inner.wrap_constraints.iterator();while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);e(n)}var r=this.zpp_inner.wrap_compounds.iterator();while(r.hasNext()){var i;r.zpp_critical=false;i=r.zpp_inner.at(r.zpp_i++);i.visitConstraints(e)}},visitCompounds:function(e){if(e==null)throw new g("Error: lambda cannot be null for Space::visitCompounds");var t=this.zpp_inner.wrap_compounds.iterator();while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);e(n);n.visitCompounds(e)}},get_world:function(){return this.zpp_inner.__static},get_arbiters:function(){if(this.zpp_inner.wrap_arbiters==null){var e=new Qn;e.space=this.zpp_inner;this.zpp_inner.wrap_arbiters=e}return this.zpp_inner.wrap_arbiters},get_listeners:function(){return this.zpp_inner.wrap_listeners},clear:function(){if(this.zpp_inner.midstep)throw new g("Error: Space::clear() cannot be called during space step()");this.zpp_inner.clear()},step:function(e,t,n){if(n==null)n=10;if(t==null)t=10;if(e!=e)throw new g("Error: deltaTime cannot be NaN");if(e<=0)throw new g("Error: deltaTime must be strictly positive");if(t<=0)throw new g("Error: must use atleast one velocity iteration");if(n<=0)throw new g("Error: must use atleast one position iteration");this.zpp_inner.step(e,t,n)},get_timeStamp:function(){return this.zpp_inner.stamp},get_elapsedTime:function(){return this.zpp_inner.time},interactionType:function(e,t){if(e==null||t==null)throw new g("Error: Cannot evaluate interaction type for null shapes");if((e.zpp_inner.body!=null?e.zpp_inner.body.outer:null)==null||(t.zpp_inner.body!=null?t.zpp_inner.body.outer:null)==null)throw new g("Error: Cannot evaluate interaction type for shapes not part of a Body");if((e.zpp_inner.body!=null?e.zpp_inner.body.outer:null).zpp_inner.type==1&&(t.zpp_inner.body!=null?t.zpp_inner.body.outer:null).zpp_inner.type==1)return null;if((e.zpp_inner.body!=null?e.zpp_inner.body.outer:null)==(t.zpp_inner.body!=null?t.zpp_inner.body.outer:null))return null;var n=e.zpp_inner;var r=t.zpp_inner;var i=this.zpp_inner.interactionType(n,r,n.body,r.body);switch(i){case 0:if(Tn.InteractionType_FLUID==null){Tn.internal=true;Tn.InteractionType_FLUID=new F;Tn.internal=false}return Tn.InteractionType_FLUID;case 1:if(Tn.InteractionType_COLLISION==null){Tn.internal=true;Tn.InteractionType_COLLISION=new F;Tn.internal=false}return Tn.InteractionType_COLLISION;case 2:if(Tn.InteractionType_SENSOR==null){Tn.internal=true;Tn.InteractionType_SENSOR=new F;Tn.internal=false}return Tn.InteractionType_SENSOR;default:return null}},shapesUnderPoint:function(e,t,n){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot evaluate shapes under a null point :)");var r=this.zpp_inner.shapesUnderPoint(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this),t==null?null:t.zpp_inner,n);if(e.zpp_inner.weak){e.dispose();true}else false;return r},bodiesUnderPoint:function(e,t,n){if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot evaluate objects under a null point :)");var r=this.zpp_inner.bodiesUnderPoint(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this),t==null?null:t.zpp_inner,n);if(e.zpp_inner.weak){e.dispose();true}else false;return r},shapesInAABB:function(e,t,n,r,i){if(n==null)n=true;if(t==null)t=false;if(e==null)throw new g("Error: Cannot evaluate shapes in a null AABB :)");if(function(t){var n;e.zpp_inner.validate();n=e.zpp_inner.width();return n}(this)==0||function(t){var n;e.zpp_inner.validate();n=e.zpp_inner.height();return n}(this)==0)throw new g("Error: Cannot evaluate shapes in degenerate AABB :/");return this.zpp_inner.shapesInAABB(e,n,t,r==null?null:r.zpp_inner,i)},bodiesInAABB:function(e,t,n,r,i){if(n==null)n=true;if(t==null)t=false;if(e==null)throw new g("Error: Cannot evaluate objects in a null AABB :)");if(function(t){var n;e.zpp_inner.validate();n=e.zpp_inner.width();return n}(this)==0||function(t){var n;e.zpp_inner.validate();n=e.zpp_inner.height();return n}(this)==0)throw new g("Error: Cannot evaluate objects in degenerate AABB :/");return this.zpp_inner.bodiesInAABB(e,n,t,r==null?null:r.zpp_inner,i)},shapesInCircle:function(e,t,n,r,i){if(n==null)n=false;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot evaluate shapes at null circle :)");if(t!=t)throw new g("Error: Circle radius cannot be NaN");if(t<=0)throw new g("Error: Circle radius must be strictly positive");var s=this.zpp_inner.shapesInCircle(e,t,n,r==null?null:r.zpp_inner,i);if(e.zpp_inner.weak){e.dispose();true}else false;return s},bodiesInCircle:function(e,t,n,r,i){if(n==null)n=false;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");if(e==null)throw new g("Error: Cannot evaluate objects at null circle :)");if(t!=t)throw new g("Error: Circle radius cannot be NaN");if(t<=0)throw new g("Error: Circle radius must be strictly positive");var s=this.zpp_inner.bodiesInCircle(e,t,n,r==null?null:r.zpp_inner,i);if(e.zpp_inner.weak){e.dispose();true}else false;return s},shapesInShape:function(e,t,n,r){if(t==null)t=false;if(e==null)throw new g("Error: Cannot evaluate shapes in a null shapes :)");if((e.zpp_inner.body!=null?e.zpp_inner.body.outer:null)==null)throw new g("Error: Query shape needs to be inside a Body to be well defined :)");if(e.zpp_inner.type==1){var i=e.zpp_inner.polygon.valid();if(i!=function(e){var t;if(Tn.ValidationResult_VALID==null){Tn.internal=true;Tn.ValidationResult_VALID=new an;Tn.internal=false}t=Tn.ValidationResult_VALID;return t}(this))throw new g("Error: Polygon query shape is invalid : "+i.toString())}return this.zpp_inner.shapesInShape(e.zpp_inner,t,n==null?null:n.zpp_inner,r)},bodiesInShape:function(e,t,n,r){if(t==null)t=false;if(e==null)throw new g("Error: Cannot evaluate bodies in a null shapes :)");if((e.zpp_inner.body!=null?e.zpp_inner.body.outer:null)==null)throw new g("Error: Query shape needs to be inside a Body to be well defined :)");if(e.zpp_inner.type==1){var i=e.zpp_inner.polygon.valid();if(i!=function(e){var t;if(Tn.ValidationResult_VALID==null){Tn.internal=true;Tn.ValidationResult_VALID=new an;Tn.internal=false}t=Tn.ValidationResult_VALID;return t}(this))throw new g("Error: Polygon query shape is invalid : "+i.toString())}return this.zpp_inner.bodiesInShape(e.zpp_inner,t,n==null?null:n.zpp_inner,r)},shapesInBody:function(e,t,n){if(e==null)throw new g("Error: Cannot evaluate shapes in null body");var r;if(n==null)r=new on;else r=n;var i=e.zpp_inner.wrap_shapes.iterator();while(i.hasNext()){var s;i.zpp_critical=false;s=i.zpp_inner.at(i.zpp_i++);var o=this.shapesInShape(s,false,t,r)}return r},bodiesInBody:function(e,t,n){if(e==null)throw new g("Error: Cannot evaluate shapes in null body");var r;if(n==null)r=new qt;else r=n;var i=e.zpp_inner.wrap_shapes.iterator();while(i.hasNext()){var s;i.zpp_critical=false;s=i.zpp_inner.at(i.zpp_i++);var o=this.bodiesInShape(s,false,t,r)}return r},convexCast:function(e,t,n,r){if(n==null)n=false;if(e==null)throw new g("Error: Cannot cast null shape :)");if((e.zpp_inner.body!=null?e.zpp_inner.body.outer:null)==null)throw new g("Error: Shape must belong to a body to be cast.");if(t<0||t!=t)throw new g("Error: deltaTime must be positive");return this.zpp_inner.convexCast(e.zpp_inner,t,r,n)},convexMultiCast:function(e,t,n,r,i){if(n==null)n=false;if(e==null)throw new g("Error: Cannot cast null shape :)");if((e.zpp_inner.body!=null?e.zpp_inner.body.outer:null)==null)throw new g("Error: Shape must belong to a body to be cast.");if(t<0||t!=t)throw new g("Error: deltaTime must be positive");return this.zpp_inner.convexMultiCast(e.zpp_inner,t,r,n,i)},rayCast:function(e,t,n){if(t==null)t=false;if(e==null)throw new g("Error: Cannot cast null ray :)");return this.zpp_inner.rayCast(e,t,n)},rayMultiCast:function(e,t,n,r){if(t==null)t=false;if(e==null)throw new g("Error: Cannot cast null ray :)");return this.zpp_inner.rayMultiCast(e,t,n,r)},__class__:ln};var cn=function(){};cn.__name__=true;cn.version=function(){return"Nape 2.0.19"};cn.clearObjectPools=function(){while(J.zpp_pool!=null){var e=J.zpp_pool.zpp_next;J.zpp_pool.zpp_next=null;J.zpp_pool=e}while(Jt.zpp_pool!=null){var t=Jt.zpp_pool.zpp_next;Jt.zpp_pool.zpp_next=null;Jt.zpp_pool=t}while(It.zpp_pool!=null){var n=It.zpp_pool.zpp_next;It.zpp_pool.zpp_next=null;It.zpp_pool=n}while(zt.zpp_pool!=null){var r=zt.zpp_pool.zpp_next;zt.zpp_pool.zpp_next=null;zt.zpp_pool=r}while(I.zpp_pool!=null){var i=I.zpp_pool.zpp_next;I.zpp_pool.zpp_next=null;I.zpp_pool=i}while(_.zpp_pool!=null){var s=_.zpp_pool.zpp_next;_.zpp_pool.zpp_next=null;_.zpp_pool=s}while(yt.zpp_pool!=null){var o=yt.zpp_pool.zpp_next;yt.zpp_pool.zpp_next=null;yt.zpp_pool=o}while(St.zpp_pool!=null){var u=St.zpp_pool.zpp_next;St.zpp_pool.zpp_next=null;St.zpp_pool=u}while(Dt.zpp_pool!=null){var a=Dt.zpp_pool.zpp_next;Dt.zpp_pool.zpp_next=null;Dt.zpp_pool=a}while(Ot.zpp_pool!=null){var f=Ot.zpp_pool.zpp_next;Ot.zpp_pool.zpp_next=null;Ot.zpp_pool=f}while(sn.zpp_pool!=null){var l=sn.zpp_pool.zpp_next;sn.zpp_pool.zpp_next=null;sn.zpp_pool=l}while(tn.zpp_pool!=null){var c=tn.zpp_pool.zpp_next;tn.zpp_pool.zpp_next=null;tn.zpp_pool=c}while(ft.zpp_pool!=null){var h=ft.zpp_pool.zpp_next;ft.zpp_pool.zpp_next=null;ft.zpp_pool=h}while(it.zpp_pool!=null){var p=it.zpp_pool.zpp_next;it.zpp_pool.zpp_next=null;it.zpp_pool=p}while(dt.zpp_pool!=null){var d=dt.zpp_pool.zpp_next;dt.zpp_pool.zpp_next=null;dt.zpp_pool=d}while(_i.zpp_pool!=null){var v=_i.zpp_pool.next;_i.zpp_pool.next=null;_i.zpp_pool=v}while(Di.zpp_pool!=null){var m=Di.zpp_pool.next;Di.zpp_pool.next=null;Di.zpp_pool=m}while(jr.zpp_pool!=null){var g=jr.zpp_pool.next;jr.zpp_pool.next=null;jr.zpp_pool=g}while(Pi.zpp_pool!=null){var y=Pi.zpp_pool.next;Pi.zpp_pool.next=null;Pi.zpp_pool=y}while(Br.zpp_pool!=null){var b=Br.zpp_pool.next;Br.zpp_pool.next=null;Br.zpp_pool=b}while(Hi.zpp_pool!=null){var w=Hi.zpp_pool.next;Hi.zpp_pool.next=null;Hi.zpp_pool=w}while(Bi.zpp_pool!=null){var E=Bi.zpp_pool.next;Bi.zpp_pool.next=null;Bi.zpp_pool=E}while(ji.zpp_pool!=null){var S=ji.zpp_pool.next;ji.zpp_pool.next=null;ji.zpp_pool=S}while(Fi.zpp_pool!=null){var x=Fi.zpp_pool.next;Fi.zpp_pool.next=null;Fi.zpp_pool=x}while(Ms.zpp_pool!=null){var T=Ms.zpp_pool.next;Ms.zpp_pool.next=null;Ms.zpp_pool=T}while(mn.zpp_pool!=null){var N=mn.zpp_pool.next;mn.zpp_pool.next=null;mn.zpp_pool=N}while(Ii.zpp_pool!=null){var C=Ii.zpp_pool.next;Ii.zpp_pool.next=null;Ii.zpp_pool=C}while(qi.zpp_pool!=null){var k=qi.zpp_pool.next;qi.zpp_pool.next=null;qi.zpp_pool=k}while(Ri.zpp_pool!=null){var L=Ri.zpp_pool.next;Ri.zpp_pool.next=null;Ri.zpp_pool=L}while(Ui.zpp_pool!=null){var A=Ui.zpp_pool.next;Ui.zpp_pool.next=null;Ui.zpp_pool=A}while(dn.zpp_pool!=null){var O=dn.zpp_pool.next;dn.zpp_pool.next=null;dn.zpp_pool=O}while(vn.zpp_pool!=null){var M=vn.zpp_pool.next;vn.zpp_pool.next=null;vn.zpp_pool=M}while(zi.zpp_pool!=null){var D=zi.zpp_pool.next;zi.zpp_pool.next=null;zi.zpp_pool=D}while(Wi.zpp_pool!=null){var P=Wi.zpp_pool.next;Wi.zpp_pool.next=null;Wi.zpp_pool=P}while(or.zpp_pool!=null){var H=or.zpp_pool.next;or.zpp_pool.next=null;or.zpp_pool=H}while(ar.zpp_pool!=null){var B=ar.zpp_pool.next;ar.zpp_pool.next=null;ar.zpp_pool=B}while(hr.zpp_pool!=null){var j=hr.zpp_pool.next;hr.zpp_pool.next=null;hr.zpp_pool=j}while(_s.zpp_pool!=null){var F=_s.zpp_pool.next;_s.zpp_pool.next=null;_s.zpp_pool=F}while(nr.zpp_pool!=null){var q=nr.zpp_pool.next;nr.zpp_pool.next=null;nr.zpp_pool=q}while(rr.zpp_pool!=null){var R=rr.zpp_pool.next;rr.zpp_pool.next=null;rr.zpp_pool=R}while(Xi.zpp_pool!=null){var U=Xi.zpp_pool.next;Xi.zpp_pool.next=null;Xi.zpp_pool=U}while(Vi.zpp_pool!=null){var z=Vi.zpp_pool.next;Vi.zpp_pool.next=null;Vi.zpp_pool=z}while(Or.zpp_pool!=null){var W=Or.zpp_pool.next;Or.zpp_pool.next=null;Or.zpp_pool=W}while($i.zpp_pool!=null){var X=$i.zpp_pool.next;$i.zpp_pool.next=null;$i.zpp_pool=X}while(vr.zpp_pool!=null){var V=vr.zpp_pool.next;vr.zpp_pool.next=null;vr.zpp_pool=V}while(Ds.zpp_pool!=null){var $=Ds.zpp_pool.next;Ds.zpp_pool.next=null;Ds.zpp_pool=$}while(xr.zpp_pool!=null){var K=xr.zpp_pool.next;xr.zpp_pool.next=null;xr.zpp_pool=K}while(Tr.zpp_pool!=null){var Q=Tr.zpp_pool.next;Tr.zpp_pool.next=null;Tr.zpp_pool=Q}while(mr.zpp_pool!=null){var G=mr.zpp_pool.next;mr.zpp_pool.next=null;mr.zpp_pool=G}while(Ji.zpp_pool!=null){var Y=Ji.zpp_pool.next;Ji.zpp_pool.next=null;Ji.zpp_pool=Y}while(Ki.zpp_pool!=null){var Z=Ki.zpp_pool.next;Ki.zpp_pool.next=null;Ki.zpp_pool=Z}while(Lr.zpp_pool!=null){var et=Lr.zpp_pool.next;Lr.zpp_pool.next=null;Lr.zpp_pool=et}while(Ps.zpp_pool!=null){var tt=Ps.zpp_pool.next;Ps.zpp_pool.next=null;Ps.zpp_pool=tt}while(Qi.zpp_pool!=null){var nt=Qi.zpp_pool.next;Qi.zpp_pool.next=null;Qi.zpp_pool=nt}while(Gn.zpp_pool!=null){var rt=Gn.zpp_pool.next;Gn.zpp_pool.next=null;Gn.zpp_pool=rt}while(Hs.zpp_pool!=null){var st=Hs.zpp_pool.next;Hs.zpp_pool.next=null;Hs.zpp_pool=st}while(yr.zpp_pool!=null){var ot=yr.zpp_pool.next;yr.zpp_pool.next=null;yr.zpp_pool=ot}while(br.zpp_pool!=null){var ut=br.zpp_pool.next;br.zpp_pool.next=null;br.zpp_pool=ut}while(Bs.zpp_pool!=null){var at=Bs.zpp_pool.next;Bs.zpp_pool.next=null;Bs.zpp_pool=at}while(js.zpp_pool!=null){var lt=js.zpp_pool.next;js.zpp_pool.next=null;js.zpp_pool=lt}while(wr.zpp_pool!=null){var ct=wr.zpp_pool.next;wr.zpp_pool.next=null;wr.zpp_pool=ct}while(ri.zpp_pool!=null){var ht=ri.zpp_pool.next;ri.zpp_pool.next=null;ri.zpp_pool=ht}while(Cr.zpp_pool!=null){var pt=Cr.zpp_pool.next;Cr.zpp_pool.next=null;Cr.zpp_pool=pt}while(Gi.zpp_pool!=null){var vt=Gi.zpp_pool.next;Gi.zpp_pool.next=null;Gi.zpp_pool=vt}while(Yi.zpp_pool!=null){var mt=Yi.zpp_pool.next;Yi.zpp_pool.next=null;Yi.zpp_pool=mt}while(fr.zpp_pool!=null){var gt=fr.zpp_pool.next;fr.zpp_pool.next=null;fr.zpp_pool=gt}while(lr.zpp_pool!=null){var bt=lr.zpp_pool.next;lr.zpp_pool.next=null;lr.zpp_pool=bt}while(Zi.zpp_pool!=null){var wt=Zi.zpp_pool.next;Zi.zpp_pool.next=null;Zi.zpp_pool=wt}while(qr.zpp_pool!=null){var Et=qr.zpp_pool.next;qr.zpp_pool.next=null;qr.zpp_pool=Et}while(es.zpp_pool!=null){var xt=es.zpp_pool.next;es.zpp_pool.next=null;es.zpp_pool=xt}while(ts.zpp_pool!=null){var Tt=ts.zpp_pool.next;ts.zpp_pool.next=null;ts.zpp_pool=Tt}while(Yr.zpp_pool!=null){var Nt=Yr.zpp_pool.next;Yr.zpp_pool.next=null;Yr.zpp_pool=Nt}while(zr.zpp_pool!=null){var Ct=zr.zpp_pool.next;zr.zpp_pool.next=null;zr.zpp_pool=Ct}while(Wr.zpp_pool!=null){var kt=Wr.zpp_pool.next;Wr.zpp_pool.next=null;Wr.zpp_pool=kt}while(ns.zpp_pool!=null){var Lt=ns.zpp_pool.next;ns.zpp_pool.next=null;ns.zpp_pool=Lt}while(Vn.zpp_pool!=null){var At=Vn.zpp_pool.next;Vn.zpp_pool.next=null;Vn.zpp_pool=At}while(rs.zpp_pool!=null){var Mt=rs.zpp_pool.next;rs.zpp_pool.next=null;rs.zpp_pool=Mt}while($r.zpp_pool!=null){var _t=$r.zpp_pool.next;$r.zpp_pool.next=null;$r.zpp_pool=_t}while(Jr.zpp_pool!=null){var Pt=Jr.zpp_pool.next;Jr.zpp_pool.next=null;Jr.zpp_pool=Pt}while(Kr.zpp_pool!=null){var Ht=Kr.zpp_pool.next;Kr.zpp_pool.next=null;Kr.zpp_pool=Ht}while(zn.zpp_pool!=null){var Bt=zn.zpp_pool.next;zn.zpp_pool.next=null;zn.zpp_pool=Bt}while(Wn.zpp_pool!=null){var jt=Wn.zpp_pool.next;Wn.zpp_pool.next=null;Wn.zpp_pool=jt}while(Fs.zpp_pool!=null){var Ft=Fs.zpp_pool.next;Fs.zpp_pool.next=null;Fs.zpp_pool=Ft}while(is.zpp_pool!=null){var qt=is.zpp_pool.next;is.zpp_pool.next=null;is.zpp_pool=qt}while(Xn.zpp_pool!=null){var Rt=Xn.zpp_pool.next;Xn.zpp_pool.next=null;Xn.zpp_pool=Rt}while(ss.zpp_pool!=null){var Ut=ss.zpp_pool.next;ss.zpp_pool.next=null;ss.zpp_pool=Ut}while(os.zpp_pool!=null){var Wt=os.zpp_pool.next;os.zpp_pool.next=null;os.zpp_pool=Wt}while(us.zpp_pool!=null){var Xt=us.zpp_pool.next;us.zpp_pool.next=null;us.zpp_pool=Xt}while(as.zpp_pool!=null){var Vt=as.zpp_pool.next;as.zpp_pool.next=null;as.zpp_pool=Vt}while(fs.zpp_pool!=null){var $t=fs.zpp_pool.next;fs.zpp_pool.next=null;fs.zpp_pool=$t}while(Jn.zpp_pool!=null){var Kt=Jn.zpp_pool.next;Jn.zpp_pool.next=null;Jn.zpp_pool=Kt}while(ls.zpp_pool!=null){var Qt=ls.zpp_pool.next;ls.zpp_pool.next=null;ls.zpp_pool=Qt}while(cs.zpp_pool!=null){var Gt=cs.zpp_pool.next;cs.zpp_pool.next=null;cs.zpp_pool=Gt}while(hs.zpp_pool!=null){var Yt=hs.zpp_pool.next;hs.zpp_pool.next=null;hs.zpp_pool=Yt}while(Os.poolGeomPoly!=null){var Zt=Os.poolGeomPoly.zpp_pool;Os.poolGeomPoly.zpp_pool=null;Os.poolGeomPoly=Zt}while(Os.poolVec2!=null){var en=Os.poolVec2.zpp_pool;Os.poolVec2.zpp_pool=null;Os.poolVec2=en}while(Os.poolVec3!=null){var nn=Os.poolVec3.zpp_pool;Os.poolVec3.zpp_pool=null;Os.poolVec3=nn}};var hn=function(){};hn.__name__=true;hn.POSINF=function(){return Infinity};hn.NEGINF=function(){return-Infinity};var pn=function(){};pn.__name__=true;pn.Constraint=function(){return pn._Constraint++};pn.Interactor=function(){return pn._Interactor++};pn.CbType=function(){return pn._CbType++};pn.CbSet=function(){return pn._CbSet++};pn.Listener=function(){return pn._Listener++};pn.ZPP_SimpleVert=function(){return pn._ZPP_SimpleVert++};pn.ZPP_SimpleSeg=function(){return pn._ZPP_SimpleSeg++};pn.Space=function(){return pn._Space++};pn.InteractionGroup=function(){return pn._InteractionGroup++};var dn=function(){this.constraint=null;this.body=null;this.pre_swapped=false;this.pre_arbiter=null;this.wrap_arbiters=null;this.set=null;this.int2=null;this.int1=null;this.length=0;this.prev=null;this.next=null;this.index=0;this.space=null;this.listener=null;this.event=0;this.outer_int=null;this.outer_con=null;this.outer_body=null;this.length=0};dn.__name__=true;dn.prototype={wrapper_body:function(){if(this.outer_body==null){dn.internal=true;this.outer_body=new k;dn.internal=false;this.outer_body.zpp_inner=this}return this.outer_body},wrapper_con:function(){if(this.outer_con==null){dn.internal=true;this.outer_con=new P;dn.internal=false;this.outer_con.zpp_inner=this}return this.outer_con},wrapper_int:function(){if(this.outer_int==null){dn.internal=true;this.outer_int=new B;dn.internal=false;this.outer_int.zpp_inner=this}if(this.wrap_arbiters==null)this.wrap_arbiters=ks.get(this.set.arbiters,true);else this.wrap_arbiters.zpp_inner.inner=this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=true;this.wrap_arbiters.zpp_inner.at_ite=null;return this.outer_int},push:function(e){if(this.prev!=null)this.prev.next=e;else this.next=e;e.prev=this.prev;e.next=null;this.prev=e;this.length++},push_rev:function(e){if(this.next!=null)this.next.prev=e;else this.prev=e;e.next=this.next;e.prev=null;this.next=e;this.length++},pop:function(){var e=this.next;this.next=e.next;if(this.next==null)this.prev=null;else this.next.prev=null;this.length--;return e},pop_rev:function(){var e=this.prev;this.prev=e.prev;if(this.prev==null)this.next=null;else this.prev.next=null;this.length--;return e},empty:function(){return this.next==null},clear:function(){while(!this.empty())this.pop()},splice:function(e){var t=e.next;if(e.prev==null){this.next=e.next;if(this.next!=null)this.next.prev=null;else this.prev=null}else{e.prev.next=e.next;if(e.next!=null)e.next.prev=e.prev;else this.prev=e.prev}this.length--;return t},rotateL:function(){this.push(this.pop())},rotateR:function(){this.push_rev(this.pop_rev())},cycleNext:function(e){if(e.next==null)return this.next;else return e.next},cyclePrev:function(e){if(e.prev==null)return this.prev;else return e.prev},at:function(e){var t=this.next;while(e--!=0)t=t.next;return t},rev_at:function(e){var t=this.prev;while(e--!=0)t=t.prev;return t},free:function(){this.int1=this.int2=null;this.body=null;this.constraint=null;this.listener=null;if(this.wrap_arbiters!=null)this.wrap_arbiters.zpp_inner.inner=null;this.set=null},alloc:function(){},genarbs:function(){if(this.wrap_arbiters==null)this.wrap_arbiters=ks.get(this.set.arbiters,true);else this.wrap_arbiters.zpp_inner.inner=this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=true;this.wrap_arbiters.zpp_inner.at_ite=null},__class__:dn};var vn=function(){this.wrap_constraints=null;this.constraints=null;this.wrap_interactors=null;this.interactors=null;this.zip_conlisteners=false;this.conlisteners=null;this.zip_bodylisteners=false;this.bodylisteners=null;this.zip_listeners=false;this.listeners=null;this.cbpairs=null;this.manager=null;this.id=0;this.next=null;this.count=0;this.cbTypes=null;this.cbTypes=new Ln;this.listeners=new gn;this.zip_listeners=true;this.bodylisteners=new yn;this.zip_bodylisteners=true;this.conlisteners=new bn;this.zip_conlisteners=true;this.constraints=new wn;this.interactors=new En;this.id=pn.CbSet();this.cbpairs=new li};vn.__name__=true;vn.setlt=function(e,t){var n=e.cbTypes.head;var r=t.cbTypes.head;while(n!=null&&r!=null){var i=n.elt;var s=r.elt;if(i.id<s.id)return true;if(s.id<i.id)return false;else{n=n.next;r=r.next}}return r!=null&&n==null};vn.get=function(e){var t;if(vn.zpp_pool==null)t=new vn;else{t=vn.zpp_pool;vn.zpp_pool=t.next;t.next=null}null;var n=null;var r=e.head;while(r!=null){var i=r.elt;n=t.cbTypes.insert(n,i);i.cbsets.add(t);r=r.next}return t};vn.compatible=function(e,t,n){return e.options1.compatible(t.cbTypes)&&e.options2.compatible(n.cbTypes)||e.options2.compatible(t.cbTypes)&&e.options1.compatible(n.cbTypes)};vn.empty_intersection=function(e,t){return e.manager.pair(e,t).empty_intersection()};vn.single_intersection=function(e,t,n){return e.manager.pair(e,t).single_intersection(n)};vn.find_all=function(e,t,n,r){e.manager.pair(e,t).forall(n,r)};vn.prototype={increment:function(){this.count++},decrement:function(){return--this.count==0},invalidate_pairs:function(){var e=this.cbpairs.head;while(e!=null){var t=e.elt;t.zip_listeners=true;e=e.next}},invalidate_listeners:function(){this.zip_listeners=true;this.invalidate_pairs()},validate_listeners:function(){if(this.zip_listeners){this.zip_listeners=false;this.realvalidate_listeners()}},realvalidate_listeners:function(){this.listeners.clear();var e=this.cbTypes.head;while(e!=null){var t=e.elt;var n=null;var r=this.listeners.head;var i=t.listeners.head;while(i!=null){var s=i.elt;if(r!=null&&r.elt==s){i=i.next;n=r;r=r.next}else if(r==null||Nn.setlt(s,r.elt)){if(s.space==this.manager.space)n=this.listeners.inlined_insert(n,s);i=i.next}else{n=r;r=r.next}}e=e.next}},invalidate_bodylisteners:function(){this.zip_bodylisteners=true},validate_bodylisteners:function(){if(this.zip_bodylisteners){this.zip_bodylisteners=false;this.realvalidate_bodylisteners()}},realvalidate_bodylisteners:function(){this.bodylisteners.clear();var e=this.cbTypes.head;while(e!=null){var t=e.elt;var n=null;var r=this.bodylisteners.head;var i=t.bodylisteners.head;while(i!=null){var s=i.elt;if(r!=null&&r.elt==s){i=i.next;n=r;r=r.next}else if(r==null||Nn.setlt(s,r.elt)){if(!s.options.excluded(this.cbTypes)&&s.space==this.manager.space)n=this.bodylisteners.inlined_insert(n,s);i=i.next}else{n=r;r=r.next}}e=e.next}},invalidate_conlisteners:function(){this.zip_conlisteners=true},validate_conlisteners:function(){if(this.zip_conlisteners){this.zip_conlisteners=false;this.realvalidate_conlisteners()}},realvalidate_conlisteners:function(){this.conlisteners.clear();var e=this.cbTypes.head;while(e!=null){var t=e.elt;var n=null;var r=this.conlisteners.head;var i=t.conlisteners.head;while(i!=null){var s=i.elt;if(r!=null&&r.elt==s){i=i.next;n=r;r=r.next}else if(r==null||Nn.setlt(s,r.elt)){if(!s.options.excluded(this.cbTypes)&&s.space==this.manager.space)n=this.conlisteners.inlined_insert(n,s);i=i.next}else{n=r;r=r.next}}e=e.next}},validate:function(){if(this.zip_listeners){this.zip_listeners=false;this.realvalidate_listeners()}if(this.zip_bodylisteners){this.zip_bodylisteners=false;this.realvalidate_bodylisteners()}if(this.zip_conlisteners){this.zip_conlisteners=false;this.realvalidate_conlisteners()}},addConstraint:function(e){this.constraints.add(e)},addInteractor:function(e){this.interactors.add(e)},remConstraint:function(e){this.constraints.remove(e)},remInteractor:function(e){this.interactors.remove(e)},free:function(){this.listeners.clear();this.zip_listeners=true;this.bodylisteners.clear();this.zip_bodylisteners=true;this.conlisteners.clear();this.zip_conlisteners=true;while(!(this.cbTypes.head==null)){var e=this.cbTypes.pop_unsafe();e.cbsets.remove(this)}},alloc:function(){},__class__:vn};var mn=function(){this.listeners=null;this.zip_listeners=false;this.next=null;this.b=null;this.a=null;this.listeners=new gn};mn.__name__=true;mn.get=function(e,t){var n;if(mn.zpp_pool==null)n=new mn;else{n=mn.zpp_pool;mn.zpp_pool=n.next;n.next=null}n.zip_listeners=true;if(vn.setlt(e,t)){n.a=e;n.b=t}else{n.a=t;n.b=e}return n};mn.setlt=function(e,t){return vn.setlt(e.a,t.a)||e.a==t.a&&vn.setlt(e.b,t.b)};mn.prototype={free:function(){this.a=this.b=null;this.listeners.clear()},alloc:function(){this.zip_listeners=true},compatible:function(e){return e.options1.compatible(this.a.cbTypes)&&e.options2.compatible(this.b.cbTypes)||e.options2.compatible(this.a.cbTypes)&&e.options1.compatible(this.b.cbTypes)},invalidate:function(){this.zip_listeners=true},validate:function(){if(this.zip_listeners){this.zip_listeners=false;this.__validate()}},__validate:function(){this.listeners.clear();var e=this.a.listeners.head;var t=this.b.listeners.head;while(e!=null&&t!=null){var n=e.elt;var r=t.elt;if(n==r){if(n.options1.compatible(this.a.cbTypes)&&n.options2.compatible(this.b.cbTypes)||n.options2.compatible(this.a.cbTypes)&&n.options1.compatible(this.b.cbTypes))this.listeners.add(n);e=e.next;t=t.next}else if(n.precedence>r.precedence||n.precedence==r.precedence&&n.id>r.id)e=e.next;else t=t.next}},empty_intersection:function(){return this.listeners.head==null},single_intersection:function(e){var t=this.listeners.head;return t!=null&&t.elt==e&&t.next==null},forall:function(e,t){var n=this.listeners.head;while(n!=null){var r=n.elt;if(r.event==e)t(r);n=n.next}},__class__:mn};var gn=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};gn.__name__=true;gn.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Ii.zpp_pool==null)n=new Ii;else{n=Ii.zpp_pool;Ii.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Ii.zpp_pool==null)r=new Ii;else{r=Ii.zpp_pool;Ii.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Ii.zpp_pool;Ii.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Ii.zpp_pool;Ii.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:gn};var yn=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};yn.__name__=true;yn.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Ui.zpp_pool==null)n=new Ui;else{n=Ui.zpp_pool;Ui.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Ui.zpp_pool==null)r=new Ui;else{r=Ui.zpp_pool;Ui.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Ui.zpp_pool;Ui.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Ui.zpp_pool;Ui.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:yn};var bn=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};bn.__name__=true;bn.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Wi.zpp_pool==null)n=new Wi;else{n=Wi.zpp_pool;Wi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Wi.zpp_pool==null)r=new Wi;else{r=Wi.zpp_pool;Wi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Wi.zpp_pool;Wi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Wi.zpp_pool;Wi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:bn};var wn=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};wn.__name__=true;wn.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Bi.zpp_pool==null)n=new Bi;else{n=Bi.zpp_pool;Bi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Bi.zpp_pool==null)r=new Bi;else{r=Bi.zpp_pool;Bi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Bi.zpp_pool;Bi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Bi.zpp_pool;Bi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:wn};var En=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};En.__name__=true;En.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Ri.zpp_pool==null)n=new Ri;else{n=Ri.zpp_pool;Ri.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Ri.zpp_pool==null)r=new Ri;else{r=Ri.zpp_pool;Ri.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Ri.zpp_pool;Ri.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Ri.zpp_pool;Ri.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:En};var Sn=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Sn.__name__=true;Sn.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(qi.zpp_pool==null)n=new qi;else{n=qi.zpp_pool;qi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(qi.zpp_pool==null)r=new qi;else{r=qi.zpp_pool;qi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=qi.zpp_pool;qi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=qi.zpp_pool;qi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Sn};var xn=function(){this.conlisteners=null;this.bodylisteners=null;this.listeners=null;this.cbsets=null;this.id=0;this.userData=null;this.outer=null;this.id=pn.CbType();this.listeners=new gn;this.bodylisteners=new yn;this.conlisteners=new bn;this.constraints=new wn;this.interactors=new En;this.cbsets=new Sn};xn.__name__=true;xn.setlt=function(e,t){return e.id<t.id};xn.prototype={addConstraint:function(e){this.constraints.add(e)},addInteractor:function(e){this.interactors.add(e)},remConstraint:function(e){this.constraints.remove(e)},remInteractor:function(e){this.interactors.remove(e)},addint:function(e){var t=null;var n=this.listeners.head;while(n!=null){var r=n.elt;if(e.precedence>r.precedence||e.precedence==r.precedence&&e.id>r.id)break;t=n;n=n.next}this.listeners.inlined_insert(t,e);this.invalidateint()},removeint:function(e){this.listeners.remove(e);this.invalidateint()},invalidateint:function(){var e=this.cbsets.head;while(e!=null){var t=e.elt;t.zip_listeners=true;t.invalidate_pairs();e=e.next}},addbody:function(e){var t=null;var n=this.bodylisteners.head;while(n!=null){var r=n.elt;if(e.precedence>r.precedence||e.precedence==r.precedence&&e.id>r.id)break;t=n;n=n.next}this.bodylisteners.inlined_insert(t,e);this.invalidatebody()},removebody:function(e){this.bodylisteners.remove(e);this.invalidatebody()},invalidatebody:function(){var e=this.cbsets.head;while(e!=null){var t=e.elt;t.zip_bodylisteners=true;e=e.next}},addconstraint:function(e){var t=null;var n=this.conlisteners.head;while(n!=null){var r=n.elt;if(e.precedence>r.precedence||e.precedence==r.precedence&&e.id>r.id)break;t=n;n=n.next}this.conlisteners.inlined_insert(t,e);this.invalidateconstraint()},removeconstraint:function(e){this.conlisteners.remove(e);this.invalidateconstraint()},invalidateconstraint:function(){var e=this.cbsets.head;while(e!=null){var t=e.elt;t.zip_conlisteners=true;e=e.next}},__class__:xn};var Tn=function(){};Tn.__name__=true;var Nn=function(){this.space=null;this.interaction=null;this.constraint=null;this.body=null;this.precedence=0;this.event=0;this.type=0;this.id=0;this.outer=null;this.id=pn.Listener()};Nn.__name__=true;Nn.setlt=function(e,t){return e.precedence>t.precedence||e.precedence==t.precedence&&e.id>t.id};Nn.prototype={swapEvent:function(e){},invalidate_precedence:function(){},addedToSpace:function(){},removedFromSpace:function(){},__class__:Nn};var Cn=function(e,t,n){this.handler=null;this.options=null;this.outer_zn=null;Nn.call(this);this.event=t;this.handler=n;this.body=this;this.type=0;this.options=e.zpp_inner};Cn.__name__=true;Cn.__super__=Nn;Cn.prototype=n(Nn.prototype,{immutable_options:function(){if(this.space!=null&&this.space.midstep)throw new g("Error: Cannot change listener type options during space.step()")},addedToSpace:function(){this.options.handler=Rs(this,this.cbtype_change);var e=this.options.includes.head;while(e!=null){var t=e.elt;t.addbody(this);e=e.next}},removedFromSpace:function(){var e=this.options.includes.head;while(e!=null){var t=e.elt;t.bodylisteners.remove(this);t.invalidatebody();e=e.next}this.options.handler=null},cbtype_change:function(e,t,n){this.removedFromSpace();this.options.effect_change(e,t,n);this.addedToSpace()},invalidate_precedence:function(){if(this.space!=null){this.removedFromSpace();this.addedToSpace()}},swapEvent:function(e){if(e!=2&&e!=3)throw new g("Error: BodyListener event must be either WAKE or SLEEP only");this.removedFromSpace();this.event=e;this.addedToSpace()},__class__:Cn});var kn=function(e,t,n){this.handler=null;this.options=null;this.outer_zn=null;Nn.call(this);this.event=t;this.handler=n;this.constraint=this;this.type=1;this.options=e.zpp_inner};kn.__name__=true;kn.__super__=Nn;kn.prototype=n(Nn.prototype,{immutable_options:function(){if(this.space!=null&&this.space.midstep)throw new g("Error: Cannot change listener type options during space.step()")},addedToSpace:function(){this.options.handler=Rs(this,this.cbtype_change);var e=this.options.includes.head;while(e!=null){var t=e.elt;t.addconstraint(this);e=e.next}},removedFromSpace:function(){var e=this.options.includes.head;while(e!=null){var t=e.elt;t.conlisteners.remove(this);t.invalidateconstraint();e=e.next}this.options.handler=null},cbtype_change:function(e,t,n){this.removedFromSpace();this.options.effect_change(e,t,n);this.addedToSpace()},invalidate_precedence:function(){if(this.space!=null){this.removedFromSpace();this.addedToSpace()}},swapEvent:function(e){if(e!=2&&e!=3&&e!=4)throw new g("Error: ConstraintListener event must be either WAKE or SLEEP only");this.removedFromSpace();this.event=e;this.addedToSpace()},__class__:kn});var Ln=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Ln.__name__=true;Ln.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(_i.zpp_pool==null)n=new _i;else{n=_i.zpp_pool;_i.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(_i.zpp_pool==null)r=new _i;else{r=_i.zpp_pool;_i.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=_i.zpp_pool;_i.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=_i.zpp_pool;_i.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Ln};var An=function(e,t,n,r){this.handlerp=null;this.pure=false;this.allowSleepingCallbacks=false;this.handleri=null;this.options2=null;this.options1=null;this.itype=0;this.outer_znp=null;this.outer_zni=null;Nn.call(this);this.type=r;this.interaction=this;this.event=n;this.options1=e.zpp_inner;this.options2=t.zpp_inner;this.allowSleepingCallbacks=false};An.__name__=true;An.__super__=Nn;An.prototype=n(Nn.prototype,{setInteractionType:function(e){this.itype=e},wake:function(){this.with_union(function(e){var t=e.interactors.head;while(t!=null){var n=t.elt;n.wake();t=t.next}})},CbSetset:function(e,t,n){var r=An.UCbSet;var i=An.VCbSet;var s=An.WCbSet;var o=e.head;var u=t.head;while(o!=null&&u!=null){var a=o.elt;var f=u.elt;if(a==f){s.inlined_add(a);o=o.next;u=u.next}else if(vn.setlt(a,f)){r.inlined_add(a);o=o.next}else{i.inlined_add(f);u=u.next}}while(o!=null){r.inlined_add(o.elt);o=o.next}while(u!=null){i.inlined_add(u.elt);u=u.next}while(!(r.head==null)){var l=r.pop_unsafe();var c=t.head;while(c!=null){var h=c.elt;n(l,h);c=c.next}}while(!(i.head==null)){var p=i.pop_unsafe();var d=s.head;while(d!=null){var v=d.elt;n(p,v);d=d.next}}while(!(s.head==null)){var m=s.pop_unsafe();n(m,m);var g=s.head;while(g!=null){var y=g.elt;n(m,y);g=g.next}}},CbTypeset:function(e,t,n){var r=An.UCbType;var i=An.VCbType;var s=An.WCbType;var o=e.head;var u=t.head;while(o!=null&&u!=null){var a=o.elt;var f=u.elt;if(a==f){s.inlined_add(a);o=o.next;u=u.next}else if(a.id<f.id){r.inlined_add(a);o=o.next}else{i.inlined_add(f);u=u.next}}while(o!=null){r.inlined_add(o.elt);o=o.next}while(u!=null){i.inlined_add(u.elt);u=u.next}while(!(r.head==null)){var l=r.pop_unsafe();var c=t.head;while(c!=null){var h=c.elt;n(l,h);c=c.next}}while(!(i.head==null)){var p=i.pop_unsafe();var d=s.head;while(d!=null){var v=d.elt;n(p,v);d=d.next}}while(!(s.head==null)){var m=s.pop_unsafe();n(m,m);var g=s.head;while(g!=null){var y=g.elt;n(m,y);g=g.next}}},with_uniquesets:function(e){var t=this;var n;if(_s.zpp_pool==null)n=new _s;else{n=_s.zpp_pool;_s.zpp_pool=n.next;n.next=null}null;n.lt=mn.setlt;this.CbTypeset(this.options1.includes,this.options2.includes,function(e,r){t.CbSetset(e.cbsets,r.cbsets,function(e,r){e.validate();r.validate();if(vn.single_intersection(e,r,t))n.try_insert(mn.get(e,r))})});n.clear_with(function(n){if(e)t.space.freshListenerType(n.a,n.b);else t.space.nullListenerType(n.a,n.b);var r=n;r.a=r.b=null;r.listeners.clear();r.next=mn.zpp_pool;mn.zpp_pool=r});var r=n;r.data=null;r.lt=null;r.swapped=null;r.next=_s.zpp_pool;_s.zpp_pool=r},with_union:function(e){var t=this.options1.includes.head;var n=this.options2.includes.head;while(t!=null&&n!=null){var r=t.elt;var i=n.elt;if(r==i){e(r);t=t.next;n=n.next}else if(r.id<i.id){e(r);t=t.next}else{e(i);n=n.next}}while(t!=null){e(t.elt);t=t.next}while(n!=null){e(n.elt);n=n.next}},addedToSpace:function(){var e=this;var t=this.type==3;this.with_union(function(n){n.addint(e);if(t){var r=n.interactors.head;while(r!=null){var i=r.elt;i.wake();r=r.next}}});this.options1.handler=Rs(this,this.cbtype_change1);this.options2.handler=Rs(this,this.cbtype_change2);this.with_uniquesets(true)},removedFromSpace:function(){var e=this;this.with_uniquesets(false);var t=this.type==3;this.with_union(function(n){n.listeners.remove(e);n.invalidateint();if(t){var r=n.interactors.head;while(r!=null){var i=r.elt;i.wake();r=r.next}}});this.options1.handler=null;this.options2.handler=null},invalidate_precedence:function(){var e=this;if(this.space!=null){var t=this.type==3;this.with_union(function(n){n.listeners.remove(e);n.invalidateint();n.addint(e);if(t){var r=n.interactors.head;while(r!=null){var i=r.elt;i.wake();r=r.next}}})}},cbtype_change1:function(e,t,n){this.cbtype_change(this.options1,e,t,n)},cbtype_change2:function(e,t,n){this.cbtype_change(this.options2,e,t,n)},cbtype_change:function(e,t,n,r){this.removedFromSpace();e.effect_change(t,n,r);this.addedToSpace();null},swapEvent:function(e){if(this.type==3)throw new g("Error: PreListener event can only be PRE");else if(e!=0&&e!=1&&e!=6)throw new g("Error: InteractionListener event must be either BEGIN, END, ONGOING");this.removedFromSpace();this.event=e;this.addedToSpace()},__class__:An});var On=function(){this.wrap_excludes=null;this.wrap_includes=null;this.excludes=null;this.includes=null;this.handler=null;this.outer=null;this.includes=new Ln;this.excludes=new Ln};On.__name__=true;On.argument=function(e){if(e==null)return new U;else if(y.__instanceof(e,U))return e;else return(new U).including(e)};On.prototype={setup_includes:function(){this.wrap_includes=bs.get(this.includes,true)},setup_excludes:function(){this.wrap_excludes=bs.get(this.excludes,true)},excluded:function(e){return this.nonemptyintersection(e,this.excludes)},included:function(e){return this.nonemptyintersection(e,this.includes)},compatible:function(e){return this.nonemptyintersection(e,this.includes)&&!this.nonemptyintersection(e,this.excludes)},nonemptyintersection:function(e,t){var n=false;var r=e.head;var i=t.head;while(i!=null&&r!=null){var s=i.elt;var o=r.elt;if(s==o){n=true;break}else if(s.id<o.id)i=i.next;else r=r.next}return n},effect_change:function(e,t,n){if(t){if(n){var r=null;var i=this.includes.head;while(i!=null){var s=i.elt;if(e.id<s.id)break;r=i;i=i.next}this.includes.inlined_insert(r,e)}else this.includes.remove(e)}else if(n){var o=null;var u=this.excludes.head;while(u!=null){var a=u.elt;if(e.id<a.id)break;o=u;u=u.next}this.excludes.inlined_insert(o,e)}else this.excludes.remove(e)},append_type:function(e,t){if(e==this.includes){if(!this.includes.has(t)){if(!this.excludes.has(t)){if(this.handler!=null)this.handler(t,true,true);else this.effect_change(t,true,true)}else if(this.handler!=null)this.handler(t,false,false);else this.effect_change(t,false,false)}}else if(!this.excludes.has(t)){if(!this.includes.has(t)){if(this.handler!=null)this.handler(t,false,true);else this.effect_change(t,false,true)}else if(this.handler!=null)this.handler(t,true,false);else this.effect_change(t,true,false)}},set:function(e){if(e!=this){while(!(this.includes.head==null))this.append_type(this.excludes,this.includes.head.elt);while(!(this.excludes.head==null))this.append_type(this.includes,this.excludes.head.elt);var t=e.excludes.head;while(t!=null){var n=t.elt;this.append_type(this.excludes,n);t=t.next}var r=e.includes.head;while(r!=null){var i=r.elt;this.append_type(this.includes,i);r=r.next}}return this},append:function(e,t){if(t==null)throw new g("Error: Cannot append null, only CbType and CbType list values");if(y.__instanceof(t,M)){var n=t;this.append_type(e,n.zpp_inner)}else if(y.__instanceof(t,D)){var r=t;var i;r.zpp_inner.valmod();i=_.get(r);while(i.hasNext()){var s;i.zpp_critical=false;s=i.zpp_inner.at(i.zpp_i++);this.append_type(e,s.zpp_inner)}}else if(t instanceof Array&&t.__enum__==null){var o=t;var u=0;while(u<o.length){var a=o[u];++u;if(!y.__instanceof(a,M))throw new g("Error: Cannot append non-CbType or CbType list value");var f=a;this.append_type(e,f.zpp_inner)}}else throw new g("Error: Cannot append non-CbType or CbType list value")},__class__:On};var Mn=function(){this.pre_dt=0;this.wrap_cbTypes=null;this.cbSet=null;this.cbTypes=null;this.__velocity=false;this.ignore=false;this.component=null;this.removeOnBreak=false;this.breakUnderError=false;this.breakUnderForce=false;this.maxError=0;this.maxForce=0;this.damping=0;this.frequency=0;this.stiff=false;this.active=false;this.space=null;this.compound=null;this.userData=null;this.id=0;this.outer=null;this.__velocity=false;this.id=pn.Constraint();this.stiff=true;this.active=true;this.ignore=false;this.frequency=10;this.damping=1;this.maxForce=Infinity;this.maxError=Infinity;this.breakUnderForce=false;this.removeOnBreak=true;this.pre_dt=-1;this.cbTypes=new Ln};Mn.__name__=true;Mn.prototype={clear:function(){},immutable_midstep:function(e){if(this.space!=null&&this.space.midstep)throw new g("Error: Constraint::"+e+" cannot be set during space step()")},setupcbTypes:function(){this.wrap_cbTypes=bs.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=Rs(this,this.wrap_cbTypes_adder);this.wrap_cbTypes.zpp_inner.subber=Rs(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=true;this.wrap_cbTypes.zpp_inner._modifiable=Rs(this,this.immutable_cbTypes)},immutable_cbTypes:function(){this.immutable_midstep("Constraint::cbTypes")},wrap_cbTypes_subber:function(e){var t=e.zpp_inner;if(this.cbTypes.has(t)){if(this.space!=null){this.dealloc_cbSet();t.constraints.remove(this)}this.cbTypes.remove(t);if(this.space!=null){this.alloc_cbSet();this.wake()}}},wrap_cbTypes_adder:function(e){this.insert_cbtype(e.zpp_inner);return false},insert_cbtype:function(e){if(!this.cbTypes.has(e)){if(this.space!=null){this.dealloc_cbSet();e.constraints.add(this)}var t=null;var n=this.cbTypes.head;while(n!=null){var r=n.elt;if(e.id<r.id)break;t=n;n=n.next}this.cbTypes.inlined_insert(t,e);if(this.space!=null){this.alloc_cbSet();this.wake()}}},alloc_cbSet:function(){if((this.cbSet=this.space.cbsets.get(this.cbTypes))!=null){this.cbSet.count++;this.cbSet.constraints.add(this)}},dealloc_cbSet:function(){if(this.cbSet!=null){this.cbSet.constraints.remove(this);if(--this.cbSet.count==0){this.space.cbsets.remove(this.cbSet);var e=this.cbSet;e.free();e.next=vn.zpp_pool;vn.zpp_pool=e}this.cbSet=null}},activate:function(){if(this.space!=null)this.activeInSpace()},deactivate:function(){if(this.space!=null)this.inactiveOrOutSpace()},addedToSpace:function(){if(this.active)this.activeInSpace();this.activeBodies();var e=this.cbTypes.head;while(e!=null){var t=e.elt;t.constraints.add(this);e=e.next}},removedFromSpace:function(){if(this.active)this.inactiveOrOutSpace();this.inactiveBodies();var e=this.cbTypes.head;while(e!=null){var t=e.elt;t.constraints.remove(this);e=e.next}},activeInSpace:function(){this.alloc_cbSet();if(Jr.zpp_pool==null)this.component=new Jr;else{this.component=Jr.zpp_pool;Jr.zpp_pool=this.component.next;this.component.next=null}null;this.component.isBody=false;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();var e=this.component;e.body=null;e.constraint=null;null;e.next=Jr.zpp_pool;Jr.zpp_pool=e;this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},validate:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(e,t){return false},broken:function(){},warmStart:function(){},preStep:function(e){return false},applyImpulseVel:function(){return false},applyImpulsePos:function(){return false},wake:function(){if(this.space!=null)this.space.wake_constraint(this)},draw:function(e){},copy:function(e,t){return null},copyto:function(e){var t=this.outer;var n=function(e){var n;if(t.zpp_inner.wrap_cbTypes==null)t.zpp_inner.setupcbTypes();n=t.zpp_inner.wrap_cbTypes;return n}(this).iterator();while(n.hasNext()){var r;n.zpp_critical=false;r=n.zpp_inner.at(n.zpp_i++);(function(t){var n;if(e.zpp_inner.wrap_cbTypes==null)e.zpp_inner.setupcbTypes();n=e.zpp_inner.wrap_cbTypes;return n})(this).add(r)}e.zpp_inner.removeOnBreak=t.zpp_inner.removeOnBreak;e.zpp_inner.removeOnBreak;e.set_breakUnderError(t.zpp_inner.breakUnderError);e.set_breakUnderForce(t.zpp_inner.breakUnderForce);e.set_maxError(t.zpp_inner.maxError);e.set_maxForce(t.zpp_inner.maxForce);e.set_damping(t.zpp_inner.damping);e.set_frequency(t.zpp_inner.frequency);e.set_stiff(t.zpp_inner.stiff);e.set_ignore(t.zpp_inner.ignore);e.set_active(t.zpp_inner.active)},__class__:Mn};var _n=function(){this.stepped=false;this.bias=0;this.gamma=0;this.jMax=0;this.jAcc=0;this.kMass=0;this.b2=null;this.b1=null;this.scale=0;this.equal=false;this.slack=false;this.jointMax=0;this.jointMin=0;this.ratio=0;this.outer_zn=null;Mn.call(this);this.ratio=1;this.jAcc=0;this.slack=false;this.jMax=Infinity;this.stepped=false};_n.__name__=true;_n.__super__=Mn;_n.prototype=n(Mn.prototype,{is_slack:function(){var e;var t=this.ratio*this.b2.rot-this.b1.rot;if(this.equal){t-=this.jointMax;e=false;this.scale=1}else if(t<this.jointMin){t=this.jointMin-t;this.scale=-1;e=false}else if(t>this.jointMax){t-=this.jointMax;this.scale=1;e=false}else{this.scale=0;t=0;e=true}t;return e},bodyImpulse:function(e){if(this.stepped){if(e==this.b1)return Ht.get(0,0,-this.scale*this.jAcc);else return Ht.get(0,0,this.ratio*this.scale*this.jAcc)}else return Ht.get(0,0,0)},activeBodies:function(){if(this.b1!=null)this.b1.constraints.add(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.add(this)}},inactiveBodies:function(){if(this.b1!=null)this.b1.constraints.remove(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.remove(this)}},copy:function(e,t){var n=new $(null,null,this.jointMin,this.jointMax,this.ratio);this.copyto(n);if(e!=null&&this.b1!=null){var r=null;var i=0;while(i<e.length){var s=e[i];++i;if(s.id==this.b1.id){r=s.bc;break}}if(r!=null)n.zpp_inner_zn.b1=r.zpp_inner;else t.push(Dn.todo(this.b1.id,function(e){n.zpp_inner_zn.b1=e.zpp_inner}))}if(e!=null&&this.b2!=null){var o=null;var u=0;while(u<e.length){var a=e[u];++u;if(a.id==this.b2.id){o=a.bc;break}}if(o!=null)n.zpp_inner_zn.b2=o.zpp_inner;else t.push(Dn.todo(this.b2.id,function(e){n.zpp_inner_zn.b2=e.zpp_inner}))}return n},validate:function(){if(this.b1==null||this.b2==null)throw new g("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new g("Error: AngleJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new g("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new g("Error: AngleJoint must have jointMin <= jointMax");if(!(this.b1.type==2)&&!(this.b2.type==2))throw new g("Error: Constraints cannot have both bodies non-dynamic")},wake_connected:function(){if(this.b1!=null&&this.b1.type==2)this.b1.wake();if(this.b2!=null&&this.b2.type==2)this.b2.wake()},forest:function(){if(this.b1.type==2){var e;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{var t=this.b1.component;var n=null;while(t!=t.parent){var r=t.parent;t.parent=n;n=t;t=r}while(n!=null){var i=n.parent;n.parent=t;n=i}e=t}var s;if(this.component==this.component.parent)s=this.component;else{var o=this.component;var u=null;while(o!=o.parent){var a=o.parent;o.parent=u;u=o;o=a}while(u!=null){var f=u.parent;u.parent=o;u=f}s=o}if(e!=s){if(e.rank<s.rank)e.parent=s;else if(e.rank>s.rank)s.parent=e;else{s.parent=e;e.rank++}}}if(this.b2.type==2){var l;if(this.b2.component==this.b2.component.parent)l=this.b2.component;else{var c=this.b2.component;var h=null;while(c!=c.parent){var p=c.parent;c.parent=h;h=c;c=p}while(h!=null){var d=h.parent;h.parent=c;h=d}l=c}var v;if(this.component==this.component.parent)v=this.component;else{var m=this.component;var g=null;while(m!=m.parent){var y=m.parent;m.parent=g;g=m;m=y}while(g!=null){var b=g.parent;g.parent=m;g=b}v=m}if(l!=v){if(l.rank<v.rank)l.parent=v;else if(l.rank>v.rank)v.parent=l;else{v.parent=l;l.rank++}}}},pair_exists:function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},clearcache:function(){this.jAcc=0;this.pre_dt=-1;this.slack=false},preStep:function(e){if(this.pre_dt==-1)this.pre_dt=e;var t=e/this.pre_dt;this.pre_dt=e;this.stepped=true;this.equal=this.jointMin==this.jointMax;var n;var r=this.ratio*this.b2.rot-this.b1.rot;if(this.equal){r-=this.jointMax;this.slack=false;this.scale=1}else if(r<this.jointMin){r=this.jointMin-r;this.scale=-1;this.slack=false}else if(r>this.jointMax){r-=this.jointMax;this.scale=1;this.slack=false}else{this.scale=0;r=0;this.slack=true}n=r;if(!this.slack){this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia;if(this.kMass!=0)this.kMass=1/this.kMass;else this.jAcc=0;if(!this.stiff){if(this.breakUnderError&&n*n>this.maxError*this.maxError)return true;var i;var s=2*Math.PI*this.frequency;this.gamma=1/(e*s*(2*this.damping+s*e));var o=1/(1+this.gamma);i=e*s*s*this.gamma;this.gamma*=o;this.kMass*=o;this.bias=-n*i;if(this.bias<-this.maxError)this.bias=-this.maxError;else if(this.bias>this.maxError)this.bias=this.maxError}else{this.bias=0;this.gamma=0}this.jAcc*=t;this.jMax=this.maxForce*e}return false},warmStart:function(){if(!this.slack){this.b1.angvel-=this.scale*this.b1.iinertia*this.jAcc;this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*this.jAcc}},applyImpulseVel:function(){if(this.slack)return false;var e=this.scale*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel);var t=this.kMass*(this.bias-e)-this.jAcc*this.gamma;var n=this.jAcc;this.jAcc+=t;if(!this.equal&&this.jAcc>0)this.jAcc=0;if(this.breakUnderForce&&(this.jAcc>this.jMax||this.jAcc<-this.jMax))return true;if(!this.stiff){if(this.jAcc>this.jMax)this.jAcc=this.jMax;else if(this.jAcc<-this.jMax)this.jAcc=-this.jMax}t=this.jAcc-n;this.b1.angvel-=this.scale*this.b1.iinertia*t;this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*t;return false},applyImpulsePos:function(){var e;var t;var n;var r=this.ratio*this.b2.rot-this.b1.rot;if(this.equal){r-=this.jointMax;n=false;this.scale=1}else if(r<this.jointMin){r=this.jointMin-r;this.scale=-1;n=false}else if(r>this.jointMax){r-=this.jointMax;this.scale=1;n=false}else{this.scale=0;r=0;n=true}e=r;if(!n){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return true;e*=.5;t=-e*this.kMass;if(this.equal||t<0){this.b1.delta_rot(-this.scale*t*this.b1.iinertia);this.b2.delta_rot(this.ratio*this.scale*t*this.b2.iinertia)}}return false},draw:function(e){},__class__:_n});var Dn=function(){this.cb=null;this.bc=null;this.id=0};Dn.__name__=true;Dn.dict=function(e,t){var n=new Dn;n.id=e;n.bc=t;return n};Dn.todo=function(e,t){var n=new Dn;n.id=e;n.cb=t;return n};Dn.prototype={__class__:Dn};var Pn=function(){this.stepped=false;this.bias=0;this.gamma=0;this.jMax=0;this.jAcc=0;this.kMass=0;this.wrap_a2=null;this.a2rely=0;this.a2relx=0;this.a2localy=0;this.a2localx=0;this.b2=null;this.wrap_a1=null;this.a1rely=0;this.a1relx=0;this.a1localy=0;this.a1localx=0;this.b1=null;this.cx2=0;this.cx1=0;this.ny=0;this.nx=0;this.equal=false;this.slack=false;this.jointMax=0;this.jointMin=0;this.outer_zn=null;Mn.call(this);this.a1localx=0;this.a1localy=0;this.a1relx=0;this.a1rely=0;this.a2localx=0;this.a2localy=0;this.a2relx=0;this.a2rely=0;this.jAcc=0;this.jMax=Infinity;this.stepped=false;this.cx1=this.cx2=0};Pn.__name__=true;Pn.__super__=Mn;Pn.prototype=n(Mn.prototype,{is_slack:function(){var e;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var t=0;var n=0;t=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);n=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);var r=t*t+n*n;if(r<N.epsilon){t=0;n=0;r=0;e=true}else{r=Math.sqrt(r);var i=1/r;t*=i;n*=i;if(this.equal){r-=this.jointMax;e=false}else if(r<this.jointMin){r=this.jointMin-r;t=-t;n=-n;e=false}else if(r>this.jointMax){r-=this.jointMax;e=false}else{t=0;n=0;r=0;e=true}}r;return e},bodyImpulse:function(e){if(this.stepped){if(e==this.b1)return Ht.get(-this.jAcc*this.nx,-this.jAcc*this.ny,-this.cx1*this.jAcc);else return Ht.get(this.jAcc*this.nx,this.jAcc*this.ny,this.cx2*this.jAcc)}else return Ht.get(0,0,0)},activeBodies:function(){if(this.b1!=null)this.b1.constraints.add(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.add(this)}},inactiveBodies:function(){if(this.b1!=null)this.b1.constraints.remove(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.remove(this)}},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(e){this.immutable_midstep("Constraint::"+"a1");this.a1localx=e.x;this.a1localy=e.y;this.wake()},setup_a1:function(){this.wrap_a1=_t.get(this.a1localx,this.a1localy,null);this.wrap_a1.zpp_inner._inuse=true;this.wrap_a1.zpp_inner._validate=Rs(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=Rs(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(e){this.immutable_midstep("Constraint::"+"a2");this.a2localx=e.x;this.a2localy=e.y;this.wake()},setup_a2:function(){this.wrap_a2=_t.get(this.a2localx,this.a2localy,null);this.wrap_a2.zpp_inner._inuse=true;this.wrap_a2.zpp_inner._validate=Rs(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=Rs(this,this.invalidate_a2)},copy:function(e,t){var n=new Q(null,null,this.outer_zn.get_anchor1(),this.outer_zn.get_anchor2(),this.jointMin,this.jointMax);this.copyto(n);if(e!=null&&this.b1!=null){var r=null;var i=0;while(i<e.length){var s=e[i];++i;if(s.id==this.b1.id){r=s.bc;break}}if(r!=null)n.zpp_inner_zn.b1=r.zpp_inner;else t.push(Dn.todo(this.b1.id,function(e){n.zpp_inner_zn.b1=e.zpp_inner}))}if(e!=null&&this.b2!=null){var o=null;var u=0;while(u<e.length){var a=e[u];++u;if(a.id==this.b2.id){o=a.bc;break}}if(o!=null)n.zpp_inner_zn.b2=o.zpp_inner;else t.push(Dn.todo(this.b2.id,function(e){n.zpp_inner_zn.b2=e.zpp_inner}))}return n},validate:function(){if(this.b1==null||this.b2==null)throw new g("Error: DistanceJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new g("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new g("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new g("Error: DistanceJoint must have jointMin <= jointMax");if(!(this.b1.type==2)&&!(this.b2.type==2))throw new g("Error: Constraints cannot have both bodies non-dynamic")},wake_connected:function(){if(this.b1!=null&&this.b1.type==2)this.b1.wake();if(this.b2!=null&&this.b2.type==2)this.b2.wake()},forest:function(){if(this.b1.type==2){var e;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{var t=this.b1.component;var n=null;while(t!=t.parent){var r=t.parent;t.parent=n;n=t;t=r}while(n!=null){var i=n.parent;n.parent=t;n=i}e=t}var s;if(this.component==this.component.parent)s=this.component;else{var o=this.component;var u=null;while(o!=o.parent){var a=o.parent;o.parent=u;u=o;o=a}while(u!=null){var f=u.parent;u.parent=o;u=f}s=o}if(e!=s){if(e.rank<s.rank)e.parent=s;else if(e.rank>s.rank)s.parent=e;else{s.parent=e;e.rank++}}}if(this.b2.type==2){var l;if(this.b2.component==this.b2.component.parent)l=this.b2.component;else{var c=this.b2.component;var h=null;while(c!=c.parent){var p=c.parent;c.parent=h;h=c;c=p}while(h!=null){var d=h.parent;h.parent=c;h=d}l=c}var v;if(this.component==this.component.parent)v=this.component;else{var m=this.component;var g=null;while(m!=m.parent){var y=m.parent;m.parent=g;g=m;m=y}while(g!=null){var b=g.parent;g.parent=m;g=b}v=m}if(l!=v){if(l.rank<v.rank)l.parent=v;else if(l.rank>v.rank)v.parent=l;else{v.parent=l;l.rank++}}}},pair_exists:function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},clearcache:function(){this.jAcc=0;this.pre_dt=-1},preStep:function(e){if(this.pre_dt==-1)this.pre_dt=e;var t=e/this.pre_dt;this.pre_dt=e;this.stepped=true;this.equal=this.jointMin==this.jointMax;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var n;this.nx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.ny=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);var r=this.nx*this.nx+this.ny*this.ny;if(r<N.epsilon){this.nx=0;this.ny=0;r=0;this.slack=true}else{r=Math.sqrt(r);var i=1/r;this.nx*=i;this.ny*=i;if(this.equal){r-=this.jointMax;this.slack=false}else if(r<this.jointMin){r=this.jointMin-r;this.nx=-this.nx;this.ny=-this.ny;this.slack=false}else if(r>this.jointMax){r-=this.jointMax;this.slack=false}else{this.nx=0;this.ny=0;r=0;this.slack=true}}n=r;if(!this.slack){this.cx1=this.ny*this.a1relx-this.nx*this.a1rely;this.cx2=this.ny*this.a2relx-this.nx*this.a2rely;this.kMass=this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia;if(this.kMass!=0)this.kMass=1/this.kMass;else this.jAcc=0;if(!this.stiff){if(this.breakUnderError&&n*n>this.maxError*this.maxError)return true;var s;var o=2*Math.PI*this.frequency;this.gamma=1/(e*o*(2*this.damping+o*e));var u=1/(1+this.gamma);s=e*o*o*this.gamma;this.gamma*=u;this.kMass*=u;this.bias=-n*s;if(this.bias<-this.maxError)this.bias=-this.maxError;else if(this.bias>this.maxError)this.bias=this.maxError}else{this.bias=0;this.gamma=0}this.jAcc*=t;this.jMax=this.maxForce*e}return false},warmStart:function(){if(!this.slack){var e=this.b1.imass*this.jAcc;this.b1.velx-=this.nx*e;this.b1.vely-=this.ny*e;var t=this.b2.imass*this.jAcc;this.b2.velx+=this.nx*t;this.b2.vely+=this.ny*t;this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc;this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc}},applyImpulseVel:function(){if(this.slack)return false;var e=this.nx*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.ny*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1;var t=this.kMass*(this.bias-e)-this.jAcc*this.gamma;var n=this.jAcc;this.jAcc+=t;if(!this.equal&&this.jAcc>0)this.jAcc=0;if(this.breakUnderForce&&this.jAcc<-this.jMax)return true;if(!this.stiff){if(this.jAcc<-this.jMax)this.jAcc=-this.jMax}t=this.jAcc-n;var r=this.b1.imass*t;this.b1.velx-=this.nx*r;this.b1.vely-=this.ny*r;var i=this.b2.imass*t;this.b2.velx+=this.nx*i;this.b2.vely+=this.ny*i;this.b1.angvel-=this.cx1*this.b1.iinertia*t;this.b2.angvel+=this.cx2*this.b2.iinertia*t;return false},applyImpulsePos:function(){var e;var t;var n=0;var r=0;n=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;r=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i=0;var s=0;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;s=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var o;var u=0;var a=0;u=this.b2.posx+i-(this.b1.posx+n);a=this.b2.posy+s-(this.b1.posy+r);var f=u*u+a*a;if(f<N.epsilon){u=0;a=0;f=0;o=true}else{f=Math.sqrt(f);var l=1/f;u*=l;a*=l;if(this.equal){f-=this.jointMax;o=false}else if(f<this.jointMin){f=this.jointMin-f;u=-u;a=-a;o=false}else if(f>this.jointMax){f-=this.jointMax;o=false}else{u=0;a=0;f=0;o=true}}e=f;if(!o){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return true;if(e*e<N.constraintLinearSlop*N.constraintLinearSlop)return false;e*=.5;if(e*e>6){var c=this.b1.smass+this.b2.smass;if(c>N.epsilon){c=.75/c;t=-e*c;if(this.equal||t<0){var h=t*this.b1.imass;this.b1.posx-=u*h;this.b1.posy-=a*h;var p=t*this.b2.imass;this.b2.posx+=u*p;this.b2.posy+=a*p;u=this.b2.posx+i-(this.b1.posx+n);a=this.b2.posy+s-(this.b1.posy+r);var d=u*u+a*a;if(d<N.epsilon){u=0;a=0;d=0;o=true}else{d=Math.sqrt(d);var v=1/d;u*=v;a*=v;if(this.equal){d-=this.jointMax;o=false}else if(d<this.jointMin){d=this.jointMin-d;u=-u;a=-a;o=false}else if(d>this.jointMax){d-=this.jointMax;o=false}else{u=0;a=0;d=0;o=true}}e=d;e*=.5}}}var m;var g;var y;m=a*n-u*r;g=a*i-u*s;y=this.b1.smass+this.b2.smass+m*m*this.b1.sinertia+g*g*this.b2.sinertia;if(y!=0)y=1/y;t=-e*y;if(this.equal||t<0){var b=this.b1.imass*t;this.b1.posx-=u*b;this.b1.posy-=a*b;var w=this.b2.imass*t;this.b2.posx+=u*w;this.b2.posy+=a*w;this.b1.delta_rot(-m*this.b1.iinertia*t);this.b2.delta_rot(g*this.b2.iinertia*t)}}return false},draw:function(e){},__class__:Pn});var Hn=function(){this.biasy=0;this.biasx=0;this.jAccy=0;this.jAccx=0;this.kMassc=0;this.kMassb=0;this.kMassa=0;this.wrap_n=null;this.nrely=0;this.nrelx=0;this.nlocaly=0;this.nlocalx=0;this.wrap_a2=null;this.a2rely=0;this.a2relx=0;this.a2localy=0;this.a2localx=0;this.wrap_a1=null;this.a1rely=0;this.a1relx=0;this.a1localy=0;this.a1localx=0;this.cx2=0;this.cx1=0;this.dot2=0;this.dot1=0;this.equal=false;this.jointMax=0;this.jointMin=0;this.scale=0;this.outer_zn=null;Mn.call(this);this.a1localx=0;this.a1localy=0;this.a1relx=0;this.a1rely=0;this.a2localx=0;this.a2localy=0;this.a2relx=0;this.a2rely=0;this.nlocalx=0;this.nlocaly=0;this.nrelx=0;this.nrely=0;this.jAccx=0;this.jAccy=0;this.jMax=Infinity;this.jointMin=-Infinity;this.jointMax=Infinity;this.stepped=false};Hn.__name__=true;Hn.__super__=Mn;Hn.prototype=n(Mn.prototype,{bodyImpulse:function(e){if(this.stepped){var t=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx;var n=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy;if(e==this.b1)return Ht.get(-t,-n,this.scale*this.cx1*n-this.dot1*t);else return Ht.get(t,n,this.scale*this.cx1*n-this.dot1*t)}else return Ht.get(0,0,0)},activeBodies:function(){if(this.b1!=null)this.b1.constraints.add(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.add(this)}},inactiveBodies:function(){if(this.b1!=null)this.b1.constraints.remove(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.remove(this)}},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(e){this.immutable_midstep("Constraint::"+"a1");this.a1localx=e.x;this.a1localy=e.y;this.wake()},setup_a1:function(){this.wrap_a1=_t.get(this.a1localx,this.a1localy,null);this.wrap_a1.zpp_inner._inuse=true;this.wrap_a1.zpp_inner._validate=Rs(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=Rs(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(e){this.immutable_midstep("Constraint::"+"a2");this.a2localx=e.x;this.a2localy=e.y;this.wake()},setup_a2:function(){this.wrap_a2=_t.get(this.a2localx,this.a2localy,null);this.wrap_a2.zpp_inner._inuse=true;this.wrap_a2.zpp_inner._validate=Rs(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=Rs(this,this.invalidate_a2)},validate_n:function(){this.wrap_n.zpp_inner.x=this.nlocalx;this.wrap_n.zpp_inner.y=this.nlocaly},invalidate_n:function(e){this.immutable_midstep("Constraint::"+"n");this.nlocalx=e.x;this.nlocaly=e.y;this.zip_n=true;this.wake()},setup_n:function(){this.wrap_n=_t.get(this.nlocalx,this.nlocaly,null);this.wrap_n.zpp_inner._inuse=true;this.wrap_n.zpp_inner._validate=Rs(this,this.validate_n);this.wrap_n.zpp_inner._invalidate=Rs(this,this.invalidate_n)},validate_norm:function(){if(this.zip_n){this.zip_n=false;var e=this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly;var t=1/Math.sqrt(e);var n=t;this.nlocalx*=n;this.nlocaly*=n}},copy:function(e,t){var n=new G(null,null,this.outer_zn.get_anchor1(),this.outer_zn.get_anchor2(),this.outer_zn.get_direction(),this.jointMin,this.jointMax);this.copyto(n);if(e!=null&&this.b1!=null){var r=null;var i=0;while(i<e.length){var s=e[i];++i;if(s.id==this.b1.id){r=s.bc;break}}if(r!=null)n.zpp_inner_zn.b1=r.zpp_inner;else t.push(Dn.todo(this.b1.id,function(e){n.zpp_inner_zn.b1=e.zpp_inner}))}if(e!=null&&this.b2!=null){var o=null;var u=0;while(u<e.length){var a=e[u];++u;if(a.id==this.b2.id){o=a.bc;break}}if(o!=null)n.zpp_inner_zn.b2=o.zpp_inner;else t.push(Dn.todo(this.b2.id,function(e){n.zpp_inner_zn.b2=e.zpp_inner}))}return n},validate:function(){if(this.b1==null||this.b2==null)throw new g("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new g("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new g("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new g("Error: DistanceJoint must have jointMin <= jointMax");if(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly<N.epsilon)throw new g("Error: DistanceJoint direction must be non-degenerate");if(!(this.b1.type==2)&&!(this.b2.type==2))throw new g("Error: Constraints cannot have both bodies non-dynamic")},wake_connected:function(){if(this.b1!=null&&this.b1.type==2)this.b1.wake();if(this.b2!=null&&this.b2.type==2)this.b2.wake()},forest:function(){if(this.b1.type==2){var e;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{var t=this.b1.component;var n=null;while(t!=t.parent){var r=t.parent;t.parent=n;n=t;t=r}while(n!=null){var i=n.parent;n.parent=t;n=i}e=t}var s;if(this.component==this.component.parent)s=this.component;else{var o=this.component;var u=null;while(o!=o.parent){var a=o.parent;o.parent=u;u=o;o=a}while(u!=null){var f=u.parent;u.parent=o;u=f}s=o}if(e!=s){if(e.rank<s.rank)e.parent=s;else if(e.rank>s.rank)s.parent=e;else{s.parent=e;e.rank++}}}if(this.b2.type==2){var l;if(this.b2.component==this.b2.component.parent)l=this.b2.component;else{var c=this.b2.component;var h=null;while(c!=c.parent){var p=c.parent;c.parent=h;h=c;c=p}while(h!=null){var d=h.parent;h.parent=c;h=d}l=c}var v;if(this.component==this.component.parent)v=this.component;else{var m=this.component;var g=null;while(m!=m.parent){var y=m.parent;m.parent=g;g=m;m=y}while(g!=null){var b=g.parent;g.parent=m;g=b}v=m}if(l!=v){if(l.rank<v.rank)l.parent=v;else if(l.rank>v.rank)v.parent=l;else{v.parent=l;l.rank++}}}},pair_exists:function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},clearcache:function(){this.jAccx=0;this.jAccy=0;this.pre_dt=-1},preStep:function(e){if(this.pre_dt==-1)this.pre_dt=e;var t=e/this.pre_dt;this.pre_dt=e;this.equal=this.jointMin==this.jointMax;this.stepped=true;this.validate_norm();this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.nrelx=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly;this.nrely=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var n=0;var r=0;var i=0;var s=0;n=this.b2.posx+this.a2relx-this.b1.posx-this.a1relx;r=this.b2.posy+this.a2rely-this.b1.posy-this.a1rely;i=r*this.nrelx-n*this.nrely;s=this.nrelx*n+this.nrely*r;if(this.equal){s-=this.jointMin;this.scale=1}else if(s>this.jointMax){s-=this.jointMax;this.scale=1}else if(s<this.jointMin){s=this.jointMin-s;this.scale=-1}else{s=0;this.scale=0}var o=0;var u=0;o=n+this.a1relx;u=r+this.a1rely;this.dot1=this.nrelx*o+this.nrely*u;this.cx1=u*this.nrelx-o*this.nrely;this.dot2=this.nrelx*this.a2relx+this.nrely*this.a2rely;this.cx2=this.a2rely*this.nrelx-this.a2relx*this.nrely;this.kMassa=this.b1.smass+this.b2.smass+this.dot1*this.dot1*this.b1.sinertia+this.dot2*this.dot2*this.b2.sinertia;this.kMassb=-this.scale*(this.dot1*this.cx1*this.b1.sinertia+this.dot2*this.cx2*this.b2.sinertia);this.kMassc=this.scale*this.scale*(this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia);var a;var f=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(f!=f){this.kMassa=this.kMassb=this.kMassc=0;a=3}else if(f==0){var l=0;if(this.kMassa!=0)this.kMassa=1/this.kMassa;else{this.kMassa=0;l|=1}if(this.kMassc!=0)this.kMassc=1/this.kMassc;else{this.kMassc=0;l|=2}this.kMassb=0;a=l}else{f=1/f;var c=this.kMassc*f;this.kMassc=this.kMassa*f;this.kMassa=c;this.kMassb*=-f;a=0}if((a&1)!=0)this.jAccx=0;if((a&2)!=0)this.jAccy=0;if(!this.stiff){if(this.breakUnderError&&i*i+s*s>this.maxError*this.maxError)return true;var h;var p;var d=2*Math.PI*this.frequency;this.gamma=1/(e*d*(2*this.damping+d*e));var v=1/(1+this.gamma);h=e*d*d*this.gamma;this.gamma*=v;p=v;this.kMassa*=p;this.kMassb*=p;this.kMassc*=p;this.biasx=i;this.biasy=s;var m=-h;this.biasx*=m;this.biasy*=m;var g=this.maxError;var y=this.biasx*this.biasx+this.biasy*this.biasy;if(y>g*g){var b=g*(1/Math.sqrt(y));this.biasx*=b;this.biasy*=b}}else{this.gamma=0;this.biasx=0;this.biasy=0}var w=t;this.jAccx*=w;this.jAccy*=w;this.jMax=this.maxForce*e;return false},warmStart:function(){var e=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx;var t=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy;var n=this.b1.imass;this.b1.velx-=e*n;this.b1.vely-=t*n;var r=this.b2.imass;this.b2.velx+=e*r;this.b2.vely+=t*r;this.b1.angvel+=(this.scale*this.cx1*this.jAccy-this.dot1*this.jAccx)*this.b1.iinertia;this.b2.angvel+=(this.dot2*this.jAccx-this.scale*this.cx2*this.jAccy)*this.b2.iinertia},applyImpulseVel:function(){var e=0;var t=0;var n=0;var r=0;n=this.b2.velx-this.b1.velx;r=this.b2.vely-this.b1.vely;n+=this.b2.kinvelx-this.b1.kinvelx;r+=this.b2.kinvely-this.b1.kinvely;e=r*this.nrelx-n*this.nrely+(this.b2.angvel+this.b2.kinangvel)*this.dot2-(this.b1.angvel+this.b1.kinangvel)*this.dot1;t=this.scale*(this.nrelx*n+this.nrely*r-(this.b2.angvel+this.b2.kinangvel)*this.cx2+(this.b1.angvel+this.b1.kinangvel)*this.cx1);var i=0;var s=0;i=this.biasx-e;s=this.biasy-t;var o=this.kMassa*i+this.kMassb*s;s=this.kMassb*i+this.kMassc*s;i=o;var u=this.gamma;i-=this.jAccx*u;s-=this.jAccy*u;var a=0;var f=0;a=this.jAccx;f=this.jAccy;var l=1;this.jAccx+=i*l;this.jAccy+=s*l;if(this.jAccy>0)this.jAccy=0;if(this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return true}else if(!this.stiff){var c=this.jMax;var h=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(h>c*c){var p=c*(1/Math.sqrt(h));this.jAccx*=p;this.jAccy*=p}}i=this.jAccx-a;s=this.jAccy-f;var d=this.scale*this.nrelx*s-this.nrely*i;var v=this.nrelx*i+this.scale*this.nrely*s;var m=this.b1.imass;this.b1.velx-=d*m;this.b1.vely-=v*m;var g=this.b2.imass;this.b2.velx+=d*g;this.b2.vely+=v*g;this.b1.angvel+=(this.scale*this.cx1*s-this.dot1*i)*this.b1.iinertia;this.b2.angvel+=(this.dot2*i-this.scale*this.cx2*s)*this.b2.iinertia;return false},applyImpulsePos:function(){var e=0;var t=0;e=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly;t=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;var n=0;var r=0;n=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;r=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i=0;var s=0;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;s=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var o=0;var u=0;var a;var f=0;var l=0;o=this.b2.posx+i-this.b1.posx-n;u=this.b2.posy+s-this.b1.posy-r;f=u*e-o*t;l=e*o+t*u;if(this.equal){l-=this.jointMin;a=1}else if(l>this.jointMax){l-=this.jointMax;a=1}else if(l<this.jointMin){l=this.jointMin-l;a=-1}else{l=0;a=0}if(this.breakUnderError&&f*f+l*l>this.maxError*this.maxError)return true;if(f*f+l*l<N.constraintLinearSlop*N.constraintLinearSlop)return false;var c=0;var h=0;var p=.5;f*=p;l*=p;if(f*f+l*l>6){var d=this.b1.smass+this.b2.smass;if(d>N.epsilon){d=.8/d;var v=d*(t*f-a*e*l);var m=d*(e*f*a-t*f);var g=this.b1.imass;this.b1.posx-=v*g;this.b1.posy-=m*g;var y=this.b2.imass;this.b2.posx+=v*y;this.b2.posy+=m*y;o=this.b2.posx+i-this.b1.posx-n;u=this.b2.posy+s-this.b1.posy-r;f=u*e-o*t;l=e*o+t*u;if(this.equal){l-=this.jointMin;a=1}else if(l>this.jointMax){l-=this.jointMax;a=1}else if(l<this.jointMin){l=this.jointMin-l;a=-1}else{l=0;a=0}var b=.5;f*=b;l*=b}}var w;var E;var S;var x;var T=0;var C=0;var k=0;var L=0;var A=0;L=o+n;A=u+r;w=e*L+t*A;S=A*e-L*t;E=e*i+t*s;x=s*e-i*t;T=this.b1.smass+this.b2.smass+w*w*this.b1.sinertia+E*E*this.b2.sinertia;C=-a*(w*S*this.b1.sinertia+E*x*this.b2.sinertia);k=a*a*(this.b1.smass+this.b2.smass+S*S*this.b1.sinertia+x*x*this.b2.sinertia);c=-f;h=-l;var O=T*k-C*C;if(O!=O)c=h=0;else if(O==0){if(T!=0)c/=T;else c=0;if(k!=0)h/=k;else h=0}else{O=1/O;var M=O*(k*c-C*h);h=O*(T*h-C*c);c=M}if(h>0)h=0;var _=a*e*h-t*c;var D=e*c+a*t*h;var P=this.b1.imass;this.b1.posx-=_*P;this.b1.posy-=D*P;var H=this.b2.imass;this.b2.posx+=_*H;this.b2.posy+=D*H;this.b1.delta_rot((a*S*h-w*c)*this.b1.iinertia);this.b2.delta_rot((E*c-a*x*h)*this.b2.iinertia);return false},draw:function(e){},__class__:Hn});var Bn=function(){this.stepped=false;this.jMax=0;this.jAcc=0;this.kMass=0;this.b2=null;this.b1=null;this.rate=0;this.ratio=0;this.outer_zn=null;Mn.call(this);this.jAcc=0;this.stepped=false;this.__velocity=true};Bn.__name__=true;Bn.__super__=Mn;Bn.prototype=n(Mn.prototype,{bodyImpulse:function(e){if(this.stepped){if(e==this.b1)return Ht.get(0,0,-this.jAcc);else return Ht.get(0,0,this.ratio*this.jAcc)}else return Ht.get(0,0,0)},activeBodies:function(){if(this.b1!=null)this.b1.constraints.add(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.add(this)}},inactiveBodies:function(){if(this.b1!=null)this.b1.constraints.remove(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.remove(this)}},copy:function(e,t){var n=new Y(null,null,this.rate,this.ratio);this.copyto(n);if(e!=null&&this.b1!=null){var r=null;var i=0;while(i<e.length){var s=e[i];++i;if(s.id==this.b1.id){r=s.bc;break}}if(r!=null)n.zpp_inner_zn.b1=r.zpp_inner;else t.push(Dn.todo(this.b1.id,function(e){n.zpp_inner_zn.b1=e.zpp_inner}))}if(e!=null&&this.b2!=null){var o=null;var u=0;while(u<e.length){var a=e[u];++u;if(a.id==this.b2.id){o=a.bc;break}}if(o!=null)n.zpp_inner_zn.b2=o.zpp_inner;else t.push(Dn.todo(this.b2.id,function(e){n.zpp_inner_zn.b2=e.zpp_inner}))}return n},validate:function(){if(this.b1==null||this.b2==null)throw new g("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new g("Error: MotorJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new g("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(!(this.b1.type==2)&&!(this.b2.type==2))throw new g("Error: Constraints cannot have both bodies non-dynamic")},wake_connected:function(){if(this.b1!=null&&this.b1.type==2)this.b1.wake();if(this.b2!=null&&this.b2.type==2)this.b2.wake()},forest:function(){if(this.b1.type==2){var e;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{var t=this.b1.component;var n=null;while(t!=t.parent){var r=t.parent;t.parent=n;n=t;t=r}while(n!=null){var i=n.parent;n.parent=t;n=i}e=t}var s;if(this.component==this.component.parent)s=this.component;else{var o=this.component;var u=null;while(o!=o.parent){var a=o.parent;o.parent=u;u=o;o=a}while(u!=null){var f=u.parent;u.parent=o;u=f}s=o}if(e!=s){if(e.rank<s.rank)e.parent=s;else if(e.rank>s.rank)s.parent=e;else{s.parent=e;e.rank++}}}if(this.b2.type==2){var l;if(this.b2.component==this.b2.component.parent)l=this.b2.component;else{var c=this.b2.component;var h=null;while(c!=c.parent){var p=c.parent;c.parent=h;h=c;c=p}while(h!=null){var d=h.parent;h.parent=c;h=d}l=c}var v;if(this.component==this.component.parent)v=this.component;else{var m=this.component;var g=null;while(m!=m.parent){var y=m.parent;m.parent=g;g=m;m=y}while(g!=null){var b=g.parent;g.parent=m;g=b}v=m}if(l!=v){if(l.rank<v.rank)l.parent=v;else if(l.rank>v.rank)v.parent=l;else{v.parent=l;l.rank++}}}},pair_exists:function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},clearcache:function(){this.jAcc=0;this.pre_dt=-1},preStep:function(e){if(this.pre_dt==-1)this.pre_dt=e;var t=e/this.pre_dt;this.pre_dt=e;this.stepped=true;this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia;this.kMass=1/this.kMass;this.jAcc*=t;this.jMax=this.maxForce*e;return false},warmStart:function(){this.b1.angvel-=this.b1.iinertia*this.jAcc;this.b2.angvel+=this.ratio*this.b2.iinertia*this.jAcc},applyImpulseVel:function(){var e=this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel-this.rate;var t=-this.kMass*e;var n=this.jAcc;this.jAcc+=t;if(this.breakUnderForce){if(this.jAcc>this.jMax||this.jAcc<-this.jMax)return true}else if(this.jAcc<-this.jMax)this.jAcc=-this.jMax;else if(this.jAcc>this.jMax)this.jAcc=this.jMax;t=this.jAcc-n;this.b1.angvel-=this.b1.iinertia*t;this.b2.angvel+=this.ratio*this.b2.iinertia*t;return false},applyImpulsePos:function(){return false},__class__:Bn});var jn=function(){this.stepped=false;this.biasy=0;this.biasx=0;this.gamma=0;this.jMax=0;this.jAccy=0;this.jAccx=0;this.kMassc=0;this.kMassb=0;this.kMassa=0;this.wrap_a2=null;this.a2rely=0;this.a2relx=0;this.a2localy=0;this.a2localx=0;this.b2=null;this.wrap_a1=null;this.a1rely=0;this.a1relx=0;this.a1localy=0;this.a1localx=0;this.b1=null;this.outer_zn=null;Mn.call(this);this.stepped=false;this.jAccx=0;this.jAccy=0;this.jMax=Infinity;this.a1localx=0;this.a1localy=0;this.a1relx=0;this.a1rely=0;this.a2localx=0;this.a2localy=0;this.a2relx=0;this.a2rely=0};jn.__name__=true;jn.__super__=Mn;jn.prototype=n(Mn.prototype,{bodyImpulse:function(e){if(this.stepped){if(e==this.b1)return Ht.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely));else return Ht.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely)}else return Ht.get(0,0,0)},activeBodies:function(){if(this.b1!=null)this.b1.constraints.add(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.add(this)}},inactiveBodies:function(){if(this.b1!=null)this.b1.constraints.remove(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.remove(this)}},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(e){this.immutable_midstep("Constraint::"+"a1");this.a1localx=e.x;this.a1localy=e.y;this.wake()},setup_a1:function(){this.wrap_a1=_t.get(this.a1localx,this.a1localy,null);this.wrap_a1.zpp_inner._inuse=true;this.wrap_a1.zpp_inner._validate=Rs(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=Rs(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(e){this.immutable_midstep("Constraint::"+"a2");this.a2localx=e.x;this.a2localy=e.y;this.wake()},setup_a2:function(){this.wrap_a2=_t.get(this.a2localx,this.a2localy,null);this.wrap_a2.zpp_inner._inuse=true;this.wrap_a2.zpp_inner._validate=Rs(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=Rs(this,this.invalidate_a2)},copy:function(e,t){var n=new Z(null,null,this.outer_zn.get_anchor1(),this.outer_zn.get_anchor2());this.copyto(n);if(e!=null&&this.b1!=null){var r=null;var i=0;while(i<e.length){var s=e[i];++i;if(s.id==this.b1.id){r=s.bc;break}}if(r!=null)n.zpp_inner_zn.b1=r.zpp_inner;else t.push(Dn.todo(this.b1.id,function(e){n.zpp_inner_zn.b1=e.zpp_inner}))}if(e!=null&&this.b2!=null){var o=null;var u=0;while(u<e.length){var a=e[u];++u;if(a.id==this.b2.id){o=a.bc;break}}if(o!=null)n.zpp_inner_zn.b2=o.zpp_inner;else t.push(Dn.todo(this.b2.id,function(e){n.zpp_inner_zn.b2=e.zpp_inner}))}return n},validate:function(){if(this.b1==null||this.b2==null)throw new g("Error: PivotJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new g("Error: PivotJoint cannot be simulated with body1 == body2 (body1=body2="+this.b1.outer.toString()+")");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new g("Error: Constraints must have each body within the same space to which the constraint has been assigned (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")");if(!(this.b1.type==2)&&!(this.b2.type==2))throw new g("Error: Constraints cannot have both bodies non-dynamic (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")")},wake_connected:function(){if(this.b1!=null&&this.b1.type==2)this.b1.wake();if(this.b2!=null&&this.b2.type==2)this.b2.wake()},forest:function(){if(this.b1.type==2){var e;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{var t=this.b1.component;var n=null;while(t!=t.parent){var r=t.parent;t.parent=n;n=t;t=r}while(n!=null){var i=n.parent;n.parent=t;n=i}e=t}var s;if(this.component==this.component.parent)s=this.component;else{var o=this.component;var u=null;while(o!=o.parent){var a=o.parent;o.parent=u;u=o;o=a}while(u!=null){var f=u.parent;u.parent=o;u=f}s=o}if(e!=s){if(e.rank<s.rank)e.parent=s;else if(e.rank>s.rank)s.parent=e;else{s.parent=e;e.rank++}}}if(this.b2.type==2){var l;if(this.b2.component==this.b2.component.parent)l=this.b2.component;else{var c=this.b2.component;var h=null;while(c!=c.parent){var p=c.parent;c.parent=h;h=c;c=p}while(h!=null){var d=h.parent;h.parent=c;h=d}l=c}var v;if(this.component==this.component.parent)v=this.component;else{var m=this.component;var g=null;while(m!=m.parent){var y=m.parent;m.parent=g;g=m;m=y}while(g!=null){var b=g.parent;g.parent=m;g=b}v=m}if(l!=v){if(l.rank<v.rank)l.parent=v;else if(l.rank>v.rank)v.parent=l;else{v.parent=l;l.rank++}}}},pair_exists:function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},clearcache:function(){this.jAccx=0;this.jAccy=0;this.pre_dt=-1},preStep:function(e){if(this.pre_dt==-1)this.pre_dt=e;var t=e/this.pre_dt;this.pre_dt=e;this.stepped=true;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var n=this.b1.smass+this.b2.smass;this.kMassa=n;this.kMassb=0;this.kMassc=n;if(this.b1.sinertia!=0){var r=this.a1relx*this.b1.sinertia;var i=this.a1rely*this.b1.sinertia;this.kMassa+=i*this.a1rely;this.kMassb+=-i*this.a1relx;this.kMassc+=r*this.a1relx}if(this.b2.sinertia!=0){var s=this.a2relx*this.b2.sinertia;var o=this.a2rely*this.b2.sinertia;this.kMassa+=o*this.a2rely;this.kMassb+=-o*this.a2relx;this.kMassc+=s*this.a2relx}var u;var a=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(a!=a){this.kMassa=this.kMassb=this.kMassc=0;u=3}else if(a==0){var f=0;if(this.kMassa!=0)this.kMassa=1/this.kMassa;else{this.kMassa=0;f|=1}if(this.kMassc!=0)this.kMassc=1/this.kMassc;else{this.kMassc=0;f|=2}this.kMassb=0;u=f}else{a=1/a;var l=this.kMassc*a;this.kMassc=this.kMassa*a;this.kMassa=l;this.kMassb*=-a;u=0}if((u&1)!=0)this.jAccx=0;if((u&2)!=0)this.jAccy=0;if(!this.stiff){var c;var h;var p=2*Math.PI*this.frequency;this.gamma=1/(e*p*(2*this.damping+p*e));var d=1/(1+this.gamma);c=e*p*p*this.gamma;this.gamma*=d;h=d;this.kMassa*=h;this.kMassb*=h;this.kMassc*=h;this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);if(this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy>this.maxError*this.maxError)return true;var v=-c;this.biasx*=v;this.biasy*=v;var m=this.maxError;var g=this.biasx*this.biasx+this.biasy*this.biasy;if(g>m*m){var y=m*(1/Math.sqrt(g));this.biasx*=y;this.biasy*=y}}else{this.biasx=0;this.biasy=0;this.gamma=0}var b=t;this.jAccx*=b;this.jAccy*=b;this.jMax=this.maxForce*e;return false},warmStart:function(){var e=this.b1.imass;this.b1.velx-=this.jAccx*e;this.b1.vely-=this.jAccy*e;var t=this.b2.imass;this.b2.velx+=this.jAccx*t;this.b2.vely+=this.jAccy*t;this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely)*this.b1.iinertia;this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely)*this.b2.iinertia},applyImpulseVel:function(){var e=0;var t=0;e=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel));t=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel));var n=0;var r=0;n=this.biasx-e;r=this.biasy-t;var i=this.kMassa*n+this.kMassb*r;r=this.kMassb*n+this.kMassc*r;n=i;var s=this.gamma;n-=this.jAccx*s;r-=this.jAccy*s;var o=0;var u=0;o=this.jAccx;u=this.jAccy;var a=1;this.jAccx+=n*a;this.jAccy+=r*a;if(this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return true}else if(!this.stiff){var f=this.jMax;var l=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(l>f*f){var c=f*(1/Math.sqrt(l));this.jAccx*=c;this.jAccy*=c}}n=this.jAccx-o;r=this.jAccy-u;var h=this.b1.imass;this.b1.velx-=n*h;this.b1.vely-=r*h;var p=this.b2.imass;this.b2.velx+=n*p;this.b2.vely+=r*p;this.b1.angvel-=(r*this.a1relx-n*this.a1rely)*this.b1.iinertia;this.b2.angvel+=(r*this.a2relx-n*this.a2rely)*this.b2.iinertia;return false},applyImpulsePos:function(){var e=0;var t=0;e=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;t=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var n=0;var r=0;n=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;r=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i=0;var s=0;i=this.b2.posx+n-(this.b1.posx+e);s=this.b2.posy+r-(this.b1.posy+t);if(this.breakUnderError&&i*i+s*s>this.maxError*this.maxError)return true;if(i*i+s*s<N.constraintLinearSlop*N.constraintLinearSlop)return false;var o=.5;i*=o;s*=o;var u=0;var a=0;if(i*i+s*s>6){var f=this.b1.smass+this.b2.smass;if(f>N.epsilon){f=.75/f;u=-i*f;a=-s*f;var l=20;var c=u*u+a*a;if(c>l*l){var h=l*(1/Math.sqrt(c));u*=h;a*=h}var p=this.b1.imass;this.b1.posx-=u*p;this.b1.posy-=a*p;var d=this.b2.imass;this.b2.posx+=u*d;this.b2.posy+=a*d;i=this.b2.posx+n-(this.b1.posx+e);s=this.b2.posy+r-(this.b1.posy+t);var v=.5;i*=v;s*=v}}var m=0;var g=0;var y=0;var b=this.b1.smass+this.b2.smass;m=b;g=0;y=b;if(this.b1.sinertia!=0){var w=e*this.b1.sinertia;var E=t*this.b1.sinertia;m+=E*t;g+=-E*e;y+=w*e}if(this.b2.sinertia!=0){var S=n*this.b2.sinertia;var x=r*this.b2.sinertia;m+=x*r;g+=-x*n;y+=S*n}u=-i;a=-s;var T=6;var C=u*u+a*a;if(C>T*T){var k=T*(1/Math.sqrt(C));u*=k;a*=k}var L=m*y-g*g;if(L!=L)u=a=0;else if(L==0){if(m!=0)u/=m;else u=0;if(y!=0)a/=y;else a=0}else{L=1/L;var A=L*(y*u-g*a);a=L*(m*a-g*u);u=A}var O=this.b1.imass;this.b1.posx-=u*O;this.b1.posy-=a*O;var M=this.b2.imass;this.b2.posx+=u*M;this.b2.posy+=a*M;this.b1.delta_rot(-(a*e-u*t)*this.b1.iinertia);this.b2.delta_rot((a*n-u*r)*this.b2.iinertia);return false},draw:function(e){},__class__:jn});var Fn=function(){this.stepped=false;this.bias=0;this.gamma=0;this.jMax=0;this.jAcc=0;this.kMass=0;this.wrap_a4=null;this.a4rely=0;this.a4relx=0;this.a4localy=0;this.a4localx=0;this.b4=null;this.wrap_a3=null;this.a3rely=0;this.a3relx=0;this.a3localy=0;this.a3localx=0;this.b3=null;this.wrap_a2=null;this.a2rely=0;this.a2relx=0;this.a2localy=0;this.a2localx=0;this.b2=null;this.wrap_a1=null;this.a1rely=0;this.a1relx=0;this.a1localy=0;this.a1localx=0;this.b1=null;this.cx4=0;this.cx3=0;this.cx2=0;this.cx1=0;this.n34y=0;this.n34x=0;this.n12y=0;this.n12x=0;this.equal=false;this.slack=false;this.jointMax=0;this.jointMin=0;this.ratio=1;this.outer_zn=null;Mn.call(this);this.a1localx=0;this.a1localy=0;this.a1relx=0;this.a1rely=0;this.a2localx=0;this.a2localy=0;this.a2relx=0;this.a2rely=0;this.a3localx=0;this.a3localy=0;this.a3relx=0;this.a3rely=0;this.a4localx=0;this.a4localy=0;this.a4relx=0;this.a4rely=0;this.n12x=1;this.n12y=0;this.n34x=1;this.n34y=0;this.jAcc=0;this.jMax=Infinity;this.stepped=false;this.cx1=this.cx2=this.cx3=this.cx4=0};Fn.__name__=true;Fn.__super__=Mn;Fn.prototype=n(Mn.prototype,{is_slack:function(){var e;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy;this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy;this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var t=0;var n=0;var r=0;var i=0;var s=0;var o=0;var u=0;var a=0;s=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);o=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);u=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx);a=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var f=Math.sqrt(s*s+o*o);var l=Math.sqrt(u*u+a*a);if(f!=0){var c=1/f;t=s*c;n=o*c}if(l!=0){var h=1/l;r=u*h;i=a*h;var p=this.ratio;r*=p;i*=p}else{var d=this.ratio/Math.sqrt(r*r+i*i);r*=d;i*=d}var v=f+this.ratio*l;if(this.equal){v-=this.jointMax;e=false}else if(v<this.jointMin){v=this.jointMin-v;t=-t;n=-n;r=-r;i=-i;e=false}else if(v>this.jointMax){v-=this.jointMax;e=false}else{t=0;n=0;r=0;i=0;v=0;e=true}v;return e},bodyImpulse:function(e){if(this.stepped){var t=Ht.get();if(e==this.b1){var n=t;n.set_x(function(e){var t;if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");n.zpp_inner.validate();t=n.zpp_inner.x;return t}(this)-this.jAcc*this.n12x);var r=t;r.set_y(function(e){var t;if(r!=null&&r.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");r.zpp_inner.validate();t=r.zpp_inner.y;return t}(this)-this.jAcc*this.n12y);var i=t;i.set_z(function(e){var t;if(i!=null&&i.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");i.zpp_inner.validate();t=i.zpp_inner.z;return t}(this)-this.cx1*this.jAcc)}if(e==this.b2){var s=t;s.set_x(function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.x;return t}(this)+this.jAcc*this.n12x);var o=t;o.set_y(function(e){var t;if(o!=null&&o.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");o.zpp_inner.validate();t=o.zpp_inner.y;return t}(this)+this.jAcc*this.n12y);var u=t;u.set_z(function(e){var t;if(u!=null&&u.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");u.zpp_inner.validate();t=u.zpp_inner.z;return t}(this)+this.cx2*this.jAcc)}if(e==this.b3){var a=t;a.set_x(function(e){var t;if(a!=null&&a.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");a.zpp_inner.validate();t=a.zpp_inner.x;return t}(this)-this.jAcc*this.n34x);var f=t;f.set_y(function(e){var t;if(f!=null&&f.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");f.zpp_inner.validate();t=f.zpp_inner.y;return t}(this)-this.jAcc*this.n34y);var l=t;l.set_z(function(e){var t;if(l!=null&&l.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");l.zpp_inner.validate();t=l.zpp_inner.z;return t}(this)-this.cx3*this.jAcc)}if(e==this.b4){var c=t;c.set_x(function(e){var t;if(c!=null&&c.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");c.zpp_inner.validate();t=c.zpp_inner.x;return t}(this)+this.jAcc*this.n34x);var h=t;h.set_y(function(e){var t;if(h!=null&&h.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");h.zpp_inner.validate();t=h.zpp_inner.y;return t}(this)+this.jAcc*this.n34y);var p=t;p.set_z(function(e){var t;if(p!=null&&p.zpp_disp)throw new g("Error: "+"Vec3"+" has been disposed and cannot be used!");p.zpp_inner.validate();t=p.zpp_inner.z;return t}(this)+this.cx4*this.jAcc)}return t}else return Ht.get(0,0,0)},activeBodies:function(){if(this.b1!=null)this.b1.constraints.add(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.add(this)}if(this.b3!=this.b1&&this.b3!=this.b2){if(this.b3!=null)this.b3.constraints.add(this)}if(this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3){if(this.b4!=null)this.b4.constraints.add(this)}},inactiveBodies:function(){if(this.b1!=null)this.b1.constraints.remove(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.remove(this)}if(this.b3!=this.b1&&this.b3!=this.b2){if(this.b3!=null)this.b3.constraints.remove(this)}if(this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3){if(this.b4!=null)this.b4.constraints.remove(this)}},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(e){this.immutable_midstep("Constraint::"+"a1");this.a1localx=e.x;this.a1localy=e.y;this.wake()},setup_a1:function(){this.wrap_a1=_t.get(this.a1localx,this.a1localy,null);this.wrap_a1.zpp_inner._inuse=true;this.wrap_a1.zpp_inner._validate=Rs(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=Rs(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(e){this.immutable_midstep("Constraint::"+"a2");this.a2localx=e.x;this.a2localy=e.y;this.wake()},setup_a2:function(){this.wrap_a2=_t.get(this.a2localx,this.a2localy,null);this.wrap_a2.zpp_inner._inuse=true;this.wrap_a2.zpp_inner._validate=Rs(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=Rs(this,this.invalidate_a2)},validate_a3:function(){this.wrap_a3.zpp_inner.x=this.a3localx;this.wrap_a3.zpp_inner.y=this.a3localy},invalidate_a3:function(e){this.immutable_midstep("Constraint::"+"a3");this.a3localx=e.x;this.a3localy=e.y;this.wake()},setup_a3:function(){this.wrap_a3=_t.get(this.a3localx,this.a3localy,null);this.wrap_a3.zpp_inner._inuse=true;this.wrap_a3.zpp_inner._validate=Rs(this,this.validate_a3);this.wrap_a3.zpp_inner._invalidate=Rs(this,this.invalidate_a3)},validate_a4:function(){this.wrap_a4.zpp_inner.x=this.a4localx;this.wrap_a4.zpp_inner.y=this.a4localy},invalidate_a4:function(e){this.immutable_midstep("Constraint::"+"a4");this.a4localx=e.x;this.a4localy=e.y;this.wake()},setup_a4:function(){this.wrap_a4=_t.get(this.a4localx,this.a4localy,null);this.wrap_a4.zpp_inner._inuse=true;this.wrap_a4.zpp_inner._validate=Rs(this,this.validate_a4);this.wrap_a4.zpp_inner._invalidate=Rs(this,this.invalidate_a4)},copy:function(e,t){var n=new et(null,null,null,null,this.outer_zn.get_anchor1(),this.outer_zn.get_anchor2(),this.outer_zn.get_anchor3(),this.outer_zn.get_anchor4(),this.jointMin,this.jointMax,this.ratio);this.copyto(n);if(e!=null&&this.b1!=null){var r=null;var i=0;while(i<e.length){var s=e[i];++i;if(s.id==this.b1.id){r=s.bc;break}}if(r!=null)n.zpp_inner_zn.b1=r.zpp_inner;else t.push(Dn.todo(this.b1.id,function(e){n.zpp_inner_zn.b1=e.zpp_inner}))}if(e!=null&&this.b2!=null){var o=null;var u=0;while(u<e.length){var a=e[u];++u;if(a.id==this.b2.id){o=a.bc;break}}if(o!=null)n.zpp_inner_zn.b2=o.zpp_inner;else t.push(Dn.todo(this.b2.id,function(e){n.zpp_inner_zn.b2=e.zpp_inner}))}if(e!=null&&this.b3!=null){var f=null;var l=0;while(l<e.length){var c=e[l];++l;if(c.id==this.b3.id){f=c.bc;break}}if(f!=null)n.zpp_inner_zn.b3=f.zpp_inner;else t.push(Dn.todo(this.b3.id,function(e){n.zpp_inner_zn.b3=e.zpp_inner}))}if(e!=null&&this.b4!=null){var h=null;var p=0;while(p<e.length){var d=e[p];++p;if(d.id==this.b4.id){h=d.bc;break}}if(h!=null)n.zpp_inner_zn.b4=h.zpp_inner;else t.push(Dn.todo(this.b4.id,function(e){n.zpp_inner_zn.b4=e.zpp_inner}))}return n},validate:function(){if(this.b1==null||this.b2==null||this.b3==null||this.b4==null)throw new g("Error: PulleyJoint cannot be simulated with null bodies");if(this.b1==this.b2||this.b3==this.b4)throw new g("Error: PulleyJoint cannot have body1==body2 or body3==body4");if(this.b1.space!=this.space||this.b2.space!=this.space||this.b3.space!=this.space||this.b4.space!=this.space)throw new g("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new g("Error: PulleyJoint must have jointMin <= jointMax");if(!(this.b1.type==2)&&!(this.b2.type==2))throw new g("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic");if(!(this.b3.type==2)&&!(this.b4.type==2))throw new g("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic")},wake_connected:function(){if(this.b1!=null&&this.b1.type==2)this.b1.wake();if(this.b2!=null&&this.b2.type==2)this.b2.wake();if(this.b3!=null&&this.b3.type==2)this.b3.wake();if(this.b4!=null&&this.b4.type==2)this.b4.wake()},forest:function(){if(this.b1.type==2){var e;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{var t=this.b1.component;var n=null;while(t!=t.parent){var r=t.parent;t.parent=n;n=t;t=r}while(n!=null){var i=n.parent;n.parent=t;n=i}e=t}var s;if(this.component==this.component.parent)s=this.component;else{var o=this.component;var u=null;while(o!=o.parent){var a=o.parent;o.parent=u;u=o;o=a}while(u!=null){var f=u.parent;u.parent=o;u=f}s=o}if(e!=s){if(e.rank<s.rank)e.parent=s;else if(e.rank>s.rank)s.parent=e;else{s.parent=e;e.rank++}}}if(this.b2.type==2){var l;if(this.b2.component==this.b2.component.parent)l=this.b2.component;else{var c=this.b2.component;var h=null;while(c!=c.parent){var p=c.parent;c.parent=h;h=c;c=p}while(h!=null){var d=h.parent;h.parent=c;h=d}l=c}var v;if(this.component==this.component.parent)v=this.component;else{var m=this.component;var g=null;while(m!=m.parent){var y=m.parent;m.parent=g;g=m;m=y}while(g!=null){var b=g.parent;g.parent=m;g=b}v=m}if(l!=v){if(l.rank<v.rank)l.parent=v;else if(l.rank>v.rank)v.parent=l;else{v.parent=l;l.rank++}}}if(this.b3.type==2){var w;if(this.b3.component==this.b3.component.parent)w=this.b3.component;else{var E=this.b3.component;var S=null;while(E!=E.parent){var x=E.parent;E.parent=S;S=E;E=x}while(S!=null){var T=S.parent;S.parent=E;S=T}w=E}var N;if(this.component==this.component.parent)N=this.component;else{var C=this.component;var k=null;while(C!=C.parent){var L=C.parent;C.parent=k;k=C;C=L}while(k!=null){var A=k.parent;k.parent=C;k=A}N=C}if(w!=N){if(w.rank<N.rank)w.parent=N;else if(w.rank>N.rank)N.parent=w;else{N.parent=w;w.rank++}}}if(this.b4.type==2){var O;if(this.b4.component==this.b4.component.parent)O=this.b4.component;else{var M=this.b4.component;var _=null;while(M!=M.parent){var D=M.parent;M.parent=_;_=M;M=D}while(_!=null){var P=_.parent;_.parent=M;_=P}O=M}var H;if(this.component==this.component.parent)H=this.component;else{var B=this.component;var j=null;while(B!=B.parent){var F=B.parent;B.parent=j;j=B;B=F}while(j!=null){var I=j.parent;j.parent=B;j=I}H=B}if(O!=H){if(O.rank<H.rank)O.parent=H;else if(O.rank>H.rank)H.parent=O;else{H.parent=O;O.rank++}}}},pair_exists:function(e,t){return this.b1.id==e&&(this.b2.id==t||this.b3.id==t||this.b4.id==t)||this.b2.id==e&&(this.b3.id==t||this.b4.id==t||this.b1.id==t)||this.b3.id==e&&(this.b4.id==t||this.b1.id==t||this.b2.id==t)||this.b4.id==e&&(this.b1.id==t||this.b2.id==t||this.b3.id==t)},clearcache:function(){this.jAcc=0;this.pre_dt=-1},preStep:function(e){if(this.pre_dt==-1)this.pre_dt=e;var t=e/this.pre_dt;this.pre_dt=e;this.stepped=true;this.equal=this.jointMin==this.jointMax;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy;this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy;this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var n;var r=0;var i=0;var s=0;var o=0;r=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);i=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);s=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx);o=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var u=Math.sqrt(r*r+i*i);var a=Math.sqrt(s*s+o*o);if(u!=0){var f=1/u;this.n12x=r*f;this.n12y=i*f}if(a!=0){var l=1/a;this.n34x=s*l;this.n34y=o*l;var c=this.ratio;this.n34x*=c;this.n34y*=c}else{var h=this.ratio/Math.sqrt(this.n34x*this.n34x+this.n34y*this.n34y);this.n34x*=h;this.n34y*=h}var p=u+this.ratio*a;if(this.equal){p-=this.jointMax;this.slack=false}else if(p<this.jointMin){p=this.jointMin-p;this.n12x=-this.n12x;this.n12y=-this.n12y;this.n34x=-this.n34x;this.n34y=-this.n34y;this.slack=false}else if(p>this.jointMax){p-=this.jointMax;this.slack=false}else{this.n12x=0;this.n12y=0;this.n34x=0;this.n34y=0;p=0;this.slack=true}n=p;if(!this.slack){this.cx1=this.n12y*this.a1relx-this.n12x*this.a1rely;this.cx2=this.n12y*this.a2relx-this.n12x*this.a2rely;this.cx3=this.n34y*this.a3relx-this.n34x*this.a3rely;this.cx4=this.n34y*this.a4relx-this.n34x*this.a4rely;var d=this.ratio*this.ratio;var v=this.b1.smass+this.b2.smass+d*(this.b3.smass+this.b4.smass)+this.b1.sinertia*this.cx1*this.cx1+this.b2.sinertia*this.cx2*this.cx2+this.b3.sinertia*this.cx3*this.cx3+this.b4.sinertia*this.cx4*this.cx4;if(this.b1==this.b4)v-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx4*this.b1.sinertia);if(this.b1==this.b3)v+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx3*this.b1.sinertia);if(this.b2==this.b3)v-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx3*this.b2.sinertia);if(this.b2==this.b4)v+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx4*this.b2.sinertia);this.kMass=v;if(this.kMass!=0)this.kMass=1/this.kMass;else this.jAcc=0;if(!this.stiff){if(this.breakUnderError&&n*n>this.maxError*this.maxError)return true;var m;var g=2*Math.PI*this.frequency;this.gamma=1/(e*g*(2*this.damping+g*e));var y=1/(1+this.gamma);m=e*g*g*this.gamma;this.gamma*=y;this.kMass*=y;this.bias=-n*m;if(this.bias<-this.maxError)this.bias=-this.maxError;else if(this.bias>this.maxError)this.bias=this.maxError}else{this.bias=0;this.gamma=0}this.jAcc*=t;this.jMax=this.maxForce*e}return false},warmStart:function(){if(!this.slack){var e=this.b1.imass*this.jAcc;this.b1.velx-=this.n12x*e;this.b1.vely-=this.n12y*e;var t=this.b2.imass*this.jAcc;this.b2.velx+=this.n12x*t;this.b2.vely+=this.n12y*t;var n=this.b3.imass*this.jAcc;this.b3.velx-=this.n34x*n;this.b3.vely-=this.n34y*n;var r=this.b4.imass*this.jAcc;this.b4.velx+=this.n34x*r;this.b4.vely+=this.n34y*r;this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc;this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc;this.b3.angvel-=this.cx3*this.b3.iinertia*this.jAcc;this.b4.angvel+=this.cx4*this.b4.iinertia*this.jAcc}},applyImpulseVel:function(){if(this.slack)return false;var e=this.n12x*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.n12y*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+this.n34x*(this.b4.velx+this.b4.kinvelx-this.b3.velx-this.b3.kinvelx)+this.n34y*(this.b4.vely+this.b4.kinvely-this.b3.vely-this.b3.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1+(this.b4.angvel+this.b4.kinangvel)*this.cx4-(this.b3.angvel+this.b3.kinangvel)*this.cx3;var t=this.kMass*(this.bias-e)-this.jAcc*this.gamma;var n=this.jAcc;this.jAcc+=t;if(!this.equal&&this.jAcc>0)this.jAcc=0;if(this.breakUnderForce&&this.jAcc<-this.jMax)return true;if(!this.stiff){if(this.jAcc<-this.jMax)this.jAcc=-this.jMax}t=this.jAcc-n;var r=this.b1.imass*t;this.b1.velx-=this.n12x*r;this.b1.vely-=this.n12y*r;var i=this.b2.imass*t;this.b2.velx+=this.n12x*i;this.b2.vely+=this.n12y*i;var s=this.b3.imass*t;this.b3.velx-=this.n34x*s;this.b3.vely-=this.n34y*s;var o=this.b4.imass*t;this.b4.velx+=this.n34x*o;this.b4.vely+=this.n34y*o;this.b1.angvel-=this.cx1*this.b1.iinertia*t;this.b2.angvel+=this.cx2*this.b2.iinertia*t;this.b3.angvel-=this.cx3*this.b3.iinertia*t;this.b4.angvel+=this.cx4*this.b4.iinertia*t;return false},applyImpulsePos:function(){var e;var t;var n=0;var r=0;n=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;r=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i=0;var s=0;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;s=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var o=0;var u=0;o=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy;u=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;var a=0;var f=0;a=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy;f=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var l;var c=0;var h=0;var p=0;var d=0;c=this.n12x;h=this.n12y;p=this.n34x;d=this.n34y;var v=0;var m=0;var g=0;var y=0;v=this.b2.posx+i-(this.b1.posx+n);m=this.b2.posy+s-(this.b1.posy+r);g=this.b4.posx+a-(this.b3.posx+o);y=this.b4.posy+f-(this.b3.posy+u);var b=Math.sqrt(v*v+m*m);var w=Math.sqrt(g*g+y*y);if(b!=0){var E=1/b;c=v*E;h=m*E}if(w!=0){var S=1/w;p=g*S;d=y*S;var x=this.ratio;p*=x;d*=x}else{var T=this.ratio/Math.sqrt(p*p+d*d);p*=T;d*=T}var C=b+this.ratio*w;if(this.equal){C-=this.jointMax;l=false}else if(C<this.jointMin){C=this.jointMin-C;c=-c;h=-h;p=-p;d=-d;l=false}else if(C>this.jointMax){C-=this.jointMax;l=false}else{c=0;h=0;p=0;d=0;C=0;l=true}e=C;if(!l){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return true;if(e*e<N.constraintLinearSlop*N.constraintLinearSlop)return false;e*=.5;if(e*e>6){var k=this.b1.smass+this.b2.smass;if(k>N.epsilon){k=.75/k;t=-e*k;if(this.equal||t<0){var L=t*this.b1.imass;this.b1.posx-=c*L;this.b1.posy-=h*L;var A=t*this.b2.imass;this.b2.posx+=c*A;this.b2.posy+=h*A;var O=t*this.b3.imass;this.b3.posx-=p*O;this.b3.posy-=d*O;var M=t*this.b4.imass;this.b4.posx+=p*M;this.b4.posy+=d*M;var _=0;var D=0;var P=0;var H=0;_=this.b2.posx+i-(this.b1.posx+n);D=this.b2.posy+s-(this.b1.posy+r);P=this.b4.posx+a-(this.b3.posx+o);H=this.b4.posy+f-(this.b3.posy+u);var B=Math.sqrt(_*_+D*D);var j=Math.sqrt(P*P+H*H);if(B!=0){var F=1/B;c=_*F;h=D*F}if(j!=0){var I=1/j;p=P*I;d=H*I;var q=this.ratio;p*=q;d*=q}else{var R=this.ratio/Math.sqrt(p*p+d*d);p*=R;d*=R}var U=B+this.ratio*j;if(this.equal){U-=this.jointMax;l=false}else if(U<this.jointMin){U=this.jointMin-U;c=-c;h=-h;p=-p;d=-d;l=false}else if(U>this.jointMax){U-=this.jointMax;l=false}else{c=0;h=0;p=0;d=0;U=0;l=true}e=U;e*=.5}}}var z;var W;var X;var V;var $;z=h*n-c*r;W=h*i-c*s;X=d*o-p*u;V=d*a-p*f;var J=this.ratio*this.ratio;var K=this.b1.smass+this.b2.smass+J*(this.b3.smass+this.b4.smass)+this.b1.sinertia*z*z+this.b2.sinertia*W*W+this.b3.sinertia*X*X+this.b4.sinertia*V*V;if(this.b1==this.b4)K-=2*((c*p+h*d)*this.b1.smass+z*V*this.b1.sinertia);if(this.b1==this.b3)K+=2*((c*p+h*d)*this.b1.smass+z*X*this.b1.sinertia);if(this.b2==this.b3)K-=2*((c*p+h*d)*this.b2.smass+W*X*this.b2.sinertia);if(this.b2==this.b4)K+=2*((c*p+h*d)*this.b2.smass+W*V*this.b2.sinertia);$=K;if($!=0)$=1/$;t=-e*$;if(this.equal||t<0){var Q=this.b1.imass*t;this.b1.posx-=c*Q;this.b1.posy-=h*Q;var G=this.b2.imass*t;this.b2.posx+=c*G;this.b2.posy+=h*G;var Y=this.b3.imass*t;this.b3.posx-=p*Y;this.b3.posy-=d*Y;var Z=this.b4.imass*t;this.b4.posx+=p*Z;this.b4.posy+=d*Z;this.b1.delta_rot(-z*this.b1.iinertia*t);this.b2.delta_rot(W*this.b2.iinertia*t);this.b3.delta_rot(-X*this.b3.iinertia*t);this.b4.delta_rot(V*this.b4.iinertia*t)}}return false},draw:function(e){},__class__:Fn});var In=function(e,t){this.jOld=null;this.J=null;this.vec3=null;this.Keff=null;this.jMax=0;this.velonly=false;this.gamma=0;this.soft=0;this.y=null;this.L=null;this.stepped=false;this.bias=null;this.jAcc=null;this.dim=0;this.bodies=null;this.outer_zn=null;Mn.call(this);this.bodies=[];this.dim=e;this.velonly=t;this.jAcc=[];this.bias=[];this.L=[];this.J=[];this.jOld=[];this.y=[];this.Keff=[];this.vec3=Ht.get(0,0,0);var n=0;while(n<e){var r=n++;this.jAcc[r]=this.bias[r]=this.J[r]=this.jOld[r]=this.y[r]=0;var i=0;while(i<e){var s=i++;this.L[r*e+s]=0}}this.stepped=false};In.__name__=true;In.__super__=Mn;In.prototype=n(Mn.prototype,{bindVec2_invalidate:function(e){this.outer_zn.__invalidate()},addBody:function(e){var t=null;var n=0;var r=this.bodies;while(n<r.length){var i=r[n];++n;if(i.body==e){t=i;break}}if(t==null){this.bodies.push(new qn(1,e));if(this.active&&this.space!=null){if(e!=null)e.constraints.add(this)}}else t.cnt++},remBody:function(e){var t=null;var n=this.bodies.length|0;var r=0;while(r<n){var i=this.bodies[r];if(i.body==e){i.cnt--;if(i.cnt==0){if(n>0)this.bodies[r]=this.bodies[n-1];this.bodies.pop();if(this.active&&this.space!=null){if(e!=null)e.constraints.remove(this)}}t=i;break}r++}return t!=null},bodyImpulse:function(e){var t=0;var n=this.dim;while(t<n){var r=t++;this.J[r]=this.jAcc[r]}var i=Ht.get(0,0,0);if(this.stepped)this.outer_zn.__impulse(this.J,e.outer,i);return i},activeBodies:function(){var e=0;var t=this.bodies;while(e<t.length){var n=t[e];++e;if(n.body!=null)n.body.constraints.add(this)}},inactiveBodies:function(){var e=0;var t=this.bodies;while(e<t.length){var n=t[e];++e;if(n.body!=null)n.body.constraints.remove(this)}},copy:function(e,t){var n=this.outer_zn.__copy();this.copyto(n);throw new g("not done yet");return n},validate:function(){var e=0;var t=this.bodies;while(e<t.length){var n=t[e];++e;if(n.body.space!=this.space)throw new g("Error: Constraints must have each body within the same sapce to which the constraint has been assigned")}this.outer_zn.__validate()},wake_connected:function(){var e=0;var t=this.bodies;while(e<t.length){var n=t[e];++e;if(n.body.type==2)n.body.wake()}},forest:function(){var e=0;var t=this.bodies;while(e<t.length){var n=t[e];++e;if(n.body.type==2){var r;if(n.body.component==n.body.component.parent)r=n.body.component;else{var i=n.body.component;var s=null;while(i!=i.parent){var o=i.parent;i.parent=s;s=i;i=o}while(s!=null){var u=s.parent;s.parent=i;s=u}r=i}var a;if(this.component==this.component.parent)a=this.component;else{var f=this.component;var l=null;while(f!=f.parent){var c=f.parent;f.parent=l;l=f;f=c}while(l!=null){var h=l.parent;l.parent=f;l=h}a=f}if(r!=a){if(r.rank<a.rank)r.parent=a;else if(r.rank>a.rank)a.parent=r;else{a.parent=r;r.rank++}}}}},pair_exists:function(e,t){var n=false;var r=this.bodies.length|0;var i=0;while(i<r){var s=i++;var o=this.bodies[s].body;var u=s+1;while(u<r){var a=u++;var f=this.bodies[a].body;if(o.id==e&&f.id==t||o.id==t&&f.id==e){n=true;break}}if(n)break}return n},broken:function(){this.outer_zn.__broken()},clearcache:function(){var e=0;var t=this.dim;while(e<t){var n=e++;this.jAcc[n]=0}this.pre_dt=-1},lsq:function(e){var t=0;var n=0;var r=this.dim;while(n<r){var i=n++;t+=e[i]*e[i]}return t},_clamp:function(e,t){var n=this.lsq(e);if(n>t*t){var r=t/Math.sqrt(n);var i=0;var s=this.dim;while(i<s){var o=i++;e[o]*=r}}},solve:function(e){var t=0;var n=0;var r=this.dim;while(n<r){var i=n++;var s=0;var o=0;var u=i-1;while(o<u){var a=o++;s+=this.L[i*this.dim+a]*this.L[i*this.dim+a]}var f=Math.sqrt(e[t++]-s);this.L[i*this.dim+i]=f;if(f!=0){f=1/f;var l=i+1;var c=this.dim;while(l<c){var h=l++;var p=0;var d=0;var v=i-1;while(d<v){var m=d++;p+=this.L[h*this.dim+m]*this.L[i*this.dim+m]}this.L[h*this.dim+i]=f*(e[t++]-p)}}else{var g=i+1;var y=this.dim;while(g<y){var b=g++;this.L[b*this.dim+i]=0}t+=this.dim-i-1}}return this.L},transform:function(e,t){var n=0;var r=this.dim;while(n<r){var i=n++;var s=t[i];var o=e[i*this.dim+i];if(o!=0){var u=0;while(u<i){var a=u++;s-=e[i*this.dim+a]*this.y[a]}this.y[i]=s/o}else this.y[i]=0}var f=0;var l=this.dim;while(f<l){var c=f++;var h=this.dim-1-c;var p=e[h*this.dim+h];if(p!=0){var d=this.y[h];var v=h+1;var m=this.dim;while(v<m){var g=v++;d-=e[g*this.dim+h]*t[g]}t[h]=d/p}else t[h]=0}},preStep:function(e){if(this.pre_dt==-1)this.pre_dt=e;var t=e/this.pre_dt;this.pre_dt=e;this.stepped=true;this.outer_zn.__prepare();this.outer_zn.__eff_mass(this.Keff);this.L=this.solve(this.Keff);if(!this.stiff&&!this.velonly){var n;var r=2*Math.PI*this.frequency;this.gamma=1/(e*r*(2*this.damping+r*e));var i=1/(1+this.gamma);n=e*r*r*this.gamma;this.gamma*=i;this.soft=i;this.outer_zn.__position(this.bias);if(this.breakUnderError&&this.lsq(this.bias)>this.maxError*this.maxError)return true;var s=0;var o=this.dim;while(s<o){var u=s++;this.bias[u]*=-n}this._clamp(this.bias,this.maxError)}else{var a=0;var f=this.dim;while(a<f){var l=a++;this.bias[l]=0}this.gamma=0;this.soft=1}var c=0;var h=this.dim;while(c<h){var p=c++;this.jAcc[p]*=t}this.jMax=this.maxForce*e;return false},warmStart:function(){var e=0;var t=this.bodies;while(e<t.length){var n=t[e];++e;var r=n.body;this.outer_zn.__impulse(this.jAcc,r.outer,this.vec3);var i=r.imass;r.velx+=this.vec3.get_x()*i;r.vely+=this.vec3.get_y()*i;r.angvel+=this.vec3.get_z()*r.iinertia}},applyImpulseVel:function(){this.outer_zn.__velocity(this.J);var e=0;var t=this.dim;while(e<t){var n=e++;this.J[n]=this.bias[n]-this.J[n]}this.transform(this.L,this.J);var r=0;var i=this.dim;while(r<i){var s=r++;this.jOld[s]=this.jAcc[s];this.jAcc[s]+=this.J[s]=this.J[s]*this.soft-this.jAcc[s]*this.gamma}this.outer_zn.__clamp(this.jAcc);if((this.breakUnderForce||!this.stiff)&&this.lsq(this.jAcc)>this.jMax*this.jMax){if(this.breakUnderForce)return true;else if(!this.stiff)this._clamp(this.jAcc,this.jMax)}var o=0;var u=this.dim;while(o<u){var a=o++;this.J[a]=this.jAcc[a]-this.jOld[a]}var f=0;var l=this.bodies;while(f<l.length){var c=l[f];++f;var h=c.body;this.outer_zn.__impulse(this.J,h.outer,this.vec3);var p=h.imass;h.velx+=this.vec3.get_x()*p;h.vely+=this.vec3.get_y()*p;h.angvel+=this.vec3.get_z()*h.iinertia}return false},applyImpulsePos:function(){if(this.velonly)return false;this.outer_zn.__prepare();this.outer_zn.__position(this.J);var e=this.lsq(this.J);if(this.breakUnderError&&e>this.maxError*this.maxError)return true;else if(e<N.constraintLinearSlop*N.constraintLinearSlop)return false;var t=0;var n=this.dim;while(t<n){var r=t++;this.J[r]*=-1}this.outer_zn.__eff_mass(this.Keff);this.transform(this.solve(this.Keff),this.J);this.outer_zn.__clamp(this.J);var i=0;var s=this.bodies;while(i<s.length){var o=s[i];++i;var u=o.body;this.outer_zn.__impulse(this.J,u.outer,this.vec3);var a=u.imass;u.posx+=this.vec3.get_x()*a;u.posy+=this.vec3.get_y()*a;u.delta_rot(this.vec3.get_z()*u.iinertia)}return false},draw:function(e){this.outer_zn.__draw(e)},__class__:In});var qn=function(e,t){this.body=null;this.cnt=0;this.cnt=e;this.body=t};qn.__name__=true;qn.prototype={__class__:qn};var Rn=function(){this.stepped=false;this.biasz=0;this.biasy=0;this.biasx=0;this.gamma=0;this.jMax=0;this.jAccz=0;this.jAccy=0;this.jAccx=0;this.kMassf=0;this.kMasse=0;this.kMassc=0;this.kMassd=0;this.kMassb=0;this.kMassa=0;this.phase=0;this.wrap_a2=null;this.a2rely=0;this.a2relx=0;this.a2localy=0;this.a2localx=0;this.b2=null;this.wrap_a1=null;this.a1rely=0;this.a1relx=0;this.a1localy=0;this.a1localx=0;this.b1=null;this.outer_zn=null;Mn.call(this);this.phase=0;this.jAccx=0;this.jAccy=0;this.jAccz=0;this.jMax=Infinity;this.stepped=false;this.a1localx=0;this.a1localy=0;this.a1relx=0;this.a1rely=0;this.a2localx=0;this.a2localy=0;this.a2relx=0;this.a2rely=0};Rn.__name__=true;Rn.__super__=Mn;Rn.prototype=n(Mn.prototype,{bodyImpulse:function(e){if(this.stepped){if(e==this.b1)return Ht.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz));else return Ht.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz)}else return Ht.get(0,0,0)},activeBodies:function(){if(this.b1!=null)this.b1.constraints.add(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.add(this)}},inactiveBodies:function(){if(this.b1!=null)this.b1.constraints.remove(this);if(this.b2!=this.b1){if(this.b2!=null)this.b2.constraints.remove(this)}},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(e){this.immutable_midstep("Constraint::"+"a1");this.a1localx=e.x;this.a1localy=e.y;this.wake()},setup_a1:function(){this.wrap_a1=_t.get(this.a1localx,this.a1localy,null);this.wrap_a1.zpp_inner._inuse=true;this.wrap_a1.zpp_inner._validate=Rs(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=Rs(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(e){this.immutable_midstep("Constraint::"+"a2");this.a2localx=e.x;this.a2localy=e.y;this.wake()},setup_a2:function(){this.wrap_a2=_t.get(this.a2localx,this.a2localy,null);this.wrap_a2.zpp_inner._inuse=true;this.wrap_a2.zpp_inner._validate=Rs(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=Rs(this,this.invalidate_a2)},copy:function(e,t){var n=new nt(null,null,this.outer_zn.get_anchor1(),this.outer_zn.get_anchor2());this.copyto(n);if(e!=null&&this.b1!=null){var r=null;var i=0;while(i<e.length){var s=e[i];++i;if(s.id==this.b1.id){r=s.bc;break}}if(r!=null)n.zpp_inner_zn.b1=r.zpp_inner;else t.push(Dn.todo(this.b1.id,function(e){n.zpp_inner_zn.b1=e.zpp_inner}))}if(e!=null&&this.b2!=null){var o=null;var u=0;while(u<e.length){var a=e[u];++u;if(a.id==this.b2.id){o=a.bc;break}}if(o!=null)n.zpp_inner_zn.b2=o.zpp_inner;else t.push(Dn.todo(this.b2.id,function(e){n.zpp_inner_zn.b2=e.zpp_inner}))}return n},validate:function(){if(this.b1==null||this.b2==null)throw new g("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new g("Error: WeldJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new g("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(!(this.b1.type==2)&&!(this.b2.type==2))throw new g("Error: Constraints cannot have both bodies non-dynamic")},wake_connected:function(){if(this.b1!=null&&this.b1.type==2)this.b1.wake();if(this.b2!=null&&this.b2.type==2)this.b2.wake()},forest:function(){if(this.b1.type==2){var e;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{var t=this.b1.component;var n=null;while(t!=t.parent){var r=t.parent;t.parent=n;n=t;t=r}while(n!=null){var i=n.parent;n.parent=t;n=i}e=t}var s;if(this.component==this.component.parent)s=this.component;else{var o=this.component;var u=null;while(o!=o.parent){var a=o.parent;o.parent=u;u=o;o=a}while(u!=null){var f=u.parent;u.parent=o;u=f}s=o}if(e!=s){if(e.rank<s.rank)e.parent=s;else if(e.rank>s.rank)s.parent=e;else{s.parent=e;e.rank++}}}if(this.b2.type==2){var l;if(this.b2.component==this.b2.component.parent)l=this.b2.component;else{var c=this.b2.component;var h=null;while(c!=c.parent){var p=c.parent;c.parent=h;h=c;c=p}while(h!=null){var d=h.parent;h.parent=c;h=d}l=c}var v;if(this.component==this.component.parent)v=this.component;else{var m=this.component;var g=null;while(m!=m.parent){var y=m.parent;m.parent=g;g=m;m=y}while(g!=null){var b=g.parent;g.parent=m;g=b}v=m}if(l!=v){if(l.rank<v.rank)l.parent=v;else if(l.rank>v.rank)v.parent=l;else{v.parent=l;l.rank++}}}},pair_exists:function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},clearcache:function(){this.jAccx=0;this.jAccy=0;this.jAccz=0;this.pre_dt=-1},preStep:function(e){if(this.pre_dt==-1)this.pre_dt=e;var t=e/this.pre_dt;this.pre_dt=e;this.stepped=true;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var n=this.b1.smass+this.b2.smass;this.kMassa=n;this.kMassb=0;this.kMassd=n;this.kMassc=0;this.kMasse=0;this.kMassf=0;if(this.b1.sinertia!=0){var r=this.a1relx*this.b1.sinertia;var i=this.a1rely*this.b1.sinertia;this.kMassa+=i*this.a1rely;this.kMassb+=-i*this.a1relx;this.kMassd+=r*this.a1relx;this.kMassc+=-i;this.kMasse+=r;this.kMassf+=this.b1.sinertia}if(this.b2.sinertia!=0){var s=this.a2relx*this.b2.sinertia;var o=this.a2rely*this.b2.sinertia;this.kMassa+=o*this.a2rely;this.kMassb+=-o*this.a2relx;this.kMassd+=s*this.a2relx;this.kMassc+=-o;this.kMasse+=s;this.kMassf+=this.b2.sinertia}var u;var a=this.kMassa*(this.kMassd*this.kMassf-this.kMasse*this.kMasse)+this.kMassb*(this.kMassc*this.kMasse-this.kMassb*this.kMassf)+this.kMassc*(this.kMassb*this.kMasse-this.kMassc*this.kMassd);if(a!=a){this.kMassa=0;this.kMassb=0;this.kMassd=0;this.kMassc=0;this.kMasse=0;this.kMassf=0;u=7}else if(a==0){var f=0;if(this.kMassa!=0)this.kMassa=1/this.kMassa;else{this.kMassa=0;f|=1}if(this.kMassd!=0)this.kMassd=1/this.kMassd;else{this.kMassd=0;f|=2}if(this.kMassf!=0)this.kMassf=1/this.kMassf;else{this.kMassf=0;f|=4}this.kMassb=this.kMassc=this.kMasse=0;u=f}else{a=1/a;var l=a*(this.kMassd*this.kMassf-this.kMasse*this.kMasse);var c=a*(this.kMasse*this.kMassc-this.kMassb*this.kMassf);var h=a*(this.kMassa*this.kMassf-this.kMassc*this.kMassc);var p=a*(this.kMassb*this.kMasse-this.kMassc*this.kMassd);var d=a*(this.kMassb*this.kMassc-this.kMassa*this.kMasse);var v=a*(this.kMassa*this.kMassd-this.kMassb*this.kMassb);this.kMassa=l;this.kMassb=c;this.kMassd=h;this.kMassc=p;this.kMasse=d;this.kMassf=v;u=0}if((u&1)!=0)this.jAccx=0;if((u&2)!=0)this.jAccy=0;if((u&4)!=0)this.jAccz=0;if(!this.stiff){var m;var g;var y=2*Math.PI*this.frequency;this.gamma=1/(e*y*(2*this.damping+y*e));var b=1/(1+this.gamma);m=e*y*y*this.gamma;this.gamma*=b;g=b;this.kMassa*=g;this.kMassb*=g;this.kMassd*=g;this.kMassc*=g;this.kMasse*=g;this.kMassf*=g;this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);this.biasz=this.b2.rot-this.b1.rot-this.phase;if(this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz>this.maxError*this.maxError)return true;var w=-m;var E=w;this.biasx*=E;this.biasy*=E;this.biasz*=w;var S=this.maxError;var x=this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz;if(x>S*S){var T=S*(1/Math.sqrt(x));var N=T;this.biasx*=N;this.biasy*=N;this.biasz*=T}}else{this.biasx=0;this.biasy=0;this.biasz=0;this.gamma=0}var C=t;var k=C;this.jAccx*=k;this.jAccy*=k;this.jAccz*=C;this.jMax=this.maxForce*e;return false},warmStart:function(){var e=this.b1.imass;this.b1.velx-=this.jAccx*e;this.b1.vely-=this.jAccy*e;var t=this.b2.imass;this.b2.velx+=this.jAccx*t;this.b2.vely+=this.jAccy*t;this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)*this.b1.iinertia;this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz)*this.b2.iinertia},applyImpulseVel:function(){var e=0;var t=0;var n=0;e=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel));t=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel));n=this.b2.angvel+this.b2.kinangvel-this.b1.angvel-this.b1.kinangvel;var r=0;var i=0;var s=0;r=this.biasx-e;i=this.biasy-t;s=this.biasz-n;var o=this.kMassa*r+this.kMassb*i+this.kMassc*s;var u=this.kMassb*r+this.kMassd*i+this.kMasse*s;s=this.kMassc*r+this.kMasse*i+this.kMassf*s;r=o;i=u;var a=this.gamma;var f=a;r-=this.jAccx*f;i-=this.jAccy*f;s-=this.jAccz*a;var l=0;var c=0;var h=0;l=this.jAccx;c=this.jAccy;h=this.jAccz;var p=1;var d=p;this.jAccx+=r*d;this.jAccy+=i*d;this.jAccz+=s*p;if(this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz>this.jMax*this.jMax)return true}else if(!this.stiff){var v=this.jMax;var m=this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz;if(m>v*v){var g=v*(1/Math.sqrt(m));var y=g;this.jAccx*=y;this.jAccy*=y;this.jAccz*=g}}r=this.jAccx-l;i=this.jAccy-c;s=this.jAccz-h;var b=this.b1.imass;this.b1.velx-=r*b;this.b1.vely-=i*b;var w=this.b2.imass;this.b2.velx+=r*w;this.b2.vely+=i*w;this.b1.angvel-=(i*this.a1relx-r*this.a1rely+s)*this.b1.iinertia;this.b2.angvel+=(i*this.a2relx-r*this.a2rely+s)*this.b2.iinertia;return false},applyImpulsePos:function(){var e=0;var t=0;e=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;t=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var n=0;var r=0;n=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;r=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i=0;var s=0;var o=0;i=this.b2.posx+n-(this.b1.posx+e);s=this.b2.posy+r-(this.b1.posy+t);o=this.b2.rot-this.b1.rot-this.phase;var u=0;var a=0;var f=0;if(this.breakUnderError&&i*i+s*s+o*o>this.maxError*this.maxError)return true;var l=true;if(i*i+s*s<N.constraintLinearSlop*N.constraintLinearSlop){l=false;i=0;s=0}if(o*o<As.sqr(N.constraintAngularSlop)){if(!l)return false;else o=0}var c=.5;var h=c;i*=h;s*=h;o*=c;if(i*i+s*s>6){var p=this.b1.smass+this.b2.smass;if(p>N.epsilon){p=.75/p;u=-i*p;a=-s*p;var d=20;var v=u*u+a*a;if(v>d*d){var m=d*(1/Math.sqrt(v));u*=m;a*=m}var g=this.b1.imass;this.b1.posx-=u*g;this.b1.posy-=a*g;var y=this.b2.imass;this.b2.posx+=u*y;this.b2.posy+=a*y;i=this.b2.posx+n-(this.b1.posx+e);s=this.b2.posy+r-(this.b1.posy+t);o=this.b2.rot-this.b1.rot-this.phase;var b=.5;var w=b;i*=w;s*=w;o*=b}}var E=0;var S=0;var x=0;var T=0;var C=0;var k=0;var L=this.b1.smass+this.b2.smass;E=L;S=0;x=L;T=0;C=0;k=0;if(this.b1.sinertia!=0){var A=e*this.b1.sinertia;var O=t*this.b1.sinertia;E+=O*t;S+=-O*e;x+=A*e;T+=-O;C+=A;k+=this.b1.sinertia}if(this.b2.sinertia!=0){var M=n*this.b2.sinertia;var _=r*this.b2.sinertia;E+=_*r;S+=-_*n;x+=M*n;T+=-_;C+=M;k+=this.b2.sinertia}u=-i;a=-s;f=-o;var D=6;var P=u*u+a*a;if(P>D*D){var H=D*(1/Math.sqrt(P));u*=H;a*=H}As.clamp(f,-.25,.25);var B=E*(x*k-C*C)+S*(T*C-S*k)+T*(S*C-T*x);if(B!=B)u=a=f=0;else if(B==0){if(E!=0)u/=E;else u=0;if(x!=0)a/=x;else a=0;if(k!=0)f/=k;else f=0}else{B=1/B;var j=C*T-S*k;var F=S*C-T*x;var I=S*T-E*C;var q=B*(u*(x*k-C*C)+a*j+f*F);var R=B*(u*j+a*(E*k-T*T)+f*I);f=B*(u*F+a*I+f*(E*x-S*S));u=q;a=R}var U=this.b1.imass;this.b1.posx-=u*U;this.b1.posy-=a*U;var z=this.b2.imass;this.b2.posx+=u*z;this.b2.posy+=a*z;this.b1.delta_rot(-(a*e-u*t+f)*this.b1.iinertia);this.b2.delta_rot((a*n-u*r+f)*this.b2.iinertia);return false},draw:function(e){},__class__:Rn});var Un=function(){this.sensorarb=null;this.fluidarb=null;this.colarb=null;this.type=0;this.pair=null;this.ws2=null;this.ws1=null;this.b2=null;this.b1=null;this.invalidated=false;this.immState=0;this.fresh=false;this.continuous=false;this.presentable=false;this.intchange=false;this.present=0;this.sleeping=false;this.cleared=false;this.active=false;this.endGenerated=0;this.sleep_stamp=0;this.up_stamp=0;this.stamp=0;this.di=0;this.id=0;this.hnext=null;this.outer=null};Un.__name__=true;Un.prototype={wrapper:function(){if(this.outer==null){Un.internal=true;if(this.type==Un.COL){this.colarb.outer_zn=new ut;this.outer=this.colarb.outer_zn}else if(this.type==Un.FLUID){this.fluidarb.outer_zn=new ct;this.outer=this.fluidarb.outer_zn}else this.outer=new rt;this.outer.zpp_inner=this;Un.internal=false}return this.outer},inactiveme:function(){return!this.active},acting:function(){return this.active&&(this.immState&1)!=0},swap_features:function(){var e=this.b1;this.b1=this.b2;this.b2=e;var t=this.ws1;this.ws1=this.ws2;this.ws2=t;var n=this.colarb.s1;this.colarb.s1=this.colarb.s2;this.colarb.s2=n},lazyRetire:function(e,t){this.cleared=true;if(t==null||this.b2==t)this.b1.arbiters.inlined_try_remove(this);if(t==null||this.b1==t)this.b2.arbiters.inlined_try_remove(this);if(this.pair!=null){this.pair.arb=null;this.pair=null}this.active=false;e.f_arbiters.modified=true},sup_assign:function(e,t,n,r){this.b1=e.body;this.ws1=e;this.b2=t.body;this.ws2=t;this.id=n;this.di=r;this.b1.arbiters.inlined_add(this);this.b2.arbiters.inlined_add(this);this.active=true;this.present=0;this.cleared=false;this.sleeping=false;this.fresh=false;this.presentable=false},sup_retire:function(){if(!this.cleared){this.b1.arbiters.inlined_try_remove(this);this.b2.arbiters.inlined_try_remove(this);if(this.pair!=null){this.pair.arb=null;this.pair=null}}this.b1=this.b2=null;this.active=false;this.intchange=false},__class__:Un};var zn=function(){this.next=null;Un.call(this);this.type=Un.SENSOR;this.sensorarb=this};zn.__name__=true;zn.__super__=Un;zn.prototype=n(Un.prototype,{alloc:function(){},free:function(){},assign:function(e,t,n,r){this.b1=e.body;this.ws1=e;this.b2=t.body;this.ws2=t;this.id=n;this.di=r;this.b1.arbiters.inlined_add(this);this.b2.arbiters.inlined_add(this);this.active=true;this.present=0;this.cleared=false;this.sleeping=false;this.fresh=false;this.presentable=false},retire:function(){if(!this.cleared){this.b1.arbiters.inlined_try_remove(this);this.b2.arbiters.inlined_try_remove(this);if(this.pair!=null){this.pair.arb=null;this.pair=null}}this.b1=this.b2=null;this.active=false;this.intchange=false;var e=this;e.next=zn.zpp_pool;zn.zpp_pool=e},makemutable:function(){},makeimmutable:function(){},__class__:zn});var Wn=function(){this.pre_dt=0;this.mutable=false;this.wrap_position=null;this.buoyy=0;this.buoyx=0;this.ny=0;this.nx=0;this.lgamma=0;this.dampy=0;this.dampx=0;this.vMassc=0;this.vMassb=0;this.vMassa=0;this.agamma=0;this.adamp=0;this.wMass=0;this.nodrag=false;this.r2y=0;this.r2x=0;this.r1y=0;this.r1x=0;this.overlap=0;this.centroidy=0;this.centroidx=0;this.next=null;this.outer_zn=null;Un.call(this);this.type=Un.FLUID;this.fluidarb=this;this.buoyx=0;this.buoyy=0;this.pre_dt=-1};Wn.__name__=true;Wn.__super__=Un;Wn.prototype=n(Un.prototype,{alloc:function(){},free:function(){},position_validate:function(){if(!this.active)throw new g("Error: Arbiter not currently in use");this.wrap_position.zpp_inner.x=this.centroidx;this.wrap_position.zpp_inner.y=this.centroidy},position_invalidate:function(e){this.centroidx=e.x;this.centroidy=e.y},getposition:function(){this.wrap_position=_t.get(null,null,null);this.wrap_position.zpp_inner._inuse=true;this.wrap_position.zpp_inner._immutable=!this.mutable;this.wrap_position.zpp_inner._validate=Rs(this,this.position_validate);this.wrap_position.zpp_inner._invalidate=Rs(this,this.position_invalidate)},assign:function(e,t,n,r){this.b1=e.body;this.ws1=e;this.b2=t.body;this.ws2=t;this.id=n;this.di=r;this.b1.arbiters.inlined_add(this);this.b2.arbiters.inlined_add(this);this.active=true;this.present=0;this.cleared=false;this.sleeping=false;this.fresh=false;this.presentable=false;this.nx=0;this.ny=1;this.dampx=0;this.dampy=0;this.adamp=0},retire:function(){if(!this.cleared){this.b1.arbiters.inlined_try_remove(this);this.b2.arbiters.inlined_try_remove(this);if(this.pair!=null){this.pair.arb=null;this.pair=null}}this.b1=this.b2=null;this.active=false;this.intchange=false;var e=this;e.next=Wn.zpp_pool;Wn.zpp_pool=e;this.pre_dt=-1},makemutable:function(){this.mutable=true;if(this.wrap_position!=null)this.wrap_position.zpp_inner._immutable=false},makeimmutable:function(){this.mutable=false;if(this.wrap_position!=null)this.wrap_position.zpp_inner._immutable=true},inject:function(e,t,n){this.overlap=e;this.centroidx=t;this.centroidy=n},preStep:function(e,t){if(this.pre_dt==-1)this.pre_dt=t;var n=t/this.pre_dt;this.pre_dt=t;this.r1x=this.centroidx-this.b1.posx;this.r1y=this.centroidy-this.b1.posy;this.r2x=this.centroidx-this.b2.posx;this.r2y=this.centroidy-this.b2.posy;var r=0;var i=0;if(this.ws1.fluidEnabled&&this.ws1.fluidProperties.wrap_gravity!=null){r=this.ws1.fluidProperties.gravityx;i=this.ws1.fluidProperties.gravityy}else{r=e.gravityx;i=e.gravityy}var s=0;var o=0;if(this.ws2.fluidEnabled&&this.ws2.fluidProperties.wrap_gravity!=null){s=this.ws2.fluidProperties.gravityx;o=this.ws2.fluidProperties.gravityy}else{s=e.gravityx;o=e.gravityy}var u=0;var a=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var f=this.overlap*this.ws1.fluidProperties.density;var l=this.overlap*this.ws2.fluidProperties.density;if(f>l){var c=f+l;u-=r*c;a-=i*c}else if(f<l){var h=f+l;u+=s*h;a+=o*h}else{var p=0;var d=0;p=r+s;d=i+o;var v=.5;p*=v;d*=v;if(this.ws1.worldCOMx*p+this.ws1.worldCOMy*d>this.ws2.worldCOMx*p+this.ws2.worldCOMy*d){var m=f+l;u-=p*m;a-=d*m}else{var g=f+l;u+=p*g;a+=d*g}}}else if(this.ws1.fluidEnabled){var y=this.overlap*this.ws1.fluidProperties.density;var b=y;u-=r*b;a-=i*b}else if(this.ws2.fluidEnabled){var w=this.overlap*this.ws2.fluidProperties.density;var E=w;u+=s*E;a+=o*E}var S=t;u*=S;a*=S;this.buoyx=u;this.buoyy=a;if(this.b1.type==2){var x=this.b1.imass;this.b1.velx-=u*x;this.b1.vely-=a*x;this.b1.angvel-=(a*this.r1x-u*this.r1y)*this.b1.iinertia}if(this.b2.type==2){var T=this.b2.imass;this.b2.velx+=u*T;this.b2.vely+=a*T;this.b2.angvel+=(a*this.r2x-u*this.r2y)*this.b2.iinertia}if((!this.ws1.fluidEnabled||this.ws1.fluidProperties.viscosity==0)&&(!this.ws2.fluidEnabled||this.ws2.fluidProperties.viscosity==0)){this.nodrag=true;this.dampx=0;this.dampy=0;this.adamp=0}else{this.nodrag=false;var C=0;if(this.ws1.fluidEnabled){this.ws2.validate_angDrag();C+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area}if(this.ws2.fluidEnabled){this.ws1.validate_angDrag();C+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area}if(C!=0){var k=this.b1.sinertia+this.b2.sinertia;if(k!=0)this.wMass=1/k;else this.wMass=0;var L;C*=4e-4;var A=2*Math.PI*C;this.agamma=1/(t*A*(2+A*t));var O=1/(1+this.agamma);L=t*A*A*this.agamma;this.agamma*=O;this.wMass*=O}else{this.wMass=0;this.agamma=0}var M=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel));var _=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));if(M*M+_*_<N.epsilon*N.epsilon){}else{var D=M*M+_*_;var P=1/Math.sqrt(D);var H=P;M*=H;_*=H;this.nx=M;this.ny=_}var B=0;if(this.ws1.fluidEnabled){var j=-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area;if(this.ws2.type==0)B-=j*this.ws2.circle.radius*N.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{var F=this.ws2.polygon;var I=0;var q=0;var R=F.edges.head;while(R!=null){var U=R.elt;I+=U.length;var z=j*U.length*(U.gnormx*this.nx+U.gnormy*this.ny);if(z>0)z=z*=-N.fluidVacuumDrag;q-=z*.5*N.fluidLinearDrag;R=R.next}B+=q/I}}if(this.ws2.fluidEnabled){var W=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area;if(this.ws1.type==0)B-=W*this.ws1.circle.radius*N.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{var X=this.ws1.polygon;var V=0;var $=0;var J=X.edges.head;while(J!=null){var K=J.elt;V+=K.length;var Q=W*K.length*(K.gnormx*this.nx+K.gnormy*this.ny);if(Q>0)Q=Q*=-N.fluidVacuumDrag;$-=Q*.5*N.fluidLinearDrag;J=J.next}B+=$/V}}if(B!=0){var G=this.b1.smass+this.b2.smass;var Y=0;var Z=0;var et=0;Y=G;Z=0;et=G;if(this.b1.sinertia!=0){var tt=this.r1x*this.b1.sinertia;var nt=this.r1y*this.b1.sinertia;Y+=nt*this.r1y;Z+=-nt*this.r1x;et+=tt*this.r1x}if(this.b2.sinertia!=0){var rt=this.r2x*this.b2.sinertia;var it=this.r2y*this.b2.sinertia;Y+=it*this.r2y;Z+=-it*this.r2x;et+=rt*this.r2x}var st=Y*et-Z*Z;if(st!=st){Y=Z=et=0;3}else if(st==0){var ot=0;if(Y!=0)Y=1/Y;else{Y=0;ot|=1}if(et!=0)et=1/et;else{et=0;ot|=2}Z=0;ot}else{st=1/st;var ut=et*st;et=Y*st;Y=ut;Z*=-st;0}this.vMassa=Y;this.vMassb=Z;this.vMassc=et;var at;var ft;var lt=2*Math.PI*B;this.lgamma=1/(t*lt*(2+lt*t));var ct=1/(1+this.lgamma);at=t*lt*lt*this.lgamma;this.lgamma*=ct;ft=ct;this.vMassa*=ft;this.vMassb*=ft;this.vMassc*=ft}else{this.vMassa=0;this.vMassb=0;this.vMassc=0;this.lgamma=0}}var ht=n;this.dampx*=ht;this.dampy*=ht;this.adamp*=n},warmStart:function(){var e=this.b1.imass;this.b1.velx-=this.dampx*e;this.b1.vely-=this.dampy*e;var t=this.b2.imass;this.b2.velx+=this.dampx*t;this.b2.vely+=this.dampy*t;this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y);this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y);this.b1.angvel-=this.adamp*this.b1.iinertia;this.b2.angvel+=this.adamp*this.b2.iinertia},applyImpulseVel:function(){if(!this.nodrag){var e=this.b1.angvel+this.b1.kinangvel;var t=this.b2.angvel+this.b2.kinangvel;var n=this.b1.velx+this.b1.kinvelx-this.r1y*e-(this.b2.velx+this.b2.kinvelx-this.r2y*t);var r=this.b1.vely+this.b1.kinvely+this.r1x*e-(this.b2.vely+this.b2.kinvely+this.r2x*t);var i=this.vMassa*n+this.vMassb*r;r=this.vMassb*n+this.vMassc*r;n=i;var s=this.lgamma;n-=this.dampx*s;r-=this.dampy*s;var o=1;this.dampx+=n*o;this.dampy+=r*o;var u=this.b1.imass;this.b1.velx-=n*u;this.b1.vely-=r*u;var a=this.b2.imass;this.b2.velx+=n*a;this.b2.vely+=r*a;this.b1.angvel-=this.b1.iinertia*(r*this.r1x-n*this.r1y);this.b2.angvel+=this.b2.iinertia*(r*this.r2x-n*this.r2y);var f=(e-t)*this.wMass-this.adamp*this.agamma;this.adamp+=f;this.b1.angvel-=f*this.b1.iinertia;this.b2.angvel+=f*this.b2.iinertia}},__class__:Wn});var Xn=function(){this.pre_dt=0;this.mutable=false;this.stat=false;this.next=null;this.hpc2=false;this.hc2=false;this.oc2=null;this.c2=null;this.oc1=null;this.c1=null;this.__ref_vertex=0;this.__ref_edge2=null;this.__ref_edge1=null;this.biasCoef=0;this.rev=false;this.radius=0;this.lproj=0;this.lnormy=0;this.lnormx=0;this.surfacey=0;this.surfacex=0;this.k2y=0;this.k2x=0;this.k1y=0;this.k1x=0;this.rt2b=0;this.rn2b=0;this.rt2a=0;this.rn2a=0;this.rt1b=0;this.rn1b=0;this.rt1a=0;this.rn1a=0;this.jrAcc=0;this.rMass=0;this.Kc=0;this.Kb=0;this.Ka=0;this.kMassc=0;this.kMassb=0;this.kMassa=0;this.wrap_normal=null;this.ny=0;this.nx=0;this.innards=null;this.wrap_contacts=null;this.contacts=null;this.s2=null;this.s1=null;this.userdef_rfric=false;this.userdef_restitution=false;this.userdef_stat_fric=false;this.userdef_dyn_fric=false;this.rfric=0;this.restitution=0;this.stat_fric=0;this.dyn_fric=0;this.outer_zn=null;Un.call(this);this.pre_dt=-1;this.contacts=new Vn;this.innards=new $n;this.type=Un.COL;this.colarb=this};Xn.__name__=true;Xn.__super__=Un;Xn.prototype=n(Un.prototype,{normal_validate:function(){if(this.cleared)throw new g("Error: Arbiter not currently in use");this.wrap_normal.zpp_inner.x=this.nx;this.wrap_normal.zpp_inner.y=this.ny;if(this.ws1.id>this.ws2.id){this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x;this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y}},getnormal:function(){this.wrap_normal=_t.get(0,0,null);this.wrap_normal.zpp_inner._immutable=true;this.wrap_normal.zpp_inner._inuse=true;this.wrap_normal.zpp_inner._validate=Rs(this,this.normal_validate)},alloc:function(){},free:function(){this.userdef_dyn_fric=false;this.userdef_stat_fric=false;this.userdef_restitution=false;this.userdef_rfric=false;this.__ref_edge1=this.__ref_edge2=null},injectContact:function(e,t,n,r,i,s,o){if(o==null)o=false;var u=null;var a=this.contacts.next;while(a!=null){var f=a;if(s==f.hash){u=f;break}a=a.next}if(u==null){if(Vn.zpp_pool==null)u=new Vn;else{u=Vn.zpp_pool;Vn.zpp_pool=u.next;u.next=null}null;var l=u.inner;l.jnAcc=l.jtAcc=0;u.hash=s;u.fresh=true;u.arbiter=this;this.jrAcc=0;this.contacts.inlined_add(u);this.innards.add(l)}else u.fresh=false;u.px=e;u.py=t;this.nx=n;this.ny=r;u.dist=i;u.stamp=this.stamp;u.posOnly=o;return u},assign:function(e,t,n,r){this.b1=e.body;this.ws1=e;this.b2=t.body;this.ws2=t;this.id=n;this.di=r;this.b1.arbiters.inlined_add(this);this.b2.arbiters.inlined_add(this);this.active=true;this.present=0;this.cleared=false;this.sleeping=false;this.fresh=false;this.presentable=false;this.s1=e;this.s2=t;if(!this.userdef_restitution){if(this.s1.material.elasticity<=-Infinity||this.s2.material.elasticity<=-Infinity)this.restitution=0;else if(this.s1.material.elasticity>=Infinity||this.s2.material.elasticity>=Infinity)this.restitution=1;else this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2;if(this.restitution<0)this.restitution=0;if(this.restitution>1)this.restitution=1}if(!this.userdef_dyn_fric)this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction);if(!this.userdef_stat_fric)this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction);if(!this.userdef_rfric)this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)},calcProperties:function(){if(!this.userdef_restitution){if(this.s1.material.elasticity<=-Infinity||this.s2.material.elasticity<=-Infinity)this.restitution=0;else if(this.s1.material.elasticity>=Infinity||this.s2.material.elasticity>=Infinity)this.restitution=1;else this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2;if(this.restitution<0)this.restitution=0;if(this.restitution>1)this.restitution=1}if(!this.userdef_dyn_fric)this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction);if(!this.userdef_stat_fric)this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction);if(!this.userdef_rfric)this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)},validate_props:function(){if(this.invalidated){this.invalidated=false;if(!this.userdef_restitution){if(this.s1.material.elasticity<=-Infinity||this.s2.material.elasticity<=-Infinity)this.restitution=0;else if(this.s1.material.elasticity>=Infinity||this.s2.material.elasticity>=Infinity)this.restitution=1;else this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2;if(this.restitution<0)this.restitution=0;if(this.restitution>1)this.restitution=1}if(!this.userdef_dyn_fric)this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction);if(!this.userdef_stat_fric)this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction);if(!this.userdef_rfric)this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)}},retire:function(){if(!this.cleared){this.b1.arbiters.inlined_try_remove(this);this.b2.arbiters.inlined_try_remove(this);if(this.pair!=null){this.pair.arb=null;this.pair=null}}this.b1=this.b2=null;this.active=false;this.intchange=false;while(!(this.contacts.next==null)){var e=this.contacts.inlined_pop_unsafe();e.arbiter=null;e.next=Vn.zpp_pool;Vn.zpp_pool=e;this.innards.inlined_pop()}var t=this;t.userdef_dyn_fric=false;t.userdef_stat_fric=false;t.userdef_restitution=false;t.userdef_rfric=false;t.__ref_edge1=t.__ref_edge2=null;t.next=Xn.zpp_pool;Xn.zpp_pool=t;this.pre_dt=-1},makemutable:function(){this.mutable=true;if(this.wrap_normal!=null)this.wrap_normal.zpp_inner._immutable=false;if(this.wrap_contacts!=null)this.wrap_contacts.zpp_inner.immutable=false},makeimmutable:function(){this.mutable=false;if(this.wrap_normal!=null)this.wrap_normal.zpp_inner._immutable=true;if(this.wrap_contacts!=null)this.wrap_contacts.zpp_inner.immutable=true},contacts_adder:function(e){throw new g("Error: Cannot add new contacts, information required is far too specific and detailed :)");return false},contacts_subber:function(e){var t=null;var n=null;var r=this.innards.next;var i=this.contacts.next;while(i!=null){var s=i;if(s==e.zpp_inner){this.contacts.erase(t);this.innards.erase(n);var o=s;o.arbiter=null;o.next=Vn.zpp_pool;Vn.zpp_pool=o;break}t=i;n=r;r=r.next;i=i.next}},setupcontacts:function(){this.wrap_contacts=Ls.get(this.contacts,true);this.wrap_contacts.zpp_inner.immutable=!this.mutable;this.wrap_contacts.zpp_inner.adder=Rs(this,this.contacts_adder);this.wrap_contacts.zpp_inner.dontremove=true;this.wrap_contacts.zpp_inner.subber=Rs(this,this.contacts_subber)},cleanupContacts:function(){var e=true;var t=null;var n=null;var r=this.innards.next;this.hc2=false;var i=this.contacts.next;while(i!=null){var s=i;if(s.stamp+N.arbiterExpirationDelay<this.stamp){i=this.contacts.inlined_erase(t);r=this.innards.inlined_erase(n);var o=s;o.arbiter=null;o.next=Vn.zpp_pool;Vn.zpp_pool=o;continue}var u=s.inner;var a=s.active;s.active=s.stamp==this.stamp;if(s.active){if(e){e=false;this.c1=u;this.oc1=s}else{this.hc2=true;this.c2=u;this.oc2=s}}if(a!=s.active)this.contacts.modified=true;t=i;n=r;r=r.next;i=i.next}if(this.hc2){this.hpc2=true;if(this.oc1.posOnly){var f=this.c1;this.c1=this.c2;this.c2=f;var l=this.oc1;this.oc1=this.oc2;this.oc2=l;this.hc2=false}else if(this.oc2.posOnly)this.hc2=false;if(this.oc1.posOnly)e=true}else this.hpc2=false;return e},preStep:function(e){if(this.invalidated){this.invalidated=false;if(!this.userdef_restitution){if(this.s1.material.elasticity<=-Infinity||this.s2.material.elasticity<=-Infinity)this.restitution=0;else if(this.s1.material.elasticity>=Infinity||this.s2.material.elasticity>=Infinity)this.restitution=1;else this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2;if(this.restitution<0)this.restitution=0;if(this.restitution>1)this.restitution=1}if(!this.userdef_dyn_fric)this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction);if(!this.userdef_stat_fric)this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction);if(!this.userdef_rfric)this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)}if(this.pre_dt==-1)this.pre_dt=e;var t=e/this.pre_dt;this.pre_dt=e;var n=this.b1.smass+this.b2.smass;this.hc2=false;var r=true;var i=!(this.b1.type==2)||!(this.b2.type==2);var s;if(i){if(this.continuous)s=N.contactContinuousStaticBiasCoef;else s=N.contactStaticBiasCoef}else if(this.continuous)s=N.contactContinuousBiasCoef;else s=N.contactBiasCoef;this.biasCoef=s;this.continuous=false;var o=null;var u=null;var a=this.innards.next;var f=this.contacts.next;while(f!=null){var l=f;if(l.stamp+N.arbiterExpirationDelay<this.stamp){f=this.contacts.inlined_erase(o);a=this.innards.inlined_erase(u);var c=l;c.arbiter=null;c.next=Vn.zpp_pool;Vn.zpp_pool=c;continue}var h=l.inner;var p=l.active;l.active=l.stamp==this.stamp;if(l.active){if(r){r=false;this.c1=h;this.oc1=l}else{this.hc2=true;this.c2=h;this.oc2=l}h.r2x=l.px-this.b2.posx;h.r2y=l.py-this.b2.posy;h.r1x=l.px-this.b1.posx;h.r1y=l.py-this.b1.posy;var d=n+this.b2.sinertia*As.sqr(h.r2x*this.nx+h.r2y*this.ny);d+=this.b1.sinertia*As.sqr(h.r1x*this.nx+h.r1y*this.ny);if(d<N.epsilon*N.epsilon)h.tMass=0;else h.tMass=1/d;var v=n+this.b2.sinertia*As.sqr(this.ny*h.r2x-this.nx*h.r2y);v+=this.b1.sinertia*As.sqr(this.ny*h.r1x-this.nx*h.r1y);if(v<N.epsilon*N.epsilon)h.nMass=0;else h.nMass=1/v;var m=0;var g=0;var y=this.b2.angvel+this.b2.kinangvel;m=this.b2.velx+this.b2.kinvelx-h.r2y*y;g=this.b2.vely+this.b2.kinvely+h.r2x*y;y=this.b1.angvel+this.b1.kinangvel;m-=this.b1.velx+this.b1.kinvelx-h.r1y*y;g-=this.b1.vely+this.b1.kinvely+h.r1x*y;var b=this.nx*m+this.ny*g;l.elasticity=this.restitution;h.bounce=b*l.elasticity;if(h.bounce>-N.elasticThreshold)h.bounce=0;b=g*this.nx-m*this.ny;var w=N.staticFrictionThreshold;if(b*b>w*w)h.friction=this.dyn_fric;else h.friction=this.stat_fric;h.jnAcc*=t;h.jtAcc*=t}if(p!=l.active)this.contacts.modified=true;o=f;u=a;a=a.next;f=f.next}if(this.hc2){this.hpc2=true;if(this.oc1.posOnly){var E=this.c1;this.c1=this.c2;this.c2=E;var S=this.oc1;this.oc1=this.oc2;this.oc2=S;this.hc2=false}else if(this.oc2.posOnly)this.hc2=false;if(this.oc1.posOnly)r=true}else this.hpc2=false;this.jrAcc*=t;if(!r){this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y;this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*this.ny;this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y;this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny;this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel);this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel)}if(this.hc2){this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y;this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny;this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y;this.rt2b=this.c2.r2x*this.nx+this.c2.r2y*this.ny;this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel);this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel);this.kMassa=n+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b;this.kMassb=n+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b;this.kMassc=n+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b;var x=this.kMassa*this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc;if(x<N.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)){this.Ka=this.kMassa;this.Kb=this.kMassb;this.Kc=this.kMassc;var T=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(T!=T){this.kMassa=this.kMassb=this.kMassc=0;3}else if(T==0){var C=0;if(this.kMassa!=0)this.kMassa=1/this.kMassa;else{this.kMassa=0;C|=1}if(this.kMassc!=0)this.kMassc=1/this.kMassc;else{this.kMassc=0;C|=2}this.kMassb=0;C}else{T=1/T;var k=this.kMassc*T;this.kMassc=this.kMassa*T;this.kMassa=k;this.kMassb*=-T;0}}else{this.hc2=false;if(this.oc2.dist<this.oc1.dist){var L=this.c1;this.c1=this.c2;this.c2=L}this.oc2.active=false;this.contacts.modified=true}}this.surfacex=this.b2.svelx;this.surfacey=this.b2.svely;var A=1;this.surfacex+=this.b1.svelx*A;this.surfacey+=this.b1.svely*A;this.surfacex=-this.surfacex;this.surfacey=-this.surfacey;this.rMass=this.b1.sinertia+this.b2.sinertia;if(this.rMass!=0)this.rMass=1/this.rMass;return r},warmStart:function(){var e=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc;var t=this.ny*this.c1.jnAcc+this.nx*this.c1.jtAcc;var n=this.b1.imass;this.b1.velx-=e*n;this.b1.vely-=t*n;this.b1.angvel-=this.b1.iinertia*(t*this.c1.r1x-e*this.c1.r1y);var r=this.b2.imass;this.b2.velx+=e*r;this.b2.vely+=t*r;this.b2.angvel+=this.b2.iinertia*(t*this.c1.r2x-e*this.c1.r2y);if(this.hc2){var i=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc;var s=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc;var o=this.b1.imass;this.b1.velx-=i*o;this.b1.vely-=s*o;this.b1.angvel-=this.b1.iinertia*(s*this.c2.r1x-i*this.c2.r1y);var u=this.b2.imass;this.b2.velx+=i*u;this.b2.vely+=s*u;this.b2.angvel+=this.b2.iinertia*(s*this.c2.r2x-i*this.c2.r2y)}this.b2.angvel+=this.jrAcc*this.b2.iinertia;this.b1.angvel-=this.jrAcc*this.b1.iinertia},applyImpulseVel:function(){var e;var t;var n;var r;var i;var s;var o=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel);var u=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);n=(u*this.nx-o*this.ny+this.surfacex)*this.c1.tMass;r=this.c1.friction*this.c1.jnAcc;i=this.c1.jtAcc;s=i-n;if(s>r)s=r;else if(s<-r)s=-r;n=s-i;this.c1.jtAcc=s;e=-this.ny*n;t=this.nx*n;this.b2.velx+=e*this.b2.imass;this.b2.vely+=t*this.b2.imass;this.b1.velx-=e*this.b1.imass;this.b1.vely-=t*this.b1.imass;this.b2.angvel+=this.rt1b*n*this.b2.iinertia;this.b1.angvel-=this.rt1a*n*this.b1.iinertia;if(this.hc2){var a=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel);var f=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);n=(f*this.nx-a*this.ny+this.surfacex)*this.c2.tMass;r=this.c2.friction*this.c2.jnAcc;i=this.c2.jtAcc;s=i-n;if(s>r)s=r;else if(s<-r)s=-r;n=s-i;this.c2.jtAcc=s;e=-this.ny*n;t=this.nx*n;this.b2.velx+=e*this.b2.imass;this.b2.vely+=t*this.b2.imass;this.b1.velx-=e*this.b1.imass;this.b1.vely-=t*this.b1.imass;this.b2.angvel+=this.rt2b*n*this.b2.iinertia;this.b1.angvel-=this.rt2a*n*this.b1.iinertia;o=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel);u=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);a=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel);f=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);var l=this.c1.jnAcc;var c=this.c2.jnAcc;var h=o*this.nx+u*this.ny+this.surfacey+this.c1.bounce-(this.Ka*l+this.Kb*c);var p=a*this.nx+f*this.ny+this.surfacey+this.c2.bounce-(this.Kb*l+this.Kc*c);var d=-(this.kMassa*h+this.kMassb*p);var v=-(this.kMassb*h+this.kMassc*p);if(d>=0&&v>=0){h=d-l;p=v-c;this.c1.jnAcc=d;this.c2.jnAcc=v}else{d=-this.c1.nMass*h;if(d>=0&&this.Kb*d+p>=0){h=d-l;p=-c;this.c1.jnAcc=d;this.c2.jnAcc=0}else{v=-this.c2.nMass*p;if(v>=0&&this.Kb*v+h>=0){h=-l;p=v-c;this.c1.jnAcc=0;this.c2.jnAcc=v}else if(h>=0&&p>=0){h=-l;p=-c;this.c1.jnAcc=this.c2.jnAcc=0}else{h=0;p=0}}}n=h+p;e=this.nx*n;t=this.ny*n;this.b2.velx+=e*this.b2.imass;this.b2.vely+=t*this.b2.imass;this.b1.velx-=e*this.b1.imass;this.b1.vely-=t*this.b1.imass;this.b2.angvel+=(this.rn1b*h+this.rn2b*p)*this.b2.iinertia;this.b1.angvel-=(this.rn1a*h+this.rn2a*p)*this.b1.iinertia}else{if(this.radius!=0){var m=this.b2.angvel-this.b1.angvel;n=m*this.rMass;r=this.rfric*this.c1.jnAcc;i=this.jrAcc;this.jrAcc-=n;if(this.jrAcc>r)this.jrAcc=r;else if(this.jrAcc<-r)this.jrAcc=-r;n=this.jrAcc-i;this.b2.angvel+=n*this.b2.iinertia;this.b1.angvel-=n*this.b1.iinertia}o=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel);u=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);n=(this.c1.bounce+(this.nx*o+this.ny*u)+this.surfacey)*this.c1.nMass;i=this.c1.jnAcc;s=i-n;if(s<0)s=0;n=s-i;this.c1.jnAcc=s;e=this.nx*n;t=this.ny*n;this.b2.velx+=e*this.b2.imass;this.b2.vely+=t*this.b2.imass;this.b1.velx-=e*this.b1.imass;this.b1.vely-=t*this.b1.imass;this.b2.angvel+=this.rn1b*n*this.b2.iinertia;this.b1.angvel-=this.rn1a*n*this.b1.iinertia}},applyImpulsePos:function(){if(this.ptype==2){var e=this.c1;var t=0;var n=0;var r=0;var i=0;r=this.b2.axisy*e.lr2x-this.b2.axisx*e.lr2y;i=e.lr2x*this.b2.axisx+e.lr2y*this.b2.axisy;var s=1;r+=this.b2.posx*s;i+=this.b2.posy*s;var o=0;var u=0;o=this.b1.axisy*e.lr1x-this.b1.axisx*e.lr1y;u=e.lr1x*this.b1.axisx+e.lr1y*this.b1.axisy;var a=1;o+=this.b1.posx*a;u+=this.b1.posy*a;var f=0;var l=0;f=r-o;l=i-u;var c=Math.sqrt(f*f+l*l);var h=this.radius-N.collisionSlop;var p=c-h;if(f*this.nx+l*this.ny<0){f=-f;l=-l;p-=this.radius}if(p<0){if(c<N.epsilon){if(this.b1.smass!=0)this.b1.posx+=N.epsilon*10;else this.b2.posx+=N.epsilon*10}else{var d=1/c;f*=d;l*=d;var v=.5*(o+r);var m=.5*(u+i);var g=c-h;o=v-this.b1.posx;u=m-this.b1.posy;r=v-this.b2.posx;i=m-this.b2.posy;var y=l*o-f*u;var b=l*r-f*i;var w=this.b2.smass+b*b*this.b2.sinertia+this.b1.smass+y*y*this.b1.sinertia;if(w!=0){var E=-this.biasCoef*g/w;var S=0;var x=0;var T=E;S=f*T;x=l*T;var C=this.b1.imass;this.b1.posx-=S*C;this.b1.posy-=x*C;this.b1.delta_rot(-y*this.b1.iinertia*E);var k=this.b2.imass;this.b2.posx+=S*k;this.b2.posy+=x*k;this.b2.delta_rot(b*this.b2.iinertia*E)}}}}else{var L=0;var A=0;var O;var M=0;var _=0;var D=0;var P=0;if(this.ptype==0){L=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy;A=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy;O=this.lproj+(L*this.b1.posx+A*this.b1.posy);M=this.b2.axisy*this.c1.lr1x-this.b2.axisx*this.c1.lr1y;_=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy;var H=1;M+=this.b2.posx*H;_+=this.b2.posy*H;if(this.hpc2){D=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y;P=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy;var B=1;D+=this.b2.posx*B;P+=this.b2.posy*B}}else{L=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy;A=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy;O=this.lproj+(L*this.b2.posx+A*this.b2.posy);M=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y;_=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy;var j=1;M+=this.b1.posx*j;_+=this.b1.posy*j;if(this.hpc2){D=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y;P=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy;var F=1;D+=this.b1.posx*F;P+=this.b1.posy*F}}var I=M*L+_*A-O-this.radius;I+=N.collisionSlop;var q=0;if(this.hpc2){q=D*L+P*A-O-this.radius;q+=N.collisionSlop}if(I<0||q<0){if(this.rev){L=-L;A=-A}var R=0;var U=0;R=M-this.b1.posx;U=_-this.b1.posy;var z=0;var W=0;z=M-this.b2.posx;W=_-this.b2.posy;var X=0;var V=0;var $=0;var J=0;if(this.hpc2){X=D-this.b1.posx;V=P-this.b1.posy;$=D-this.b2.posx;J=P-this.b2.posy;var K=A*R-L*U;var Q=A*z-L*W;var G=A*X-L*V;var Y=A*$-L*J;var Z=this.b1.smass+this.b2.smass;this.kMassa=Z+this.b1.sinertia*K*K+this.b2.sinertia*Q*Q;this.kMassb=Z+this.b1.sinertia*K*G+this.b2.sinertia*Q*Y;this.kMassc=Z+this.b1.sinertia*G*G+this.b2.sinertia*Y*Y;var et=0;var tt=0;var nt=0;et=this.kMassa;tt=this.kMassb;nt=this.kMassc;var rt=I*this.biasCoef;var it=q*this.biasCoef;do{var st=0;var ot=0;st=rt;ot=it;st=-st;ot=-ot;var ut=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(ut!=ut)st=ot=0;else if(ut==0){if(this.kMassa!=0)st/=this.kMassa;else st=0;if(this.kMassc!=0)ot/=this.kMassc;else ot=0}else{ut=1/ut;var at=ut*(this.kMassc*st-this.kMassb*ot);ot=ut*(this.kMassa*ot-this.kMassb*st);st=at}if(st>=0&&ot>=0){var ft=(st+ot)*this.b1.imass;this.b1.posx-=L*ft;this.b1.posy-=A*ft;this.b1.delta_rot(-this.b1.iinertia*(K*st+G*ot));var lt=(st+ot)*this.b2.imass;this.b2.posx+=L*lt;this.b2.posy+=A*lt;this.b2.delta_rot(this.b2.iinertia*(Q*st+Y*ot));break}st=-rt/et;ot=0;var ct=tt*st+it;if(st>=0&&ct>=0){var ht=(st+ot)*this.b1.imass;this.b1.posx-=L*ht;this.b1.posy-=A*ht;this.b1.delta_rot(-this.b1.iinertia*(K*st+G*ot));var pt=(st+ot)*this.b2.imass;this.b2.posx+=L*pt;this.b2.posy+=A*pt;this.b2.delta_rot(this.b2.iinertia*(Q*st+Y*ot));break}st=0;ot=-it/nt;var dt=tt*ot+rt;if(ot>=0&&dt>=0){var vt=(st+ot)*this.b1.imass;this.b1.posx-=L*vt;this.b1.posy-=A*vt;this.b1.delta_rot(-this.b1.iinertia*(K*st+G*ot));var mt=(st+ot)*this.b2.imass;this.b2.posx+=L*mt;this.b2.posy+=A*mt;this.b2.delta_rot(this.b2.iinertia*(Q*st+Y*ot));break}}while(false)}else{var gt=A*R-L*U;var yt=A*z-L*W;var bt=this.b2.smass+yt*yt*this.b2.sinertia+this.b1.smass+gt*gt*this.b1.sinertia;if(bt!=0){var wt=-this.biasCoef*I/bt;var Et=0;var St=0;var xt=wt;Et=L*xt;St=A*xt;var Tt=this.b1.imass;this.b1.posx-=Et*Tt;this.b1.posy-=St*Tt;this.b1.delta_rot(-gt*this.b1.iinertia*wt);var Nt=this.b2.imass;this.b2.posx+=Et*Nt;this.b2.posy+=St*Nt;this.b2.delta_rot(yt*this.b2.iinertia*wt)}}}}},__class__:Xn});var Vn=function(){this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null;this.elasticity=0;this.dist=0;this.fresh=false;this.hash=0;this.stamp=0;this.posOnly=false;this.active=false;this.inner=null;this.arbiter=null;this.wrap_position=null;this.py=0;this.px=0;this.outer=null;this.inner=new $n};Vn.__name__=true;Vn.prototype={wrapper:function(){if(this.outer==null){Vn.internal=true;this.outer=new at;Vn.internal=false;this.outer.zpp_inner=this}return this.outer},position_validate:function(){if(this.inactiveme())throw new g("Error: Contact not currently in use");this.wrap_position.zpp_inner.x=this.px;this.wrap_position.zpp_inner.y=this.py},getposition:function(){var e=this;this.wrap_position=_t.get(null,null,null);this.wrap_position.zpp_inner._inuse=true;this.wrap_position.zpp_inner._immutable=true;this.wrap_position.zpp_inner._validate=Rs(this,this.position_validate)},inactiveme:function(){return!(this.active&&this.arbiter!=null&&!!this.arbiter.active)},free:function(){this.arbiter=null},alloc:function(){},elem:function(){return this},begin:function(){return this.next},setbegin:function(e){this.next=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;e._inuse=true;t=e;t.next=this.next;this.next=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.next;while(t!=null){var n=t;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;t._inuse=true;n=t;if(e==null){n.next=this.next;this.next=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.next;this.next=e.next;e._inuse=false;if(this.next==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.next;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.next;n=t.next;this.next=n;if(this.next==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}t._inuse=false;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){},inlined_clear:function(){},reverse:function(){var e=this.next;var t=null;while(e!=null){var n=e.next;e.next=t;this.next=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.next==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.next;while(n!=null){var r=n;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.next},back:function(){var e=this.next;var t=e;while(t!=null){e=t;t=t.next}return e},iterator_at:function(e){var t=this.next;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t;else return null},__class__:Vn};var $n=function(){this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null;this.lr2y=0;this.lr2x=0;this.lr1y=0;this.lr1x=0;this.jtAcc=0;this.jnAcc=0;this.friction=0;this.bounce=0;this.tMass=0;this.nMass=0;this.r2y=0;this.r2x=0;this.r1y=0;this.r1x=0};$n.__name__=true;$n.prototype={elem:function(){return this},begin:function(){return this.next},setbegin:function(e){this.next=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;e._inuse=true;t=e;t.next=this.next;this.next=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.next;while(t!=null){var n=t;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;t._inuse=true;n=t;if(e==null){n.next=this.next;this.next=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.next;this.next=e.next;e._inuse=false;if(this.next==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.next;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.next;n=t.next;this.next=n;if(this.next==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}t._inuse=false;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){},inlined_clear:function(){},reverse:function(){var e=this.next;var t=null;while(e!=null){var n=e.next;e.next=t;this.next=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.next==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.next;while(n!=null){var r=n;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.next},back:function(){var e=this.next;var t=e;while(t!=null){e=t;t=t.next}return e},iterator_at:function(e){var t=this.next;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t;else return null},__class__:$n};var Jn=function(){this.fluidMask=0;this.fluidGroup=0;this.sensorMask=0;this.sensorGroup=0;this.collisionMask=0;this.collisionGroup=0;this.wrap_shapes=null;this.shapes=null;this.outer=null;this.userData=null;this.next=null;this.shapes=new oi;this.collisionGroup=this.sensorGroup=this.fluidGroup=1;this.collisionMask=this.sensorMask=this.fluidMask=-1};Jn.__name__=true;Jn.prototype={wrapper:function(){if(this.outer==null){this.outer=new ht;var e=this.outer.zpp_inner;e.outer=null;e.next=Jn.zpp_pool;Jn.zpp_pool=e;this.outer.zpp_inner=this}return this.outer},free:function(){this.outer=null},alloc:function(){},feature_cons:function(){this.shapes=new oi},addShape:function(e){this.shapes.add(e)},remShape:function(e){this.shapes.remove(e)},copy:function(){var e;if(Jn.zpp_pool==null)e=new Jn;else{e=Jn.zpp_pool;Jn.zpp_pool=e.next;e.next=null}null;e.collisionGroup=this.collisionGroup;e.collisionMask=this.collisionMask;e.sensorGroup=this.sensorGroup;e.sensorMask=this.sensorMask;e.fluidGroup=this.fluidGroup;e.fluidMask=this.fluidMask;return e},shouldCollide:function(e){return(this.collisionMask&e.collisionGroup)!=0&&(e.collisionMask&this.collisionGroup)!=0},shouldSense:function(e){return(this.sensorMask&e.sensorGroup)!=0&&(e.sensorMask&this.sensorGroup)!=0},shouldFlow:function(e){return(this.fluidMask&e.fluidGroup)!=0&&(e.fluidMask&this.fluidGroup)!=0},invalidate:function(){var e=this.shapes.head;while(e!=null){var t=e.elt;t.invalidate_filter();e=e.next}},__class__:Jn};var Kn=function(){this.depth=0;this.wrap_interactors=null;this.interactors=null;this.wrap_groups=null;this.groups=null;this.group=null;this.ignore=false;this.outer=null;this.depth=0;this.groups=new ki;this.interactors=new En};Kn.__name__=true;Kn.prototype={setGroup:function(e){if(this.group!=e){if(this.group!=null){this.group.groups.remove(this);this.depth=0;this.group.invalidate(true)}this.group=e;if(e!=null){e.groups.add(this);this.depth=e.depth+1;e.invalidate(true)}else this.invalidate(true)}},invalidate:function(e){if(e==null)e=false;if(!(e||this.ignore))return;var t=this.interactors.head;while(t!=null){var n=t.elt;if(n.ibody!=null)n.ibody.wake();else if(n.ishape!=null)n.ishape.body.wake();else n.icompound.wake();t=t.next}var r=this.groups.head;while(r!=null){var i=r.elt;i.invalidate(e);r=r.next}},addGroup:function(e){this.groups.add(e);e.depth=this.depth+1},remGroup:function(e){this.groups.remove(e);e.depth=0},addInteractor:function(e){this.interactors.add(e)},remInteractor:function(e,t){if(t==null)t=-1;this.interactors.remove(e)},__class__:Kn};var Qn=function(){this.at_index_3=0;this.at_index_2=0;this.at_index_1=0;this.at_index_0=0;this.ite_3=null;this.ite_2=null;this.ite_1=null;this.ite_0=null;this.lengths=null;this.zip_length=false;this._length=0;this.space=null;st.call(this);this.at_index_0=0;this.at_index_1=0;this.at_index_2=0;this.at_index_3=0;this.zip_length=true;this._length=0;this.lengths=[];var e=0;while(e<4){var t=e++;this.lengths.push(0)}};Qn.__name__=true;Qn.__super__=st;Qn.prototype=n(st.prototype,{zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;var e=0;var t=0;var n=this.space.c_arbiters_true.head;while(n!=null){var r=n.elt;if(r.active)t++;n=n.next}this.lengths[e++]=t;this._length+=t;var i=0;var s=this.space.c_arbiters_false.head;while(s!=null){var o=s.elt;if(o.active)i++;s=s.next}this.lengths[e++]=i;this._length+=i;var u=0;var a=this.space.f_arbiters.head;while(a!=null){var f=a.elt;if(f.active)u++;a=a.next}this.lengths[e++]=u;this._length+=u;var l=0;var c=this.space.s_arbiters.head;while(c!=null){var h=c.elt;if(h.active)l++;c=c.next}this.lengths[e++]=l;this._length+=l;this.zip_length=false}return this._length},zpp_vm:function(){var e=false;if(this.space.c_arbiters_true.modified){e=true;this.space.c_arbiters_true.modified=false}if(this.space.c_arbiters_false.modified){e=true;this.space.c_arbiters_false.modified=false}if(this.space.f_arbiters.modified){e=true;this.space.f_arbiters.modified=false}if(this.space.s_arbiters.modified){e=true;this.space.s_arbiters.modified=false}if(e){this.zip_length=true;this._length=0;this.ite_0=null;this.ite_1=null;this.ite_2=null;this.ite_3=null}},push:function(e){throw new g("Error: ArbiterList is immutable");return false},pop:function(){throw new g("Error: ArbiterList is immutable");return null},unshift:function(e){throw new g("Error: ArbiterList is immutable");return false},shift:function(){throw new g("Error: ArbiterList is immutable");return null},remove:function(e){throw new g("Error: ArbiterList is immutable");return false},clear:function(){throw new g("Error: ArbiterList is immutable")},at:function(e){this.zpp_vm();if(e<0||e>=this.zpp_gl())throw new g("Error: Index out of bounds");var t=null;var n=0;if(t==null){if(e<n+this.lengths[0]){var r=e-n;if(r<this.at_index_0||this.ite_0==null){this.at_index_0=0;this.ite_0=this.space.c_arbiters_true.head;while(true){var i=this.ite_0.elt;if(i.active)break;this.ite_0=this.ite_0.next}}while(this.at_index_0!=r){this.at_index_0++;this.ite_0=this.ite_0.next;while(true){var s=this.ite_0.elt;if(s.active)break;this.ite_0=this.ite_0.next}}t=this.ite_0.elt.wrapper()}else n+=this.lengths[0]}if(t==null){if(e<n+this.lengths[1]){var o=e-n;if(o<this.at_index_1||this.ite_1==null){this.at_index_1=0;this.ite_1=this.space.c_arbiters_false.head;while(true){var u=this.ite_1.elt;if(u.active)break;this.ite_1=this.ite_1.next}}while(this.at_index_1!=o){this.at_index_1++;this.ite_1=this.ite_1.next;while(true){var a=this.ite_1.elt;if(a.active)break;this.ite_1=this.ite_1.next}}t=this.ite_1.elt.wrapper()}else n+=this.lengths[1]}if(t==null){if(e<n+this.lengths[2]){var f=e-n;if(f<this.at_index_2||this.ite_2==null){this.at_index_2=0;this.ite_2=this.space.f_arbiters.head;while(true){var l=this.ite_2.elt;if(l.active)break;this.ite_2=this.ite_2.next}}while(this.at_index_2!=f){this.at_index_2++;this.ite_2=this.ite_2.next;while(true){var c=this.ite_2.elt;if(c.active)break;this.ite_2=this.ite_2.next}}t=this.ite_2.elt.wrapper()}else n+=this.lengths[2]}if(t==null){if(e<n+this.lengths[3]){var h=e-n;if(h<this.at_index_3||this.ite_3==null){this.at_index_3=0;this.ite_3=this.space.s_arbiters.head;while(true){var p=this.ite_3.elt;if(p.active)break;this.ite_3=this.ite_3.next}}while(this.at_index_3!=h){this.at_index_3++;this.ite_3=this.ite_3.next;while(true){var d=this.ite_3.elt;if(d.active)break;this.ite_3=this.ite_3.next}}t=this.ite_3.elt.wrapper()}else n+=this.lengths[3]}return t},__class__:Qn});var Gn=function(){this.wrap_max=null;this.maxy=0;this.maxx=0;this.wrap_min=null;this.miny=0;this.minx=0;this.next=null;this.outer=null;this._immutable=false;this._validate=null;this._invalidate=null};Gn.__name__=true;Gn.get=function(e,t,n,r){var i;if(Gn.zpp_pool==null)i=new Gn;else{i=Gn.zpp_pool;Gn.zpp_pool=i.next;i.next=null}null;i.minx=e;i.miny=t;i.maxx=n;i.maxy=r;return i};Gn.prototype={validate:function(){if(this._validate!=null)this._validate()},invalidate:function(){if(this._invalidate!=null)this._invalidate(this)},wrapper:function(){if(this.outer==null){this.outer=new mt;var e=this.outer.zpp_inner;if(e.outer!=null){e.outer.zpp_inner=null;e.outer=null}e.wrap_min=e.wrap_max=null;e._invalidate=null;e._validate=null;e.next=Gn.zpp_pool;Gn.zpp_pool=e;this.outer.zpp_inner=this}return this.outer},alloc:function(){},free:function(){if(this.outer!=null){this.outer.zpp_inner=null;this.outer=null}this.wrap_min=this.wrap_max=null;this._invalidate=null;this._validate=null},copy:function(){return Gn.get(this.minx,this.miny,this.maxx,this.maxy)},width:function(){return this.maxx-this.minx},height:function(){return this.maxy-this.miny},perimeter:function(){return(this.maxx-this.minx+(this.maxy-this.miny))*2},getmin:function(){if(this.wrap_min==null){this.wrap_min=_t.get(this.minx,this.miny,null);this.wrap_min.zpp_inner._inuse=true;if(this._immutable)this.wrap_min.zpp_inner._immutable=true;else this.wrap_min.zpp_inner._invalidate=Rs(this,this.mod_min);this.wrap_min.zpp_inner._validate=Rs(this,this.dom_min)}return this.wrap_min},dom_min:function(){if(this._validate!=null)this._validate();this.wrap_min.zpp_inner.x=this.minx;this.wrap_min.zpp_inner.y=this.miny},mod_min:function(e){if(e.x!=this.minx||e.y!=this.miny){this.minx=e.x;this.miny=e.y;if(this._invalidate!=null)this._invalidate(this)}},getmax:function(){if(this.wrap_max==null){this.wrap_max=_t.get(this.maxx,this.maxy,null);this.wrap_max.zpp_inner._inuse=true;if(this._immutable)this.wrap_max.zpp_inner._immutable=true;else this.wrap_max.zpp_inner._invalidate=Rs(this,this.mod_max);this.wrap_max.zpp_inner._validate=Rs(this,this.dom_max)}return this.wrap_max},dom_max:function(){if(this._validate!=null)this._validate();this.wrap_max.zpp_inner.x=this.maxx;this.wrap_max.zpp_inner.y=this.maxy},mod_max:function(e){if(e.x!=this.maxx||e.y!=this.maxy){this.maxx=e.x;this.maxy=e.y;if(this._invalidate!=null)this._invalidate(this)}},intersectX:function(e){return!(e.minx>this.maxx||this.minx>e.maxx)},intersectY:function(e){return!(e.miny>this.maxy||this.miny>e.maxy)},intersect:function(e){return e.miny<=this.maxy&&this.miny<=e.maxy&&e.minx<=this.maxx&&this.minx<=e.maxx},combine:function(e){if(e.minx<this.minx)this.minx=e.minx;if(e.maxx>this.maxx)this.maxx=e.maxx;if(e.miny<this.miny)this.miny=e.miny;if(e.maxy>this.maxy)this.maxy=e.maxy},contains:function(e){return e.minx>=this.minx&&e.miny>=this.miny&&e.maxx<=this.maxx&&e.maxy<=this.maxy},containsPoint:function(e){return e.x>=this.minx&&e.x<=this.maxx&&e.y>=this.miny&&e.y<=this.maxy},setCombine:function(e,t){if(e.minx<t.minx)this.minx=e.minx;else this.minx=t.minx;if(e.miny<t.miny)this.miny=e.miny;else this.miny=t.miny;if(e.maxx>t.maxx)this.maxx=e.maxx;else this.maxx=t.maxx;if(e.maxy>t.maxy)this.maxy=e.maxy;else this.maxy=t.maxy},setExpand:function(e,t){this.minx=e.minx-t;this.miny=e.miny-t;this.maxx=e.maxx+t;this.maxy=e.maxy+t},setExpandPoint:function(e,t){if(e<this.minx)this.minx=e;if(e>this.maxx)this.maxx=e;if(t<this.miny)this.miny=t;if(t>this.maxy)this.maxy=t},toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},__class__:Gn};var Yn=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Yn.__name__=true;Yn.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Zi.zpp_pool==null)n=new Zi;else{n=Zi.zpp_pool;Zi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Zi.zpp_pool==null)r=new Zi;else{r=Zi.zpp_pool;Zi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Zi.zpp_pool;Zi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Zi.zpp_pool;Zi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Yn};var Zn=function(){};Zn.__name__=true;Zn.circleContains=function(e,t){var n=0;var r=0;n=t.x-e.worldCOMx;r=t.y-e.worldCOMy;return n*n+r*r<e.radius*e.radius};Zn.polyContains=function(e,t){var n;n=true;var r=e.edges.head;while(r!=null){var i=r.elt;if(i.gnormx*t.x+i.gnormy*t.y<=i.gprojection){r=r.next;continue}else{n=false;break}r=r.next}return n};Zn.shapeContains=function(e,t){if(e.type==0)return Zn.circleContains(e.circle,t);else return Zn.polyContains(e.polygon,t)};Zn.bodyContains=function(e,t){var n;n=false;var r=e.shapes.head;while(r!=null){var i=r.elt;if(Zn.shapeContains(i,t)){n=true;break}r=r.next}return n};Zn.containTest=function(e,t){if(e.aabb.contains(t.aabb))if(e.type==0){if(t.type==0){var n=e.circle.radius+ -t.circle.radius;var r=0;var i=0;r=t.circle.worldCOMx-e.circle.worldCOMx;i=t.circle.worldCOMy-e.circle.worldCOMy;var s=r*r+i*i;return s<=n*n}else{var o;o=true;var u=t.polygon.gverts.next;while(u!=null){var a=u;if(function(t){var n;var r=e.circle.radius;var i=0;var s=0;{i=a.x-e.circle.worldCOMx;s=a.y-e.circle.worldCOMy}var o=i*i+s*s;n=o<=r*r;return n}(this)){u=u.next;continue}else{o=false;break}u=u.next}return o}}else if(t.type==0){var f;f=true;var l=e.polygon.edges.head;while(l!=null){var c=l.elt;if(c.gnormx*t.circle.worldCOMx+c.gnormy*t.circle.worldCOMy+t.circle.radius<=c.gprojection){l=l.next;continue}else{f=false;break}l=l.next}return f}else{var h;h=true;var p=e.polygon.edges.head;while(p!=null){var d=p.elt;if(function(e){var n;var r=-1e100;{var i=t.polygon.gverts.next;while(i!=null){var s=i;var o=d.gnormx*s.x+d.gnormy*s.y;if(o>r)r=o;i=i.next}}n=r<=d.gprojection;return n}(this)){p=p.next;continue}else{h=false;break}p=p.next}return h}else return false};Zn.contactCollide=function(e,t,n,r){if(t.type==1){if(e.type==1){var i=true;var s=-1e100;var o=-1e100;var u=-1;var a=null;var f=null;var l=e.polygon.edges.head;while(l!=null){var c=l.elt;var h=1e100;var p=t.polygon.gverts.next;while(p!=null){var d=p;var v=c.gnormx*d.x+c.gnormy*d.y;if(v<h)h=v;if(h-c.gprojection<=s)break;p=p.next}h-=c.gprojection;if(h>=0){i=false;break}if(h>s){s=h;a=c;u=1}l=l.next}if(i){var m=t.polygon.edges.head;while(m!=null){var g=m.elt;var y=1e100;var b=e.polygon.gverts.next;while(b!=null){var w=b;var E=g.gnormx*w.x+g.gnormy*w.y;if(E<y)y=E;if(y-g.gprojection<=s)break;b=b.next}y-=g.gprojection;if(y>=0){i=false;break}if(y>s){s=y;f=g;u=2}m=m.next}if(!i)return false;else{var S;var x;var T;var C;if(u==1){S=e.polygon;x=t.polygon;T=a;C=1}else{S=t.polygon;x=e.polygon;T=f;C=-1}var k=null;var L=1e100;var A=x.edges.head;while(A!=null){var O=A.elt;var M=T.gnormx*O.gnormx+T.gnormy*O.gnormy;if(M<L){L=M;k=O}A=A.next}var _=0;var D=0;_=k.gp0.x;D=k.gp0.y;var P=0;var H=0;P=k.gp1.x;H=k.gp1.y;var B=0;var j=0;B=P-_;j=H-D;var F=T.gnormy*_-T.gnormx*D;var I=T.gnormy*P-T.gnormx*H;var q=1/(I-F);var R=(-T.tp1-F)*q;if(R>N.epsilon){var U=R;_+=B*U;D+=j*U}var z=(-T.tp0-I)*q;if(z<-N.epsilon){var W=z;P+=B*W;H+=j*W}var X=0;var V=0;var $=C;X=T.gnormx*$;V=T.gnormy*$;n.lnormx=T.lnormx;n.lnormy=T.lnormy;n.lproj=T.lprojection;n.radius=0;n.rev=r!=(C==-1);if(n.rev)n.ptype=1;else n.ptype=0;var J=_*T.gnormx+D*T.gnormy-T.gprojection;var K=P*T.gnormx+H*T.gnormy-T.gprojection;if(J>0&&K>0)return false;else{if(r){X=-X;V=-V}var Q=n.injectContact(_-T.gnormx*J*.5,D-T.gnormy*J*.5,X,V,J,n.rev?1:0,J>0);var G=1;_-=x.body.posx*G;D-=x.body.posy*G;Q.inner.lr1x=_*x.body.axisy+D*x.body.axisx;Q.inner.lr1y=D*x.body.axisy-_*x.body.axisx;Q=n.injectContact(P-T.gnormx*K*.5,H-T.gnormy*K*.5,X,V,K,n.rev?0:1,K>0);var Y=1;P-=x.body.posx*Y;H-=x.body.posy*Y;Q.inner.lr1x=P*x.body.axisy+H*x.body.axisx;Q.inner.lr1y=H*x.body.axisy-P*x.body.axisx;if(u==1){n.__ref_edge1=T;n.__ref_edge2=k}else{n.__ref_edge2=T;n.__ref_edge1=k}return true}}}else return false}else{var Z=-1e100;var et=-1e100;var tt=true;var nt=null;var rt=null;var it=t.polygon.gverts.next;var st=t.polygon.edges.head;while(st!=null){var ot=st.elt;var ut=ot.gnormx*e.circle.worldCOMx+ot.gnormy*e.circle.worldCOMy-ot.gprojection-e.circle.radius;if(ut>0){tt=false;break}if(ut>Z){Z=ut;nt=ot;rt=it}it=it.next;st=st.next}if(tt){var at=rt;var ft;if(rt.next==null)ft=t.polygon.gverts.next;else ft=rt.next;var lt=e.circle.worldCOMy*nt.gnormx-e.circle.worldCOMx*nt.gnormy;if(lt<=at.y*nt.gnormx-at.x*nt.gnormy){var ct;var ht=e.circle.radius;var pt=0;var dt=0;pt=at.x-e.circle.worldCOMx;dt=at.y-e.circle.worldCOMy;var vt=pt*pt+dt*dt;if(vt>ht*ht)ct=null;else if(vt<N.epsilon*N.epsilon)ct=n.injectContact(e.circle.worldCOMx,e.circle.worldCOMy,1,0,-ht,0,null);else{var mt=1/Math.sqrt(vt);var gt;if(mt<N.epsilon)gt=1e100;else gt=1/mt;var yt=.5+(e.circle.radius-.5*ht)*mt;if(r)ct=n.injectContact(e.circle.worldCOMx+pt*yt,e.circle.worldCOMy+dt*yt,-pt*mt,-dt*mt,gt-ht,0,null);else ct=n.injectContact(e.circle.worldCOMx+pt*yt,e.circle.worldCOMy+dt*yt,pt*mt,dt*mt,gt-ht,0,null)}if(ct!=null){var bt=ct.inner;n.ptype=2;var wt=0;var Et=0;wt=at.x-t.polygon.body.posx;Et=at.y-t.polygon.body.posy;n.__ref_edge1=nt;n.__ref_vertex=-1;if(r){bt.lr1x=wt*t.polygon.body.axisy+Et*t.polygon.body.axisx;bt.lr1y=Et*t.polygon.body.axisy-wt*t.polygon.body.axisx;bt.lr2x=e.circle.localCOMx;bt.lr2y=e.circle.localCOMy}else{bt.lr2x=wt*t.polygon.body.axisy+Et*t.polygon.body.axisx;bt.lr2y=Et*t.polygon.body.axisy-wt*t.polygon.body.axisx;bt.lr1x=e.circle.localCOMx;bt.lr1y=e.circle.localCOMy}n.radius=e.circle.radius}return ct!=null}else if(lt>=ft.y*nt.gnormx-ft.x*nt.gnormy){var St;var xt=e.circle.radius;var Tt=0;var Nt=0;Tt=ft.x-e.circle.worldCOMx;Nt=ft.y-e.circle.worldCOMy;var Ct=Tt*Tt+Nt*Nt;if(Ct>xt*xt)St=null;else if(Ct<N.epsilon*N.epsilon)St=n.injectContact(e.circle.worldCOMx,e.circle.worldCOMy,1,0,-xt,0,null);else{var kt=1/Math.sqrt(Ct);var Lt;if(kt<N.epsilon)Lt=1e100;else Lt=1/kt;var At=.5+(e.circle.radius-.5*xt)*kt;if(r)St=n.injectContact(e.circle.worldCOMx+Tt*At,e.circle.worldCOMy+Nt*At,-Tt*kt,-Nt*kt,Lt-xt,0,null);else St=n.injectContact(e.circle.worldCOMx+Tt*At,e.circle.worldCOMy+Nt*At,Tt*kt,Nt*kt,Lt-xt,0,null)}if(St!=null){var Ot=St.inner;n.ptype=2;var Mt=0;var _t=0;Mt=ft.x-t.polygon.body.posx;_t=ft.y-t.polygon.body.posy;n.__ref_edge1=nt;n.__ref_vertex=1;if(r){Ot.lr1x=Mt*t.polygon.body.axisy+_t*t.polygon.body.axisx;Ot.lr1y=_t*t.polygon.body.axisy-Mt*t.polygon.body.axisx;Ot.lr2x=e.circle.localCOMx;Ot.lr2y=e.circle.localCOMy}else{Ot.lr2x=Mt*t.polygon.body.axisy+_t*t.polygon.body.axisx;Ot.lr2y=_t*t.polygon.body.axisy-Mt*t.polygon.body.axisx;Ot.lr1x=e.circle.localCOMx;Ot.lr1y=e.circle.localCOMy}n.radius=e.circle.radius}return St!=null}else{var Dt=0;var Pt=0;var Ht=e.circle.radius+Z*.5;Dt=nt.gnormx*Ht;Pt=nt.gnormy*Ht;var Bt=0;var jt=0;Bt=e.circle.worldCOMx-Dt;jt=e.circle.worldCOMy-Pt;var Ft;if(r)Ft=n.injectContact(Bt,jt,nt.gnormx,nt.gnormy,Z,0,null);else Ft=n.injectContact(Bt,jt,-nt.gnormx,-nt.gnormy,Z,0,null);if(r)n.ptype=0;else n.ptype=1;n.lnormx=nt.lnormx;n.lnormy=nt.lnormy;n.rev=!r;n.lproj=nt.lprojection;n.radius=e.circle.radius;Ft.inner.lr1x=e.circle.localCOMx;Ft.inner.lr1y=e.circle.localCOMy;n.__ref_edge1=nt;n.__ref_vertex=0;return true}}else return false}}else{var It;var qt=e.circle.radius+t.circle.radius;var Rt=0;var Ut=0;Rt=t.circle.worldCOMx-e.circle.worldCOMx;Ut=t.circle.worldCOMy-e.circle.worldCOMy;var zt=Rt*Rt+Ut*Ut;if(zt>qt*qt)It=null;else if(zt<N.epsilon*N.epsilon)It=n.injectContact(e.circle.worldCOMx,e.circle.worldCOMy,1,0,-qt,0,null);else{var Wt=1/Math.sqrt(zt);var Xt;if(Wt<N.epsilon)Xt=1e100;else Xt=1/Wt;var Vt=.5+(e.circle.radius-.5*qt)*Wt;if(r)It=n.injectContact(e.circle.worldCOMx+Rt*Vt,e.circle.worldCOMy+Ut*Vt,-Rt*Wt,-Ut*Wt,Xt-qt,0,null);else It=n.injectContact(e.circle.worldCOMx+Rt*Vt,e.circle.worldCOMy+Ut*Vt,Rt*Wt,Ut*Wt,Xt-qt,0,null)}if(It!=null){var $t=It.inner;if(r){$t.lr1x=t.circle.localCOMx;$t.lr1y=t.circle.localCOMy;$t.lr2x=e.circle.localCOMx;$t.lr2y=e.circle.localCOMy}else{$t.lr1x=e.circle.localCOMx;$t.lr1y=e.circle.localCOMy;$t.lr2x=t.circle.localCOMx;$t.lr2y=t.circle.localCOMy}n.radius=e.circle.radius+t.circle.radius;n.ptype=2;return true}else return false}};Zn.testCollide_safe=function(e,t){if(t.type==0){var n=e;e=t;t=n}return Zn.testCollide(e,t)};Zn.testCollide=function(e,t){if(t.type==1)if(e.type==1){var n=true;var r=e.polygon.edges.head;while(r!=null){var i=r.elt;var s=1e100;var o=t.polygon.gverts.next;while(o!=null){var u=o;var a=i.gnormx*u.x+i.gnormy*u.y;if(a<s)s=a;o=o.next}s-=i.gprojection;if(s>0){n=false;break}r=r.next}if(n){var f=t.polygon.edges.head;while(f!=null){var l=f.elt;var c=1e100;var h=e.polygon.gverts.next;while(h!=null){var p=h;var d=l.gnormx*p.x+l.gnormy*p.y;if(d<c)c=d;h=h.next}c-=l.gprojection;if(c>0){n=false;break}f=f.next}return n}else return false}else{var v=null;var m=null;var g=true;var y=-1e100;var b=t.polygon.gverts.next;var w=t.polygon.edges.head;while(w!=null){var E=w.elt;var S=E.gnormx*e.circle.worldCOMx+E.gnormy*e.circle.worldCOMy-E.gprojection-e.circle.radius;if(S>0){g=false;break}if(S>y){y=S;v=E;m=b}b=b.next;w=w.next}if(g){var x=m;var T;if(m.next==null)T=t.polygon.gverts.next;else T=m.next;var N=e.circle.worldCOMy*v.gnormx-e.circle.worldCOMx*v.gnormy;if(N<=x.y*v.gnormx-x.x*v.gnormy){var C=e.circle.radius;var k=0;var L=0;k=x.x-e.circle.worldCOMx;L=x.y-e.circle.worldCOMy;var A=k*k+L*L;return A<=C*C}else if(N>=T.y*v.gnormx-T.x*v.gnormy){var O=e.circle.radius;var M=0;var _=0;M=T.x-e.circle.worldCOMx;_=T.y-e.circle.worldCOMy;var D=M*M+_*_;return D<=O*O}else return true}else return false}else{var P=e.circle.radius+t.circle.radius;var H=0;var B=0;H=t.circle.worldCOMx-e.circle.worldCOMx;B=t.circle.worldCOMy-e.circle.worldCOMy;var j=H*H+B*B;return j<=P*P}};Zn.flowCollide=function(e,t,n){if(t.type==1)if(e.type==1){var r=[];var i=[];var s=true;var o=true;var u=e.polygon.edges.head;while(u!=null){var a=u.elt;var f=1e100;var l=0;var c=t.polygon.gverts.next;while(c!=null){var h=c;var p=a.gnormx*h.x+a.gnormy*h.y;if(p<f)f=p;if(p>=a.gprojection+N.epsilon){i[l]=true;o=false}l++;c=c.next}f-=a.gprojection;if(f>0){s=false;break}u=u.next}if(o){t.polygon.validate_worldCOM();n.overlap=t.polygon.area;n.centroidx=t.polygon.worldCOMx;n.centroidy=t.polygon.worldCOMy;null;return true}else if(s){o=true;var d=t.polygon.edges.head;while(d!=null){var v=d.elt;var m=1e100;var g=0;var y=e.polygon.gverts.next;while(y!=null){var b=y;var w=v.gnormx*b.x+v.gnormy*b.y;if(w<m)m=w;if(w>=v.gprojection+N.epsilon){r[g]=true;o=false}g++;y=y.next}m-=v.gprojection;if(m>0){s=false;break}d=d.next}if(o){e.polygon.validate_worldCOM();n.overlap=e.polygon.area;n.centroidx=e.polygon.worldCOMx;n.centroidy=e.polygon.worldCOMy;null;return true}else if(s){while(!(Zn.flowpoly.head==null)){var E=Zn.flowpoly.pop_unsafe();if(!E._inuse){var S=E;if(S.outer!=null){S.outer.zpp_inner=null;S.outer=null}S._isimmutable=null;S._validate=null;S._invalidate=null;S.next=Or.zpp_pool;Or.zpp_pool=S}}var x=null;var T=false;var C=e.polygon.gverts.next;var k=0;var L=t.polygon.gverts.next;var A=0;var O=0;var M=t.polygon.edgeCnt;while(O<M){var _=O++;if(!i[_]){A=_;break}else L=L.next}if(L==null){L=t.polygon.gverts.next;T=true;var D=0;var P=e.polygon.edgeCnt;while(D<P){var H=D++;if(!r[H]){k=H;break}else C=C.next}if(C==null)C=e.polygon.gverts.next;else{Zn.flowpoly.add(C);x=Zn.flowpoly.head.elt}}else{Zn.flowpoly.add(L);x=Zn.flowpoly.head.elt}var B=1;if(Zn.flowpoly.head==null){var j=true;var F=e.polygon.gverts.next;var I=F;var q=F.next;while(q!=null){var R=q;var U=2;var z=true;var W=t.polygon.gverts.next;var X=W;var V=W.next;while(V!=null){var $=V;var J=0;if(function(e){var t;var n=0;var r=0;{n=I.x-X.x;r=I.y-X.y}var i=0;var s=0;{i=R.x-I.x;s=R.y-I.y}var o=0;var u=0;{o=$.x-X.x;u=$.y-X.y}var a=s*o-i*u;t=a*a>N.epsilon*N.epsilon?function(e){var t;a=1/a;var f=(u*n-o*r)*a;t=f>N.epsilon&&f<1-N.epsilon?function(e){var t;var o=(s*n-i*r)*a;t=o>N.epsilon&&o<1-N.epsilon?function(e){var t;J=f;t=true;return t}(e):false;return t}(e):false;return t}(e):false;return t}(this)){if(J<U){U=J;L=W}}W=V;X=$;V=V.next}if(z)do{V=t.polygon.gverts.next;var K=V;var Q=0;if(function(e){var t;var n=0;var r=0;{n=I.x-X.x;r=I.y-X.y}var i=0;var s=0;{i=R.x-I.x;s=R.y-I.y}var o=0;var u=0;{o=K.x-X.x;u=K.y-X.y}var a=s*o-i*u;t=a*a>N.epsilon*N.epsilon?function(e){var t;a=1/a;var f=(u*n-o*r)*a;t=f>N.epsilon&&f<1-N.epsilon?function(e){var t;var o=(s*n-i*r)*a;t=o>N.epsilon&&o<1-N.epsilon?function(e){var t;Q=f;t=true;return t}(e):false;return t}(e):false;return t}(e):false;return t}(this)){if(Q<U){U=Q;L=W}}}while(false);if(U!=2){var G=0;var Y=0;var Z=U;G=I.x+(R.x-I.x)*Z;Y=I.y+(R.y-I.y)*Z;x=Or.get(G,Y,null);Zn.flowpoly.add(x);T=true;C=F;j=false;break}F=q;I=R;q=q.next}if(j)do{q=e.polygon.gverts.next;var et=q;var tt=2;var nt=true;var rt=t.polygon.gverts.next;var it=rt;var st=rt.next;while(st!=null){var ot=st;var ut=0;if(function(e){var t;var n=0;var r=0;{n=I.x-it.x;r=I.y-it.y}var i=0;var s=0;{i=et.x-I.x;s=et.y-I.y}var o=0;var u=0;{o=ot.x-it.x;u=ot.y-it.y}var a=s*o-i*u;t=a*a>N.epsilon*N.epsilon?function(e){var t;a=1/a;var f=(u*n-o*r)*a;t=f>N.epsilon&&f<1-N.epsilon?function(e){var t;var o=(s*n-i*r)*a;t=o>N.epsilon&&o<1-N.epsilon?function(e){var t;ut=f;t=true;return t}(e):false;return t}(e):false;return t}(e):false;return t}(this)){if(ut<tt){tt=ut;L=rt}}rt=st;it=ot;st=st.next}if(nt)do{st=t.polygon.gverts.next;var at=st;var ft=0;if(function(e){var t;var n=0;var r=0;{n=I.x-it.x;r=I.y-it.y}var i=0;var s=0;{i=et.x-I.x;s=et.y-I.y}var o=0;var u=0;{o=at.x-it.x;u=at.y-it.y}var a=s*o-i*u;t=a*a>N.epsilon*N.epsilon?function(e){var t;a=1/a;var f=(u*n-o*r)*a;t=f>N.epsilon&&f<1-N.epsilon?function(e){var t;var o=(s*n-i*r)*a;t=o>N.epsilon&&o<1-N.epsilon?function(e){var t;ft=f;t=true;return t}(e):false;return t}(e):false;return t}(e):false;return t}(this)){if(ft<tt){tt=ft;L=rt}}}while(false);if(tt!=2){var lt=0;var ct=0;var ht=tt;lt=I.x+(et.x-I.x)*ht;ct=I.y+(et.y-I.y)*ht;x=Or.get(lt,ct,null);Zn.flowpoly.add(x);T=true;C=F;break}}while(false);B=2}while(true)if(T){C=C.next;k++;if(C==null){C=e.polygon.gverts.next;k=0}if(!r[k]){var pt=C;if(x!=null&&_r.vec_dsq(pt.x,pt.y,x.x,x.y)<N.epsilon)break;Zn.flowpoly.add(pt);if(x==null)x=Zn.flowpoly.head.elt;B=1}else{var dt=Zn.flowpoly.head.elt;var vt=C;var mt=L;var gt=L.next;if(gt==null)gt=t.polygon.gverts.next;var yt=-1;var bt=null;var wt=0;var Et=0;var St=gt;var xt=gt;do{var Tt=xt;var Nt=0;if(function(e){var t;var n=0;var r=0;{n=mt.x-dt.x;r=mt.y-dt.y}var i=0;var s=0;{i=Tt.x-mt.x;s=Tt.y-mt.y}var o=0;var u=0;{o=vt.x-dt.x;u=vt.y-dt.y}var a=s*o-i*u;t=a*a>N.epsilon*N.epsilon?function(e){var t;a=1/a;var f=(u*n-o*r)*a;t=f>N.epsilon&&f<1-N.epsilon?function(e){var t;var o=(s*n-i*r)*a;t=o>N.epsilon&&o<1-N.epsilon?function(e){var t;Nt=f;t=true;return t}(e):false;return t}(e):false;return t}(e):false;return t}(this)){if(Nt>=yt){bt=L;wt=A;if(++Et==B){yt=Nt;xt=St;break}else yt=Nt}}mt=Tt;L=xt;A++;if(A>=t.polygon.edgeCnt)A=0;xt=xt.next;if(xt==null)xt=t.polygon.gverts.next}while(false);while(xt!=St){var Ct=xt;var kt=0;if(function(e){var t;var n=0;var r=0;{n=mt.x-dt.x;r=mt.y-dt.y}var i=0;var s=0;{i=Ct.x-mt.x;s=Ct.y-mt.y}var o=0;var u=0;{o=vt.x-dt.x;u=vt.y-dt.y}var a=s*o-i*u;t=a*a>N.epsilon*N.epsilon?function(e){var t;a=1/a;var f=(u*n-o*r)*a;t=f>N.epsilon&&f<1-N.epsilon?function(e){var t;var o=(s*n-i*r)*a;t=o>N.epsilon&&o<1-N.epsilon?function(e){var t;kt=f;t=true;return t}(e):false;return t}(e):false;return t}(e):false;return t}(this)){if(kt>=yt){bt=L;wt=A;if(++Et==B){yt=kt;xt=St;break}else yt=kt}}mt=Ct;L=xt;A++;if(A>=t.polygon.edgeCnt)A=0;xt=xt.next;if(xt==null)xt=t.polygon.gverts.next}if(bt==null)break;var Lt=bt;var At=bt.next;if(At==null)At=t.polygon.gverts.next;var Ot=At;var Mt=0;var _t=0;var Dt=yt;Mt=Lt.x+(Ot.x-Lt.x)*Dt;_t=Lt.y+(Ot.y-Lt.y)*Dt;if(x!=null&&_r.vec_dsq(Mt,_t,x.x,x.y)<N.epsilon)break;Zn.flowpoly.add(Or.get(Mt,_t,null));if(x==null)x=Zn.flowpoly.head.elt;L=bt;A=wt;T=!T;B=2}}else{L=L.next;A++;if(L==null){L=t.polygon.gverts.next;A=0}if(!i[A]){var Pt=L;if(x!=null&&_r.vec_dsq(Pt.x,Pt.y,x.x,x.y)<N.epsilon)break;Zn.flowpoly.add(Pt);if(x==null)x=Zn.flowpoly.head.elt;B=1}else{var Ht=Zn.flowpoly.head.elt;var Bt=L;var jt=C;var Ft=C.next;if(Ft==null)Ft=e.polygon.gverts.next;var It=-1;var qt=null;var Rt=0;var Ut=0;var zt=Ft;var Wt=Ft;do{var Xt=Wt;var Vt=0;if(function(e){var t;var n=0;var r=0;{n=jt.x-Ht.x;r=jt.y-Ht.y}var i=0;var s=0;{i=Xt.x-jt.x;s=Xt.y-jt.y}var o=0;var u=0;{o=Bt.x-Ht.x;u=Bt.y-Ht.y}var a=s*o-i*u;t=a*a>N.epsilon*N.epsilon?function(e){var t;a=1/a;var f=(u*n-o*r)*a;t=f>N.epsilon&&f<1-N.epsilon?function(e){var t;var o=(s*n-i*r)*a;t=o>N.epsilon&&o<1-N.epsilon?function(e){var t;Vt=f;t=true;return t}(e):false;return t}(e):false;return t}(e):false;return t}(this)){if(Vt>=It){qt=C;Rt=k;if(++Ut==B){It=Vt;Wt=zt;break}else It=Vt}}jt=Xt;C=Wt;k++;if(k>=e.polygon.edgeCnt)k=0;Wt=Wt.next;if(Wt==null)Wt=e.polygon.gverts.next}while(false);while(Wt!=zt){var $t=Wt;var Jt=0;if(function(e){var t;var n=0;var r=0;{n=jt.x-Ht.x;r=jt.y-Ht.y}var i=0;var s=0;{i=$t.x-jt.x;s=$t.y-jt.y}var o=0;var u=0;{o=Bt.x-Ht.x;u=Bt.y-Ht.y}var a=s*o-i*u;t=a*a>N.epsilon*N.epsilon?function(e){var t;a=1/a;var f=(u*n-o*r)*a;t=f>N.epsilon&&f<1-N.epsilon?function(e){var t;var o=(s*n-i*r)*a;t=o>N.epsilon&&o<1-N.epsilon?function(e){var t;Jt=f;t=true;return t}(e):false;return t}(e):false;return t}(e):false;return t}(this)){if(Jt>=It){qt=C;Rt=k;if(++Ut==B){It=Jt;Wt=zt;break}else It=Jt}}jt=$t;C=Wt;k++;if(k>=e.polygon.edgeCnt)k=0;Wt=Wt.next;if(Wt==null)Wt=e.polygon.gverts.next}if(qt==null)break;var Kt=qt;var Qt=qt.next;if(Qt==null)Qt=e.polygon.gverts.next;var Gt=Qt;var Yt=0;var Zt=0;var en=It;Yt=Kt.x+(Gt.x-Kt.x)*en;Zt=Kt.y+(Gt.y-Kt.y)*en;if(x!=null&&_r.vec_dsq(Yt,Zt,x.x,x.y)<N.epsilon)break;Zn.flowpoly.add(Or.get(Yt,Zt,null));if(x==null)x=Zn.flowpoly.head.elt;C=qt;k=Rt;T=!T;B=2}}if(Zn.flowpoly.head!=null&&Zn.flowpoly.head.next!=null&&Zn.flowpoly.head.next.next!=null){var tn=0;var nn=0;var rn=0;nn=0;rn=0;tn=0;var sn=Zn.flowpoly.head;var on=sn.elt;sn=sn.next;var un=sn.elt;sn=sn.next;while(sn!=null){var an=sn.elt;tn+=un.x*(an.y-on.y);var fn=an.y*un.x-an.x*un.y;nn+=(un.x+an.x)*fn;rn+=(un.y+an.y)*fn;on=un;un=an;sn=sn.next}sn=Zn.flowpoly.head;var ln=sn.elt;tn+=un.x*(ln.y-on.y);var cn=ln.y*un.x-ln.x*un.y;nn+=(un.x+ln.x)*cn;rn+=(un.y+ln.y)*cn;on=un;un=ln;sn=sn.next;var hn=sn.elt;tn+=un.x*(hn.y-on.y);var pn=hn.y*un.x-hn.x*un.y;nn+=(un.x+hn.x)*pn;rn+=(un.y+hn.y)*pn;tn*=.5;var dn=1/(6*tn);var vn=dn;nn*=vn;rn*=vn;n.overlap=-tn;n.centroidx=nn;n.centroidy=rn;null;return true}else return false}else return false}else return false}else{var mn=[];var gn=true;var yn=null;var bn=null;var wn=-1e100;var En=true;var Sn=t.polygon.gverts.next;var xn=0;var Tn=t.polygon.edges.head;while(Tn!=null){var Nn=Tn.elt;var Cn=Nn.gnormx*e.circle.worldCOMx+Nn.gnormy*e.circle.worldCOMy;if(Cn>Nn.gprojection+e.circle.radius){En=false;break}else if(Cn+e.circle.radius>Nn.gprojection+N.epsilon){gn=false;mn[xn]=true}Cn-=Nn.gprojection+e.circle.radius;if(Cn>wn){wn=Cn;yn=Nn;bn=Sn}Sn=Sn.next;xn++;Tn=Tn.next}if(En){if(gn){n.overlap=e.circle.area;n.centroidx=e.circle.worldCOMx;n.centroidy=e.circle.worldCOMy;null;return true}else{var kn=bn;var Ln;if(bn.next==null)Ln=t.polygon.gverts.next;else Ln=bn.next;var An=e.circle.worldCOMy*yn.gnormx-e.circle.worldCOMx*yn.gnormy;if(An<=kn.y*yn.gnormx-kn.x*yn.gnormy?function(t){var n;var r=e.circle.radius;var i=0;var s=0;{i=kn.x-e.circle.worldCOMx;s=kn.y-e.circle.worldCOMy}var o=i*i+s*s;n=o<=r*r;return n}(this):An>=Ln.y*yn.gnormx-Ln.x*yn.gnormy?function(t){var n;var r=e.circle.radius;var i=0;var s=0;{i=Ln.x-e.circle.worldCOMx;s=Ln.y-e.circle.worldCOMy}var o=i*i+s*s;n=o<=r*r;return n}(this):true){var On=[];var Mn=0;var _n=true;var Dn=null;var Pn=0;var Hn=t.polygon.gverts.next;while(Hn!=null){var Bn=Hn;var jn=_r.vec_dsq(Bn.x,Bn.y,e.circle.worldCOMx,e.circle.worldCOMy);if(!(On[Mn]=jn<=e.circle.radius*e.circle.radius))_n=false;else{Pn=Mn;Dn=Hn}Mn++;Hn=Hn.next}if(_n){t.polygon.validate_worldCOM();n.overlap=t.polygon.area;n.centroidx=t.polygon.worldCOMx;n.centroidy=t.polygon.worldCOMy;null;return true}else{while(!(Zn.flowpoly.head==null)){var Fn=Zn.flowpoly.pop_unsafe();if(!Fn._inuse){var In=Fn;if(In.outer!=null){In.outer.zpp_inner=null;In.outer=null}In._isimmutable=null;In._validate=null;In._invalidate=null;In.next=Or.zpp_pool;Or.zpp_pool=In}}Zn.flowsegs.clear();var qn=null;var Rn=1;if(Dn==null){Dn=t.polygon.gverts.next;Rn=2}else Zn.flowpoly.add(qn=Dn);while(Rn!=0)if(Rn==1){Dn=Dn.next;if(Dn==null)Dn=t.polygon.gverts.next;Pn++;if(Pn>=t.polygon.edgeCnt)Pn=0;if(On[Pn]){if(_r.vec_dsq(qn.x,qn.y,Dn.x,Dn.y)<N.epsilon)break;Zn.flowpoly.add(Dn)}else{var Un=Zn.flowpoly.head.elt;var zn=Dn;var Wn;var Xn=0;var Vn=0;Xn=zn.x-Un.x;Vn=zn.y-Un.y;var $n=0;var Jn=0;$n=Un.x-e.circle.worldCOMx;Jn=Un.y-e.circle.worldCOMy;var Kn=Xn*Xn+Vn*Vn;var Qn=2*($n*Xn+Jn*Vn);var Gn=$n*$n+Jn*Jn-e.circle.radius*e.circle.radius;var Yn=Math.sqrt(Qn*Qn-4*Kn*Gn);Kn=1/(2*Kn);var er=(-Qn-Yn)*Kn;if(er<N.epsilon)Wn=(-Qn+Yn)*Kn;else Wn=er;var tr=0;var nr=0;var rr=Wn;tr=Un.x+(zn.x-Un.x)*rr;nr=Un.y+(zn.y-Un.y)*rr;if(_r.vec_dsq(qn.x,qn.y,tr,nr)<N.epsilon)break;Zn.flowpoly.add(Or.get(tr,nr,null));Rn=2}}else if(Rn==2){var ir=Dn.next;if(ir==null)ir=t.polygon.gverts.next;var sr=Dn;Rn=0;var or=ir;var ur=ir;do{var ar=ur;var fr=Pn+1;if(fr==t.polygon.edgeCnt)fr=0;if(mn[Pn]){if(On[fr]){var lr;var cr=0;var hr=0;cr=ar.x-sr.x;hr=ar.y-sr.y;var pr=0;var dr=0;pr=sr.x-e.circle.worldCOMx;dr=sr.y-e.circle.worldCOMy;var vr=cr*cr+hr*hr;var mr=2*(pr*cr+dr*hr);var gr=pr*pr+dr*dr-e.circle.radius*e.circle.radius;var yr=Math.sqrt(mr*mr-4*vr*gr);vr=1/(2*vr);var br=(-mr-yr)*vr;if(br<N.epsilon)lr=(-mr+yr)*vr;else lr=br;var wr=0;var Er=0;var Sr=lr;wr=sr.x+(ar.x-sr.x)*Sr;Er=sr.y+(ar.y-sr.y)*Sr;if(_r.vec_dsq(qn.x,qn.y,wr,Er)<N.epsilon){Rn=0;ur=or;break}var xr=Or.get(wr,Er,null);Zn.flowsegs.add(Zn.flowpoly.head.elt);Zn.flowsegs.add(xr);Zn.flowpoly.add(xr);Rn=1;ur=or;break}else{var Tr=0;var Nr=0;var Cr;var kr=0;var Lr=0;kr=ar.x-sr.x;Lr=ar.y-sr.y;var Ar=0;var Mr=0;Ar=sr.x-e.circle.worldCOMx;Mr=sr.y-e.circle.worldCOMy;var Dr=kr*kr+Lr*Lr;var Pr=2*(Ar*kr+Mr*Lr);var Hr=Ar*Ar+Mr*Mr-e.circle.radius*e.circle.radius;var Br=Pr*Pr-4*Dr*Hr;if(Br*Br<N.epsilon){if(Br<0)Tr=10;else Tr=Nr=-Pr/(2*Dr);Cr=false}else{Br=Math.sqrt(Br);Dr=1/(2*Dr);Tr=(-Pr-Br)*Dr;Nr=(-Pr+Br)*Dr;Cr=true}if(Tr<1-N.epsilon&&Nr>N.epsilon){var jr=0;var Fr=0;var Ir=Tr;jr=sr.x+(ar.x-sr.x)*Ir;Fr=sr.y+(ar.y-sr.y)*Ir;if(qn!=null&&_r.vec_dsq(qn.x,qn.y,jr,Fr)<N.epsilon){Rn=0;ur=or;break}var qr=Or.get(jr,Fr,null);if(!(Zn.flowpoly.head==null)){Zn.flowsegs.add(Zn.flowpoly.head.elt);Zn.flowsegs.add(qr)}Zn.flowpoly.add(qr);if(qn==null)qn=Zn.flowpoly.head.elt;if(Cr){var Rr=0;var Ur=0;var zr=Nr;Rr=sr.x+(ar.x-sr.x)*zr;Ur=sr.y+(ar.y-sr.y)*zr;Zn.flowpoly.add(Or.get(Rr,Ur,null))}}}}sr=ar;Dn=ur;Pn=fr;ur=ur.next;if(ur==null)ur=t.polygon.gverts.next}while(false);while(ur!=or){var Wr=ur;var Xr=Pn+1;if(Xr==t.polygon.edgeCnt)Xr=0;if(mn[Pn]){if(On[Xr]){var Vr;var $r=0;var Jr=0;$r=Wr.x-sr.x;Jr=Wr.y-sr.y;var Kr=0;var Qr=0;Kr=sr.x-e.circle.worldCOMx;Qr=sr.y-e.circle.worldCOMy;var Gr=$r*$r+Jr*Jr;var Yr=2*(Kr*$r+Qr*Jr);var Zr=Kr*Kr+Qr*Qr-e.circle.radius*e.circle.radius;var ei=Math.sqrt(Yr*Yr-4*Gr*Zr);Gr=1/(2*Gr);var ti=(-Yr-ei)*Gr;if(ti<N.epsilon)Vr=(-Yr+ei)*Gr;else Vr=ti;var ni=0;var ri=0;var ii=Vr;ni=sr.x+(Wr.x-sr.x)*ii;ri=sr.y+(Wr.y-sr.y)*ii;if(_r.vec_dsq(qn.x,qn.y,ni,ri)<N.epsilon){Rn=0;ur=or;break}var si=Or.get(ni,ri,null);Zn.flowsegs.add(Zn.flowpoly.head.elt);Zn.flowsegs.add(si);Zn.flowpoly.add(si);Rn=1;ur=or;break}else{var oi=0;var ui=0;var ai;var fi=0;var li=0;fi=Wr.x-sr.x;li=Wr.y-sr.y;var ci=0;var hi=0;ci=sr.x-e.circle.worldCOMx;hi=sr.y-e.circle.worldCOMy;var pi=fi*fi+li*li;var di=2*(ci*fi+hi*li);var vi=ci*ci+hi*hi-e.circle.radius*e.circle.radius;var mi=di*di-4*pi*vi;if(mi*mi<N.epsilon){if(mi<0)oi=10;else oi=ui=-di/(2*pi);ai=false}else{mi=Math.sqrt(mi);pi=1/(2*pi);oi=(-di-mi)*pi;ui=(-di+mi)*pi;ai=true}if(oi<1-N.epsilon&&ui>N.epsilon){var gi=0;var yi=0;var bi=oi;gi=sr.x+(Wr.x-sr.x)*bi;yi=sr.y+(Wr.y-sr.y)*bi;if(qn!=null&&_r.vec_dsq(qn.x,qn.y,gi,yi)<N.epsilon){Rn=0;ur=or;break}var wi=Or.get(gi,yi,null);if(!(Zn.flowpoly.head==null)){Zn.flowsegs.add(Zn.flowpoly.head.elt);Zn.flowsegs.add(wi)}Zn.flowpoly.add(wi);if(qn==null)qn=Zn.flowpoly.head.elt;if(ai){var Ei=0;var Si=0;var xi=ui;Ei=sr.x+(Wr.x-sr.x)*xi;Si=sr.y+(Wr.y-sr.y)*xi;Zn.flowpoly.add(Or.get(Ei,Si,null))}}}}sr=Wr;Dn=ur;Pn=Xr;ur=ur.next;if(ur==null)ur=t.polygon.gverts.next}}if(Zn.flowpoly.head==null)return false;else if(Zn.flowpoly.head.next==null){var Ti=true;var Ni=t.polygon.edges.head;while(Ni!=null){var Ci=Ni.elt;var ki=Ci.gnormx*e.circle.worldCOMx+Ci.gnormy*e.circle.worldCOMy;if(ki>Ci.gprojection){Ti=false;break}Ni=Ni.next}if(Ti){n.overlap=e.circle.area;n.centroidx=e.circle.worldCOMx;n.centroidy=e.circle.worldCOMy;null;return true}else return false}else{var Li=0;var Ai=0;var Oi=0;if(Zn.flowpoly.head.next.next!=null){var Mi=0;var _i=0;var Di=0;_i=0;Di=0;Mi=0;var Pi=Zn.flowpoly.head;var Hi=Pi.elt;Pi=Pi.next;var Bi=Pi.elt;Pi=Pi.next;while(Pi!=null){var ji=Pi.elt;Mi+=Bi.x*(ji.y-Hi.y);var Fi=ji.y*Bi.x-ji.x*Bi.y;_i+=(Bi.x+ji.x)*Fi;Di+=(Bi.y+ji.y)*Fi;Hi=Bi;Bi=ji;Pi=Pi.next}Pi=Zn.flowpoly.head;var Ii=Pi.elt;Mi+=Bi.x*(Ii.y-Hi.y);var qi=Ii.y*Bi.x-Ii.x*Bi.y;_i+=(Bi.x+Ii.x)*qi;Di+=(Bi.y+Ii.y)*qi;Hi=Bi;Bi=Ii;Pi=Pi.next;var Ri=Pi.elt;Mi+=Bi.x*(Ri.y-Hi.y);var Ui=Ri.y*Bi.x-Ri.x*Bi.y;_i+=(Bi.x+Ri.x)*Ui;Di+=(Bi.y+Ri.y)*Ui;Mi*=.5;var zi=1/(6*Mi);var Wi=zi;_i*=Wi;Di*=Wi;var Xi=-Mi;Li+=_i*Xi;Ai+=Di*Xi;Oi-=Mi}else{Zn.flowsegs.add(Zn.flowpoly.head.elt);Zn.flowsegs.add(Zn.flowpoly.head.next.elt)}while(!(Zn.flowsegs.head==null)){var Vi=Zn.flowsegs.pop_unsafe();var $i=Zn.flowsegs.pop_unsafe();var Ji=0;var Ki=0;Ji=$i.x-Vi.x;Ki=$i.y-Vi.y;var Qi=0;var Gi=0;Qi=Ji;Gi=Ki;var Yi=Qi*Qi+Gi*Gi;var Zi=1/Math.sqrt(Yi);var es=Zi;Qi*=es;Gi*=es;var ts=Qi;Qi=-Gi;Gi=ts;var ns=0;var rs=0;ns=Vi.x+$i.x;rs=Vi.y+$i.y;var is=.5;ns*=is;rs*=is;var ss=1;ns-=e.circle.worldCOMx*ss;rs-=e.circle.worldCOMy*ss;var os=Qi*ns+Gi*rs;var us=0;var as=0;var fs=os;var ls=fs/e.circle.radius;var cs=Math.sqrt(1-ls*ls);var hs=Math.acos(ls);us=e.circle.radius*(e.circle.radius*hs-fs*cs);as=.6666666666666666*e.circle.radius*cs*cs*cs/(hs-ls*cs);ns=e.circle.worldCOMx;rs=e.circle.worldCOMy;var ps=as;ns+=Qi*ps;rs+=Gi*ps;var ds=us;Li+=ns*ds;Ai+=rs*ds;Oi+=us}var vs=1/Oi;Li*=vs;Ai*=vs;n.overlap=Oi;n.centroidx=Li;n.centroidy=Ai;null;return true}}}else return false}}else return false}else{var ms=e.circle;var gs=t.circle;var ys=0;var bs=0;ys=gs.worldCOMx-ms.worldCOMx;bs=gs.worldCOMy-ms.worldCOMy;var ws=ms.radius+gs.radius;var Es=ys*ys+bs*bs;if(Es>ws*ws)return false;else if(Es<N.epsilon*N.epsilon){if(ms.radius<gs.radius){n.overlap=ms.area;n.centroidx=ms.worldCOMx;n.centroidy=ms.worldCOMy;null}else{n.overlap=gs.area;n.centroidx=gs.worldCOMx;n.centroidy=gs.worldCOMy;null}return true}else{var Ss=Math.sqrt(Es);var xs=1/Ss;var Ts=.5*(Ss-(gs.radius*gs.radius-ms.radius*ms.radius)*xs);if(Ts<=-ms.radius){n.overlap=ms.area;n.centroidx=ms.worldCOMx;n.centroidy=ms.worldCOMy;null}else{var Ns=Ss-Ts;if(Ns<=-gs.radius){n.overlap=gs.area;n.centroidx=gs.worldCOMx;n.centroidy=gs.worldCOMy;null}else{var Cs=0;var ks=0;var Ls=0;var As=0;var Os=Ts;var Ms=Os/ms.radius;var _s=Math.sqrt(1-Ms*Ms);var Ds=Math.acos(Ms);Cs=ms.radius*(ms.radius*Ds-Os*_s);ks=.6666666666666666*ms.radius*_s*_s*_s/(Ds-Ms*_s);var Ps=Ns;var Hs=Ps/gs.radius;var Bs=Math.sqrt(1-Hs*Hs);var js=Math.acos(Hs);Ls=gs.radius*(gs.radius*js-Ps*Bs);As=.6666666666666666*gs.radius*Bs*Bs*Bs/(js-Hs*Bs);var Fs=Cs+Ls;var Is=(ks*Cs+(Ss-As)*Ls)/Fs*xs;n.overlap=Fs;n.centroidx=ms.worldCOMx+ys*Is;n.centroidy=ms.worldCOMy+bs*Is;null}}return true}}};var er=function(){};er.__name__=true;er.isinner=function(e,t,n){var r=0;var i=0;r=e.x-t.x;i=e.y-t.y;var s=0;var o=0;s=n.x-t.x;o=n.y-t.y;return o*r-s*i>=0};er.optimise=function(e){var t=e.vertices;var n=e.vertices;if(t!=null){var r=t;do{var i=r;i.sort();r=r.next}while(r!=n)}var s=e.vertices;var o=e.vertices;if(s!=null){var u=s;do{var a=u;var f=a.prev;var l=null;var c=a.diagonals.head;while(c!=null){var h=c.elt;var p;if(c.next==null)p=a.next;else p=c.next.elt;if(!er.isinner(p,a,f)){l=c;f=h;c=c.next;continue}var d=true;var v=h;var m=v.prev;var g=null;var y=v.diagonals.head;while(y!=null){var b=y.elt;if(b==a){var w;if(y.next==null)w=v.next;else w=y.next.elt;d=er.isinner(w,v,m);break}m=b;g=y;y=y.next}if(d){c=a.diagonals.erase(l);v.diagonals.erase(g);continue}f=h;l=c;c=c.next}u=u.next}while(u!=o)}};var tr=function(){this.toiDistance=0;this.next=null;this.inner=false;this.ray=null;this.position=null;this.convex=null;this.shape=null;this.normal=null};tr.__name__=true;tr.getRay=function(e,t,n,r){var i;if(tr.rayPool==null){tr.internal=true;i=new At;i.zpp_inner=new tr;i.zpp_inner.ray=i;tr.internal=false}else{i=tr.rayPool.ray;tr.rayPool=tr.rayPool.next;i.zpp_inner.next=null}var s=i.zpp_inner;s.normal=e;e.zpp_inner._immutable=true;s.toiDistance=t;s.inner=n;s.shape=r;return i};tr.getConvex=function(e,t,n,r){var i;if(tr.convexPool==null){tr.internal=true;i=new gt;i.zpp_inner=new tr;i.zpp_inner.convex=i;tr.internal=false}else{i=tr.convexPool.convex;tr.convexPool=tr.convexPool.next;i.zpp_inner.next=null}var s=i.zpp_inner;s.normal=e;s.position=t;e.zpp_inner._immutable=true;t.zpp_inner._immutable=true;s.toiDistance=n;s.shape=r;return i};tr.prototype={disposed:function(){if(this.next!=null)throw new g("Error: This object has been disposed of and cannot be used")},free:function(){this.normal.zpp_inner._immutable=false;this.normal.dispose();if(this.position!=null){this.position.zpp_inner._immutable=false;this.position.dispose()}this.shape=null;this.toiDistance=0;if(this.convex!=null){this.next=tr.convexPool;tr.convexPool=this}else{this.next=tr.rayPool;tr.rayPool=this}},__class__:tr};var nr=function(){this.used=false;this.rank=0;this.parent=null;this.positive=false;this.value=0;this.vert=null;this.posy=0;this.posx=0;this.next=null;this.prev=null};nr.__name__=true;nr.path=function(e){var t;if(nr.zpp_pool==null)t=new nr;else{t=nr.zpp_pool;nr.zpp_pool=t.next;t.next=null}null;t.vert=e;t.parent=t;t.rank=0;t.used=false;return t};nr.prototype={alloc:function(){},free:function(){this.vert=null;this.parent=null},__class__:nr};var rr=function(){this.path1=null;this.start=null;this.end=null;this.path0=null;this.vertex=false;this.virtualint=false;this.time=0;this.next=null};rr.__name__=true;rr.get=function(e,t,n,r,i,s,o){if(o==null)o=false;if(s==null)s=false;var u;if(rr.zpp_pool==null)u=new rr;else{u=rr.zpp_pool;rr.zpp_pool=u.next;u.next=null}null;u.virtualint=s;u.end=t;u.start=n;u.path0=r;u.path1=i;u.time=e;u.vertex=o;return u};rr.prototype={alloc:function(){},free:function(){this.end=this.start=null;this.path0=this.path1=null},__class__:rr};var ir=function(){};ir.__name__=true;ir.run=function(e,t,n,r,i,s){var o=0;var u=0;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();o=t.zpp_inner.x;if(t!=null&&t.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");t.zpp_inner.validate();u=t.zpp_inner.y;var a=0;var f=0;a=function(e){var t;if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");n.zpp_inner.validate();t=n.zpp_inner.x;return t}(this)-o;f=function(e){var t;if(n!=null&&n.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");n.zpp_inner.validate();t=n.zpp_inner.y;return t}(this)-u;var l;if(r)l=0;else l=-Infinity;var c;if(i)c=1;else{c=Infinity}var h=-(u*a-o*f);var p=null;var d=false;var v=e;do{var m;if(nr.zpp_pool==null)m=new nr;else{m=nr.zpp_pool;nr.zpp_pool=m.next;m.next=null}null;m.vert=v;m.posx=m.vert.x;m.posy=m.vert.y;m.value=m.posy*a-m.posx*f+h;m.positive=m.value>0;if(m.value==0)d=true;var y=m;if(p==null)p=y.prev=y.next=y;else{y.prev=p;y.next=p.next;p.next.prev=y;p.next=y}p=y;v=v.next}while(v!=e);if(d){var b=null;var w=p;var E=p;if(w!=null){var S=w;do{var x=S;if(x.value!=0){b=x;break}S=S.next}while(S!=E)}var T=0;var N=0;T=a;N=f;var C=T*T+N*N;var k=1/Math.sqrt(C);var L=k;T*=L;N*=L;var A=T;T=-N;N=A;var O=null;var M=b;do{if(M.value!=0&&(O==null||M==O.next)){O=M;M=M.next;continue}var _=O.value*M.value;if(_==0){M=M.next;continue}var D=O.next;var P;if(_>0)P=O.positive;else{var H=D.next;var B=0;var j=0;B=D.posx+H.posx;j=D.posy+H.posy;var F=.5;B*=F;j*=F;var I=B+T*1e-8;var q=j+N*1e-8;var R=false;var U=e;var z=e;if(U!=null){var W=U;do{var X=W;var V=X.prev;if((X.y<q&&V.y>=q||V.y<q&&X.y>=q)&&(X.x<=I||V.x<=I)){if(X.x+(q-X.y)/(V.y-X.y)*(V.x-X.x)<I)R=!R}W=W.next}while(W!=z)}P=R}var $=D;var J=M;if($!=null){var K=$;do{var Q=K;Q.positive=P;K=K.next}while(K!=J)}O=M;M=M.next}while(M!=b);do{if(M.value!=0&&(O==null||M==O.next)){O=M;M=M.next;continue}var G=O.value*M.value;if(G==0){M=M.next;continue}var Y=O.next;var Z;if(G>0)Z=O.positive;else{var et=Y.next;var tt=0;var nt=0;tt=Y.posx+et.posx;nt=Y.posy+et.posy;var rt=.5;tt*=rt;nt*=rt;var it=tt+T*1e-8;var st=nt+N*1e-8;var ot=false;var ut=e;var at=e;if(ut!=null){var ft=ut;do{var lt=ft;var ct=lt.prev;if((lt.y<st&&ct.y>=st||ct.y<st&&lt.y>=st)&&(lt.x<=it||ct.x<=it)){if(lt.x+(st-lt.y)/(ct.y-lt.y)*(ct.x-lt.x)<it)ot=!ot}ft=ft.next}while(ft!=at)}Z=ot}var ht=Y;var pt=M;if(ht!=null){var dt=ht;do{var vt=dt;vt.positive=Z;dt=dt.next}while(dt!=pt)}O=M;M=M.next}while(false)}if(ir.ints==null)ir.ints=new ci;if(ir.paths==null)ir.paths=new hi;var mt=null;var gt=or.get(p.posx,p.posy);if(mt==null)mt=gt.prev=gt.next=gt;else{gt.next=mt;gt.prev=mt.prev;mt.prev.next=gt;mt.prev=gt}gt;var yt=mt;var bt=nr.path(mt);ir.paths.add(bt);var wt=p;do{var St=wt.next;var Tt=or.get(St.posx,St.posy);if(wt.positive==St.positive){var Nt=Tt;if(mt==null)mt=Nt.prev=Nt.next=Nt;else{Nt.next=mt;Nt.prev=mt.prev;mt.prev.next=Nt;mt.prev=Nt}Nt}else{var Ct=0;var kt=0;Ct=St.posx-wt.posx;kt=St.posy-wt.posy;var Lt=f*Ct-a*kt;Lt=1/Lt;var At=0;var Ot=0;At=o-wt.posx;Ot=u-wt.posy;var Mt=(kt*At-Ct*Ot)*Lt;if(Mt<l||Mt>c){ir.ints.add(rr.get(Mt,null,null,null,null,true,null));var _t=Tt;if(mt==null)mt=_t.prev=_t.next=_t;else{_t.next=mt;_t.prev=mt.prev;mt.prev.next=_t;mt.prev=_t}_t}else if(wt.value==0){var Dt=mt.prev;mt=null;var Pt=or.get(Dt.x,Dt.y);if(mt==null)mt=Pt.prev=Pt.next=Pt;else{Pt.next=mt;Pt.prev=mt.prev;mt.prev.next=Pt;mt.prev=Pt}Pt;var Ht=Tt;if(mt==null)mt=Ht.prev=Ht.next=Ht;else{Ht.next=mt;Ht.prev=mt.prev;mt.prev.next=Ht;mt.prev=Ht}Ht;var Bt=ir.paths.head.elt;ir.paths.add(nr.path(mt));var jt=ir.paths.head.elt;ir.ints.add(rr.get(Mt,Dt,mt,Bt,jt,true,null))}else if(St.value==0){var Ft=Tt;if(mt==null)mt=Ft.prev=Ft.next=Ft;else{Ft.next=mt;Ft.prev=mt.prev;mt.prev.next=Ft;mt.prev=Ft}Ft;var It=mt.prev;mt=null;var qt=or.get(St.posx,St.posy);if(mt==null)mt=qt.prev=qt.next=qt;else{qt.next=mt;qt.prev=mt.prev;mt.prev.next=qt;mt.prev=qt}qt;var Rt=ir.paths.head.elt;ir.paths.add(nr.path(mt));var Ut=ir.paths.head.elt;ir.ints.add(rr.get(Mt,It,mt,Rt,Ut,true,null))}else{var zt=(f*At-a*Ot)*Lt;var Wt=0;var Xt=0;Wt=wt.posx;Xt=wt.posy;var Vt=zt;Wt+=Ct*Vt;Xt+=kt*Vt;var $t=or.get(Wt,Xt);if(mt==null)mt=$t.prev=$t.next=$t;else{$t.next=mt;$t.prev=mt.prev;mt.prev.next=$t;mt.prev=$t}$t;var Jt=mt.prev;mt=null;var Kt=or.get(Wt,Xt);if(mt==null)mt=Kt.prev=Kt.next=Kt;else{Kt.next=mt;Kt.prev=mt.prev;mt.prev.next=Kt;mt.prev=Kt}Kt;var Qt=Tt;if(mt==null)mt=Qt.prev=Qt.next=Qt;else{Qt.next=mt;Qt.prev=mt.prev;mt.prev.next=Qt;mt.prev=Qt}Qt;var Gt=ir.paths.head.elt;ir.paths.add(nr.path(mt));var Yt=ir.paths.head.elt;ir.ints.add(rr.get(Mt,Jt,mt,Gt,Yt,false,null))}}wt=wt.next}while(wt!=p);var Zt=mt.prev;Zt.next.prev=yt.prev;yt.prev.next=Zt.next;Zt.next=yt;yt.prev=Zt;var en=ir.paths.head.elt;var tn;if(bt==bt.parent)tn=bt;else{var nn=bt;var rn=null;while(nn!=nn.parent){var sn=nn.parent;nn.parent=rn;rn=nn;nn=sn}while(rn!=null){var on=rn.parent;rn.parent=nn;rn=on}tn=nn}var un;if(en==en.parent)un=en;else{var an=en;var fn=null;while(an!=an.parent){var ln=an.parent;an.parent=fn;fn=an;an=ln}while(fn!=null){var cn=fn.parent;fn.parent=an;fn=cn}un=an}if(tn!=un){if(tn.rank<un.rank)tn.parent=un;else if(tn.rank>un.rank)un.parent=tn;else{un.parent=tn;tn.rank++}}var hn=ir.ints;if(!(hn.head==null)&&hn.head.next!=null){var pn=hn.head;var dn=null;var vn=null;var mn=null;var gn=null;var yn=1;var bn;var wn;var En;do{bn=0;vn=pn;dn=pn=null;while(vn!=null){bn++;mn=vn;wn=0;En=yn;while(mn!=null&&wn<yn){wn++;mn=mn.next}while(wn>0||En>0&&mn!=null){if(wn==0){gn=mn;mn=mn.next;En--}else if(En==0||mn==null){gn=vn;vn=vn.next;wn--}else if(vn.elt.time<mn.elt.time){gn=vn;vn=vn.next;wn--}else{gn=mn;mn=mn.next;En--}if(dn!=null)dn.next=gn;else pn=gn;dn=gn}vn=mn}dn.next=null;yn<<=1}while(bn>1);hn.head=pn;hn.modified=true;hn.pushmod=true}while(!(ir.ints.head==null)){var Sn=ir.ints.pop_unsafe();var xn=ir.ints.pop_unsafe();if(!Sn.virtualint&&!xn.virtualint){Sn.end.next.prev=xn.start.prev;xn.start.prev.next=Sn.end.next;Sn.end.next=xn.start;xn.start.prev=Sn.end;xn.end.next.prev=Sn.start.prev;Sn.start.prev.next=xn.end.next;xn.end.next=Sn.start;Sn.start.prev=xn.end;var Tn;if(Sn.path0==Sn.path0.parent)Tn=Sn.path0;else{var Nn=Sn.path0;var Cn=null;while(Nn!=Nn.parent){var kn=Nn.parent;Nn.parent=Cn;Cn=Nn;Nn=kn}while(Cn!=null){var Ln=Cn.parent;Cn.parent=Nn;Cn=Ln}Tn=Nn}var An;if(xn.path1==xn.path1.parent)An=xn.path1;else{var On=xn.path1;var Mn=null;while(On!=On.parent){var _n=On.parent;On.parent=Mn;Mn=On;On=_n}while(Mn!=null){var Dn=Mn.parent;Mn.parent=On;Mn=Dn}An=On}if(Tn!=An){if(Tn.rank<An.rank)Tn.parent=An;else if(Tn.rank>An.rank)An.parent=Tn;else{An.parent=Tn;Tn.rank++}}var Pn;if(Sn.path1==Sn.path1.parent)Pn=Sn.path1;else{var Hn=Sn.path1;var Bn=null;while(Hn!=Hn.parent){var jn=Hn.parent;Hn.parent=Bn;Bn=Hn;Hn=jn}while(Bn!=null){var Fn=Bn.parent;Bn.parent=Hn;Bn=Fn}Pn=Hn}var In;if(xn.path0==xn.path0.parent)In=xn.path0;else{var qn=xn.path0;var Rn=null;while(qn!=qn.parent){var Un=qn.parent;qn.parent=Rn;Rn=qn;qn=Un}while(Rn!=null){var zn=Rn.parent;Rn.parent=qn;Rn=zn}In=qn}if(Pn!=In){if(Pn.rank<In.rank)Pn.parent=In;else if(Pn.rank>In.rank)In.parent=Pn;else{In.parent=Pn;Pn.rank++}}}else if(Sn.virtualint&&!xn.virtualint){if(xn.end!=null&&xn.end.prev==xn.end){xn.end.next=xn.end.prev=null;var Wn=xn.end;if(Wn.wrap!=null){Wn.wrap.zpp_inner._inuse=false;Wn.wrap.dispose();Wn.wrap=null}Wn.prev=Wn.next=null;Wn.next=or.zpp_pool;or.zpp_pool=Wn;xn.end=null}else{var Xn=xn.end.prev;xn.end.prev.next=xn.end.next;xn.end.next.prev=xn.end.prev;xn.end.next=xn.end.prev=null;var Vn=xn.end;if(Vn.wrap!=null){Vn.wrap.zpp_inner._inuse=false;Vn.wrap.dispose();Vn.wrap=null}Vn.prev=Vn.next=null;Vn.next=or.zpp_pool;or.zpp_pool=Vn;xn.end=null;xn.end=Xn}if(!xn.vertex){if(xn.end!=xn.path0.vert){xn.start.x=xn.end.x;xn.start.y=xn.end.y;if(xn.end!=null&&xn.end.prev==xn.end){xn.end.next=xn.end.prev=null;var $n=xn.end;if($n.wrap!=null){$n.wrap.zpp_inner._inuse=false;$n.wrap.dispose();$n.wrap=null}$n.prev=$n.next=null;$n.next=or.zpp_pool;or.zpp_pool=$n;xn.end=null}else{var Jn=xn.end.prev;xn.end.prev.next=xn.end.next;xn.end.next.prev=xn.end.prev;xn.end.next=xn.end.prev=null;var Kn=xn.end;if(Kn.wrap!=null){Kn.wrap.zpp_inner._inuse=false;Kn.wrap.dispose();Kn.wrap=null}Kn.prev=Kn.next=null;Kn.next=or.zpp_pool;or.zpp_pool=Kn;xn.end=null;xn.end=Jn}}else{var Qn=xn.start.next;xn.start.x=Qn.x;xn.start.y=Qn.y;if(Qn!=null&&Qn.prev==Qn){Qn.next=Qn.prev=null;var Gn=Qn;if(Gn.wrap!=null){Gn.wrap.zpp_inner._inuse=false;Gn.wrap.dispose();Gn.wrap=null}Gn.prev=Gn.next=null;Gn.next=or.zpp_pool;or.zpp_pool=Gn;Qn=null}else{Qn.prev.next=Qn.next;Qn.next.prev=Qn.prev;Qn.next=Qn.prev=null;var Yn=Qn;if(Yn.wrap!=null){Yn.wrap.zpp_inner._inuse=false;Yn.wrap.dispose();Yn.wrap=null}Yn.prev=Yn.next=null;Yn.next=or.zpp_pool;or.zpp_pool=Yn}}}xn.end.next.prev=xn.start.prev;xn.start.prev.next=xn.end.next;xn.end.next=xn.start;xn.start.prev=xn.end;var Zn;if(xn.path0==xn.path0.parent)Zn=xn.path0;else{var er=xn.path0;var tr=null;while(er!=er.parent){var sr=er.parent;er.parent=tr;tr=er;er=sr}while(tr!=null){var ur=tr.parent;tr.parent=er;tr=ur}Zn=er}var ar;if(xn.path1==xn.path1.parent)ar=xn.path1;else{var fr=xn.path1;var lr=null;while(fr!=fr.parent){var cr=fr.parent;fr.parent=lr;lr=fr;fr=cr}while(lr!=null){var hr=lr.parent;lr.parent=fr;lr=hr}ar=fr}if(Zn!=ar){if(Zn.rank<ar.rank)Zn.parent=ar;else if(Zn.rank>ar.rank)ar.parent=Zn;else{ar.parent=Zn;Zn.rank++}}}else if(xn.virtualint&&!Sn.virtualint){if(Sn.end!=null&&Sn.end.prev==Sn.end){Sn.end.next=Sn.end.prev=null;var pr=Sn.end;if(pr.wrap!=null){pr.wrap.zpp_inner._inuse=false;pr.wrap.dispose();pr.wrap=null}pr.prev=pr.next=null;pr.next=or.zpp_pool;or.zpp_pool=pr;Sn.end=null}else{var dr=Sn.end.prev;Sn.end.prev.next=Sn.end.next;Sn.end.next.prev=Sn.end.prev;Sn.end.next=Sn.end.prev=null;var vr=Sn.end;if(vr.wrap!=null){vr.wrap.zpp_inner._inuse=false;vr.wrap.dispose();vr.wrap=null}vr.prev=vr.next=null;vr.next=or.zpp_pool;or.zpp_pool=vr;Sn.end=null;Sn.end=dr}if(!Sn.vertex){if(Sn.end!=Sn.path0.vert){Sn.start.x=Sn.end.x;Sn.start.y=Sn.end.y;if(Sn.end!=null&&Sn.end.prev==Sn.end){Sn.end.next=Sn.end.prev=null;var mr=Sn.end;if(mr.wrap!=null){mr.wrap.zpp_inner._inuse=false;mr.wrap.dispose();mr.wrap=null}mr.prev=mr.next=null;mr.next=or.zpp_pool;or.zpp_pool=mr;Sn.end=null}else{var gr=Sn.end.prev;Sn.end.prev.next=Sn.end.next;Sn.end.next.prev=Sn.end.prev;Sn.end.next=Sn.end.prev=null;var yr=Sn.end;if(yr.wrap!=null){yr.wrap.zpp_inner._inuse=false;yr.wrap.dispose();yr.wrap=null}yr.prev=yr.next=null;yr.next=or.zpp_pool;or.zpp_pool=yr;Sn.end=null;Sn.end=gr}}else{var br=Sn.start.next;Sn.start.x=br.x;Sn.start.y=br.y;if(br!=null&&br.prev==br){br.next=br.prev=null;var wr=br;if(wr.wrap!=null){wr.wrap.zpp_inner._inuse=false;wr.wrap.dispose();wr.wrap=null}wr.prev=wr.next=null;wr.next=or.zpp_pool;or.zpp_pool=wr;br=null}else{br.prev.next=br.next;br.next.prev=br.prev;br.next=br.prev=null;var Er=br;if(Er.wrap!=null){Er.wrap.zpp_inner._inuse=false;Er.wrap.dispose();Er.wrap=null}Er.prev=Er.next=null;Er.next=or.zpp_pool;or.zpp_pool=Er}}}Sn.end.next.prev=Sn.start.prev;Sn.start.prev.next=Sn.end.next;Sn.end.next=Sn.start;Sn.start.prev=Sn.end;var Sr;if(Sn.path0==Sn.path0.parent)Sr=Sn.path0;else{var xr=Sn.path0;var Tr=null;while(xr!=xr.parent){var Nr=xr.parent;xr.parent=Tr;Tr=xr;xr=Nr}while(Tr!=null){var Cr=Tr.parent;Tr.parent=xr;Tr=Cr}Sr=xr}var kr;if(Sn.path1==Sn.path1.parent)kr=Sn.path1;else{var Lr=Sn.path1;var Ar=null;while(Lr!=Lr.parent){var Or=Lr.parent;Lr.parent=Ar;Ar=Lr;Lr=Or}while(Ar!=null){var Mr=Ar.parent;Ar.parent=Lr;Ar=Mr}kr=Lr}if(Sr!=kr){if(Sr.rank<kr.rank)Sr.parent=kr;else if(Sr.rank>kr.rank)kr.parent=Sr;else{kr.parent=Sr;Sr.rank++}}}var _r=Sn;_r.end=_r.start=null;_r.path0=_r.path1=null;_r.next=rr.zpp_pool;rr.zpp_pool=_r;var Dr=xn;Dr.end=Dr.start=null;Dr.path0=Dr.path1=null;Dr.next=rr.zpp_pool;rr.zpp_pool=Dr}var Pr;if(s==null)Pr=new xt;else Pr=s;var Hr=ir.paths.head;while(Hr!=null){var Br=Hr.elt;var jr;if(Br==Br.parent)jr=Br;else{var Fr=Br;var Ir=null;while(Fr!=Fr.parent){var qr=Fr.parent;Fr.parent=Ir;Ir=Fr;Fr=qr}while(Ir!=null){var Rr=Ir.parent;Ir.parent=Fr;Ir=Rr}jr=Fr}if(jr.used){Hr=Hr.next;continue}jr.used=true;var Ur=jr.vert;var zr=true;while(jr.vert!=null&&(zr||Ur!=jr.vert)){zr=false;if(Ur.x==Ur.next.x&&Ur.y==Ur.next.y){if(Ur==jr.vert){if(Ur.next==Ur)jr.vert=null;else jr.vert=Ur.next;zr=true}if(Ur!=null&&Ur.prev==Ur){Ur.next=Ur.prev=null;Ur=Ur=null}else{var Wr=Ur.next;Ur.prev.next=Ur.next;Ur.next.prev=Ur.prev;Ur.next=Ur.prev=null;Ur=null;Ur=Wr}}else Ur=Ur.next}if(jr.vert!=null){var Xr=Et.get();Xr.zpp_inner.vertices=jr.vert;if(Pr.zpp_inner.reverse_flag)Pr.push(Xr);else Pr.unshift(Xr)}Hr=Hr.next}while(!(ir.paths.head==null)){var Vr=ir.paths.pop_unsafe();var $r=Vr;$r.vert=null;$r.parent=null;$r.next=nr.zpp_pool;nr.zpp_pool=$r}while(!(p==null))if(p!=null&&p.prev==p){p.next=p.prev=null;var Jr=p;Jr.vert=null;Jr.parent=null;Jr.next=nr.zpp_pool;nr.zpp_pool=Jr;p=p=null}else{var Kr=p.next;p.prev.next=p.next;p.next.prev=p.prev;p.next=p.prev=null;var Qr=p;Qr.vert=null;Qr.parent=null;Qr.next=nr.zpp_pool;nr.zpp_pool=Qr;p=null;p=Kr}return Pr};var sr=function(){};sr.__name__=true;sr.validateShape=function(e){if(e.type==1)e.polygon.validate_gaxi();if(e.zip_aabb){if(e.body!=null){e.zip_aabb=false;if(e.type==0)e.circle.__validate_aabb();else e.polygon.__validate_aabb()}}if(e.zip_worldCOM){if(e.body!=null){e.zip_worldCOM=false;if(e.zip_localCOM){e.zip_localCOM=false;if(e.type==1)e.polygon.__validate_localCOM();if(e.wrap_localCOM!=null){e.wrap_localCOM.zpp_inner.x=e.localCOMx;e.wrap_localCOM.zpp_inner.y=e.localCOMy}}e.body.validate_axis();e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy);e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}}};var or=function(){this.forced=false;this.wrap=null;this.next=null;this.prev=null;this.y=0;this.x=0};or.__name__=true;or.get=function(e,t){var n;if(or.zpp_pool==null)n=new or;else{n=or.zpp_pool;or.zpp_pool=n.next;n.next=null}n.forced=false;n.x=e;n.y=t;return n};or.prototype={free:function(){if(this.wrap!=null){this.wrap.zpp_inner._inuse=false;this.wrap.dispose();this.wrap=null}this.prev=this.next=null},alloc:function(){this.forced=false},wrapper:function(){if(this.wrap==null){this.wrap=_t.get(this.x,this.y,null);this.wrap.zpp_inner._inuse=true;this.wrap.zpp_inner._invalidate=Rs(this,this.modwrap);this.wrap.zpp_inner._validate=Rs(this,this.getwrap)}return this.wrap},modwrap:function(e){this.x=e.x;this.y=e.y},getwrap:function(){this.wrap.zpp_inner.x=this.x;this.wrap.zpp_inner.y=this.y},__class__:or};var ur=function(e){this.vertices=null;this.outer=null;this.outer=e};ur.__name__=true;ur.prototype={__class__:ur};var ar=function(){this.next=null;this.outer=null;this.forward=false;this.first=false;this.start=null;this.ptr=null;ar.internal=true;this.outer=new Tt;ar.internal=false};ar.__name__=true;ar.get=function(e,t){var n;if(ar.zpp_pool==null)n=new ar;else{n=ar.zpp_pool;ar.zpp_pool=n.next;n.next=null}null;n.outer.zpp_inner=n;n.ptr=e;n.forward=t;n.start=e;n.first=e!=null;return n.outer};ar.prototype={free:function(){this.outer.zpp_inner=null;this.ptr=this.start=null},alloc:function(){},__class__:ar};var fr=function(){this.next=null;this.out=false;this.rank=0;this.parent=null;this.parent=this};fr.__name__=true;fr.prototype={free:function(){this.parent=this},alloc:function(){this.out=false;this.rank=0},__class__:fr};var lr=function(){this.next=null;this.spanr=null;this.span2=null;this.span1=null;this.pd=null;this.okeyr=0;this.keyr=0;this.pr=null;this.okey2=0;this.key2=0;this.p2=null;this.okey1=0;this.key1=0;this.p1=null};lr.__name__=true;lr.prototype={free:function(){this.p1=this.p2=this.pr=this.pd=null;this.span1=this.span2=this.spanr=null},alloc:function(){},__class__:lr};var cr=function(){};cr.__name__=true;cr.run=function(e,t,n,r,i,s,o,u,a){var f;f=(r-t)/function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.x;return t}(this);var l=f|0;var c;c=(i-n)/function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.y;return t}(this);var h=c|0;if(f!=l)l++;if(c!=h)h++;if(u){if(cr.map==null)cr.map=new ni(l,h);else cr.map.resize(l,h,null)}if(cr.isos==null)cr.isos=new ei(l+1,h+1);else cr.isos.resize(l+1,h+1,0);var p=0;var d=h+1;while(p<d){var v=p++;var m;if(v==0)m=n;else if(v<=h)m=n+function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.y;return t}(this)*v;else m=i;var y=0;var b=l+1;while(y<b){var w=y++;var E;if(w==0)E=t;else if(w<=l)E=t+function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.x;return t}(this)*w;else E=r;cr.isos.set(w,v,e(E,m))}}if(cr.ints==null)cr.ints=new ti(l+1,(h<<1)+1);else cr.ints.resize(l+1,(h<<1)+1,null);var S=null;if(u){if(fr.zpp_pool==null)S=new fr;else{S=fr.zpp_pool;fr.zpp_pool=S.next;S.next=null}S.out=false;S.rank=0}var x=n;var T=0;while(T<h){var N=T++;var C=x;var k;if(N==h-1)k=i;else k=n+function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.y;return t}(this)*(N+1);x=k;var L=t;var A=null;var O=0;while(O<l){var M=O++;var _=L;var D;if(M==l-1)D=r;else D=t+function(e){var t;if(s!=null&&s.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");s.zpp_inner.validate();t=s.zpp_inner.x;return t}(this)*(M+1);L=D;var P=M==0||!u;var H=N==0||!u;var B=M==l-1||!u;var j=N==h-1||!u;var F=cr.me.marchSquare(e,cr.isos,cr.ints,_,C,D,k,M,N,P,H,B,j,o);if(F==null){A=null;continue}if(u){var I;if(F.p2!=null&&F.okey2!=14)I=F.p2;else I=F.p1;if(((I==F.p2?F.okey2:F.okey1)&128)==0)F.pd=I.prev;else F.pd=I.prev.prev;cr.map.set(M,N,F);if(A!=null&&cr.me.combLeft(F.key1)){cr.me.combLR(A,F);F.span1=A.spanr}else{if(fr.zpp_pool==null)F.span1=new fr;else{F.span1=fr.zpp_pool;fr.zpp_pool=F.span1.next;F.span1.next=null}F.span1.alloc();F.span1.next=S;S=F.span1}if(F.p2!=null){if(fr.zpp_pool==null)F.span2=new fr;else{F.span2=fr.zpp_pool;fr.zpp_pool=F.span2.next;F.span2.next=null}F.span2.alloc();F.span2.next=S;S=F.span2;F.spanr=F.span2}else F.spanr=F.span1;if(cr.me.combRight(F.keyr))A=F;else A=null}else{cr.me.output(a,F.p1);if(F.p2!=null)cr.me.output(a,F.p2);var q=F;q.p1=q.p2=q.pr=q.pd=null;q.span1=q.span2=q.spanr=null;q.next=lr.zpp_pool;lr.zpp_pool=q}}}if(!u)return;var R=1;while(R<h){var U=R++;var z=null;var W=0;while(W<l){var X=W++;var V=cr.map.get(X,U);if(V==null){z=null;continue}var $;if(V.p2!=null&&V.okey2==14)$=V.okey2;else $=V.okey1;if(!cr.me.combUp($)){z=null;continue}var J=cr.map.get(X,U-1);if(J==null){z=null;continue}var K;if(J.p2!=null&&J.okey2==56)K=J.okey2;else K=J.okey1;if(!cr.me.combDown(K)){z=null;continue}var Q;if(J.p2!=null&&J.okey2==56)Q=J.span2;else Q=J.span1;var G;if(V.p2!=null&&V.okey2==14)G=V.span2;else G=V.span1;if((Q==Q.parent?Q:function(e){var t;var n=Q;var r=null;while(n!=n.parent){var i=n.parent;n.parent=r;r=n;n=i}while(r!=null){var s=r.parent;r.parent=n;r=s}t=n;return t}(this))==(G==G.parent?G:function(e){var t;var n=G;var r=null;while(n!=n.parent){var i=n.parent;n.parent=r;r=n;n=i}while(r!=null){var s=r.parent;r.parent=n;r=s}t=n;return t}(this))){if(z!=G)cr.me.combUD_virtual(J,V)}else{var Y;if(Q==Q.parent)Y=Q;else{var Z=Q;var et=null;while(Z!=Z.parent){var tt=Z.parent;Z.parent=et;et=Z;Z=tt}while(et!=null){var nt=et.parent;et.parent=Z;et=nt}Y=Z}var rt;if(G==G.parent)rt=G;else{var it=G;var st=null;while(it!=it.parent){var ot=it.parent;it.parent=st;st=it;it=ot}while(st!=null){var ut=st.parent;st.parent=it;st=ut}rt=it}if(Y!=rt){if(Y.rank<rt.rank)Y.parent=rt;else if(Y.rank>rt.rank)rt.parent=Y;else{rt.parent=Y;Y.rank++}}cr.me.combUD(J,V)}var at;if(G==V.span2)at=V.okey2;else at=V.okey1;if((at&4)!=0)z=G;else z=null}}var ft=0;while(ft<h){var lt=ft++;var ct=0;while(ct<l){var ht=ct++;var pt=cr.map.get(ht,lt);if(pt==null)continue;var dt;if(pt.span1==pt.span1.parent)dt=pt.span1;else{var vt=pt.span1;var mt=null;while(vt!=vt.parent){var gt=vt.parent;vt.parent=mt;mt=vt;vt=gt}while(mt!=null){var yt=mt.parent;mt.parent=vt;mt=yt}dt=vt}if(!dt.out){dt.out=true;cr.me.output(a,pt.p1)}if(pt.p2!=null){if(pt.span2==pt.span2.parent)dt=pt.span2;else{var bt=pt.span2;var wt=null;while(bt!=bt.parent){var Et=bt.parent;bt.parent=wt;wt=bt;bt=Et}while(wt!=null){var St=wt.parent;wt.parent=bt;wt=St}dt=bt}if(!dt.out){dt.out=true;cr.me.output(a,pt.p2)}}var xt=pt;xt.p1=xt.p2=xt.pr=xt.pd=null;xt.span1=xt.span2=xt.spanr=null;xt.next=lr.zpp_pool;lr.zpp_pool=xt;cr.map.set(ht,lt,null)}}while(S!=null){var Tt=S;S=Tt.next;var Nt=Tt;Nt.parent=Nt;Nt.next=fr.zpp_pool;fr.zpp_pool=Nt}};cr.ISO=function(e,t,n){return e(t,n)};cr.prototype={output:function(e,t){if(t==null||t.next==t||t.next==t.prev?true:function(e){var n;var r;{var i=0;var s=t;var o=t;if(s!=null){var u=s;do{var a=u;i+=a.x*(a.next.y-a.prev.y);u=u.next}while(u!=o)}r=i*.5}n=r*r<N.epsilon*N.epsilon;return n}(this)){while(!(t==null))if(t!=null&&t.prev==t){t.next=t.prev=null;t=t=null}else{var n=t.next;t.prev.next=t.next;t.next.prev=t.prev;t.next=t.prev=null;t=null;t=n}return}var r=Et.get();r.zpp_inner.vertices=t;if(e.zpp_inner.reverse_flag)e.push(r);else e.unshift(r)},linkright:function(e,t){var n=t&7;if(n==0)return e;else if(n==3)return e.next.next;else return e.next},linkleft:function(e,t){if((t&1)==0)return e.prev;else return e},linkdown:function(e,t){if((t&128)==0)return e.prev;else return e.prev.prev},linkup:function(e,t){return e},combLR:function(e,t){var n=this.linkright(e.pr,e.okeyr);var r=this.linkleft(t.p1,t.okey1);var i=n.next;var s=r.prev;if((e.keyr&4)!=0){if(t.pr==t.p1)t.pr=n.prev;t.p1=n.prev;n.prev.next=r.next;r.next.prev=n.prev;var o=n;if(o.wrap!=null){o.wrap.zpp_inner._inuse=false;o.wrap.dispose();o.wrap=null}o.prev=o.next=null;o.next=or.zpp_pool;or.zpp_pool=o}else{n.next=r.next;r.next.prev=n}var u=r;if(u.wrap!=null){u.wrap.zpp_inner._inuse=false;u.wrap.dispose();u.wrap=null}u.prev=u.next=null;u.next=or.zpp_pool;or.zpp_pool=u;if((e.keyr&16)!=0){t.pd=i.next;i.next.prev=s.prev;s.prev.next=i.next;var a=i;if(a.wrap!=null){a.wrap.zpp_inner._inuse=false;a.wrap.dispose();a.wrap=null}a.prev=a.next=null;a.next=or.zpp_pool;or.zpp_pool=a}else{i.prev=s.prev;s.prev.next=i}var f=s;if(f.wrap!=null){f.wrap.zpp_inner._inuse=false;f.wrap.dispose();f.wrap=null}f.prev=f.next=null;f.next=or.zpp_pool;or.zpp_pool=f},combUD:function(e,t){var n;if(e.p2!=null&&e.key2==56)n=e.p2;else n=e.p1;var r;if(t.p2!=null&&t.key2==14)r=t.p2;else r=t.p1;var i=e.pd;var s=r;var o=i.prev;var u=s.next;s.next=i.next;i.next.prev=s;var a=i;if(a.wrap!=null){a.wrap.zpp_inner._inuse=false;a.wrap.dispose();a.wrap=null}a.prev=a.next=null;a.next=or.zpp_pool;or.zpp_pool=a;u.prev=o.prev;o.prev.next=u;if(o==e.p1)e.p1=u;var f=o;if(f.wrap!=null){f.wrap.zpp_inner._inuse=false;f.wrap.dispose();f.wrap=null}f.prev=f.next=null;f.next=or.zpp_pool;or.zpp_pool=f},combUD_virtual:function(e,t){var n;if(e.p2!=null&&e.key2==56)n=e.p2;else n=e.p1;var r;if(t.p2!=null&&t.key2==14)r=t.p2;else r=t.p1;var i=e.pd;var s=r;var o=i.prev;var u=s.next;i.forced=s.forced=o.forced=u.forced=true},combLeft:function(e){var t=e&1|(e&192)>>5;return this.comb(t)},combRight:function(e){var t=(e&28)>>2;return this.comb(t)},combUp:function(e){var t=e&7;return this.comb(t)},combDown:function(e){var t=(e&112)>>4;return this.comb(t)},comb:function(e){var t=0;if((e&1)!=0)t++;if((e&2)!=0)t++;if((e&4)!=0)t++;return t>=2},marchSquare:function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=0;var v=t.list[a*t.width+u];if(v<0)d|=8;var m=t.list[a*t.width+(u+1)];if(m<0)d|=4;var g=t.list[(a+1)*t.width+(u+1)];if(g<0)d|=2;var y=t.list[(a+1)*t.width+u];if(y<0)d|=1;if(d==0)return null;else{var b;if(lr.zpp_pool==null)b=new lr;else{b=lr.zpp_pool;lr.zpp_pool=b.next;b.next=null}null;if(d!=10&&d!=5){var w=cr.look_march[d];b.okey1=w;var E=0;while(E<8){var S=E++;if((w&1<<S)!=0){var x=null;if(S==0){x=or.get(r,i);if(f||l)x.forced=true}else if(S==2){x=or.get(s,i);if(c||l)x.forced=true}else if(S==4){x=or.get(s,o);if(c||h)x.forced=true}else if(S==6){x=or.get(r,o);if(f||h)x.forced=true}else if(S==1){x=n.list[(a<<1)*n.width+u];if(x==null){x=or.get(this.xlerp(r,s,i,v,m,e,p),i);n.list[(a<<1)*n.width+u]=x}else x=or.get(x.x,x.y);if(l)x.forced=true;if(x.x==r||x.x==s){if(x.x==r&&(w&1)!=0||x.x==s&&(w&4)!=0)w^=2}}else if(S==5){x=n.list[((a<<1)+2)*n.width+u];if(x==null){x=or.get(this.xlerp(r,s,o,y,g,e,p),o);n.list[((a<<1)+2)*n.width+u]=x}else x=or.get(x.x,x.y);if(h)x.forced=true;if(x.x==r||x.x==s){if(x.x==r&&(w&64)!=0||x.x==s&&(w&16)!=0)w^=32}}else if(S==3){x=n.list[((a<<1)+1)*n.width+(u+1)];if(x==null){x=or.get(s,this.ylerp(i,o,s,m,g,e,p));n.list[((a<<1)+1)*n.width+(u+1)]=x}else x=or.get(x.x,x.y);if(c)x.forced=true;if(x.y==i||x.y==o){if(x.y==i&&(w&4)!=0||x.y==o&&(w&16)!=0)w^=8}}else{x=n.list[((a<<1)+1)*n.width+u];if(x==null){x=or.get(r,this.ylerp(i,o,r,v,y,e,p));n.list[((a<<1)+1)*n.width+u]=x}else x=or.get(x.x,x.y);if(f)x.forced=true;if(x.y==i||x.y==o){if(x.y==i&&(w&1)!=0||x.y==o&&(w&64)!=0)w^=128}}var T=x;if(b.p1==null)b.p1=T.prev=T.next=T;else{T.prev=b.p1;T.next=b.p1.next;b.p1.next.prev=T;b.p1.next=T}b.p1=T}}b.p1=b.p1.next;b.key1=w;if(w==1||w==4||w==16||w==64||w==3||w==12||w==48||w==192||w==129||w==6||w==24||w==96||w==5||w==20||w==80||w==65||w==17||w==68){w=0;b.key1=0;b.p1=null}if(w==0)b=null;else{b.pr=b.p1;b.okeyr=b.okey1;b.keyr=b.key1}}else{var N=e(.5*(r+s),.5*(i+o))<0;if(d==10){if(N){var C=187;b.okey1=C;var k=0;while(k<8){var L=k++;if((C&1<<L)!=0){var A=null;if(L==0){A=or.get(r,i);if(f||l)A.forced=true}else if(L==2){A=or.get(s,i);if(c||l)A.forced=true}else if(L==4){A=or.get(s,o);if(c||h)A.forced=true}else if(L==6){A=or.get(r,o);if(f||h)A.forced=true}else if(L==1){A=n.list[(a<<1)*n.width+u];if(A==null){A=or.get(this.xlerp(r,s,i,v,m,e,p),i);n.list[(a<<1)*n.width+u]=A}else A=or.get(A.x,A.y);if(l)A.forced=true;if(A.x==r||A.x==s){if(A.x==r&&(C&1)!=0||A.x==s&&(C&4)!=0)C^=2}}else if(L==5){A=n.list[((a<<1)+2)*n.width+u];if(A==null){A=or.get(this.xlerp(r,s,o,y,g,e,p),o);n.list[((a<<1)+2)*n.width+u]=A}else A=or.get(A.x,A.y);if(h)A.forced=true;if(A.x==r||A.x==s){if(A.x==r&&(C&64)!=0||A.x==s&&(C&16)!=0)C^=32}}else if(L==3){A=n.list[((a<<1)+1)*n.width+(u+1)];if(A==null){A=or.get(s,this.ylerp(i,o,s,m,g,e,p));n.list[((a<<1)+1)*n.width+(u+1)]=A}else A=or.get(A.x,A.y);if(c)A.forced=true;if(A.y==i||A.y==o){if(A.y==i&&(C&4)!=0||A.y==o&&(C&16)!=0)C^=8}}else{A=n.list[((a<<1)+1)*n.width+u];if(A==null){A=or.get(r,this.ylerp(i,o,r,v,y,e,p));n.list[((a<<1)+1)*n.width+u]=A}else A=or.get(A.x,A.y);if(f)A.forced=true;if(A.y==i||A.y==o){if(A.y==i&&(C&1)!=0||A.y==o&&(C&64)!=0)C^=128}}var O=A;if(b.p1==null)b.p1=O.prev=O.next=O;else{O.prev=b.p1;O.next=b.p1.next;b.p1.next.prev=O;b.p1.next=O}b.p1=O}}b.p1=b.p1.next;b.key1=C;if(C==1||C==4||C==16||C==64||C==3||C==12||C==48||C==192||C==129||C==6||C==24||C==96||C==5||C==20||C==80||C==65||C==17||C==68){C=0;b.key1=0;b.p1=null}if(C==0)b=null;else{b.pr=b.p1;b.okeyr=b.okey1;b.keyr=b.key1}}else{var M=131;b.okey1=M;var _=0;while(_<8){var D=_++;if((M&1<<D)!=0){var P=null;if(D==0){P=or.get(r,i);if(f||l)P.forced=true}else if(D==2){P=or.get(s,i);if(c||l)P.forced=true}else if(D==4){P=or.get(s,o);if(c||h)P.forced=true}else if(D==6){P=or.get(r,o);if(f||h)P.forced=true}else if(D==1){P=n.list[(a<<1)*n.width+u];if(P==null){P=or.get(this.xlerp(r,s,i,v,m,e,p),i);n.list[(a<<1)*n.width+u]=P}else P=or.get(P.x,P.y);if(l)P.forced=true;if(P.x==r||P.x==s){if(P.x==r&&(M&1)!=0||P.x==s&&(M&4)!=0)M^=2}}else if(D==5){P=n.list[((a<<1)+2)*n.width+u];if(P==null){P=or.get(this.xlerp(r,s,o,y,g,e,p),o);n.list[((a<<1)+2)*n.width+u]=P}else P=or.get(P.x,P.y);if(h)P.forced=true;if(P.x==r||P.x==s){if(P.x==r&&(M&64)!=0||P.x==s&&(M&16)!=0)M^=32}}else if(D==3){P=n.list[((a<<1)+1)*n.width+(u+1)];if(P==null){P=or.get(s,this.ylerp(i,o,s,m,g,e,p));n.list[((a<<1)+1)*n.width+(u+1)]=P}else P=or.get(P.x,P.y);if(c)P.forced=true;if(P.y==i||P.y==o){if(P.y==i&&(M&4)!=0||P.y==o&&(M&16)!=0)M^=8}}else{P=n.list[((a<<1)+1)*n.width+u];if(P==null){P=or.get(r,this.ylerp(i,o,r,v,y,e,p));n.list[((a<<1)+1)*n.width+u]=P}else P=or.get(P.x,P.y);if(f)P.forced=true;if(P.y==i||P.y==o){if(P.y==i&&(M&1)!=0||P.y==o&&(M&64)!=0)M^=128}}var H=P;if(b.p1==null)b.p1=H.prev=H.next=H;else{H.prev=b.p1;H.next=b.p1.next;b.p1.next.prev=H;b.p1.next=H}b.p1=H}}b.p1=b.p1.next;b.key1=M;if(M==1||M==4||M==16||M==64||M==3||M==12||M==48||M==192||M==129||M==6||M==24||M==96||M==5||M==20||M==80||M==65||M==17||M==68){M=0;b.key1=0;b.p1=null}if(M!=0){var B=56;b.okey2=B;var j=0;while(j<8){var F=j++;if((B&1<<F)!=0){var I=null;if(F==0){I=or.get(r,i);if(f||l)I.forced=true}else if(F==2){I=or.get(s,i);if(c||l)I.forced=true}else if(F==4){I=or.get(s,o);if(c||h)I.forced=true}else if(F==6){I=or.get(r,o);if(f||h)I.forced=true}else if(F==1){I=n.list[(a<<1)*n.width+u];if(I==null){I=or.get(this.xlerp(r,s,i,v,m,e,p),i);n.list[(a<<1)*n.width+u]=I}else I=or.get(I.x,I.y);if(l)I.forced=true;if(I.x==r||I.x==s){if(I.x==r&&(B&1)!=0||I.x==s&&(B&4)!=0)B^=2}}else if(F==5){I=n.list[((a<<1)+2)*n.width+u];if(I==null){I=or.get(this.xlerp(r,s,o,y,g,e,p),o);n.list[((a<<1)+2)*n.width+u]=I}else I=or.get(I.x,I.y);if(h)I.forced=true;if(I.x==r||I.x==s){if(I.x==r&&(B&64)!=0||I.x==s&&(B&16)!=0)B^=32}}else if(F==3){I=n.list[((a<<1)+1)*n.width+(u+1)];if(I==null){I=or.get(s,this.ylerp(i,o,s,m,g,e,p));n.list[((a<<1)+1)*n.width+(u+1)]=I}else I=or.get(I.x,I.y);if(c)I.forced=true;if(I.y==i||I.y==o){if(I.y==i&&(B&4)!=0||I.y==o&&(B&16)!=0)B^=8}}else{I=n.list[((a<<1)+1)*n.width+u];if(I==null){I=or.get(r,this.ylerp(i,o,r,v,y,e,p));n.list[((a<<1)+1)*n.width+u]=I}else I=or.get(I.x,I.y);if(f)I.forced=true;if(I.y==i||I.y==o){if(I.y==i&&(B&1)!=0||I.y==o&&(B&64)!=0)B^=128}}var q=I;if(b.p2==null)b.p2=q.prev=q.next=q;else{q.prev=b.p2;q.next=b.p2.next;b.p2.next.prev=q;b.p2.next=q}b.p2=q}}b.p2=b.p2.next;b.key2=B;if(B==1||B==4||B==16||B==64||B==3||B==12||B==48||B==192||B==129||B==6||B==24||B==96||B==5||B==20||B==80||B==65||B==17||B==68){B=0;b.key2=0;b.p2=null}if(B==0){b.pr=b.p1;b.okeyr=b.okey1;b.keyr=b.key1}else{b.pr=b.p2;b.okeyr=b.okey2;b.keyr=b.key2}}else{var R=56;b.okey1=R;var U=0;while(U<8){var z=U++;if((R&1<<z)!=0){var W=null;if(z==0){W=or.get(r,i);if(f||l)W.forced=true}else if(z==2){W=or.get(s,i);if(c||l)W.forced=true}else if(z==4){W=or.get(s,o);if(c||h)W.forced=true}else if(z==6){W=or.get(r,o);if(f||h)W.forced=true}else if(z==1){W=n.list[(a<<1)*n.width+u];if(W==null){W=or.get(this.xlerp(r,s,i,v,m,e,p),i);n.list[(a<<1)*n.width+u]=W}else W=or.get(W.x,W.y);if(l)W.forced=true;if(W.x==r||W.x==s){if(W.x==r&&(R&1)!=0||W.x==s&&(R&4)!=0)R^=2}}else if(z==5){W=n.list[((a<<1)+2)*n.width+u];if(W==null){W=or.get(this.xlerp(r,s,o,y,g,e,p),o);n.list[((a<<1)+2)*n.width+u]=W}else W=or.get(W.x,W.y);if(h)W.forced=true;if(W.x==r||W.x==s){if(W.x==r&&(R&64)!=0||W.x==s&&(R&16)!=0)R^=32}}else if(z==3){W=n.list[((a<<1)+1)*n.width+(u+1)];if(W==null){W=or.get(s,this.ylerp(i,o,s,m,g,e,p));n.list[((a<<1)+1)*n.width+(u+1)]=W}else W=or.get(W.x,W.y);if(c)W.forced=true;if(W.y==i||W.y==o){if(W.y==i&&(R&4)!=0||W.y==o&&(R&16)!=0)R^=8}}else{W=n.list[((a<<1)+1)*n.width+u];if(W==null){W=or.get(r,this.ylerp(i,o,r,v,y,e,p));n.list[((a<<1)+1)*n.width+u]=W}else W=or.get(W.x,W.y);if(f)W.forced=true;if(W.y==i||W.y==o){if(W.y==i&&(R&1)!=0||W.y==o&&(R&64)!=0)R^=128}}var X=W;if(b.p1==null)b.p1=X.prev=X.next=X;else{X.prev=b.p1;X.next=b.p1.next;b.p1.next.prev=X;b.p1.next=X}b.p1=X}}b.p1=b.p1.next;b.key1=R;if(R==1||R==4||R==16||R==64||R==3||R==12||R==48||R==192||R==129||R==6||R==24||R==96||R==5||R==20||R==80||R==65||R==17||R==68){R=0;b.key1=0;b.p1=null}if(R==0)b=null;else{b.pr=b.p1;b.okeyr=b.okey1;b.keyr=b.key1}}}}else if(N){var V=238;b.okey1=V;var $=0;while($<8){var J=$++;if((V&1<<J)!=0){var K=null;if(J==0){K=or.get(r,i);if(f||l)K.forced=true}else if(J==2){K=or.get(s,i);if(c||l)K.forced=true}else if(J==4){K=or.get(s,o);if(c||h)K.forced=true}else if(J==6){K=or.get(r,o);if(f||h)K.forced=true}else if(J==1){K=n.list[(a<<1)*n.width+u];if(K==null){K=or.get(this.xlerp(r,s,i,v,m,e,p),i);n.list[(a<<1)*n.width+u]=K}else K=or.get(K.x,K.y);if(l)K.forced=true;if(K.x==r||K.x==s){if(K.x==r&&(V&1)!=0||K.x==s&&(V&4)!=0)V^=2}}else if(J==5){K=n.list[((a<<1)+2)*n.width+u];if(K==null){K=or.get(this.xlerp(r,s,o,y,g,e,p),o);n.list[((a<<1)+2)*n.width+u]=K}else K=or.get(K.x,K.y);if(h)K.forced=true;if(K.x==r||K.x==s){if(K.x==r&&(V&64)!=0||K.x==s&&(V&16)!=0)V^=32}}else if(J==3){K=n.list[((a<<1)+1)*n.width+(u+1)];if(K==null){K=or.get(s,this.ylerp(i,o,s,m,g,e,p));n.list[((a<<1)+1)*n.width+(u+1)]=K}else K=or.get(K.x,K.y);if(c)K.forced=true;if(K.y==i||K.y==o){if(K.y==i&&(V&4)!=0||K.y==o&&(V&16)!=0)V^=8}}else{K=n.list[((a<<1)+1)*n.width+u];if(K==null){K=or.get(r,this.ylerp(i,o,r,v,y,e,p));n.list[((a<<1)+1)*n.width+u]=K}else K=or.get(K.x,K.y);if(f)K.forced=true;if(K.y==i||K.y==o){if(K.y==i&&(V&1)!=0||K.y==o&&(V&64)!=0)V^=128}}var Q=K;if(b.p1==null)b.p1=Q.prev=Q.next=Q;else{Q.prev=b.p1;Q.next=b.p1.next;b.p1.next.prev=Q;b.p1.next=Q}b.p1=Q}}b.p1=b.p1.next;b.key1=V;if(V==1||V==4||V==16||V==64||V==3||V==12||V==48||V==192||V==129||V==6||V==24||V==96||V==5||V==20||V==80||V==65||V==17||V==68){V=0;b.key1=0;b.p1=null}if(V==0)b=null;else{b.pr=b.p1;b.okeyr=b.okey1;b.keyr=b.key1}}else{var G=224;b.okey1=G;var Y=0;while(Y<8){var Z=Y++;if((G&1<<Z)!=0){var et=null;if(Z==0){et=or.get(r,i);if(f||l)et.forced=true}else if(Z==2){et=or.get(s,i);if(c||l)et.forced=true}else if(Z==4){et=or.get(s,o);if(c||h)et.forced=true}else if(Z==6){et=or.get(r,o);if(f||h)et.forced=true}else if(Z==1){et=n.list[(a<<1)*n.width+u];if(et==null){et=or.get(this.xlerp(r,s,i,v,m,e,p),i);n.list[(a<<1)*n.width+u]=et}else et=or.get(et.x,et.y);if(l)et.forced=true;if(et.x==r||et.x==s){if(et.x==r&&(G&1)!=0||et.x==s&&(G&4)!=0)G^=2}}else if(Z==5){et=n.list[((a<<1)+2)*n.width+u];if(et==null){et=or.get(this.xlerp(r,s,o,y,g,e,p),o);n.list[((a<<1)+2)*n.width+u]=et}else et=or.get(et.x,et.y);if(h)et.forced=true;if(et.x==r||et.x==s){if(et.x==r&&(G&64)!=0||et.x==s&&(G&16)!=0)G^=32}}else if(Z==3){et=n.list[((a<<1)+1)*n.width+(u+1)];if(et==null){et=or.get(s,this.ylerp(i,o,s,m,g,e,p));n.list[((a<<1)+1)*n.width+(u+1)]=et}else et=or.get(et.x,et.y);if(c)et.forced=true;if(et.y==i||et.y==o){if(et.y==i&&(G&4)!=0||et.y==o&&(G&16)!=0)G^=8}}else{et=n.list[((a<<1)+1)*n.width+u];if(et==null){et=or.get(r,this.ylerp(i,o,r,v,y,e,p));n.list[((a<<1)+1)*n.width+u]=et}else et=or.get(et.x,et.y);if(f)et.forced=true;if(et.y==i||et.y==o){if(et.y==i&&(G&1)!=0||et.y==o&&(G&64)!=0)G^=128}}var tt=et;if(b.p1==null)b.p1=tt.prev=tt.next=tt;else{tt.prev=b.p1;tt.next=b.p1.next;b.p1.next.prev=tt;b.p1.next=tt}b.p1=tt}}b.p1=b.p1.next;b.key1=G;if(G==1||G==4||G==16||G==64||G==3||G==12||G==48||G==192||G==129||G==6||G==24||G==96||G==5||G==20||G==80||G==65||G==17||G==68){G=0;b.key1=0;b.p1=null}if(G!=0){var nt=14;b.okey2=nt;var rt=0;while(rt<8){var it=rt++;if((nt&1<<it)!=0){var st=null;if(it==0){st=or.get(r,i);if(f||l)st.forced=true}else if(it==2){st=or.get(s,i);if(c||l)st.forced=true}else if(it==4){st=or.get(s,o);if(c||h)st.forced=true}else if(it==6){st=or.get(r,o);if(f||h)st.forced=true}else if(it==1){st=n.list[(a<<1)*n.width+u];if(st==null){st=or.get(this.xlerp(r,s,i,v,m,e,p),i);n.list[(a<<1)*n.width+u]=st}else st=or.get(st.x,st.y);if(l)st.forced=true;if(st.x==r||st.x==s){if(st.x==r&&(nt&1)!=0||st.x==s&&(nt&4)!=0)nt^=2}}else if(it==5){st=n.list[((a<<1)+2)*n.width+u];if(st==null){st=or.get(this.xlerp(r,s,o,y,g,e,p),o);n.list[((a<<1)+2)*n.width+u]=st}else st=or.get(st.x,st.y);if(h)st.forced=true;if(st.x==r||st.x==s){if(st.x==r&&(nt&64)!=0||st.x==s&&(nt&16)!=0)nt^=32}}else if(it==3){st=n.list[((a<<1)+1)*n.width+(u+1)];if(st==null){st=or.get(s,this.ylerp(i,o,s,m,g,e,p));n.list[((a<<1)+1)*n.width+(u+1)]=st}else st=or.get(st.x,st.y);if(c)st.forced=true;if(st.y==i||st.y==o){if(st.y==i&&(nt&4)!=0||st.y==o&&(nt&16)!=0)nt^=8}}else{st=n.list[((a<<1)+1)*n.width+u];if(st==null){st=or.get(r,this.ylerp(i,o,r,v,y,e,p));n.list[((a<<1)+1)*n.width+u]=st}else st=or.get(st.x,st.y);if(f)st.forced=true;if(st.y==i||st.y==o){if(st.y==i&&(nt&1)!=0||st.y==o&&(nt&64)!=0)nt^=128}}var ot=st;if(b.p2==null)b.p2=ot.prev=ot.next=ot;else{ot.prev=b.p2;ot.next=b.p2.next;b.p2.next.prev=ot;b.p2.next=ot}b.p2=ot}}b.p2=b.p2.next;b.key2=nt;if(nt==1||nt==4||nt==16||nt==64||nt==3||nt==12||nt==48||nt==192||nt==129||nt==6||nt==24||nt==96||nt==5||nt==20||nt==80||nt==65||nt==17||nt==68){nt=0;b.key2=0;b.p2=null}if(nt==0){b.pr=b.p1;b.okeyr=b.okey1;b.keyr=b.key1}else{b.pr=b.p2;b.okeyr=b.okey2;b.keyr=b.key2}}else{var ut=14;b.okey1=ut;var at=0;while(at<8){var ft=at++;if((ut&1<<ft)!=0){var lt=null;if(ft==0){lt=or.get(r,i);if(f||l)lt.forced=true}else if(ft==2){lt=or.get(s,i);if(c||l)lt.forced=true}else if(ft==4){lt=or.get(s,o);if(c||h)lt.forced=true}else if(ft==6){lt=or.get(r,o);if(f||h)lt.forced=true}else if(ft==1){lt=n.list[(a<<1)*n.width+u];if(lt==null){lt=or.get(this.xlerp(r,s,i,v,m,e,p),i);n.list[(a<<1)*n.width+u]=lt}else lt=or.get(lt.x,lt.y);if(l)lt.forced=true;if(lt.x==r||lt.x==s){if(lt.x==r&&(ut&1)!=0||lt.x==s&&(ut&4)!=0)ut^=2}}else if(ft==5){lt=n.list[((a<<1)+2)*n.width+u];if(lt==null){lt=or.get(this.xlerp(r,s,o,y,g,e,p),o);n.list[((a<<1)+2)*n.width+u]=lt}else lt=or.get(lt.x,lt.y);if(h)lt.forced=true;if(lt.x==r||lt.x==s){if(lt.x==r&&(ut&64)!=0||lt.x==s&&(ut&16)!=0)ut^=32}}else if(ft==3){lt=n.list[((a<<1)+1)*n.width+(u+1)];if(lt==null){lt=or.get(s,this.ylerp(i,o,s,m,g,e,p));n.list[((a<<1)+1)*n.width+(u+1)]=lt}else lt=or.get(lt.x,lt.y);if(c)lt.forced=true;if(lt.y==i||lt.y==o){if(lt.y==i&&(ut&4)!=0||lt.y==o&&(ut&16)!=0)ut^=8}}else{lt=n.list[((a<<1)+1)*n.width+u];if(lt==null){lt=or.get(r,this.ylerp(i,o,r,v,y,e,p));n.list[((a<<1)+1)*n.width+u]=lt}else lt=or.get(lt.x,lt.y);if(f)lt.forced=true;if(lt.y==i||lt.y==o){if(lt.y==i&&(ut&1)!=0||lt.y==o&&(ut&64)!=0)ut^=128}}var ct=lt;if(b.p1==null)b.p1=ct.prev=ct.next=ct;else{ct.prev=b.p1;ct.next=b.p1.next;b.p1.next.prev=ct;b.p1.next=ct}b.p1=ct}}b.p1=b.p1.next;b.key1=ut;if(ut==1||ut==4||ut==16||ut==64||ut==3||ut==12||ut==48||ut==192||ut==129||ut==6||ut==24||ut==96||ut==5||ut==20||ut==80||ut==65||ut==17||ut==68){ut=0;b.key1=0;b.p1=null}if(ut==0)b=null;else{b.pr=b.p1;b.okeyr=b.okey1;b.keyr=b.key1}}}}return b}},lerp:function(e,t,n,r){if(n==0)return e;else if(r==0)return t;else{var i=n-r;var s;if(i*i<N.epsilon*N.epsilon)s=.5;else s=n/i;if(s<0)s=0;else if(s>1)s=1;return e+s*(t-e)}},xlerp:function(e,t,n,r,i,s,o){var u=this.lerp(e,t,r,i);while(o--!=0&&e<u&&u<t){var a=s(u,n);if(a==0)break;if(r*a<0){t=u;i=a}else{e=u;r=a}u=this.lerp(e,t,r,i)}return u},ylerp:function(e,t,n,r,i,s,o){var u=this.lerp(e,t,r,i);while(o--!=0&&e<u&&u<t){var a=s(n,u);if(a==0)break;if(r*a<0){t=u;i=a}else{e=u;r=a}u=this.lerp(e,t,r,i)}return u},__class__:cr};var hr=function(){this.next=null;this._invalidate=null;this.ty=0;this.tx=0;this.d=0;this.c=0;this.b=0;this.a=0;this.outer=null};hr.__name__=true;hr.get=function(){var e;if(hr.zpp_pool==null)e=new hr;else{e=hr.zpp_pool;hr.zpp_pool=e.next;e.next=null}null;return e};hr.identity=function(){var e=hr.get();e.setas(1,0,0,1,0,0);return e};hr.prototype={wrapper:function(){if(this.outer==null){this.outer=new Ct;var e=this.outer.zpp_inner;e.next=hr.zpp_pool;hr.zpp_pool=e;this.outer.zpp_inner=this}return this.outer},invalidate:function(){if(this._invalidate!=null)this._invalidate()},set:function(e){this.setas(e.a,e.b,e.c,e.d,e.tx,e.ty)},setas:function(e,t,n,r,i,s){this.tx=i;this.ty=s;this.a=e;this.b=t;this.c=n;this.d=r},free:function(){},alloc:function(){},__class__:hr};var pr=function(e,t){this.x=null;this.n=0;this.m=0;this.outer=null;this.m=e;this.n=t;this.x=[];var n=0;var r=e*t;while(n<r){var i=n++;this.x.push(0)}};pr.__name__=true;pr.prototype={__class__:pr};var dr=function(){};dr.__name__=true;dr.bisector=function(e){var t=e.prev;var n=e.next;var r=0;var i=0;r=e.x-t.x;i=e.y-t.y;var s=0;var o=0;s=n.x-e.x;o=n.y-e.y;var u=Or.get(-i-o,r+s,null);var a=u.x*u.x+u.y*u.y;var f=1/Math.sqrt(a);var l=f;u.x*=l;u.y*=l;if(o*r-s*i<0){u.x=-u.x;u.y=-u.y}return u};dr.below=function(e,t){if(e.y<t.y)return true;else if(e.y>t.y)return false;else if(e.x<t.x)return true;else if(e.x>t.x)return false;else{var n=dr.bisector(e);var r=dr.bisector(t);var i=1;n.x+=e.x*i;n.y+=e.y*i;var s=1;r.x+=t.x*s;r.y+=t.y*s;var o=n.x<r.x||n.x==r.x&&n.y<r.y;var u=n;if(u.outer!=null){u.outer.zpp_inner=null;u.outer=null}u._isimmutable=null;u._validate=null;u._invalidate=null;u.next=Or.zpp_pool;Or.zpp_pool=u;var a=r;if(a.outer!=null){a.outer.zpp_inner=null;a.outer=null}a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=Or.zpp_pool;Or.zpp_pool=a;return o}};dr.above=function(e,t){return dr.below(t,e)};dr.left_vertex=function(e){var t=e.prev;return t.y>e.y||t.y==e.y&&e.next.y<e.y};dr.isMonotone=function(e){var t=e;var n=e;var r=e.next;var i=e;if(r!=null){var s=r;do{var o=s;if(o.y<t.y)t=o;if(o.y>n.y)n=o;s=s.next}while(s!=i)}var u=true;var a=t;if(n!=t.next){var f=t.next;var l=n;if(f!=null){var c=f;do{var h=c;if(h.y<a.y){u=false;break}a=h;c=c.next}while(c!=l)}}if(!u)return false;a=t;if(n!=t.prev){var p=t.prev;var d=n;if(p!=null){var v=p;do{var m=v;if(m.y<a.y){u=false;break}a=m;v=v.prev}while(v!=d)}}return u};dr.getShared=function(){if(dr.sharedPPoly==null)dr.sharedPPoly=new mr;return dr.sharedPPoly};dr.decompose=function(e,t){if(t==null)t=new mr(e);else t.init(e);if(t.vertices==null)return t;if(dr.queue==null)dr.queue=new pi;var n=t.vertices;var r=t.vertices;if(n!=null){var i=n;do{var s=i;dr.queue.add(s);var o=0;var u=0;o=s.next.x-s.x;u=s.next.y-s.y;var a=0;var f=0;a=s.prev.x-s.x;f=s.prev.y-s.y;var l=f*o-a*u>0;if(dr.below(s.prev,s)){if(dr.below(s.next,s)){if(l)s.type=0;else s.type=3}else s.type=4}else if(dr.below(s,s.next)){if(l)s.type=1;else s.type=2}else s.type=4;i=i.next}while(i!=r)}var c=dr.queue;if(!(c.head==null)&&c.head.next!=null){var h=c.head;var p=null;var d=null;var v=null;var m=null;var y=1;var b;var w;var E;do{b=0;d=h;p=h=null;while(d!=null){b++;v=d;w=0;E=y;while(v!=null&&w<y){w++;v=v.next}while(w>0||E>0&&v!=null){if(w==0){m=v;v=v.next;E--}else if(E==0||v==null){m=d;d=d.next;w--}else if(dr.above(d.elt,v.elt)){m=d;d=d.next;w--}else{m=v;v=v.next;E--}if(p!=null)p.next=m;else h=m;p=m}d=v}p.next=null;y<<=1}while(b>1);c.head=h;c.modified=true;c.pushmod=true}if(dr.edges==null){if(Ds.zpp_pool==null)dr.edges=new Ds;else{dr.edges=Ds.zpp_pool;Ds.zpp_pool=dr.edges.next;dr.edges.next=null}null;dr.edges.lt=vr.edge_lt;dr.edges.swapped=vr.edge_swap}while(!(dr.queue.head==null)){var S=dr.queue.pop_unsafe();var x=S.type;switch(x){case 0:S.helper=S;S.node=dr.edges.insert(S);break;case 1:var T=S.prev;if(T.helper==null)throw new g("Fatal error (1): Polygon is not weakly-simple and clockwise");if(T.helper.type==2)t.add_diagonal(S,T.helper);dr.edges.remove_node(T.node);T.helper=null;break;case 3:var N;var C=null;if(!dr.edges.empty()){var k=dr.edges.parent;while(k.prev!=null)k=k.prev;while(k!=null){var L=k.data;if(!vr.vert_lt(L,S)){C=L;break}if(k.next!=null){k=k.next;while(k.prev!=null)k=k.prev}else{while(k.parent!=null&&k==k.parent.next)k=k.parent;k=k.parent}}}N=C;if(N!=null){if(N.helper==null)throw new g("Fatal error (2): Polygon is not weakly-simple and clockwise");t.add_diagonal(S,N.helper);N.helper=S}S.node=dr.edges.insert(S);S.helper=S;break;case 2:var A=S.prev;if(A.helper==null)throw new g("Fatal error (3): Polygon is not weakly-simple and clockwise");if(A.helper.type==2)t.add_diagonal(S,A.helper);dr.edges.remove_node(A.node);A.helper=null;var O;var M=null;if(!dr.edges.empty()){var _=dr.edges.parent;while(_.prev!=null)_=_.prev;while(_!=null){var D=_.data;if(!vr.vert_lt(D,S)){M=D;break}if(_.next!=null){_=_.next;while(_.prev!=null)_=_.prev}else{while(_.parent!=null&&_==_.parent.next)_=_.parent;_=_.parent}}}O=M;if(O!=null){if(O.helper==null)throw new g("Fatal error (4): Polygon is not weakly-simple and clockwise");if(O.helper.type==2)t.add_diagonal(S,O.helper);O.helper=S}break;case 4:var P=S.prev;if(dr.left_vertex(S)){if(P.helper==null)throw new g("Fatal error (5): Polygon is not weakly-simple and clockwise");if(P.helper.type==2)t.add_diagonal(S,P.helper);dr.edges.remove_node(P.node);P.helper=null;S.node=dr.edges.insert(S);S.helper=S}else{var H;var B=null;if(!dr.edges.empty()){var j=dr.edges.parent;while(j.prev!=null)j=j.prev;while(j!=null){var F=j.data;if(!vr.vert_lt(F,S)){B=F;break}if(j.next!=null){j=j.next;while(j.prev!=null)j=j.prev}else{while(j.parent!=null&&j==j.parent.next)j=j.parent;j=j.parent}}}H=B;if(H==null||H.helper==null)throw new g("Fatal error (6): Polygon is not weakly-simple and clockwise");if(H.helper.type==2)t.add_diagonal(S,H.helper);H.helper=S}break}}return t};var vr=function(){this.node=null;this.prev=null;this.next=null;this.rightchain=false;this.helper=null;this.type=0;this.diagonals=null;this.forced=false;this.y=0;this.x=0;this.mag=0;this.id=0;this.id=vr.nextId++;this.diagonals=new pi};vr.__name__=true;vr.get=function(e){var t;if(vr.zpp_pool==null)t=new vr;else{t=vr.zpp_pool;vr.zpp_pool=t.next;t.next=null}null;t.x=e.x;t.y=e.y;return t};vr.rightdistance=function(e,t){var n=e.next.y>e.y;var r=0;var i=0;r=e.next.x-e.x;i=e.next.y-e.y;var s=0;var o=0;s=t.x-e.x;o=t.y-e.y;return(n?-1:1)*(o*r-s*i)};vr.vert_lt=function(e,t){if(t==e||t==e.next)return true;else if(e.y==e.next.y)return function(t){var n;var r=e.x;var i=e.next.x;n=r<i?r:i;return n}(this)<=t.x;else return vr.rightdistance(e,t)<=0};vr.edge_swap=function(e,t){var n=e.node;e.node=t.node;t.node=n};vr.edge_lt=function(e,t){if(e==t&&e.next==t.next)return false;if(e==t.next)return!vr.vert_lt(e,t);else if(t==e.next)return vr.vert_lt(t,e);else if(e.y==e.next.y)if(t.y==t.next.y)return function(t){var n;var r=e.x;var i=e.next.x;n=r>i?r:i;return n}(this)>function(e){var n;var r=t.x;var i=t.next.x;n=r>i?r:i;return n}(this);else return vr.rightdistance(t,e)>0||vr.rightdistance(t,e.next)>0;else{var n=vr.rightdistance(e,t);var r=vr.rightdistance(e,t.next);if(n==0&&r==0)return function(t){var n;var r=e.x;var i=e.next.x;n=r>i?r:i;return n}(this)>function(e){var n;var r=t.x;var i=t.next.x;n=r>i?r:i;return n}(this);if(n*r>=0)return n<0||r<0;var i=vr.rightdistance(t,e);var s=vr.rightdistance(t,e.next);if(i*s>=0)return i>0||s>0;return false}};vr.prototype={alloc:function(){},free:function(){this.helper=null},copy:function(){var e;if(vr.zpp_pool==null)e=new vr;else{e=vr.zpp_pool;vr.zpp_pool=e.next;e.next=null}null;e.x=this.x;e.y=this.y;e.forced=this.forced;return e},sort:function(){var e=0;var t=0;var n=0;var r=0;var i;e=this.prev.x-this.x;t=this.prev.y-this.y;n=this.next.x-this.x;r=this.next.y-this.y;var s=r*e-n*t;if(s>0)i=-1;else if(s==0)i=0;else i=1;var o=this.diagonals;if(!(o.head==null)&&o.head.next!=null){var u=o.head;var a=null;var f=null;var l=null;var c=null;var h=1;var p;var d;var v;do{p=0;f=u;a=u=null;while(f!=null){p++;l=f;d=0;v=h;while(l!=null&&d<h){d++;l=l.next}while(d>0||v>0&&l!=null){if(d==0){c=l;l=l.next;v--}else if(v==0||l==null){c=f;f=f.next;d--}else if(i==1?function(i){var s;{e=f.elt.x-i.x;t=f.elt.y-i.y}{n=l.elt.x-i.x;r=l.elt.y-i.y}var o=r*e-n*t;s=o>0?-1:o==0?0:1;return s}(this)==1:function(i){var s;var o;{e=i.prev.x-i.x;t=i.prev.y-i.y;n=f.elt.x-i.x;r=f.elt.y-i.y;var u=r*e-n*t;if(u>0)o=-1;else if(u==0)o=0;else o=1}var a;{e=i.prev.x-i.x;t=i.prev.y-i.y;n=l.elt.x-i.x;r=l.elt.y-i.y;var c=r*e-n*t;if(c>0)a=-1;else if(c==0)a=0;else a=1}s=o*a==1||o*a==0&&(o==1||a==1)?function(i){var s;{e=f.elt.x-i.x;t=f.elt.y-i.y}{n=l.elt.x-i.x;r=l.elt.y-i.y}var o=r*e-n*t;s=o>0?-1:o==0?0:1;return s}(i)==1:o==-1||a==-1?a==-1:o==0&&a==0?function(i){var s;{e=i.x-i.prev.x;t=i.y-i.prev.y}{n=f.elt.x-i.x;r=f.elt.y-i.y}var o=e*n+t*r;{n=l.elt.x-i.x;r=l.elt.y-i.y}var u=e*n+t*r;s=o<0&&u>0?true:u<0&&o>0?false:true;return s}(i):true;return s}(this)){c=f;f=f.next;d--}else{c=l;l=l.next;v--}if(a!=null)a.next=c;else u=c;a=c}f=l}a.next=null;h<<=1}while(p>1);o.head=u;o.modified=true;o.pushmod=true}},__class__:vr};var mr=function(e){this.next=null;this.vertices=null;this.init(e)};mr.__name__=true;mr.getSharedPP=function(){if(mr.sharedPPList==null)mr.sharedPPList=new vi;return mr.sharedPPList};mr.getShared=function(){if(mr.sharedGVList==null)mr.sharedGVList=new mi;return mr.sharedGVList};mr.prototype={eq:function(e,t){return _r.vec_dsq(e.x,e.y,t.x,t.y)<N.epsilon*N.epsilon},alloc:function(){},free:function(){},init:function(e){if(e==null)return;var t;t=function(t){var n;var r=0;{var i=e;var s=e;if(i!=null){var o=i;do{var u=o;r+=u.x*(u.next.y-u.prev.y);o=o.next}while(o!=s)}}n=r*.5;return n}(this)>0;var n=e;do{if(t){var r=vr.get(n);if(this.vertices==null)this.vertices=r.prev=r.next=r;else{r.prev=this.vertices;r.next=this.vertices.next;this.vertices.next.prev=r;this.vertices.next=r}this.vertices=r}else{var i=vr.get(n);if(this.vertices==null)this.vertices=i.prev=i.next=i;else{i.next=this.vertices;i.prev=this.vertices.prev;this.vertices.prev.next=i;this.vertices.prev=i}this.vertices=i}this.vertices.forced=n.forced;n=n.next}while(n!=e);this.remove_collinear_vertices()},remove_collinear_vertices:function(){var e=this.vertices;var t=true;while(t||e!=this.vertices){t=false;if(this.eq(e,e.next)){if(e==this.vertices){this.vertices=e.next;t=true}if(e.forced)e.next.forced=true;if(e!=null&&e.prev==e){e.next=e.prev=null;var n=e;n.helper=null;null;n.next=vr.zpp_pool;vr.zpp_pool=n;e=e=null}else{var r=e.next;e.prev.next=e.next;e.next.prev=e.prev;e.next=e.prev=null;var i=e;i.helper=null;null;i.next=vr.zpp_pool;vr.zpp_pool=i;e=null;e=r}if(e==null){this.vertices=null;break}}else e=e.next}if(this.vertices==null)return true;var s;do{s=false;e=this.vertices;t=true;while(t||e!=this.vertices){t=false;var o=e.prev;var u=0;var a=0;u=e.x-o.x;a=e.y-o.y;var f=0;var l=0;f=e.next.x-e.x;l=e.next.y-e.y;var c=l*u-f*a;if(c*c>=N.epsilon*N.epsilon)e=e.next;else{if(e==this.vertices){this.vertices=e.next;t=true}if(e!=null&&e.prev==e){e.next=e.prev=null;var h=e;h.helper=null;null;h.next=vr.zpp_pool;vr.zpp_pool=h;e=e=null}else{var p=e.next;e.prev.next=e.next;e.next.prev=e.prev;e.next=e.prev=null;var d=e;d.helper=null;null;d.next=vr.zpp_pool;vr.zpp_pool=d;e=null;e=p}s=true;if(e==null){s=false;this.vertices=null;break}}}}while(s);return this.vertices==null},add_diagonal:function(e,t){e.diagonals.add(t);t.diagonals.add(e);e.forced=t.forced=true},extract_partitions:function(e){if(e==null)e=new vi;if(this.vertices!=null){var t=this.vertices;var n=this.vertices;if(t!=null){var r=t;do{var i=r;i.sort();r=r.next}while(r!=n)}this.pull_partitions(this.vertices,e);while(!(this.vertices==null))if(this.vertices!=null&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var s=this.vertices;s.helper=null;null;s.next=vr.zpp_pool;vr.zpp_pool=s;this.vertices=this.vertices=null}else{var o=this.vertices.next;this.vertices.prev.next=this.vertices.next;this.vertices.next.prev=this.vertices.prev;this.vertices.next=this.vertices.prev=null;var u=this.vertices;u.helper=null;null;u.next=vr.zpp_pool;vr.zpp_pool=u;this.vertices=null;this.vertices=o}var a=null;var f=e.head;while(f!=null){var l=f.elt;if(l.remove_collinear_vertices()){e.erase(a);continue}a=f;f=f.next}}return e},pull_partitions:function(e,t){var n;if(mr.zpp_pool==null)n=new mr;else{n=mr.zpp_pool;mr.zpp_pool=n.next;n.next=null}null;var r=e;do{var i=r.copy();if(n.vertices==null)n.vertices=i.prev=i.next=i;else{i.prev=n.vertices;i.next=n.vertices.next;n.vertices.next.prev=i;n.vertices.next=i}n.vertices=i;n.vertices.forced=r.forced;if(!(r.diagonals.head==null)){var s=r.diagonals.inlined_pop_unsafe();if(s==e)break;else r=this.pull_partitions(r,t)}else r=r.next}while(r!=e);if(function(e){var t;var r=0;{var i=n.vertices;var s=n.vertices;if(i!=null){var o=i;do{var u=o;r+=u.x*(u.next.y-u.prev.y);o=o.next}while(o!=s)}}t=r*.5;return t}(this)!=0)t.add(n);return r},extract:function(e){if(e==null)e=new mi;if(this.vertices!=null){var t=this.vertices;var n=this.vertices;if(t!=null){var r=t;do{var i=r;i.sort();r=r.next}while(r!=n)}this.pull(this.vertices,e);while(!(this.vertices==null))if(this.vertices!=null&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var s=this.vertices;s.helper=null;null;s.next=vr.zpp_pool;vr.zpp_pool=s;this.vertices=this.vertices=null}else{var o=this.vertices.next;this.vertices.prev.next=this.vertices.next;this.vertices.next.prev=this.vertices.prev;this.vertices.next=this.vertices.prev=null;var u=this.vertices;u.helper=null;null;u.next=vr.zpp_pool;vr.zpp_pool=u;this.vertices=null;this.vertices=o}}return e},pull:function(e,t){var n=null;var r=e;do{var i=or.get(r.x,r.y);if(n==null)n=i.prev=i.next=i;else{i.prev=n;i.next=n.next;n.next.prev=i;n.next=i}n=i;n.forced=r.forced;if(!(r.diagonals.head==null)){var s=r.diagonals.inlined_pop_unsafe();if(s==e)break;else r=this.pull(r,t)}else r=r.next}while(r!=e);var o;var u=0;var a=n;var f=n;if(a!=null){var l=a;do{var c=l;u+=c.x*(c.next.y-c.prev.y);l=l.next}while(l!=f)}o=u*.5;if(o*o>=N.epsilon*N.epsilon){if(!function(e){var t;var r=n;var i=true;while(i||r!=n){i=false;if(_r.vec_dsq(r.x,r.y,r.next.x,r.next.y)<N.epsilon*N.epsilon){if(r==n){n=r.next;i=true}if(r.forced)r.next.forced=true;if(r!=null&&r.prev==r){r.next=r.prev=null;r=r=null}else{var s=r.next;r.prev.next=r.next;r.next.prev=r.prev;r.next=r.prev=null;r=null;r=s}if(r==null){n=null;break}}else r=r.next}if(n!=null){var o;do{o=false;r=n;i=true;while(i||r!=n){i=false;var u=r.prev;var a=0;var f=0;a=r.x-u.x;f=r.y-u.y;var l=0;var c=0;l=r.next.x-r.x;c=r.next.y-r.y;var h=c*a-l*f;if(h*h>=N.epsilon*N.epsilon)r=r.next;else{if(r==n){n=r.next;i=true}if(r!=null&&r.prev==r){r.next=r.prev=null;r=r=null}else{var p=r.next;r.prev.next=r.next;r.next.prev=r.prev;r.next=r.prev=null;r=null;r=p}o=true;if(r==null){o=false;n=null;break}}}}while(o)}t=n==null;return t}(this))t.add(n)}return r},__class__:mr};var gr=function(){this.zip_dir=false;this.absnormaly=0;this.absnormalx=0;this.normaly=0;this.normalx=0;this.idiry=0;this.idirx=0;this.diry=0;this.dirx=0;this.originy=0;this.originx=0;this.userData=null;this.maxdist=0;this.direction=null;this.origin=null;this.origin=_t.get(null,null,null);this.origin.zpp_inner._invalidate=Rs(this,this.origin_invalidate);this.direction=_t.get(null,null,null);this.direction.zpp_inner._invalidate=Rs(this,this.direction_invalidate);this.originx=0;this.originy=0;this.dirx=0;this.diry=0;this.zip_dir=false};gr.__name__=true;gr.prototype={origin_invalidate:function(e){this.originx=e.x;this.originy=e.y},direction_invalidate:function(e){this.dirx=e.x;this.diry=e.y;this.zip_dir=true},invalidate_dir:function(){this.zip_dir=true},validate_dir:function(){if(this.zip_dir){this.zip_dir=false;if(this.dirx*this.dirx+this.diry*this.diry<N.epsilon)throw new g("Error: Ray::direction is degenerate");var e=this.dirx*this.dirx+this.diry*this.diry;var t=1/Math.sqrt(e);var n=t;this.dirx*=n;this.diry*=n;this.idirx=1/this.dirx;this.idiry=1/this.diry;this.normalx=-this.diry;this.normaly=this.dirx;var r=this.normalx;if(r<0)this.absnormalx=-r;else this.absnormalx=r;var i=this.normaly;if(i<0)this.absnormaly=-i;else this.absnormaly=i}},rayAABB:function(){var e=this.originx;var t=e;var n=this.originy;var r=n;if(this.maxdist>=Infinity){if(this.dirx>0)t=Infinity;else if(this.dirx<0)t=-Infinity;if(this.diry>0)r=Infinity;else if(this.diry<0)r=-Infinity}else{t+=this.maxdist*this.dirx;r+=this.maxdist*this.diry}if(t<e){var i=e;e=t;t=i}if(r<n){var s=n;n=r;r=s}var o=Gn.get(e,n,t,r);return o},aabbtest:function(e){var t=this.normalx*(this.originx-.5*(e.minx+e.maxx))+this.normaly*(this.originy-.5*(e.miny+e.maxy));var n=this.absnormalx*.5*(e.maxx-e.minx)+this.absnormaly*.5*(e.maxy-e.miny);return function(e){var n;var r=t;n=r<0?-r:r;return n}(this)<n},aabbsect:function(e){var t=this.originx>=e.minx&&this.originx<=e.maxx;var n=this.originy>=e.miny&&this.originy<=e.maxy;if(t&&n)return 0;else{var r=-1;do{if(this.dirx>=0&&this.originx>=e.maxx)break;if(this.dirx<=0&&this.originx<=e.minx)break;if(this.diry>=0&&this.originy>=e.maxy)break;if(this.diry<=0&&this.originy<=e.miny)break;if(this.dirx>0){var i=(e.minx-this.originx)*this.idirx;if(i>=0&&i<=this.maxdist){var s=this.originy+i*this.diry;if(s>=e.miny&&s<=e.maxy){r=i;break}}}else if(this.dirx<0){var o=(e.maxx-this.originx)*this.idirx;if(o>=0&&o<=this.maxdist){var u=this.originy+o*this.diry;if(u>=e.miny&&u<=e.maxy){r=o;break}}}if(this.diry>0){var a=(e.miny-this.originy)*this.idiry;if(a>=0&&a<=this.maxdist){var f=this.originx+a*this.dirx;if(f>=e.minx&&f<=e.maxx){r=a;break}}}else if(this.diry<0){var l=(e.maxy-this.originy)*this.idiry;if(l>=0&&l<=this.maxdist){var c=this.originx+l*this.dirx;if(c>=e.minx&&c<=e.maxx){r=l;break}}}}while(false);return r}},circlesect:function(e,t,n){if(e.zip_worldCOM){if(e.body!=null){e.zip_worldCOM=false;if(e.zip_localCOM){e.zip_localCOM=false;if(e.type==1)e.polygon.__validate_localCOM();if(e.wrap_localCOM!=null){e.wrap_localCOM.zpp_inner.x=e.localCOMx;e.wrap_localCOM.zpp_inner.y=e.localCOMy}}e.body.validate_axis();e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy);e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}}var r=0;var i=0;r=this.originx-e.worldCOMx;i=this.originy-e.worldCOMy;var s=this.dirx*this.dirx+this.diry*this.diry;var o=2*(r*this.dirx+i*this.diry);var u=r*r+i*i-e.radius*e.radius;var a=o*o-4*s*u;if(a==0){var f=-o/2*s;if((!t||u>0)&&f>0&&f<n&&f<=this.maxdist){var l=0;var c=0;l=this.originx;c=this.originy;var h=f;l+=this.dirx*h;c+=this.diry*h;var p=1;l-=e.worldCOMx*p;c-=e.worldCOMy*p;var d=l*l+c*c;var v=1/Math.sqrt(d);var m=v;l*=m;c*=m;if(u<=0){l=-l;c=-c}return tr.getRay(_t.get(l,c,null),f,u<=0,e.outer)}else return null}else{a=Math.sqrt(a);s=1/(2*s);var g=(-o-a)*s;var y=(-o+a)*s;if(g>0){if(g<n&&g<=this.maxdist){var b=0;var w=0;b=this.originx;w=this.originy;var E=g;b+=this.dirx*E;w+=this.diry*E;var S=1;b-=e.worldCOMx*S;w-=e.worldCOMy*S;var x=b*b+w*w;var T=1/Math.sqrt(x);var N=T;b*=N;w*=N;return tr.getRay(_t.get(b,w,null),g,false,e.outer)}else return null}else if(y>0&&t){if(y<n&&y<=this.maxdist){var C=0;var k=0;C=this.originx;k=this.originy;var L=y;C+=this.dirx*L;k+=this.diry*L;var A=1;C-=e.worldCOMx*A;k-=e.worldCOMy*A;var O=C*C+k*k;var M=1/Math.sqrt(O);var _=M;C*=_;k*=_;C=-C;k=-k;return tr.getRay(_t.get(C,k,null),y,true,e.outer)}else return null}else return null}},circlesect2:function(e,t,n){if(e.zip_worldCOM){if(e.body!=null){e.zip_worldCOM=false;if(e.zip_localCOM){e.zip_localCOM=false;if(e.type==1)e.polygon.__validate_localCOM();if(e.wrap_localCOM!=null){e.wrap_localCOM.zpp_inner.x=e.localCOMx;e.wrap_localCOM.zpp_inner.y=e.localCOMy}}e.body.validate_axis();e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy);e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}}var r=0;var i=0;r=this.originx-e.worldCOMx;i=this.originy-e.worldCOMy;var s=this.dirx*this.dirx+this.diry*this.diry;var o=2*(r*this.dirx+i*this.diry);var u=r*r+i*i-e.radius*e.radius;var a=o*o-4*s*u;if(a==0){var f=-o/2*s;if((!t||u>0)&&f>0&&f<=this.maxdist){var l=0;var c=0;l=this.originx;c=this.originy;var h=f;l+=this.dirx*h;c+=this.diry*h;var p=1;l-=e.worldCOMx*p;c-=e.worldCOMy*p;var d=l*l+c*c;var v=1/Math.sqrt(d);var m=v;l*=m;c*=m;if(u<=0){l=-l;c=-c}var y=tr.getRay(_t.get(l,c,null),f,u<=0,e.outer);var b=null;var w=n.zpp_inner.inner.head;while(w!=null){var E=w.elt;if(function(e){var t;if(y.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=y.zpp_inner.toiDistance;return t}(this)<function(e){var t;if(E.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=E.zpp_inner.toiDistance;return t}(this))break;b=w;w=w.next}n.zpp_inner.inner.inlined_insert(b,y)}}else{a=Math.sqrt(a);s=1/(2*s);var S=(-o-a)*s;var x=(-o+a)*s;if(S>0&&S<=this.maxdist){var T=0;var N=0;T=this.originx;N=this.originy;var C=S;T+=this.dirx*C;N+=this.diry*C;var k=1;T-=e.worldCOMx*k;N-=e.worldCOMy*k;var L=T*T+N*N;var A=1/Math.sqrt(L);var O=A;T*=O;N*=O;var M=tr.getRay(_t.get(T,N,null),S,false,e.outer);var _=null;var D=n.zpp_inner.inner.head;while(D!=null){var P=D.elt;if(function(e){var t;if(M.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=M.zpp_inner.toiDistance;return t}(this)<function(e){var t;if(P.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=P.zpp_inner.toiDistance;return t}(this))break;_=D;D=D.next}n.zpp_inner.inner.inlined_insert(_,M)}if(x>0&&x<=this.maxdist&&t){var H=0;var B=0;H=this.originx;B=this.originy;var j=x;H+=this.dirx*j;B+=this.diry*j;var F=1;H-=e.worldCOMx*F;B-=e.worldCOMy*F;var I=H*H+B*B;var q=1/Math.sqrt(I);var R=q;H*=R;B*=R;H=-H;B=-B;var U=tr.getRay(_t.get(H,B,null),x,true,e.outer);var z=null;var W=n.zpp_inner.inner.head;while(W!=null){var X=W.elt;if(function(e){var t;if(U.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=U.zpp_inner.toiDistance;return t}(this)<function(e){var t;if(X.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=X.zpp_inner.toiDistance;return t}(this))break;z=W;W=W.next}n.zpp_inner.inner.inlined_insert(z,U)}}},polysect:function(e,t,n){var r=n;var i=null;var s=e.edges.head;var o=true;var u=e.gverts.next;var a=u;var f=u.next;while(f!=null){var l=f;var c=s.elt;if(t||c.gnormx*this.dirx+c.gnormy*this.diry<0){var h=0;var p=0;h=l.x-a.x;p=l.y-a.y;var d=0;var v=0;d=a.x-this.originx;v=a.y-this.originy;var m=p*this.dirx-h*this.diry;if(m*m>N.epsilon){m=1/m;var g=(p*d-h*v)*m;if(g>0&&g<r&&g<=this.maxdist){var y=(this.diry*d-this.dirx*v)*m;if(y>-N.epsilon&&y<1+N.epsilon){r=g;i=s.elt}}}}s=s.next;u=f;a=l;f=f.next}if(o)do{f=e.gverts.next;var b=f;var w=s.elt;if(t||w.gnormx*this.dirx+w.gnormy*this.diry<0){var E=0;var S=0;E=b.x-a.x;S=b.y-a.y;var x=0;var T=0;x=a.x-this.originx;T=a.y-this.originy;var C=S*this.dirx-E*this.diry;if(C*C>N.epsilon){C=1/C;var k=(S*x-E*T)*C;if(k>0&&k<r&&k<=this.maxdist){var L=(this.diry*x-this.dirx*T)*C;if(L>-N.epsilon&&L<1+N.epsilon){r=k;i=s.elt}}}}s=s.next}while(false);if(i!=null){var A=0;var O=0;A=i.gnormx;O=i.gnormy;var M=A*this.dirx+O*this.diry>0;if(M){A=-A;O=-O}return tr.getRay(_t.get(A,O,null),r,M,e.outer)}else return null},polysect2:function(e,t,n){var r=Infinity;var i=-1;var s=null;var o=null;var u=e.edges.head;var a=true;var f=e.gverts.next;var l=f;var c=f.next;while(c!=null){var h=c;var p=u.elt;if(t||p.gnormx*this.dirx+p.gnormy*this.diry<0){var d=0;var v=0;d=h.x-l.x;v=h.y-l.y;var m=0;var y=0;m=l.x-this.originx;y=l.y-this.originy;var b=v*this.dirx-d*this.diry;if(b*b>N.epsilon){b=1/b;var w=(v*m-d*y)*b;if(w>0&&w<=this.maxdist&&(w<r||w>i)){var E=(this.diry*m-this.dirx*y)*b;if(E>-N.epsilon&&E<1+N.epsilon){if(w<r){r=w;s=u.elt}if(w>i){i=w;o=u.elt}}}}}u=u.next;f=c;l=h;c=c.next}if(a)do{c=e.gverts.next;var S=c;var x=u.elt;if(t||x.gnormx*this.dirx+x.gnormy*this.diry<0){var T=0;var C=0;T=S.x-l.x;C=S.y-l.y;var k=0;var L=0;k=l.x-this.originx;L=l.y-this.originy;var A=C*this.dirx-T*this.diry;if(A*A>N.epsilon){A=1/A;var O=(C*k-T*L)*A;if(O>0&&O<=this.maxdist&&(O<r||O>i)){var M=(this.diry*k-this.dirx*L)*A;if(M>-N.epsilon&&M<1+N.epsilon){if(O<r){r=O;s=u.elt}if(O>i){i=O;o=u.elt}}}}}u=u.next}while(false);if(s!=null){var _=0;var D=0;_=s.gnormx;D=s.gnormy;var P=_*this.dirx+D*this.diry>0;if(P){_=-_;D=-D}var H=tr.getRay(_t.get(_,D,null),r,P,e.outer);var B=null;var j=n.zpp_inner.inner.head;while(j!=null){var F=j.elt;if(function(e){var t;if(H.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=H.zpp_inner.toiDistance;return t}(this)<function(e){var t;if(F.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=F.zpp_inner.toiDistance;return t}(this))break;B=j;j=j.next}n.zpp_inner.inner.inlined_insert(B,H)}if(o!=null&&s!=o){var I=0;var q=0;I=o.gnormx;q=o.gnormy;var R=I*this.dirx+q*this.diry>0;if(R){I=-I;q=-q}var U=tr.getRay(_t.get(I,q,null),i,R,e.outer);var z=null;var W=n.zpp_inner.inner.head;while(W!=null){var X=W.elt;if(function(e){var t;if(U.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=U.zpp_inner.toiDistance;return t}(this)<function(e){var t;if(X.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=X.zpp_inner.toiDistance;return t}(this))break;z=W;W=W.next}n.zpp_inner.inner.inlined_insert(z,U)}},__class__:gr};var yr=function(){this.node=null;this.next=null;this.id=0;this.links=null;this.y=0;this.x=0;this.forced=false;this.id=pn.ZPP_SimpleVert();if(Hs.zpp_pool==null)this.links=new Hs;else{this.links=Hs.zpp_pool;Hs.zpp_pool=this.links.next;this.links.next=null}null;this.links.lt=yr.less_xy};yr.__name__=true;yr.less_xy=function(e,t){return e.y<t.y||e.y==t.y&&e.x<t.x};yr.swap_nodes=function(e,t){var n=e.node;e.node=t.node;t.node=n};yr.get=function(e,t){var n;if(yr.zpp_pool==null)n=new yr;else{n=yr.zpp_pool;yr.zpp_pool=n.next;n.next=null}null;n.x=e;n.y=t;return n};yr.prototype={free:function(){this.links.clear();this.node=null;this.forced=false},alloc:function(){},__class__:yr};var br=function(){this.node=null;this.prev=null;this.next=null;this.id=0;this.vertices=null;this.right=null;this.left=null;this.id=pn.ZPP_SimpleSeg();if(Hs.zpp_pool==null)this.vertices=new Hs;else{this.vertices=Hs.zpp_pool;Hs.zpp_pool=this.vertices.next;this.vertices.next=null}null;this.vertices.lt=Rs(this,this.less_xy)};br.__name__=true;br.get=function(e,t){var n;if(br.zpp_pool==null)n=new br;else{n=br.zpp_pool;br.zpp_pool=n.next;n.next=null}null;n.left=e;n.right=t;n.vertices.insert(e);n.vertices.insert(t);return n};br.prototype={free:function(){this.left=this.right=null;this.prev=null;this.node=null;this.vertices.clear()},alloc:function(){},less_xy:function(e,t){return e.x<t.x||e.x==t.x&&e.y<t.y},__class__:br};var wr=function(){this.next=null;this.node=null;this.segment2=null;this.segment=null;this.vertex=null;this.type=0};wr.__name__=true;wr.swap_nodes=function(e,t){var n=e.node;e.node=t.node;t.node=n};wr.less_xy=function(e,t){if(e.vertex.x<t.vertex.x)return true;else if(e.vertex.x>t.vertex.x)return false;else if(e.vertex.y<t.vertex.y)return true;else if(e.vertex.y>t.vertex.y)return false;else return e.type<t.type};wr.get=function(e){var t;if(wr.zpp_pool==null)t=new wr;else{t=wr.zpp_pool;wr.zpp_pool=t.next;t.next=null}null;t.vertex=e;return t};wr.prototype={free:function(){this.vertex=null;this.segment=this.segment2=null;this.node=null},alloc:function(){},__class__:wr};var Er=function(){this.tree=null;this.sweepx=0;if(Bs.zpp_pool==null)this.tree=new Bs;else{this.tree=Bs.zpp_pool;Bs.zpp_pool=this.tree.next;this.tree.next=null}null;this.tree.lt=Rs(this,this.edge_lt);this.tree.swapped=Rs(this,this.swap_nodes)};Er.__name__=true;Er.prototype={swap_nodes:function(e,t){var n=e.node;e.node=t.node;t.node=n},edge_lt:function(e,t){var n=0;var r=0;var i=0;var s=0;var o;if(e.left==t.left&&e.right==t.right)return false;else if(e.left==t.right)if(e.left.x==e.right.x){if(e.left.y<e.right.y)return e.left.y>t.left.y;else return e.right.y>t.left.y}else return function(u){var a;o=e.right.x<e.left.x;{n=e.right.x-e.left.x;r=e.right.y-e.left.y}{i=t.left.x-e.left.x;s=t.left.y-e.left.y}a=o?r*i-n*s:s*n-i*r;return a}(this)<0;else if(e.right==t.left)return!(t.left.x==t.right.x?t.left.y<t.right.y?t.left.y>e.left.y:t.right.y>e.left.y:function(u){var a;o=t.right.x<t.left.x;{n=t.right.x-t.left.x;r=t.right.y-t.left.y}{i=e.left.x-t.left.x;s=e.left.y-t.left.y}a=o?r*i-n*s:s*n-i*r;return a}(this)<0);else if(e.left==t.left)if(e.left.x==e.right.x){if(e.left.y<e.right.y)return e.left.y>t.right.y;else return e.right.y>t.right.y}else return function(u){var a;o=e.right.x<e.left.x;{n=e.right.x-e.left.x;r=e.right.y-e.left.y}{i=t.right.x-e.left.x;s=t.right.y-e.left.y}a=o?r*i-n*s:s*n-i*r;return a}(this)<0;else if(e.right==t.right)if(e.left.x==e.right.x){if(e.left.y<e.right.y)return e.left.y>t.left.y;else return e.right.y>t.left.y}else return function(u){var a;o=e.right.x<e.left.x;{n=e.right.x-e.left.x;r=e.right.y-e.left.y}{i=t.left.x-e.left.x;s=t.left.y-e.left.y}a=o?r*i-n*s:s*n-i*r;return a}(this)<0;if(e.left.x==e.right.x){if(t.left.x==t.right.x){var u;if(e.left.y<e.right.y)u=e.right;else u=e.left;var a;if(t.left.y<t.right.y)a=t.right;else a=t.left;return u.y>a.y}else{var f;o=t.right.x<t.left.x;n=t.right.x-t.left.x;r=t.right.y-t.left.y;i=e.left.x-t.left.x;s=e.left.y-t.left.y;if(o)f=r*i-n*s;else f=s*n-i*r;var l;o=t.right.x<t.left.x;n=t.right.x-t.left.x;r=t.right.y-t.left.y;i=e.right.x-t.left.x;s=e.right.y-t.left.y;if(o)l=r*i-n*s;else l=s*n-i*r;if(f*l>=0)return f>=0;else return this.sweepx>=e.left.x}}else if(t.left.x==t.right.x){var c;o=e.right.x<e.left.x;n=e.right.x-e.left.x;r=e.right.y-e.left.y;i=t.left.x-e.left.x;s=t.left.y-e.left.y;if(o)c=r*i-n*s;else c=s*n-i*r;var h;o=e.right.x<e.left.x;n=e.right.x-e.left.x;r=e.right.y-e.left.y;i=t.right.x-e.left.x;s=t.right.y-e.left.y;if(o)h=r*i-n*s;else h=s*n-i*r;if(c*h>=0)return c<0;else return this.sweepx<t.left.x}else{var p;p=function(u){var a;o=e.right.x<e.left.x;{n=e.right.x-e.left.x;r=e.right.y-e.left.y}{i=t.left.x-e.left.x;s=t.left.y-e.left.y}a=o?r*i-n*s:s*n-i*r;return a}(this)<0;var d;d=function(u){var a;o=e.right.x<e.left.x;{n=e.right.x-e.left.x;r=e.right.y-e.left.y}{i=t.right.x-e.left.x;s=t.right.y-e.left.y}a=o?r*i-n*s:s*n-i*r;return a}(this)<0;if(p==d)return p;else{var v;v=function(u){var a;o=t.right.x<t.left.x;{n=t.right.x-t.left.x;r=t.right.y-t.left.y}{i=e.left.x-t.left.x;s=e.left.y-t.left.y}a=o?r*i-n*s:s*n-i*r;return a}(this)>=0;var m;m=function(u){var a;o=t.right.x<t.left.x;{n=t.right.x-t.left.x;r=t.right.y-t.left.y}{i=e.right.x-t.left.x;s=e.right.y-t.left.y}a=o?r*i-n*s:s*n-i*r;return a}(this)>=0;if(v==m)return v;var g=(this.sweepx-e.left.x)/(e.right.x-e.left.x)*(e.right.y-e.left.y)+e.left.y;var y=(this.sweepx-t.left.x)/(t.right.x-t.left.x)*(t.right.y-t.left.y)+t.left.y;return g>y}}},clear:function(){this.tree.clear()},add:function(e){e.node=this.tree.insert(e);var t=this.tree.successor_node(e.node);var n=this.tree.predecessor_node(e.node);if(t!=null){e.next=t.data;t.data.prev=e}if(n!=null){e.prev=n.data;n.data.next=e}return e},remove:function(e){var t=this.tree.successor_node(e.node);var n=this.tree.predecessor_node(e.node);if(t!=null)t.data.prev=e.prev;if(n!=null)n.data.next=e.next;this.tree.remove_node(e.node);e.node=null},intersect:function(e,t){if(e==null||t==null)return false;else if(e.left==t.left||e.left==t.right||e.right==t.left||e.right==t.right)return false;else{var n=(t.left.x-e.left.x)*(e.right.y-e.left.y)-(e.right.x-e.left.x)*(t.left.y-e.left.y);var r=(t.right.x-e.left.x)*(e.right.y-e.left.y)-(e.right.x-e.left.x)*(t.right.y-e.left.y);if(n*r>0)return false;else{var i=(e.left.x-t.left.x)*(t.right.y-t.left.y)-(t.right.x-t.left.x)*(e.left.y-t.left.y);var s=(e.right.x-t.left.x)*(t.right.y-t.left.y)-(t.right.x-t.left.x)*(e.right.y-t.left.y);if(i*s>0)return false;else if(n*r>=0&&i*s>=0)return true;else return true}}},intersection:function(e,t){if(e==null||t==null)return null;else if(e.left==t.left||e.left==t.right||e.right==t.left||e.right==t.right)return null;else{var n=0;var r=0;n=e.right.x-e.left.x;r=e.right.y-e.left.y;var i=0;var s=0;i=t.right.x-t.left.x;s=t.right.y-t.left.y;var o=s*n-i*r;if(o==0)return null;o=1/o;var u=0;var a=0;u=t.left.x-e.left.x;a=t.left.y-e.left.y;var f=(s*u-i*a)*o;if(f<0||f>1)return null;var l=(r*u-n*a)*o;if(l<0||l>1)return null;var c;if(l==0||l==1||f==0||f==1){var h=l==0;if(l==1&&h)throw new g("corner case 1a");else if(l==1)h=true;if(f==0&&h)throw new g("corner case 1b");else if(f==0)h=true;if(f==1&&h)throw new g("corner case 1c");if(l==0)c=t.left;else if(l==1)c=t.right;else if(f==0)c=e.left;else c=e.right}else c=yr.get(.5*(e.left.x+n*f+t.left.x+i*l),.5*(e.left.y+r*f+t.left.y+s*l));var p=wr.get(c);p.type=0;p.segment=e;p.segment2=t;return p}},__class__:Er};var Sr=function(){};Sr.__name__=true;Sr.decompose=function(e,t){if(Sr.sweep==null){Sr.sweep=new Er;Sr.inthash=new ii}if(Sr.vertices==null){if(Hs.zpp_pool==null)Sr.vertices=new Hs;else{Sr.vertices=Hs.zpp_pool;Hs.zpp_pool=Sr.vertices.next;Sr.vertices.next=null}null;Sr.vertices.lt=yr.less_xy;Sr.vertices.swapped=yr.swap_nodes}if(Sr.queue==null){if(js.zpp_pool==null)Sr.queue=new js;else{Sr.queue=js.zpp_pool;js.zpp_pool=Sr.queue.next;Sr.queue.next=null}null;Sr.queue.lt=wr.less_xy;Sr.queue.swapped=wr.swap_nodes}var n=null;var r=null;var i=e;var s=e;if(i!=null){var o=i;do{var u=o;var a=yr.get(u.x,u.y);var f;var l=Sr.vertices.parent;while(l!=null)if(Sr.vertices.lt(a,l.data))l=l.prev;else if(Sr.vertices.lt(l.data,a))l=l.next;else break;f=l;if(f!=null){var c=a;c.links.clear();c.node=null;c.forced=false;c.next=yr.zpp_pool;yr.zpp_pool=c;a=f.data}else a.node=Sr.vertices.insert(a);if(r!=null){var h=wr.get(r);var p=wr.get(a);var d;if(wr.less_xy(h,p)){h.type=1;p.type=2;d=br.get(r,a)}else{h.type=2;p.type=1;d=br.get(a,r)}h.segment=p.segment=d;Sr.queue.insert(h);Sr.queue.insert(p);r.links.insert(a);a.links.insert(r)}r=a;if(n==null)n=a;o=o.next}while(o!=s)}var v=wr.get(r);var m=wr.get(n);var y;if(wr.less_xy(v,m)){v.type=1;m.type=2;y=br.get(r,n)}else{v.type=2;m.type=1;y=br.get(n,r)}v.segment=m.segment=y;Sr.queue.insert(v);Sr.queue.insert(m);r.links.insert(n);n.links.insert(r);if(Sr.ints==null){if(js.zpp_pool==null)Sr.ints=new js;else{Sr.ints=js.zpp_pool;js.zpp_pool=Sr.ints.next;Sr.ints.next=null}null;Sr.ints.lt=wr.less_xy}while(!Sr.queue.empty()){var b=Sr.queue.pop_front();Sr.sweep.sweepx=b.vertex.x;if(b.type==1){var w=b.segment;Sr.sweep.add(w);if(w.next!=null&&w!=null&&!(w.next.id<w.id?Sr.inthash.has(w.next.id,w.id):Sr.inthash.has(w.id,w.next.id))){var E=Sr.sweep.intersection(w.next,w);if(E!=null){if(E.vertex.x>=Sr.sweep.sweepx){var S;var x=Sr.queue.parent;while(x!=null)if(Sr.queue.lt(E,x.data))x=x.prev;else if(Sr.queue.lt(x.data,E))x=x.next;else break;S=x;if(S==null){var T;var N=Sr.ints.parent;while(N!=null)if(Sr.ints.lt(E,N.data))N=N.prev;else if(Sr.ints.lt(N.data,E))N=N.next;else break;T=N;if(T!=null){var C=E.vertex;C.links.clear();C.node=null;C.forced=false;C.next=yr.zpp_pool;yr.zpp_pool=C;E.vertex=T.data.vertex;T.data=E;Sr.queue.insert(E)}else{Sr.queue.insert(E);Sr.ints.insert(E)}if(w.next.id<w.id)Sr.inthash.add(ri.get(w.next.id,w.id,true));else Sr.inthash.add(ri.get(w.id,w.next.id,true))}else{var k=S.data;if(k.segment!=E.segment||E.segment2!=k.segment2)throw new g("corner case 2, shiiiit.");var L=E.vertex;L.links.clear();L.node=null;L.forced=false;L.next=yr.zpp_pool;yr.zpp_pool=L;var A=E;A.vertex=null;A.segment=A.segment2=null;A.node=null;A.next=wr.zpp_pool;wr.zpp_pool=A}}else{var O=E.vertex;O.links.clear();O.node=null;O.forced=false;O.next=yr.zpp_pool;yr.zpp_pool=O;var M=E;M.vertex=null;M.segment=M.segment2=null;M.node=null;M.next=wr.zpp_pool;wr.zpp_pool=M}}}if(w!=null&&w.prev!=null&&!(w.id<w.prev.id?Sr.inthash.has(w.id,w.prev.id):Sr.inthash.has(w.prev.id,w.id))){var _=Sr.sweep.intersection(w,w.prev);if(_!=null){if(_.vertex.x>=Sr.sweep.sweepx){var D;var P=Sr.queue.parent;while(P!=null)if(Sr.queue.lt(_,P.data))P=P.prev;else if(Sr.queue.lt(P.data,_))P=P.next;else break;D=P;if(D==null){var H;var B=Sr.ints.parent;while(B!=null)if(Sr.ints.lt(_,B.data))B=B.prev;else if(Sr.ints.lt(B.data,_))B=B.next;else break;H=B;if(H!=null){var j=_.vertex;j.links.clear();j.node=null;j.forced=false;j.next=yr.zpp_pool;yr.zpp_pool=j;_.vertex=H.data.vertex;H.data=_;Sr.queue.insert(_)}else{Sr.queue.insert(_);Sr.ints.insert(_)}if(w.id<w.prev.id)Sr.inthash.add(ri.get(w.id,w.prev.id,true));else Sr.inthash.add(ri.get(w.prev.id,w.id,true))}else{var F=D.data;if(F.segment!=_.segment||_.segment2!=F.segment2)throw new g("corner case 2, shiiiit.");var I=_.vertex;I.links.clear();I.node=null;I.forced=false;I.next=yr.zpp_pool;yr.zpp_pool=I;var q=_;q.vertex=null;q.segment=q.segment2=null;q.node=null;q.next=wr.zpp_pool;wr.zpp_pool=q}}else{var R=_.vertex;R.links.clear();R.node=null;R.forced=false;R.next=yr.zpp_pool;yr.zpp_pool=R;var U=_;U.vertex=null;U.segment=U.segment2=null;U.node=null;U.next=wr.zpp_pool;wr.zpp_pool=U}}}}else if(b.type==2){var z=b.segment;if(z.node!=null){var W=z.next;var X=z.prev;Sr.sweep.remove(z);var V=z;V.left=V.right=null;V.prev=null;V.node=null;V.vertices.clear();V.next=br.zpp_pool;br.zpp_pool=V;if(W!=null&&X!=null&&!(W.id<X.id?Sr.inthash.has(W.id,X.id):Sr.inthash.has(X.id,W.id))){var $=Sr.sweep.intersection(W,X);if($!=null){if($.vertex.x>=Sr.sweep.sweepx){var J;var K=Sr.queue.parent;while(K!=null)if(Sr.queue.lt($,K.data))K=K.prev;else if(Sr.queue.lt(K.data,$))K=K.next;else break;J=K;if(J==null){var Q;var G=Sr.ints.parent;while(G!=null)if(Sr.ints.lt($,G.data))G=G.prev;else if(Sr.ints.lt(G.data,$))G=G.next;else break;Q=G;if(Q!=null){var Y=$.vertex;Y.links.clear();Y.node=null;Y.forced=false;Y.next=yr.zpp_pool;yr.zpp_pool=Y;$.vertex=Q.data.vertex;Q.data=$;Sr.queue.insert($)}else{Sr.queue.insert($);Sr.ints.insert($)}if(W.id<X.id)Sr.inthash.add(ri.get(W.id,X.id,true));else Sr.inthash.add(ri.get(X.id,W.id,true))}else{var Z=J.data;if(Z.segment!=$.segment||$.segment2!=Z.segment2)throw new g("corner case 2, shiiiit.");var et=$.vertex;et.links.clear();et.node=null;et.forced=false;et.next=yr.zpp_pool;yr.zpp_pool=et;var tt=$;tt.vertex=null;tt.segment=tt.segment2=null;tt.node=null;tt.next=wr.zpp_pool;wr.zpp_pool=tt}}else{var nt=$.vertex;nt.links.clear();nt.node=null;nt.forced=false;nt.next=yr.zpp_pool;yr.zpp_pool=nt;var rt=$;rt.vertex=null;rt.segment=rt.segment2=null;rt.node=null;rt.next=wr.zpp_pool;wr.zpp_pool=rt}}}}}else{var it=b.vertex;var st=it.node==null;var ot=b.segment;var ut=b.segment2;if(ut.next!=ot){var at=ot;ot=ut;ut=at}var ft;ft=function(e){var t;var n=ot.vertices.parent;while(n!=null)if(ot.vertices.lt(it,n.data))n=n.prev;else if(ot.vertices.lt(n.data,it))n=n.next;else break;t=n;return t}(this)==null;var lt;lt=function(e){var t;var n=ut.vertices.parent;while(n!=null)if(ut.vertices.lt(it,n.data))n=n.prev;else if(ut.vertices.lt(n.data,it))n=n.next;else break;t=n;return t}(this)==null;if(ft){var ct=ot.vertices.insert(it);var ht;if(it==ot.left)ht=it;else ht=ot.vertices.predecessor_node(ct).data;var pt;if(it==ot.right)pt=it;else pt=ot.vertices.successor_node(ct).data;ht.links.remove(pt);if(it!=ht)ht.links.insert(it);pt.links.remove(ht);if(it!=pt)pt.links.insert(it);if(it!=ht)it.links.insert(ht);if(it!=pt)it.links.insert(pt)}if(lt){var dt=ut.vertices.insert(it);var vt;if(it==ut.left)vt=it;else vt=ut.vertices.predecessor_node(dt).data;var mt;if(it==ut.right)mt=it;else mt=ut.vertices.successor_node(dt).data;vt.links.remove(mt);if(it!=vt)vt.links.insert(it);mt.links.remove(vt);if(it!=mt)mt.links.insert(it);if(it!=vt)it.links.insert(vt);if(it!=mt)it.links.insert(mt)}if(st)it.node=Sr.vertices.insert(it);it.forced=true;if(st){var gt=ot.node;var yt=ut.node;gt.data=ut;yt.data=ot;ot.node=yt;ut.node=gt;ut.next=ot.next;ot.next=ut;ot.prev=ut.prev;ut.prev=ot;if(ot.prev!=null)ot.prev.next=ot;if(ut.next!=null)ut.next.prev=ut}if(ut.next!=null&&ut!=null&&!(ut.next.id<ut.id?Sr.inthash.has(ut.next.id,ut.id):Sr.inthash.has(ut.id,ut.next.id))){var bt=Sr.sweep.intersection(ut.next,ut);if(bt!=null){if(bt.vertex.x>=Sr.sweep.sweepx){var wt;var Et=Sr.queue.parent;while(Et!=null)if(Sr.queue.lt(bt,Et.data))Et=Et.prev;else if(Sr.queue.lt(Et.data,bt))Et=Et.next;else break;wt=Et;if(wt==null){var St;var xt=Sr.ints.parent;while(xt!=null)if(Sr.ints.lt(bt,xt.data))xt=xt.prev;else if(Sr.ints.lt(xt.data,bt))xt=xt.next;else break;St=xt;if(St!=null){var Tt=bt.vertex;Tt.links.clear();Tt.node=null;Tt.forced=false;Tt.next=yr.zpp_pool;yr.zpp_pool=Tt;bt.vertex=St.data.vertex;St.data=bt;Sr.queue.insert(bt)}else{Sr.queue.insert(bt);Sr.ints.insert(bt)}if(ut.next.id<ut.id)Sr.inthash.add(ri.get(ut.next.id,ut.id,true));else Sr.inthash.add(ri.get(ut.id,ut.next.id,true))}else{var Nt=wt.data;if(Nt.segment!=bt.segment||bt.segment2!=Nt.segment2)throw new g("corner case 2, shiiiit.");var Ct=bt.vertex;Ct.links.clear();Ct.node=null;Ct.forced=false;Ct.next=yr.zpp_pool;yr.zpp_pool=Ct;var kt=bt;kt.vertex=null;kt.segment=kt.segment2=null;kt.node=null;kt.next=wr.zpp_pool;wr.zpp_pool=kt}}else{var Lt=bt.vertex;Lt.links.clear();Lt.node=null;Lt.forced=false;Lt.next=yr.zpp_pool;yr.zpp_pool=Lt;var At=bt;At.vertex=null;At.segment=At.segment2=null;At.node=null;At.next=wr.zpp_pool;wr.zpp_pool=At}}}if(ot!=null&&ot.prev!=null&&!(ot.id<ot.prev.id?Sr.inthash.has(ot.id,ot.prev.id):Sr.inthash.has(ot.prev.id,ot.id))){var Ot=Sr.sweep.intersection(ot,ot.prev);if(Ot!=null){if(Ot.vertex.x>=Sr.sweep.sweepx){var Mt;var _t=Sr.queue.parent;while(_t!=null)if(Sr.queue.lt(Ot,_t.data))_t=_t.prev;else if(Sr.queue.lt(_t.data,Ot))_t=_t.next;else break;Mt=_t;if(Mt==null){var Dt;var Pt=Sr.ints.parent;while(Pt!=null)if(Sr.ints.lt(Ot,Pt.data))Pt=Pt.prev;else if(Sr.ints.lt(Pt.data,Ot))Pt=Pt.next;else break;Dt=Pt;if(Dt!=null){var Ht=Ot.vertex;Ht.links.clear();Ht.node=null;Ht.forced=false;Ht.next=yr.zpp_pool;yr.zpp_pool=Ht;Ot.vertex=Dt.data.vertex;Dt.data=Ot;Sr.queue.insert(Ot)}else{Sr.queue.insert(Ot);Sr.ints.insert(Ot)}if(ot.id<ot.prev.id)Sr.inthash.add(ri.get(ot.id,ot.prev.id,true));else Sr.inthash.add(ri.get(ot.prev.id,ot.id,true))}else{var Bt=Mt.data;if(Bt.segment!=Ot.segment||Ot.segment2!=Bt.segment2)throw new g("corner case 2, shiiiit.");var jt=Ot.vertex;jt.links.clear();jt.node=null;jt.forced=false;jt.next=yr.zpp_pool;yr.zpp_pool=jt;var Ft=Ot;Ft.vertex=null;Ft.segment=Ft.segment2=null;Ft.node=null;Ft.next=wr.zpp_pool;wr.zpp_pool=Ft}}else{var It=Ot.vertex;It.links.clear();It.node=null;It.forced=false;It.next=yr.zpp_pool;yr.zpp_pool=It;var qt=Ot;qt.vertex=null;qt.segment=qt.segment2=null;qt.node=null;qt.next=wr.zpp_pool;wr.zpp_pool=qt}}}Sr.ints.remove(b)}var Rt=b;Rt.vertex=null;Rt.segment=Rt.segment2=null;Rt.node=null;Rt.next=wr.zpp_pool;wr.zpp_pool=Rt}var Ut=0;var zt=Sr.inthash.table.length;while(Ut<zt){var Wt=Ut++;var Xt=Sr.inthash.table[Wt];if(Xt==null)continue;while(Xt!=null){var Vt=Xt.hnext;Xt.hnext=null;var $t=Xt;$t.next=ri.zpp_pool;ri.zpp_pool=$t;Xt=Vt}Sr.inthash.table[Wt]=null}if(t==null)t=new mi;while(!Sr.vertices.empty())Sr.clip_polygon(Sr.vertices,t);return t};Sr.clip_polygon=function(e,t){var n=null;var r=e.first();var i=r;var s=r.links.parent;var o;if(s.prev==null)o=s.next;else o=s.prev;var u=s.data;var a=o.data;if(function(e){var t;var n=0;var i=0;{n=r.x-u.x;i=r.y-u.y}var s=0;var o=0;{s=a.x-r.x;o=a.y-r.y}t=o*n-s*i;return t}(this)<0)a=u;var f=or.get(r.x,r.y);if(n==null)n=f.prev=f.next=f;else{f.prev=n;f.next=n.next;n.next.prev=f;n.next=f}n=f;n.forced=r.forced;while(true){r.links.remove(a);a.links.remove(r);if(a==i){if(r.links.empty()){e.remove(r);var l=r;l.links.clear();l.node=null;l.forced=false;l.next=yr.zpp_pool;yr.zpp_pool=l}break}var c=or.get(a.x,a.y);if(n==null)n=c.prev=c.next=c;else{c.prev=n;c.next=n.next;n.next.prev=c;n.next=c}n=c;n.forced=a.forced;if(a.links.singular()){if(r.links.empty()){e.remove(r);var h=r;h.links.clear();h.node=null;h.forced=false;h.next=yr.zpp_pool;yr.zpp_pool=h}r=a;a=a.links.parent.data}else{var p=null;var d=0;if(!a.links.empty()){var v=a.links.parent;while(v.prev!=null)v=v.prev;while(v!=null){var m=v.data;if(p==null){p=m;var g=0;var y=0;g=a.x-r.x;y=a.y-r.y;var b=0;var w=0;b=m.x-a.x;w=m.y-a.y;d=w*g-b*y}else{var E;var S=0;var x=0;S=a.x-r.x;x=a.y-r.y;var T=0;var N=0;T=m.x-a.x;N=m.y-a.y;E=N*S-T*x;if(E>0&&d<=0){p=m;d=E}else if(d*E>=0){var C;var k=0;var L=0;k=a.x-m.x;L=a.y-m.y;var A=0;var O=0;A=p.x-a.x;O=p.y-a.y;C=O*k-A*L;if(C>0){p=m;d=E}}}if(v.next!=null){v=v.next;while(v.prev!=null)v=v.prev}else{while(v.parent!=null&&v==v.parent.next)v=v.parent;v=v.parent}}}if(r.links.empty()){e.remove(r);var M=r;M.links.clear();M.node=null;M.forced=false;M.next=yr.zpp_pool;yr.zpp_pool=M}r=a;a=p}}e.remove(i);var _=i;_.links.clear();_.node=null;_.forced=false;_.next=yr.zpp_pool;yr.zpp_pool=_;t.add(n)};Sr.isSimple=function(e){if(Sr.sweep==null){Sr.sweep=new Er;Sr.inthash=new ii}var t=Sr.list_vertices;if(t==null)t=Sr.list_vertices=new gi;var n=e;var r=e;if(n!=null){var i=n;do{var s=i;t.add(yr.get(s.x,s.y));i=i.next}while(i!=r)}var o=Sr.list_queue;if(o==null)o=Sr.list_queue=new yi;var u=t.head;var a=u.elt;u=u.next;while(u!=null){var f=u.elt;var l=o.add(wr.get(a));var c=o.add(wr.get(f));l.segment=wr.less_xy(l,c)?function(e){var t;l.type=1;c.type=2;t=c.segment=br.get(a,f);return t}(this):function(e){var t;l.type=2;c.type=1;t=c.segment=br.get(f,a);return t}(this);a=f;u=u.next}var h=t.head.elt;var p=o.add(wr.get(a));var d=o.add(wr.get(h));p.segment=wr.less_xy(p,d)?function(e){var t;p.type=1;d.type=2;t=d.segment=br.get(a,h);return t}(this):function(e){var t;p.type=2;d.type=1;t=d.segment=br.get(h,a);return t}(this);var v=o;if(!(v.head==null)&&v.head.next!=null){var m=v.head;var g=null;var y=null;var b=null;var w=null;var E=1;var S;var x;var T;do{S=0;y=m;g=m=null;while(y!=null){S++;b=y;x=0;T=E;while(b!=null&&x<E){x++;b=b.next}while(x>0||T>0&&b!=null){if(x==0){w=b;b=b.next;T--}else if(T==0||b==null){w=y;y=y.next;x--}else if(wr.less_xy(y.elt,b.elt)){w=y;y=y.next;x--}else{w=b;b=b.next;T--}if(g!=null)g.next=w;else m=w;g=w}y=b}g.next=null;E<<=1}while(S>1);v.head=m;v.modified=true;v.pushmod=true}var N=true;while(!(o.head==null)){var C=o.pop_unsafe();var k=C.segment;if(C.type==1){Sr.sweep.add(k);if(Sr.sweep.intersect(k,k.next)||Sr.sweep.intersect(k,k.prev)){N=false;break}}else if(C.type==2){if(Sr.sweep.intersect(k.prev,k.next)){N=false;break}Sr.sweep.remove(k);var L=k;L.left=L.right=null;L.prev=null;L.node=null;L.vertices.clear();L.next=br.zpp_pool;br.zpp_pool=L}var A=C;A.vertex=null;A.segment=A.segment2=null;A.node=null;A.next=wr.zpp_pool;wr.zpp_pool=A}while(!(o.head==null)){var O=o.pop_unsafe();if(O.type==2){var M=O.segment;M.left=M.right=null;M.prev=null;M.node=null;M.vertices.clear();M.next=br.zpp_pool;br.zpp_pool=M}var _=O;_.vertex=null;_.segment=_.segment2=null;_.node=null;_.next=wr.zpp_pool;wr.zpp_pool=_}Sr.sweep.clear();while(!(t.head==null)){var D=t.pop_unsafe();D.links.clear();D.node=null;D.forced=false;D.next=yr.zpp_pool;yr.zpp_pool=D}return N};var xr=function(){this.forced=false;this.flag=false;this.prev=null;this.next=null;this.y=0;this.x=0};xr.__name__=true;xr.get=function(e){var t;if(xr.zpp_pool==null)t=new xr;else{t=xr.zpp_pool;xr.zpp_pool=t.next;t.next=null}null;t.x=e.x;t.y=e.y;t.flag=false;return t};xr.prototype={free:function(){},alloc:function(){},__class__:xr};var Tr=function(){this.max=null;this.min=null;this.next=null};Tr.__name__=true;Tr.get=function(e,t){var n;if(Tr.zpp_pool==null)n=new Tr;else{n=Tr.zpp_pool;Tr.zpp_pool=n.next;n.next=null}null;n.min=e;n.max=t;return n};Tr.prototype={free:function(){this.min=this.max=null},alloc:function(){},__class__:Tr};var Nr=function(){};Nr.__name__=true;Nr.lessval=function(e,t){return e.x-t.x+(e.y-t.y)};Nr.less=function(e,t){return e.x-t.x+(e.y-t.y)<0};Nr.distance=function(e,t,n){var r=0;var i=0;r=n.x-t.x;i=n.y-t.y;var s=0;var o=0;s=e.x-t.x;o=e.y-t.y;var u=r*r+i*i;if(u==0)return s*s+o*o;else{var a=(s*r+o*i)/(r*r+i*i);if(a<=0)return s*s+o*o;else if(a>=1)return _r.vec_dsq(e.x,e.y,n.x,n.y);else{var f=a;s-=r*f;o-=i*f;return s*s+o*o}}};Nr.simplify=function(e,t){var n=null;var r=null;var i=null;t*=t;if(Nr.stack==null)Nr.stack=new di;var s=null;var o=null;var u=e;do{var a=xr.get(u);a.forced=u.forced;if(a.forced){a.flag=true;if(s!=null)Nr.stack.add(Tr.get(s,a));else o=a;s=a}var f=a;if(n==null)n=f.prev=f.next=f;else{f.prev=n;f.next=n.next;n.next.prev=f;n.next=f}n=f;if(r==null){r=n;i=n}else{if(n.x-r.x+(n.y-r.y)<0)r=n;if(i.x-n.x+(i.y-n.y)<0)i=n}u=u.next}while(u!=e);if(Nr.stack.head==null){if(o==null){r.flag=i.flag=true;Nr.stack.add(Tr.get(r,i));Nr.stack.add(Tr.get(i,r))}else{var l=r.x-o.x+(r.y-o.y);if(l<0)l=-l;var c=i.x-o.x+(i.y-o.y);if(c<0)c=-c;if(l>c){r.flag=o.flag=true;Nr.stack.add(Tr.get(r,o));Nr.stack.add(Tr.get(o,r))}else{i.flag=o.flag=true;Nr.stack.add(Tr.get(i,o));Nr.stack.add(Tr.get(o,i))}}}else Nr.stack.add(Tr.get(s,o));while(!(Nr.stack.head==null)){var h=Nr.stack.pop_unsafe();var p=h.min;var d=h.max;var v=h;v.min=v.max=null;v.next=Tr.zpp_pool;Tr.zpp_pool=v;var m=t;var g=null;var y=p.next;while(y!=d){var b=Nr.distance(y,p,d);if(b>m){m=b;g=y}y=y.next}if(g!=null){g.flag=true;Nr.stack.add(Tr.get(p,g));Nr.stack.add(Tr.get(g,d))}}var w=null;while(n!=null){if(n.flag){var E=or.get(n.x,n.y);if(w==null)w=E.prev=E.next=E;else{E.prev=w;E.next=w.next;w.next.prev=E;w.next=E}w=E;w.forced=n.forced}if(n!=null&&n.prev==n){n.next=n.prev=null;var S=n;S.next=xr.zpp_pool;xr.zpp_pool=S;n=n=null}else{var x=n.next;n.prev.next=n.next;n.next.prev=n.prev;n.next=n.prev=null;var T=n;T.next=xr.zpp_pool;xr.zpp_pool=T;n=null;n=x}}return w};var Cr=function(){this.kinematic=false;this.failed=false;this.slipped=false;this.axis=null;this.c2=null;this.c1=null;this.frozen2=false;this.frozen1=false;this.arbiter=null;this.s2=null;this.s1=null;this.toi=0;this.next=null;this.c1=new Or;this.c2=new Or;this.axis=new Or};Cr.__name__=true;Cr.prototype={alloc:function(){this.failed=false;this.s1=this.s2=null;this.arbiter=null},free:function(){},__class__:Cr};var kr=function(){};kr.__name__=true;kr.dynamicSweep=function(e,t,n,r,i){if(i==null)i=false;var s=e.s1;var o=e.s2;var u=s.body;var a=o.body;var f=0;var l=0;f=a.velx-u.velx;l=a.vely-u.vely;var c=u.angvel;if(c<0)c=-c;var h=a.angvel;if(h<0)h=-h;var p=s.sweepCoef*c+o.sweepCoef*h;if(!i&&!e.kinematic&&f*f+l*l<N.dynamicSweepLinearThreshold*N.dynamicSweepLinearThreshold&&p<N.dynamicSweepAngularThreshold){e.toi=-1;e.failed=true;return}var d=e.c1;var v=e.c2;var m=e.axis;var g=n;var y=0;while(true){u.sweepIntegrate(g*t);u.sweepValidate(s);a.sweepIntegrate(g*t);a.sweepValidate(o);var b=kr.distance(s,o,d,v,m,null)+r;var w=f*m.x+l*m.y;if(b<N.distanceThresholdCCD){if(i)break;var E=0;var S=0;E=d.x-u.posx;S=d.y-u.posy;var x=0;var T=0;x=v.x-a.posx;T=v.y-a.posy;var C=w-u.sweep_angvel*(m.y*E-m.x*S)+a.sweep_angvel*(m.y*x-m.x*T);if(C>0)e.slipped=true;if(C<=0||b<N.distanceThresholdCCD*.5)break}var k=(p-w)*t;if(k<=0){g=-1;break}var L=b/k;if(L<1e-6)L=1e-6;g+=L;if(g>=1){g=1;u.sweepIntegrate(g*t);u.sweepValidate(s);a.sweepIntegrate(g*t);a.sweepValidate(o);var A=kr.distance(s,o,d,v,m,null)+r;var O=f*m.x+l*m.y;if(A<N.distanceThresholdCCD){if(i)break;var M=0;var _=0;M=d.x-u.posx;_=d.y-u.posy;var D=0;var P=0;D=v.x-a.posx;P=v.y-a.posy;var H=O-u.sweep_angvel*(m.y*M-m.x*_)+a.sweep_angvel*(m.y*D-m.x*P);if(H>0)e.slipped=true;if(H<=0||A<N.distanceThresholdCCD*.5)break}g=-1;break}if(++y>=40){if(b>r)e.failed=true;break}}e.toi=g};kr.staticSweep=function(e,t,n,r){var i=e.s1;var s=e.s2;var o=i.body;var u=s.body;var a=0;var f=0;a=-o.velx;f=-o.vely;var l=o.sweep_angvel;if(l<0)l=-l;var c=i.sweepCoef*l;var h=e.c1;var p=e.c2;var d=e.axis;var v=n;var m=0;while(true){o.sweepIntegrate(v*t);o.sweepValidate(i);var g=kr.distance(i,s,h,p,d,null)+r;var y=a*d.x+f*d.y;if(g<N.distanceThresholdCCD){var b=0;var w=0;b=h.x-o.posx;w=h.y-o.posy;var E=y-o.sweep_angvel*(d.y*b-d.x*w);if(E>0)e.slipped=true;if(E<=0||g<N.distanceThresholdCCD*.5)break}var S=(c-y)*t;if(S<=0){v=-1;break}var x=g/S;if(x<1e-6)x=1e-6;v+=x;if(v>=1){v=1;o.sweepIntegrate(v*t);o.sweepValidate(i);var T=kr.distance(i,s,h,p,d,null)+r;var C=a*d.x+f*d.y;if(T<N.distanceThresholdCCD){var k=0;var L=0;k=h.x-o.posx;L=h.y-o.posy;var A=C-o.sweep_angvel*(d.y*k-d.x*L);if(A>0)e.slipped=true;if(A<=0||T<N.distanceThresholdCCD*.5)break}v=-1;break}if(++m>=40){if(g>r)e.failed=true;break}}e.toi=v};kr.distanceBody=function(e,t,n,r){var i;if(Or.zpp_pool==null)i=new Or;else{i=Or.zpp_pool;Or.zpp_pool=i.next;i.next=null}i.weak=false;var s;if(Or.zpp_pool==null)s=new Or;else{s=Or.zpp_pool;Or.zpp_pool=s.next;s.next=null}s.weak=false;var o;if(Or.zpp_pool==null)o=new Or;else{o=Or.zpp_pool;Or.zpp_pool=o.next;o.next=null}o.weak=false;var u=1e100;var a=e.shapes.head;while(a!=null){var f=a.elt;var l=t.shapes.head;while(l!=null){var c=l.elt;var h=kr.distance(f,c,i,s,o,u);if(h<u){u=h;n.x=i.x;n.y=i.y;r.x=s.x;r.y=s.y}l=l.next}a=a.next}var p=i;if(p.outer!=null){p.outer.zpp_inner=null;p.outer=null}p._isimmutable=null;p._validate=null;p._invalidate=null;p.next=Or.zpp_pool;Or.zpp_pool=p;var d=s;if(d.outer!=null){d.outer.zpp_inner=null;d.outer=null}d._isimmutable=null;d._validate=null;d._invalidate=null;d.next=Or.zpp_pool;Or.zpp_pool=d;var v=o;if(v.outer!=null){v.outer.zpp_inner=null;v.outer=null}v._isimmutable=null;v._validate=null;v._invalidate=null;v.next=Or.zpp_pool;Or.zpp_pool=v;return u};kr.distance=function(e,t,n,r,i,s){if(s==null)s=1e100;if(e.type==0&&t.type==0){var o=e.circle;var u=t.circle;var a;var f=0;var l=0;f=u.worldCOMx-o.worldCOMx;l=u.worldCOMy-o.worldCOMy;var c=Math.sqrt(f*f+l*l);a=c-(o.radius+u.radius);if(a<s){if(c==0){f=1;l=0}else{var h=1/c;f*=h;l*=h}var p=o.radius;n.x=o.worldCOMx+f*p;n.y=o.worldCOMy+l*p;var d=-u.radius;r.x=u.worldCOMx+f*d;r.y=u.worldCOMy+l*d;i.x=f;i.y=l}return a}else{var v=false;if(e.type==0&&t.type==1){var m=e;e=t;t=m;var g=n;n=r;r=g;v=true}if(e.type==1&&t.type==0){var y=e.polygon;var b=t.circle;var w=-1e100;var E=null;var S=y.edges.head;while(S!=null){var x=S.elt;var T=x.gnormx*b.worldCOMx+x.gnormy*b.worldCOMy-x.gprojection-b.radius;if(T>s){w=T;break}if(T>0){if(T>w){w=T;E=x}}else if(w<0&&T>w){w=T;E=x}S=S.next}if(w<s){var C=E.gp0;var k=E.gp1;var L=b.worldCOMy*E.gnormx-b.worldCOMx*E.gnormy;if(L<=C.y*E.gnormx-C.x*E.gnormy){var A=0;var O=0;A=b.worldCOMx-C.x;O=b.worldCOMy-C.y;var M=Math.sqrt(A*A+O*O);w=M-b.radius;if(w<s){if(M==0){A=1;O=0}else{var _=1/M;A*=_;O*=_}var D=0;n.x=C.x+A*D;n.y=C.y+O*D;var P=-b.radius;r.x=b.worldCOMx+A*P;r.y=b.worldCOMy+O*P;i.x=A;i.y=O}}else if(L>=k.y*E.gnormx-k.x*E.gnormy){var H=0;var B=0;H=b.worldCOMx-k.x;B=b.worldCOMy-k.y;var j=Math.sqrt(H*H+B*B);w=j-b.radius;if(w<s){if(j==0){H=1;B=0}else{var F=1/j;H*=F;B*=F}var I=0;n.x=k.x+H*I;n.y=k.y+B*I;var q=-b.radius;r.x=b.worldCOMx+H*q;r.y=b.worldCOMy+B*q;i.x=H;i.y=B}}else{var R=-b.radius;r.x=b.worldCOMx+E.gnormx*R;r.y=b.worldCOMy+E.gnormy*R;var U=-w;n.x=r.x+E.gnormx*U;n.y=r.y+E.gnormy*U;i.x=E.gnormx;i.y=E.gnormy}}if(v){i.x=-i.x;i.y=-i.y}return w}else{var z=e.polygon;var W=t.polygon;var X=-1e100;var V=null;var $=null;var J=0;var K=z.edges.head;while(K!=null){var Q=K.elt;var G=1e100;var Y=W.gverts.next;while(Y!=null){var Z=Y;var et=Q.gnormx*Z.x+Q.gnormy*Z.y;if(et<G)G=et;Y=Y.next}G-=Q.gprojection;if(G>s){X=G;break}if(G>0){if(G>X){X=G;V=Q;J=1}}else if(X<0&&G>X){X=G;V=Q;J=1}K=K.next}if(X<s){var tt=W.edges.head;while(tt!=null){var nt=tt.elt;var rt=1e100;var it=z.gverts.next;while(it!=null){var st=it;var ot=nt.gnormx*st.x+nt.gnormy*st.y;if(ot<rt)rt=ot;it=it.next}rt-=nt.gprojection;if(rt>s){X=rt;break}if(rt>0){if(rt>X){X=rt;$=nt;J=2}}else if(X<0&&rt>X){X=rt;$=nt;J=2}tt=tt.next}if(X<s){var ut;var at;var ft;if(J==1){ut=z;at=W;ft=V}else{ut=W;at=z;ft=$;var lt=n;n=r;r=lt;v=!v}var ct=null;var ht=1e100;var pt=at.edges.head;while(pt!=null){var dt=pt.elt;var vt=ft.gnormx*dt.gnormx+ft.gnormy*dt.gnormy;if(vt<ht){ht=vt;ct=dt}pt=pt.next}if(v){i.x=-ft.gnormx;i.y=-ft.gnormy}else{i.x=ft.gnormx;i.y=ft.gnormy}if(X>=0){var mt=ft.gp0;var gt=ft.gp1;var yt=ct.gp0;var bt=ct.gp1;var wt=0;var Et=0;var St=0;var xt=0;wt=gt.x-mt.x;Et=gt.y-mt.y;St=bt.x-yt.x;xt=bt.y-yt.y;var Tt=1/(wt*wt+Et*Et);var Nt=1/(St*St+xt*xt);var Ct=-(wt*(mt.x-yt.x)+Et*(mt.y-yt.y))*Tt;var kt=-(wt*(mt.x-bt.x)+Et*(mt.y-bt.y))*Tt;var Lt=-(St*(yt.x-mt.x)+xt*(yt.y-mt.y))*Nt;var At=-(St*(yt.x-gt.x)+xt*(yt.y-gt.y))*Nt;if(Ct<0)Ct=0;else if(Ct>1)Ct=1;if(kt<0)kt=0;else if(kt>1)kt=1;if(Lt<0)Lt=0;else if(Lt>1)Lt=1;if(At<0)At=0;else if(At>1)At=1;var Ot=0;var Mt=0;var _t=Ct;Ot=mt.x+wt*_t;Mt=mt.y+Et*_t;var Dt=0;var Pt=0;var Ht=kt;Dt=mt.x+wt*Ht;Pt=mt.y+Et*Ht;var Bt=0;var jt=0;var Ft=Lt;Bt=yt.x+St*Ft;jt=yt.y+xt*Ft;var It=0;var qt=0;var Rt=At;It=yt.x+St*Rt;qt=yt.y+xt*Rt;var Ut=_r.vec_dsq(Ot,Mt,yt.x,yt.y);var zt=_r.vec_dsq(Dt,Pt,bt.x,bt.y);var Wt=_r.vec_dsq(Bt,jt,mt.x,mt.y);var Xt=_r.vec_dsq(It,qt,gt.x,gt.y);var Vt=0;var $t=0;var Jt=null;if(Ut<zt){Vt=Ot;$t=Mt;Jt=yt}else{Vt=Dt;$t=Pt;Jt=bt;Ut=zt}var Kt=0;var Qt=0;var Gt=null;if(Wt<Xt){Kt=Bt;Qt=jt;Gt=mt}else{Kt=It;Qt=qt;Gt=gt;Wt=Xt}if(Ut<Wt){n.x=Vt;n.y=$t;r.x=Jt.x;r.y=Jt.y;X=Math.sqrt(Ut)}else{r.x=Kt;r.y=Qt;n.x=Gt.x;n.y=Gt.y;X=Math.sqrt(Wt)}if(X!=0){i.x=r.x-n.x;i.y=r.y-n.y;var Yt=1/X;i.x*=Yt;i.y*=Yt;if(v){i.x=-i.x;i.y=-i.y}}return X}else{var Zt=0;var en=0;Zt=ct.gp0.x;en=ct.gp0.y;var tn=0;var nn=0;tn=ct.gp1.x;nn=ct.gp1.y;var rn=0;var sn=0;rn=tn-Zt;sn=nn-en;var on=ft.gnormy*Zt-ft.gnormx*en;var un=ft.gnormy*tn-ft.gnormx*nn;var an=1/(un-on);var fn=(-ft.tp1-on)*an;if(fn>N.epsilon){var ln=fn;Zt+=rn*ln;en+=sn*ln}var cn=(-ft.tp0-un)*an;if(cn<-N.epsilon){var hn=cn;tn+=rn*hn;nn+=sn*hn}var pn=Zt*ft.gnormx+en*ft.gnormy-ft.gprojection;var dn=tn*ft.gnormx+nn*ft.gnormy-ft.gprojection;if(pn<dn){r.x=Zt;r.y=en;var vn=-pn;n.x=r.x+ft.gnormx*vn;n.y=r.y+ft.gnormy*vn;return pn}else{r.x=tn;r.y=nn;var mn=-dn;n.x=r.x+ft.gnormx*mn;n.y=r.y+ft.gnormy*mn;return dn}}}else return s}else return s}}};var Lr=function(){this.node=null;this.di=0;this.id=0;this.b=null;this.a=null;this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null};Lr.__name__=true;Lr.get=function(e,t){var n;if(Lr.zpp_pool==null)n=new Lr;else{n=Lr.zpp_pool;Lr.zpp_pool=n.next;n.next=null}null;n.a=e;n.b=t;if(e.id<t.id){n.id=e.id;n.di=t.id}else{n.id=t.id;n.di=e.id}return n};Lr.edge_swap=function(e,t){var n=e.node;e.node=t.node;t.node=n};Lr.edge_lt=function(e,t){return e.id<t.id||e.id==t.id&&e.di<t.di};Lr.prototype={elem:function(){return this},begin:function(){return this.next},setbegin:function(e){this.next=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;e._inuse=true;t=e;t.next=this.next;this.next=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.next;while(t!=null){var n=t;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;t._inuse=true;n=t;if(e==null){n.next=this.next;this.next=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.next;this.next=e.next;e._inuse=false;if(this.next==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.next;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.next;n=t.next;this.next=n;if(this.next==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}t._inuse=false;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){},inlined_clear:function(){},reverse:function(){var e=this.next;var t=null;while(e!=null){var n=e.next;e.next=t;this.next=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.next==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.next;while(n!=null){var r=n;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.next},back:function(){var e=this.next;var t=e;while(t!=null){e=t;t=t.next}return e},iterator_at:function(e){var t=this.next;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t;else return null},free:function(){this.a=this.b=null;this.node=null},alloc:function(){},__class__:Lr};var Ar=function(){};Ar.__name__=true;Ar.lt=function(e,t){return e.y<t.y||e.y==t.y&&e.x<t.x};Ar.right_turn=function(e,t,n){var r=0;var i=0;r=n.x-t.x;i=n.y-t.y;var s=0;var o=0;s=t.x-e.x;o=t.y-e.y;return o*r-s*i};Ar.delaunay=function(e,t,n,r){var i=0;var s=0;var o=0;var u=0;if(function(r){var a;{i=n.x-t.x;s=n.y-t.y}{o=t.x-e.x;u=t.y-e.y}a=u*i-o*s>=0;return a}(this)||function(e){var a;{i=r.x-n.x;s=r.y-n.y}{o=n.x-t.x;u=n.y-t.y}a=u*i-o*s>=0;return a}(this)||function(t){var a;{i=e.x-r.x;s=e.y-r.y}{o=r.x-n.x;u=r.y-n.y}a=u*i-o*s>=0;return a}(this)||function(n){var a;{i=t.x-e.x;s=t.y-e.y}{o=e.x-r.x;u=e.y-r.y}a=u*i-o*s>=0;return a}(this))return true;return t.x*(n.y*r.mag-n.mag*r.y)-n.x*(t.y*r.mag-t.mag*r.y)+r.x*(t.y*n.mag-t.mag*n.y)-(e.x*(n.y*r.mag-n.mag*r.y)-n.x*(e.y*r.mag-e.mag*r.y)+r.x*(e.y*n.mag-e.mag*n.y))+(e.x*(t.y*r.mag-t.mag*r.y)-t.x*(e.y*r.mag-e.mag*r.y)+r.x*(e.y*t.mag-e.mag*t.y))-(e.x*(t.y*n.mag-t.mag*n.y)-t.x*(e.y*n.mag-e.mag*n.y)+n.x*(e.y*t.mag-e.mag*t.y))>0;return t.x*(n.y*r.mag-n.mag*r.y)+t.y*(n.mag*r.x-n.x*r.mag)+t.mag*(n.x*r.y-n.y*r.x)+e.x*(n.mag*r.y-n.y*r.mag+t.mag*(n.y-r.y)+t.y*(r.mag-n.mag))+e.y*(n.x*r.mag-n.mag*r.x+t.mag*(r.x-n.x)+t.x*(n.mag-r.mag))+e.mag*(n.y*r.x-n.x*r.y+t.x*(r.y-n.y)+t.y*(n.x-r.x))>0};Ar.optimise=function(e){var t=e.vertices;var n=e.vertices;if(t!=null){var r=t;do{var i=r;i.sort();i.mag=i.x*i.x+i.y*i.y;r=r.next}while(r!=n)}if(Ar.edgeSet==null){if(Ps.zpp_pool==null)Ar.edgeSet=new Ps;else{Ar.edgeSet=Ps.zpp_pool;Ps.zpp_pool=Ar.edgeSet.next;Ar.edgeSet.next=null}null;Ar.edgeSet.lt=Lr.edge_lt;Ar.edgeSet.swapped=Lr.edge_swap}var s;if(Lr.zpp_pool==null)s=new Lr;else{s=Lr.zpp_pool;Lr.zpp_pool=s.next;s.next=null}null;var o=e.vertices;var u=e.vertices;if(o!=null){var a=o;do{var f=a;var l=f.next;f.diagonals.reverse();var c=f.diagonals.head;while(c!=null){var h=c.elt;if(h.id<f.id){l=h;c=c.next;continue}var p;if(c.next==null)p=f.prev;else p=c.next.elt;if(!Ar.delaunay(f,l,h,p)){var d=Lr.get(f,h);s.add(d);d.node=Ar.edgeSet.insert(d)}l=h;c=c.next}a=a.next}while(a!=u)}while(!(s.next==null)){var v=s.pop_unsafe();var m=v.a;var g=v.b;var y=m.next;var b=null;var w=m.diagonals.head;while(w!=null){var E=w.elt;if(E==g){w=w.next;if(w==null)b=m.prev;else b=w.elt;break}y=E;w=w.next}m.diagonals.remove(g);g.diagonals.remove(m);if(g==y.next)y.diagonals.add(b);else{var S=y.diagonals.head;while(S!=null){var x=S.elt;if(x==g){y.diagonals.insert(S,b);break}S=S.next}}if(m==b.next)b.diagonals.add(y);else{var T=b.diagonals.head;while(T!=null){var N=T.elt;if(N==m){b.diagonals.insert(T,y);break}T=T.next}}Ar.edgeSet.remove_node(v.node);var C=v;C.a=C.b=null;C.node=null;C.next=Lr.zpp_pool;Lr.zpp_pool=C}var k=s;k.a=k.b=null;k.node=null;k.next=Lr.zpp_pool;Lr.zpp_pool=k};Ar.triangulate=function(e){var t=e.vertices;var n=e.vertices;var r=e.vertices.next;var i=e.vertices;if(r!=null){var s=r;do{var o=s;if(o.y<t.y||o.y==t.y&&o.x<t.x)t=o;if(n.y<o.y||n.y==o.y&&n.x<o.x)n=o;s=s.next}while(s!=i)}if(Ar.queue==null)Ar.queue=new pi;var u=n.prev;var a=n.next;Ar.queue.add(n);while(u!=t||a!=t)if(u==t||a!=t&&(u.y<a.y||u.y==a.y&&u.x<a.x)){Ar.queue.add(a);a.rightchain=false;a=a.next}else{Ar.queue.add(u);u.rightchain=true;u=u.prev}Ar.queue.add(t);if(Ar.stack==null)Ar.stack=new pi;Ar.stack.add(Ar.queue.pop_unsafe());var f=Ar.queue.pop_unsafe();Ar.stack.add(f);while(true){var l=Ar.queue.pop_unsafe();if(Ar.queue.head==null)break;if(l.rightchain!=Ar.stack.head.elt.rightchain){while(true){var c=Ar.stack.pop_unsafe();if(Ar.stack.head==null)break;e.add_diagonal(c,l)}Ar.stack.add(f)}else{var h=Ar.stack.pop_unsafe();while(!(Ar.stack.head==null)){var p=Ar.stack.head.elt;var d=Ar.right_turn(p,h,l);if(l.rightchain&&d>=0||!l.rightchain&&d<=0)break;e.add_diagonal(p,l);h=p;Ar.stack.pop()}Ar.stack.add(h)}Ar.stack.add(l);f=l}if(!(Ar.stack.head==null)){Ar.stack.pop();while(!(Ar.stack.head==null)){var v=Ar.stack.pop_unsafe();if(Ar.stack.head==null)break;e.add_diagonal(n,v)}}return e};var Or=function(){this.y=0;this.x=0;this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null;this.weak=false;this.outer=null;this._isimmutable=null;this._immutable=false;this._validate=null;this._invalidate=null};Or.__name__=true;Or.get=function(e,t,n){if(n==null)n=false;var r;if(Or.zpp_pool==null)r=new Or;else{r=Or.zpp_pool;Or.zpp_pool=r.next;r.next=null}r.weak=false;r._immutable=n;r.x=e;r.y=t;return r};Or.prototype={validate:function(){if(this._validate!=null)this._validate()},invalidate:function(){if(this._invalidate!=null)this._invalidate(this)},immutable:function(){if(this._immutable)throw new g("Error: Vec2 is immutable");if(this._isimmutable!=null)this._isimmutable()},wrapper:function(){if(this.outer==null){this.outer=new _t;var e=this.outer.zpp_inner;if(e.outer!=null){e.outer.zpp_inner=null;e.outer=null}e._isimmutable=null;e._validate=null;e._invalidate=null;e.next=Or.zpp_pool;Or.zpp_pool=e;this.outer.zpp_inner=this}return this.outer},free:function(){if(this.outer!=null){this.outer.zpp_inner=null;this.outer=null}this._isimmutable=null;this._validate=null;this._invalidate=null},alloc:function(){this.weak=false},elem:function(){return this},begin:function(){return this.next},setbegin:function(e){this.next=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;e._inuse=true;t=e;t.next=this.next;this.next=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.next;while(t!=null){var n=t;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;t._inuse=true;n=t;if(e==null){n.next=this.next;this.next=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.next;this.next=e.next;e._inuse=false;if(this.next==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.next;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.next;n=t.next;this.next=n;if(this.next==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}t._inuse=false;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){},inlined_clear:function(){},reverse:function(){var e=this.next;var t=null;while(e!=null){var n=e.next;e.next=t;this.next=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.next==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.next;while(n!=null){var r=n;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.next},back:function(){var e=this.next;var t=e;while(t!=null){e=t;t=t.next}return e},iterator_at:function(e){var t=this.next;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t;else return null},copy:function(){return Or.get(this.x,this.y,null)},toString:function(){return"{ x: "+this.x+" y: "+this.y+" }"},__class__:Or};var Mr=function(){this._validate=null;this.immutable=false;this.z=0;this.y=0;this.x=0;this.outer=null;this.immutable=false;this._validate=null};Mr.__name__=true;Mr.prototype={validate:function(){if(this._validate!=null)this._validate()},__class__:Mr};var _r=function(){};_r.__name__=true;_r.vec_dsq=function(e,t,n,r){var i=0;var s=0;i=e-n;s=t-r;return i*i+s*s};_r.vec_distance=function(e,t,n,r){var i=0;var s=0;i=e-n;s=t-r;return Math.sqrt(i*i+s*s)};var Dr=function(){this.wrap_cbTypes=null;this.cbSet=null;this.cbTypes=null;this.group=null;this.cbsets=null;this.icompound=null;this.ibody=null;this.ishape=null;this.userData=null;this.id=0;this.outer_i=null;this.id=pn.Interactor();this.cbsets=new si;this.cbTypes=new Ln};Dr.__name__=true;Dr.get=function(e,t){var n;if(e.id<t.id)n=e.id;else n=t.id;var r;if(e.id<t.id)r=t.id;else r=e.id;var i;if(e.cbsets.length<t.cbsets.length)i=e.cbsets;else i=t.cbsets;var s=null;var o=i.head;while(o!=null){var u=o.elt;if(u.id==n&&u.di==r){s=u;break}o=o.next}return s};Dr.int_callback=function(e,t,n){var r=e.int1;var i=e.int2;if(t.options1.compatible(r.cbTypes)&&t.options2.compatible(i.cbTypes)){n.int1=r;n.int2=i}else{n.int1=i;n.int2=r}};Dr.prototype={isShape:function(){return this.ishape!=null},isBody:function(){return this.ibody!=null},isCompound:function(){return this.icompound!=null},__iaddedToSpace:function(){if(this.group!=null)this.group.interactors.add(this);var e=this.cbTypes.head;while(e!=null){var t=e.elt;t.interactors.add(this);e=e.next}this.alloc_cbSet()},__iremovedFromSpace:function(){if(this.group!=null)this.group.interactors.remove(this);var e=this.cbTypes.head;while(e!=null){var t=e.elt;t.interactors.remove(this);e=e.next}this.dealloc_cbSet()},wake:function(){if(this.ishape!=null){var e=this.ishape.body;if(e!=null&&e.space!=null)e.space.non_inlined_wake(e);true}else if(this.ibody!=null){if(this.ibody.space!=null)this.ibody.space.non_inlined_wake(this.ibody);else false}else{if(this.icompound.space!=null)this.icompound.space.wakeCompound(this.icompound);true}},getSpace:function(){if(this.ishape!=null){if(this.ishape.body==null)return null;else return this.ishape.body.space}else if(this.ibody!=null)return this.ibody.space;else return this.icompound.space},setupcbTypes:function(){this.wrap_cbTypes=bs.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=Rs(this,this.wrap_cbTypes_adder);this.wrap_cbTypes.zpp_inner.subber=Rs(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=true;this.wrap_cbTypes.zpp_inner._modifiable=Rs(this,this.immutable_cbTypes)},immutable_cbTypes:function(){this.immutable_midstep("Interactor::cbTypes")},wrap_cbTypes_subber:function(e){var t=e.zpp_inner;if(this.cbTypes.has(t)){var n;if(this.ishape!=null){if(this.ishape.body==null)n=null;else n=this.ishape.body.space}else if(this.ibody!=null)n=this.ibody.space;else n=this.icompound.space;if(n!=null){this.dealloc_cbSet();t.interactors.remove(this)}this.cbTypes.remove(t);if(n!=null){this.alloc_cbSet();this.wake()}}},wrap_cbTypes_adder:function(e){this.insert_cbtype(e.zpp_inner);return false},insert_cbtype:function(e){if(!this.cbTypes.has(e)){var t;if(this.ishape!=null){if(this.ishape.body==null)t=null;else t=this.ishape.body.space}else if(this.ibody!=null)t=this.ibody.space;else t=this.icompound.space;if(t!=null){this.dealloc_cbSet();e.interactors.add(this)}var n=null;var r=this.cbTypes.head;while(r!=null){var i=r.elt;if(e.id<i.id)break;n=r;r=r.next}this.cbTypes.inlined_insert(n,e);if(t!=null){this.alloc_cbSet();this.wake()}}},alloc_cbSet:function(){var e;if(this.ishape!=null){if(this.ishape.body==null)e=null;else e=this.ishape.body.space}else if(this.ibody!=null)e=this.ibody.space;else e=this.icompound.space;if((this.cbSet=e.cbsets.get(this.cbTypes))!=null){this.cbSet.count++;this.cbSet.interactors.add(this);this.cbSet.validate();e.freshInteractorType(this)}},dealloc_cbSet:function(){var e;if(this.ishape!=null){if(this.ishape.body==null)e=null;else e=this.ishape.body.space}else if(this.ibody!=null)e=this.ibody.space;else e=this.icompound.space;if(this.cbSet!=null){this.cbSet.interactors.remove(this);e.nullInteractorType(this);if(--this.cbSet.count==0){e.cbsets.remove(this.cbSet);var t=this.cbSet;t.free();t.next=vn.zpp_pool;vn.zpp_pool=t}this.cbSet=null}},setGroup:function(e){if(this.group!=e){var t;t=(this.ishape!=null?this.ishape.body==null?null:this.ishape.body.space:this.ibody!=null?this.ibody.space:this.icompound.space)!=null;if(t&&this.group!=null)this.group.interactors.remove(this);this.group=e;if(t&&e!=null)e.interactors.add(this);if(t){if(this.ishape!=null)this.ishape.body.wake();else if(this.ibody!=null)this.ibody.wake();else this.icompound.wake()}}},immutable_midstep:function(e){if(this.ibody!=null)this.ibody.__immutable_midstep(e);else if(this.ishape!=null)this.ishape.__immutable_midstep(e);else this.icompound.__imutable_midstep(e)},lookup_group:function(){var e=this;while(e!=null&&e.group==null)if(e.ishape!=null)e=e.ishape.body;else if(e.icompound!=null)e=e.icompound.compound;else e=e.ibody.compound;if(e==null)return null;else return e.group},copyto:function(e){e.zpp_inner_i.group=this.group;var t=this.outer_i.get_cbTypes().iterator();while(t.hasNext()){var n;t.zpp_critical=false;n=t.zpp_inner.at(t.zpp_i++);(function(t){var n;if(e.zpp_inner_i.wrap_cbTypes==null)e.zpp_inner_i.setupcbTypes();n=e.zpp_inner_i.wrap_cbTypes;return n})(this).add(n)}if(this.userData!=null)e.zpp_inner_i.userData=c.copy(this.userData)},__class__:Dr};var Pr=function(){this.wrap_worldCOM=null;this.wrap_localCOM=null;this.zip_worldCOM=false;this.worldCOMy=0;this.worldCOMx=0;this.zip_localCOM=false;this.localCOMy=0;this.localCOMx=0;this.zip_aabb=false;this.aabb=null;this.norotate=false;this.sinertia=0;this.iinertia=0;this.cinertia=0;this.zip_inertia=false;this.inertia=0;this.inertiaMode=0;this.zip_gravMassScale=false;this.gravMassScale=0;this.gravMassMode=0;this.zip_gravMass=false;this.gravMass=0;this.nomove=false;this.cmass=0;this.smass=0;this.imass=0;this.massMode=0;this.zip_mass=false;this.mass=0;this.zip_axis=false;this.axisy=0;this.axisx=0;this.rot=0;this.pre_rot=0;this.kinangvel=0;this.torque=0;this.angvel=0;this.wrapcvel=null;this.wrap_svel=null;this.svely=0;this.svelx=0;this.wrap_kinvel=null;this.kinvely=0;this.kinvelx=0;this.wrap_force=null;this.forcey=0;this.forcex=0;this.wrap_vel=null;this.vely=0;this.velx=0;this.wrap_pos=null;this.posy=0;this.posx=0;this.pre_posy=0;this.pre_posx=0;this.disableCCD=false;this.bulletEnabled=false;this.bullet=false;this.sweepRadius=0;this.sweepFrozen=false;this.sweep_angvel=0;this.sweepTime=0;this.graph_depth=0;this.component=null;this.wrap_constraints=null;this.constraints=null;this.wrap_arbiters=null;this.arbiters=null;this.space=null;this.wrap_shapes=null;this.shapes=null;this.compound=null;this.type=0;this.world=false;this.outer=null;Dr.call(this);this.ibody=this;this.world=false;this.bulletEnabled=false;this.sweepTime=0;this.sweep_angvel=0;this.norotate=this.nomove=false;this.disableCCD=false;this.posx=0;this.posy=0;this.rot=0;this.axisx=0;this.axisy=1;this.svelx=0;this.svely=0;this.velx=0;this.vely=0;this.kinvelx=0;this.kinvely=0;this.forcex=0;this.forcey=0;this.torque=this.angvel=this.kinangvel=0;this.pre_posx=Infinity;this.pre_posy=Infinity;this.pre_rot=Infinity;this.localCOMx=0;this.localCOMy=0;this.worldCOMx=0;this.worldCOMy=0;this.zip_aabb=true;this.aabb=Gn.get(0,0,0,0);this.aabb._immutable=true;var e=this;this.aabb._validate=Rs(this,this.aabb_validate);this.massMode=0;this.gravMassMode=0;this.gravMassScale=1;this.inertiaMode=0;this.arbiters=new fi;this.constraints=new wn;this.shapes=new oi;this.wrap_shapes=Ns.get(this.shapes);this.wrap_shapes.zpp_inner.adder=Rs(this,this.shapes_adder);this.wrap_shapes.zpp_inner.subber=Rs(this,this.shapes_subber);this.wrap_shapes.zpp_inner._invalidate=Rs(this,this.shapes_invalidate);this.wrap_shapes.zpp_inner._modifiable=Rs(this,this.shapes_modifiable);this.kinematicDelaySleep=false};Pr.__name__=true;Pr.bodysetlt=function(e,t){return e.id<t.id};Pr.__static=function(){var e=new Ft(function(e){var t;if(Tn.BodyType_STATIC==null){Tn.internal=true;Tn.BodyType_STATIC=new Rt;Tn.internal=false}t=Tn.BodyType_STATIC;return t}(this));var t=e.zpp_inner;t.world=true;t.wrap_shapes.zpp_inner.immutable=true;t.smass=t.imass=t.cmass=t.mass=t.gravMass=0;t.sinertia=t.iinertia=t.cinertia=t.inertia=0;t.cbTypes.clear();return e};Pr.__super__=Dr;Pr.prototype=n(Dr.prototype,{isStatic:function(){return this.type==1},isDynamic:function(){return this.type==2},isKinematic:function(){return this.type==3},invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},invalidate_shapes:function(){this.zip_aabb=true;this.zip_localCOM=true;this.zip_worldCOM=true;this.invalidate_mass();this.invalidate_inertia()},init_bodysetlist:function(){if(Pr.bodyset==null){Pr.bodyset=new Ms;Pr.bodyset.lt=Pr.bodysetlt;Pr.bodystack=new ui}},connectedBodies_cont:function(e){if(Pr.bodyset.try_insert_bool(e.zpp_inner)){Pr.bodystack.add(e.zpp_inner);e.zpp_inner.graph_depth=Pr.cur_graph_depth+1}},connectedBodies:function(e,t){var n=this;if(Pr.bodyset==null){Pr.bodyset=new Ms;Pr.bodyset.lt=Pr.bodysetlt;Pr.bodystack=new ui}null;var r;if(t==null)r=new qt;else r=t;Pr.bodystack.add(this);Pr.bodyset.insert(this);this.graph_depth=0;while(!(Pr.bodystack.head==null)){var i=Pr.bodystack.pop_unsafe();if(i.graph_depth==e)continue;Pr.cur_graph_depth=i.graph_depth;var s=i.constraints.head;while(s!=null){var o=s.elt;o.outer.visitBodies(Rs(this,this.connectedBodies_cont));s=s.next}}Pr.bodyset.clear_with(function(e){if(e!=n)r.add(e.outer)});return r},interactingBodies:function(e,t,n){var r=this;if(Pr.bodyset==null){Pr.bodyset=new Ms;Pr.bodyset.lt=Pr.bodysetlt;Pr.bodystack=new ui}null;var i;if(n==null)i=new qt;else i=n;Pr.bodyset.insert(this);Pr.bodystack.add(this);this.graph_depth=0;while(!(Pr.bodystack.head==null)){var s=Pr.bodystack.pop_unsafe();if(s.graph_depth==t)continue;var o=s.arbiters.head;while(o!=null){var u=o.elt;if((u.type&e)!=0){var a;if(u.b1==s)a=u.b2;else a=u.b1;if(Pr.bodyset.try_insert_bool(a)){Pr.bodystack.add(a);a.graph_depth=s.graph_depth+1}}o=o.next}}Pr.bodyset.clear_with(function(e){if(e!=r)i.add(e.outer)});return i},atRest:function(e){if(!(this.type==2))return this.component.sleeping;else{var t=N.linearSleepThreshold;t*=t;var n;if(this.velx*this.velx+this.vely*this.vely>t)n=false;else if(_r.vec_dsq(this.posx,this.posy,this.pre_posx,this.pre_posy)>.25*t*e*e)n=false;else{var r=0;var i=0;r=this.aabb.maxx-this.aabb.minx;i=this.aabb.maxy-this.aabb.miny;var s=r*r+i*i;var o=N.angularSleepThreshold;o*=o;if(4*this.angvel*this.angvel*s>o)n=false;else{var u=this.rot-this.pre_rot;if(u*u*s>o*e*e)n=false;else n=true}}if(!n)this.component.waket=this.space.stamp;return this.component.waket+N.sleepDelay<this.space.stamp}},refreshArbiters:function(){var e=this.arbiters.head;while(e!=null){var t=e.elt;t.invalidated=true;e=e.next}},sweepIntegrate:function(e){var t=e-this.sweepTime;if(t!=0){this.sweepTime=e;var n=t;this.posx+=this.velx*n;this.posy+=this.vely*n;if(this.angvel!=0)this.delta_rot(this.sweep_angvel*t)}},sweepValidate:function(e){if(e.type==0){e.worldCOMx=this.posx+(this.axisy*e.localCOMx-this.axisx*e.localCOMy);e.worldCOMy=this.posy+(e.localCOMx*this.axisx+e.localCOMy*this.axisy)}else{var t=e.polygon;var n=t.lverts.next;var r=t.gverts.next;while(r!=null){var i=r;var s=n;n=n.next;i.x=this.posx+(this.axisy*s.x-this.axisx*s.y);i.y=this.posy+(s.x*this.axisx+s.y*this.axisy);r=r.next}var o=t.edges.head;var u=t.gverts.next;var a=u;u=u.next;while(u!=null){var f=u;var l=o.elt;o=o.next;l.gnormx=this.axisy*l.lnormx-this.axisx*l.lnormy;l.gnormy=l.lnormx*this.axisx+l.lnormy*this.axisy;l.gprojection=this.posx*l.gnormx+this.posy*l.gnormy+l.lprojection;l.tp0=a.y*l.gnormx-a.x*l.gnormy;l.tp1=f.y*l.gnormx-f.x*l.gnormy;a=f;u=u.next}var c=t.gverts.next;var h=o.elt;o=o.next;h.gnormx=this.axisy*h.lnormx-this.axisx*h.lnormy;h.gnormy=h.lnormx*this.axisx+h.lnormy*this.axisy;h.gprojection=this.posx*h.gnormx+this.posy*h.gnormy+h.lprojection;h.tp0=a.y*h.gnormx-a.x*h.gnormy;h.tp1=c.y*h.gnormx-c.x*h.gnormy}},invalidate_pos:function(){var e=this.shapes.head;while(e!=null){var t=e.elt;if(t.type==1){t.polygon.invalidate_gverts();t.polygon.invalidate_gaxi()}t.invalidate_worldCOM();e=e.next}this.zip_worldCOM=true},pos_invalidate:function(e){this.immutable_midstep("Body::position");if(this.type==1&&this.space!=null)throw new g("Error: Cannot move a static object once inside a Space");if(!(this.posx==e.x&&this.posy==e.y)){this.posx=e.x;this.posy=e.y;this.invalidate_pos();this.wake()}},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(e){if(this.type==1)throw new g("Error: Static body cannot have its velocity set.");this.velx=e.x;this.vely=e.y;this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},kinvel_invalidate:function(e){this.kinvelx=e.x;this.kinvely=e.y;this.wake()},kinvel_validate:function(){this.wrap_kinvel.zpp_inner.x=this.kinvelx;this.wrap_kinvel.zpp_inner.y=this.kinvely},svel_invalidate:function(e){this.svelx=e.x;this.svely=e.y;this.wake()},svel_validate:function(){this.wrap_svel.zpp_inner.x=this.svelx;this.wrap_svel.zpp_inner.y=this.svely},force_invalidate:function(e){if(!(this.type==2))throw new g("Error: Non-dynamic body cannot have force applied.");this.forcex=e.x;this.forcey=e.y;this.wake()},force_validate:function(){this.wrap_force.zpp_inner.x=this.forcex;this.wrap_force.zpp_inner.y=this.forcey},setupPosition:function(){this.wrap_pos=_t.get(this.posx,this.posy,null);this.wrap_pos.zpp_inner._inuse=true;if(this.world)this.wrap_pos.zpp_inner._immutable=true;else{this.wrap_pos.zpp_inner._invalidate=Rs(this,this.pos_invalidate);this.wrap_pos.zpp_inner._validate=Rs(this,this.pos_validate)}},setupVelocity:function(){this.wrap_vel=_t.get(this.velx,this.vely,null);this.wrap_vel.zpp_inner._inuse=true;if(this.world)this.wrap_vel.zpp_inner._immutable=true;else{this.wrap_vel.zpp_inner._invalidate=Rs(this,this.vel_invalidate);this.wrap_vel.zpp_inner._validate=Rs(this,this.vel_validate)}},setupkinvel:function(){this.wrap_kinvel=_t.get(this.kinvelx,this.kinvely,null);this.wrap_kinvel.zpp_inner._inuse=true;if(this.world)this.wrap_kinvel.zpp_inner._immutable=true;else{this.wrap_kinvel.zpp_inner._invalidate=Rs(this,this.kinvel_invalidate);this.wrap_kinvel.zpp_inner._validate=Rs(this,this.kinvel_validate)}},setupsvel:function(){this.wrap_svel=_t.get(this.svelx,this.svely,null);this.wrap_svel.zpp_inner._inuse=true;if(this.world)this.wrap_svel.zpp_inner._immutable=true;else{this.wrap_svel.zpp_inner._invalidate=Rs(this,this.svel_invalidate);this.wrap_svel.zpp_inner._validate=Rs(this,this.svel_validate)}},setupForce:function(){this.wrap_force=_t.get(this.forcex,this.forcey,null);this.wrap_force.zpp_inner._inuse=true;if(this.world)this.wrap_force.zpp_inner._immutable=true;else{this.wrap_force.zpp_inner._invalidate=Rs(this,this.force_invalidate);this.wrap_force.zpp_inner._validate=Rs(this,this.force_validate)}},cvel_validate:function(){this.wrapcvel.zpp_inner.x=this.velx+this.kinvelx;this.wrapcvel.zpp_inner.y=this.vely+this.kinvely;this.wrapcvel.zpp_inner.z=this.angvel+this.kinangvel},setup_cvel:function(){var e=this;this.wrapcvel=Ht.get();this.wrapcvel.zpp_inner.immutable=true;this.wrapcvel.zpp_inner._validate=Rs(this,this.cvel_validate)},invalidate_rot:function(){this.zip_axis=true;var e=this.shapes.head;while(e!=null){var t=e.elt;if(t.type==1){t.polygon.invalidate_gverts();t.polygon.invalidate_gaxi()}t.invalidate_worldCOM();e=e.next}this.zip_worldCOM=true},validate_axis:function(){if(this.zip_axis){this.zip_axis=false;this.axisx=Math.sin(this.rot);this.axisy=Math.cos(this.rot);null}},quick_validate_axis:function(){this.axisx=Math.sin(this.rot);this.axisy=Math.cos(this.rot)},delta_rot:function(e){this.rot+=e;if(e*e>1e-4){this.axisx=Math.sin(this.rot);this.axisy=Math.cos(this.rot);null}else{var t=e*e;var n=1-.5*t;var r=1-t*t/8;var i=(n*this.axisx+e*this.axisy)*r;this.axisy=(n*this.axisy-e*this.axisx)*r;this.axisx=i}},invalidate_mass:function(){this.zip_mass=true;this.invalidate_gravMass()},validate_mass:function(){var e=false;if(this.zip_mass||this.massMode==0&&e){this.zip_mass=false;if(this.massMode==0){this.cmass=0;var t=this.shapes.head;while(t!=null){var n=t.elt;n.refmaterial.density=n.material.density;n.validate_area_inertia();this.cmass+=n.area*n.material.density;t=t.next}}if(this.type==2&&!this.nomove){this.mass=this.cmass;this.imass=this.smass=1/this.mass}else{this.mass=Infinity;this.imass=this.smass=0}if(e)this.invalidate_inertia()}},invalidate_gravMass:function(){if(this.gravMassMode!=1)this.zip_gravMass=true;if(this.gravMassMode!=2)this.zip_gravMassScale=true;this.wake()},validate_gravMass:function(){if(this.zip_gravMass){this.zip_gravMass=false;this.validate_mass();if(this.gravMassMode==0){this.validate_mass();this.gravMass=this.cmass}else if(this.gravMassMode==2){this.validate_mass();this.gravMass=this.cmass*this.gravMassScale}}},invalidate_gravMassScale:function(){if(this.gravMassMode!=2)this.zip_gravMassScale=true;else this.invalidate_gravMass()},validate_gravMassScale:function(){if(this.zip_gravMassScale){this.zip_gravMassScale=false;if(this.gravMassMode==0)this.gravMassScale=1;else if(this.gravMassMode==1){this.validate_mass();this.gravMassScale=this.gravMass/this.cmass}}},invalidate_inertia:function(){this.zip_inertia=true;this.wake()},validate_inertia:function(){var e=false;if(this.zip_inertia||this.inertiaMode==0&&e){this.zip_inertia=false;if(this.inertiaMode==0){this.cinertia=0;var t=this.shapes.head;while(t!=null){var n=t.elt;n.refmaterial.density=n.material.density;n.validate_area_inertia();this.cinertia+=n.inertia*n.area*n.material.density;t=t.next}}if(this.type==2&&!this.norotate){this.inertia=this.cinertia;this.sinertia=this.iinertia=1/this.inertia}else{this.inertia=Infinity;this.sinertia=this.iinertia=0}if(e)this.invalidate_inertia()}},invalidate_wake:function(){this.wake()},validate_aabb:function(){if(this.shapes.head==null)throw new g("Error: Body bounds only makes sense if it contains shapes");if(this.zip_aabb){this.zip_aabb=false;this.aabb.minx=Infinity;this.aabb.miny=Infinity;this.aabb.maxx=-Infinity;this.aabb.maxy=-Infinity;var e=this.shapes.head;while(e!=null){var t=e.elt;if(t.zip_aabb){if(t.body!=null){t.zip_aabb=false;if(t.type==0)t.circle.__validate_aabb();else t.polygon.__validate_aabb()}}this.aabb.combine(t.aabb);e=e.next}}},invalidate_aabb:function(){this.zip_aabb=true},invalidate_localCOM:function(){this.zip_localCOM=true;this.zip_worldCOM=true},invalidate_worldCOM:function(){this.zip_worldCOM=true},validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=false;var e=0;var t=0;var n=0;var r=this.shapes.head;while(r!=null){var i=r.elt;if(i.zip_localCOM){i.zip_localCOM=false;if(i.type==1)i.polygon.__validate_localCOM();if(i.wrap_localCOM!=null){i.wrap_localCOM.zpp_inner.x=i.localCOMx;i.wrap_localCOM.zpp_inner.y=i.localCOMy}}i.validate_area_inertia();var s=i.area*i.material.density;e+=i.localCOMx*s;t+=i.localCOMy*s;n+=i.area*i.material.density;r=r.next}if(n!=0){var o=1/n;this.localCOMx=e*o;this.localCOMy=t*o}if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}if(this.zip_mass&&this.massMode==0){this.zip_mass=false;this.cmass=n;if(this.type==2){this.mass=this.cmass;this.imass=this.smass=1/this.mass}else{this.mass=Infinity;this.imass=this.smass=0}}}},validate_worldCOM:function(){if(this.zip_worldCOM){this.zip_worldCOM=false;this.validate_localCOM();if(this.zip_axis){this.zip_axis=false;this.axisx=Math.sin(this.rot);this.axisy=Math.cos(this.rot);null}this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy);this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy);if(this.wrap_worldCOM!=null){this.wrap_worldCOM.zpp_inner.x=this.worldCOMx;this.wrap_worldCOM.zpp_inner.y=this.worldCOMy}}},getlocalCOM:function(){if(this.shapes.head==null)throw new g("Error: localCOM only makes sense when Body has Shapes");this.validate_localCOM()},getworldCOM:function(){if(this.shapes.head==null)throw new g("Error: worldCOM only makes sense when Body has Shapes");this.validate_worldCOM()},__immutable_midstep:function(e){if(this.space!=null&&this.space.midstep)throw new g("Error: "+e+" cannot be set during a space step()")},clear:function(){if(this.space!=null)throw new g("Error: Cannot clear a Body if it is currently being used by a Space!");if(!(this.constraints.head==null))throw new g("Error: Cannot clear a Body if it is currently being used by a constraint!");while(!(this.shapes.head==null)){var e=this.shapes.pop_unsafe();e.removedFromBody();e.body=null}this.invalidate_shapes();this.pre_posx=0;this.pre_posy=0;this.posx=0;this.posy=0;this.velx=0;this.vely=0;this.forcex=0;this.forcey=0;this.kinvelx=0;this.kinvely=0;this.svelx=0;this.svely=0;this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=0;this.invalidate_pos();this.invalidate_rot();this.axisx=0;this.axisy=1;this.zip_axis=false;this.massMode=0;this.gravMassMode=0;this.gravMassScale=1;this.inertiaMode=0;this.norotate=false;this.nomove=false},aabb_validate:function(){if(this.shapes.head==null)throw new g("Error: bounds only makes sense when Body has shapes");this.validate_aabb()},shapes_adder:function(e){if(e.zpp_inner.body!=this){if(e.zpp_inner.body!=null)e.zpp_inner.body.wrap_shapes.remove(e);e.zpp_inner.body=this;e.zpp_inner.addedToBody();if(this.space!=null)this.space.added_shape(e.zpp_inner,null);if(e.zpp_inner.type==1){e.zpp_inner.polygon.invalidate_gaxi();e.zpp_inner.polygon.invalidate_gverts()}return true}else return false},shapes_subber:function(e){if(this.space!=null)this.space.removed_shape(e.zpp_inner);e.zpp_inner.body=null;e.zpp_inner.removedFromBody()},shapes_invalidate:function(e){this.invalidate_shapes()},shapes_modifiable:function(){this.immutable_midstep("Body::shapes");if(this.type==1&&this.space!=null)throw new g("Error: Cannot modifiy shapes of static object once added to Space")},addedToSpace:function(){if(Jr.zpp_pool==null)this.component=new Jr;else{this.component=Jr.zpp_pool;Jr.zpp_pool=this.component.next;this.component.next=null}null;this.component.isBody=true;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){while(!(this.arbiters.head==null)){var e=this.arbiters.pop_unsafe();e.cleared=true;if(e.b2==this)e.b1.arbiters.inlined_try_remove(e);if(e.b1==this)e.b2.arbiters.inlined_try_remove(e);if(e.pair!=null){e.pair.arb=null;e.pair=null}e.active=false;this.space.f_arbiters.modified=true}var t=this.component;t.body=null;t.constraint=null;null;t.next=Jr.zpp_pool;Jr.zpp_pool=t;this.component=null;this.__iremovedFromSpace()},copy:function(){var e=(new Ft).zpp_inner;e.type=this.type;e.bulletEnabled=this.bulletEnabled;e.disableCCD=this.disableCCD;var t=this.shapes.head;while(t!=null){var n=t.elt;e.outer.zpp_inner.wrap_shapes.add(n.outer.copy());t=t.next}e.posx=this.posx;e.posy=this.posy;e.velx=this.velx;e.vely=this.vely;e.forcex=this.forcex;e.forcey=this.forcey;e.rot=this.rot;e.angvel=this.angvel;e.torque=this.torque;e.kinvelx=this.kinvelx;e.kinvely=this.kinvely;e.kinangvel=this.kinangvel;e.svelx=this.svelx;e.svely=this.svely;if(!this.zip_axis){e.axisx=this.axisx;e.axisy=this.axisy}else e.invalidate_rot();e.rot=this.rot;e.massMode=this.massMode;e.gravMassMode=this.gravMassMode;e.inertiaMode=this.inertiaMode;e.norotate=this.norotate;e.nomove=this.nomove;e.cmass=this.cmass;e.cinertia=this.cinertia;if(!this.zip_mass)e.mass=this.mass;else e.invalidate_mass();if(!this.zip_gravMass)e.gravMass=this.gravMass;else e.invalidate_gravMass();if(!this.zip_gravMassScale)e.gravMassScale=this.gravMassScale;else e.invalidate_gravMassScale();if(!this.zip_inertia)e.inertia=this.inertia;else e.invalidate_inertia();if(!this.zip_aabb){e.aabb.minx=this.aabb.minx;e.aabb.miny=this.aabb.miny;e.aabb.maxx=this.aabb.maxx;e.aabb.maxy=this.aabb.maxy}else e.zip_aabb=true;if(!this.zip_localCOM){e.localCOMx=this.localCOMx;e.localCOMy=this.localCOMy}else{e.zip_localCOM=true;e.zip_worldCOM=true}if(!this.zip_worldCOM){e.worldCOMx=this.worldCOMx;e.worldCOMy=this.worldCOMy}else e.zip_worldCOM=true;this.copyto(e.outer);return e.outer},__class__:Pr});var Hr=function(){this.space=null;this.compound=null;this.depth=0;this.wrap_compounds=null;this.wrap_constraints=null;this.wrap_bodies=null;this.compounds=null;this.constraints=null;this.bodies=null;this.outer=null;Dr.call(this);this.icompound=this;this.depth=1;var e=this;this.bodies=new ui;this.wrap_bodies=vs.get(this.bodies);this.wrap_bodies.zpp_inner.adder=Rs(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=Rs(this,this.bodies_subber);this.wrap_bodies.zpp_inner._modifiable=Rs(this,this.bodies_modifiable);this.constraints=new wn;this.wrap_constraints=ds.get(this.constraints);this.wrap_constraints.zpp_inner.adder=Rs(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=Rs(this,this.constraints_subber);this.wrap_constraints.zpp_inner._modifiable=Rs(this,this.constraints_modifiable);this.compounds=new ai;this.wrap_compounds=gs.get(this.compounds);this.wrap_compounds.zpp_inner.adder=Rs(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=Rs(this,this.compounds_subber);this.wrap_compounds.zpp_inner._modifiable=Rs(this,this.compounds_modifiable)};Hr.__name__=true;Hr.__super__=Dr;Hr.prototype=n(Dr.prototype,{__imutable_midstep:function(e){if(this.space!=null&&this.space.midstep)throw new g("Error: "+e+" cannot be set during space step()")},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},breakApart:function(){if(this.space!=null){this.__iremovedFromSpace();this.space.nullInteractorType(this)}if(this.compound!=null)this.compound.compounds.remove(this);else if(this.space!=null)this.space.compounds.remove(this);while(!(this.bodies.head==null)){var e=this.bodies.pop_unsafe();if((e.compound=this.compound)!=null)this.compound.bodies.add(e);else if(this.space!=null)this.space.bodies.add(e);if(this.space!=null)this.space.freshInteractorType(e)}while(!(this.constraints.head==null)){var t=this.constraints.pop_unsafe();if((t.compound=this.compound)!=null)this.compound.constraints.add(t);else if(this.space!=null)this.space.constraints.add(t)}while(!(this.compounds.head==null)){var n=this.compounds.pop_unsafe();if((n.compound=this.compound)!=null)this.compound.compounds.add(n);else if(this.space!=null)this.space.compounds.add(n);if(this.space!=null)this.space.freshInteractorType(n)}this.compound=null;this.space=null},bodies_adder:function(e){if(e.zpp_inner.compound!=this){if(e.zpp_inner.compound!=null)e.zpp_inner.compound.wrap_bodies.remove(e);else if(e.zpp_inner.space!=null)e.zpp_inner.space.wrap_bodies.remove(e);e.zpp_inner.compound=this;if(this.space!=null)this.space.addBody(e.zpp_inner);return true}else return false},bodies_subber:function(e){e.zpp_inner.compound=null;if(this.space!=null)this.space.remBody(e.zpp_inner)},bodies_modifiable:function(){this.immutable_midstep("Compound::"+"bodies")},constraints_adder:function(e){if(e.zpp_inner.compound!=this){if(e.zpp_inner.compound!=null)e.zpp_inner.compound.wrap_constraints.remove(e);else if(e.zpp_inner.space!=null)e.zpp_inner.space.wrap_constraints.remove(e);e.zpp_inner.compound=this;if(this.space!=null)this.space.addConstraint(e.zpp_inner);return true}else return false},constraints_subber:function(e){e.zpp_inner.compound=null;if(this.space!=null)this.space.remConstraint(e.zpp_inner)},constraints_modifiable:function(){this.immutable_midstep("Compound::"+"constraints")},compounds_adder:function(e){var t=this;while(t!=null&&t!=e.zpp_inner)t=t.compound;if(t==e.zpp_inner){throw new g("Error: Assignment would cause a cycle in the Compound tree: assigning "+e.toString()+".compound = "+this.outer.toString());return false}if(e.zpp_inner.compound!=this){if(e.zpp_inner.compound!=null)e.zpp_inner.compound.wrap_compounds.remove(e);else if(e.zpp_inner.space!=null)e.zpp_inner.space.wrap_compounds.remove(e);e.zpp_inner.compound=this;e.zpp_inner.depth=this.depth+1;if(this.space!=null)this.space.addCompound(e.zpp_inner);return true}else return false},compounds_subber:function(e){e.zpp_inner.compound=null;e.zpp_inner.depth=1;if(this.space!=null)this.space.remCompound(e.zpp_inner)},compounds_modifiable:function(){this.immutable_midstep("Compound::"+"compounds")},copy:function(e,t){var n=e==null;if(e==null)e=[];if(t==null)t=[];var r=new Ut;var i=this.compounds.head;while(i!=null){var s=i.elt;var o=s.copy(e,t);o.zpp_inner.immutable_midstep("Compound::compound");if((o.zpp_inner.compound==null?null:o.zpp_inner.compound.outer)!=r){if((o.zpp_inner.compound==null?null:o.zpp_inner.compound.outer)!=null)(o.zpp_inner.compound==null?null:o.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(o);if(r!=null)r.zpp_inner.wrap_compounds.add(o)}if(o.zpp_inner.compound==null)null;else o.zpp_inner.compound.outer;i=i.next}var u=this.bodies.head;while(u!=null){var a=u.elt;var f=a.outer.copy();e.push(Dn.dict(a.id,f));if((f.zpp_inner.compound==null?null:f.zpp_inner.compound.outer)!=r){if((f.zpp_inner.compound==null?null:f.zpp_inner.compound.outer)!=null)(f.zpp_inner.compound==null?null:f.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(f);if(r!=null)r.zpp_inner.wrap_bodies.add(f)}if(f.zpp_inner.compound==null)null;else f.zpp_inner.compound.outer;u=u.next}var l=this.constraints.head;while(l!=null){var c=l.elt;var h=c.copy(e,t);if((h.zpp_inner.compound==null?null:h.zpp_inner.compound.outer)!=r){if((h.zpp_inner.compound==null?null:h.zpp_inner.compound.outer)!=null)(h.zpp_inner.compound==null?null:h.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(h);if(r!=null)r.zpp_inner.wrap_constraints.add(h)}if(h.zpp_inner.compound==null)null;else h.zpp_inner.compound.outer;l=l.next}if(n)while(t.length>0){var p=t.pop();var d=0;while(d<e.length){var v=e[d];++d;if(v.id==p.id){p.cb(v.bc);break}}}this.copyto(r);return r},__class__:Hr});var Br=function(){this.wrap_gravity=null;this.gravityy=0;this.gravityx=0;this.density=0;this.viscosity=0;this.wrap_shapes=null;this.shapes=null;this.outer=null;this.userData=null;this.next=null;this.shapes=new oi;this.density=this.viscosity=1;this.wrap_gravity=null;this.gravityx=0;this.gravityy=0};Br.__name__=true;Br.prototype={wrapper:function(){if(this.outer==null){this.outer=new Xt;var e=this.outer.zpp_inner;e.outer=null;e.next=Br.zpp_pool;Br.zpp_pool=e;this.outer.zpp_inner=this}return this.outer},free:function(){this.outer=null},alloc:function(){},feature_cons:function(){this.shapes=new oi},addShape:function(e){this.shapes.add(e)},remShape:function(e){this.shapes.remove(e)},copy:function(){var e;if(Br.zpp_pool==null)e=new Br;else{e=Br.zpp_pool;Br.zpp_pool=e.next;e.next=null}null;e.viscosity=this.viscosity;e.density=this.density;return e},gravity_invalidate:function(e){this.gravityx=e.x;this.gravityy=e.y;this.invalidate()},gravity_validate:function(){this.wrap_gravity.zpp_inner.x=this.gravityx;this.wrap_gravity.zpp_inner.y=this.gravityy},getgravity:function(){this.wrap_gravity=_t.get(this.gravityx,this.gravityy,null);this.wrap_gravity.zpp_inner._inuse=true;this.wrap_gravity.zpp_inner._invalidate=Rs(this,this.gravity_invalidate);this.wrap_gravity.zpp_inner._validate=Rs(this,this.gravity_validate)},invalidate:function(){var e=this.shapes.head;while(e!=null){var t=e.elt;t.invalidate_fluidprops();e=e.next}},__class__:Br};var jr=function(){this.rollingFriction=0;this.elasticity=0;this.density=0;this.staticFriction=0;this.dynamicFriction=0;this.wrap_shapes=null;this.shapes=null;this.outer=null;this.userData=null;this.next=null;this.shapes=new oi;this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=.001;this.rollingFriction=.01};jr.__name__=true;jr.prototype={wrapper:function(){if(this.outer==null){this.outer=new Gt;var e=this.outer.zpp_inner;e.outer=null;e.next=jr.zpp_pool;jr.zpp_pool=e;this.outer.zpp_inner=this}return this.outer},free:function(){this.outer=null},alloc:function(){},feature_cons:function(){this.shapes=new oi},addShape:function(e){this.shapes.add(e)},remShape:function(e){this.shapes.remove(e)},copy:function(){var e=new jr;e.dynamicFriction=this.dynamicFriction;e.staticFriction=this.staticFriction;e.density=this.density;e.elasticity=this.elasticity;e.rollingFriction=this.rollingFriction;return e},set:function(e){this.dynamicFriction=e.dynamicFriction;this.staticFriction=e.staticFriction;this.density=e.density;this.elasticity=e.elasticity;this.rollingFriction=e.rollingFriction},invalidate:function(e){var t=this.shapes.head;while(t!=null){var n=t.elt;n.invalidate_material(e);t=t.next}},__class__:jr};var Fr=function(e){this.zip_aabb=false;this.aabb=null;this.pairs=null;this.node=null;this.sweep=null;this.sensorEnabled=false;this.fluidEnabled=false;this.fluidProperties=null;this.filter=null;this.material=null;this.refmaterial=null;this.polygon=null;this.circle=null;this.sweepCoef=0;this.zip_sweepRadius=false;this.sweepRadius=0;this.wrap_worldCOM=null;this.wrap_localCOM=null;this.zip_worldCOM=false;this.worldCOMy=0;this.worldCOMx=0;this.zip_localCOM=false;this.localCOMy=0;this.localCOMx=0;this.zip_angDrag=false;this.angDrag=0;this.inertia=0;this.zip_area_inertia=false;this.area=0;this.type=0;this.body=null;this.outer=null;Dr.call(this);this.pairs=new bi;this.ishape=this;this.type=e;this.aabb=Gn.get(0,0,0,0);this.aabb._immutable=true;var t=this;this.aabb._validate=Rs(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=true;this.localCOMx=0;this.localCOMy=0;this.worldCOMx=0;this.worldCOMy=0;this.fluidEnabled=false;this.sensorEnabled=false;this.fluidProperties=null;this.body=null;this.refmaterial=new jr;this.sweepRadius=this.sweepCoef=0};Fr.__name__=true;Fr.__super__=Dr;Fr.prototype=n(Dr.prototype,{isCircle:function(){return this.type==0},isPolygon:function(){return this.type==1},invalidate_sweepRadius:function(){this.zip_sweepRadius=true},validate_sweepRadius:function(){if(this.zip_sweepRadius){this.zip_sweepRadius=false;if(this.type==0)this.circle.__validate_sweepRadius();else this.polygon.__validate_sweepRadius()}},clear:function(){if(this.type==0)this.circle.__clear();else this.polygon.__clear()},validate_aabb:function(){if(this.zip_aabb){if(this.body!=null){this.zip_aabb=false;if(this.type==0)this.circle.__validate_aabb();else this.polygon.__validate_aabb()}}},force_validate_aabb:function(){if(this.type==0)this.circle._force_validate_aabb();else this.polygon._force_validate_aabb()},invalidate_aabb:function(){this.zip_aabb=true;if(this.body!=null)this.body.zip_aabb=true},validate_area_inertia:function(){if(this.zip_area_inertia){this.zip_area_inertia=false;if(this.type==0)this.circle.__validate_area_inertia();else this.polygon.__validate_area_inertia()}},validate_angDrag:function(){if(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction){this.zip_angDrag=false;this.refmaterial.dynamicFriction=this.material.dynamicFriction;if(this.type==0)this.circle.__validate_angDrag();else this.polygon.__validate_angDrag()}},validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=false;if(this.type==1)this.polygon.__validate_localCOM();if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}}},validate_worldCOM:function(){if(this.zip_worldCOM){if(this.body!=null){this.zip_worldCOM=false;if(this.zip_localCOM){this.zip_localCOM=false;if(this.type==1)this.polygon.__validate_localCOM();if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}}this.body.validate_axis();this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}}},getworldCOM:function(){if(this.body==null)throw new g("Error: worldCOM only makes sense when Shape belongs to a Body");if(this.zip_worldCOM){if(this.body!=null){this.zip_worldCOM=false;if(this.zip_localCOM){this.zip_localCOM=false;if(this.type==1)this.polygon.__validate_localCOM();if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}}this.body.validate_axis();this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}}this.wrap_worldCOM.zpp_inner.x=this.worldCOMx;this.wrap_worldCOM.zpp_inner.y=this.worldCOMy},invalidate_area_inertia:function(){this.zip_area_inertia=true;if(this.body!=null){this.body.invalidate_localCOM();this.body.invalidate_mass();this.body.invalidate_inertia()}},invalidate_angDrag:function(){this.zip_angDrag=true},invalidate_localCOM:function(){this.zip_localCOM=true;this.invalidate_area_inertia();if(this.type==0)this.zip_sweepRadius=true;this.invalidate_angDrag();this.invalidate_worldCOM();if(this.body!=null)this.body.invalidate_localCOM()},invalidate_worldCOM:function(){this.zip_worldCOM=true;this.zip_aabb=true;if(this.body!=null)this.body.zip_aabb=true},invalidate_material:function(e){if((e&jr.WAKE)!=0)this.wake();if((e&jr.ARBITERS)!=0){if(this.body!=null)this.body.refreshArbiters()}if((e&jr.PROPS)!=0){if(this.body!=null){this.body.invalidate_localCOM();this.body.invalidate_mass();this.body.invalidate_inertia()}}if((e&jr.ANGDRAG)!=0)this.invalidate_angDrag();this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},invalidate_fluidprops:function(){if(this.fluidEnabled)this.wake()},aabb_validate:function(){if(this.body==null)throw new g("Error: bounds only makes sense when Shape belongs to a Body");if(this.zip_aabb){if(this.body!=null){this.zip_aabb=false;if(this.type==0)this.circle.__validate_aabb();else this.polygon.__validate_aabb()}}},setMaterial:function(e){if(this.material!=e){if(this.body!=null&&this.body.space!=null){if(this.material!=null)this.material.shapes.remove(this)}this.material=e;if(this.body!=null&&this.body.space!=null)e.shapes.add(this);this.wake();if(this.body!=null)this.body.refreshArbiters()}},setFilter:function(e){if(this.filter!=e){if(this.body!=null&&this.body.space!=null){if(this.filter!=null)this.filter.shapes.remove(this)}this.filter=e;if(this.body!=null&&this.body.space!=null)e.shapes.add(this);this.wake()}},setFluid:function(e){if(this.fluidProperties!=e){if(this.body!=null&&this.body.space!=null){if(this.fluidProperties!=null)this.fluidProperties.shapes.remove(this)}this.fluidProperties=e;if(this.body!=null&&this.body.space!=null)e.shapes.add(this);if(this.fluidEnabled)this.wake()}},__immutable_midstep:function(e){if(this.body!=null&&this.body.space!=null&&this.body.space.midstep)throw new g("Error: "+e+" cannot be set during a space step()")},addedToBody:function(){this.invalidate_worldCOM();this.zip_aabb=true;if(this.body!=null)this.body.zip_aabb=true},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace();this.material.shapes.add(this);this.filter.shapes.add(this);if(this.fluidProperties!=null)this.fluidProperties.shapes.add(this)},removedFromSpace:function(){this.__iremovedFromSpace();this.material.shapes.remove(this);this.filter.shapes.remove(this);if(this.fluidProperties!=null)this.fluidProperties.shapes.remove(this)},copy:function(){var e=null;if(this.type==0)e=this.circle.__copy();else e=this.polygon.__copy();if(!this.zip_area_inertia){e.area=this.area;e.inertia=this.inertia}else e.invalidate_area_inertia();if(!this.zip_sweepRadius){e.sweepRadius=this.sweepRadius;e.sweepCoef=this.sweepCoef}else e.zip_sweepRadius=true;if(!this.zip_angDrag)e.angDrag=this.angDrag;else e.invalidate_angDrag();if(!this.zip_aabb){e.aabb.minx=this.aabb.minx;e.aabb.miny=this.aabb.miny;e.aabb.maxx=this.aabb.maxx;e.aabb.maxy=this.aabb.maxy}else{e.zip_aabb=true;if(e.body!=null)e.body.zip_aabb=true}var t=e.material;t.outer=null;t.next=jr.zpp_pool;jr.zpp_pool=t;var n=e.filter;n.outer=null;n.next=Jn.zpp_pool;Jn.zpp_pool=n;e.material=this.material;e.filter=this.filter;if(this.fluidProperties!=null)e.fluidProperties=this.fluidProperties;e.fluidEnabled=this.fluidEnabled;e.sensorEnabled=this.sensorEnabled;if(this.userData!=null)e.userData=c.copy(this.userData);this.copyto(e.outer);return e.outer},__class__:Fr});var Ir=function(){this.radius=0;this.outer_zn=null;Fr.call(this,0);this.circle=this;this.zip_localCOM=false};Ir.__name__=true;Ir.__super__=Fr;Ir.prototype=n(Fr.prototype,{__clear:function(){},invalidate_radius:function(){this.invalidate_area_inertia();this.invalidate_angDrag();this.zip_aabb=true;if(this.body!=null)this.body.zip_aabb=true;if(this.body!=null)this.body.wake()},localCOM_validate:function(){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy},localCOM_invalidate:function(e){this.localCOMx=e.x;this.localCOMy=e.y;this.invalidate_localCOM();if(this.body!=null)this.body.wake()},localCOM_immutable:function(){if(this.body!=null&&this.body.type==1&&this.body.space!=null)throw new g("Error: Cannot modify localCOM of Circle added to a static Body whilst within a Space")},setupLocalCOM:function(){var e=this;this.wrap_localCOM=_t.get(this.localCOMx,this.localCOMy,null);this.wrap_localCOM.zpp_inner._inuse=true;this.wrap_localCOM.zpp_inner._validate=Rs(this,this.localCOM_validate);this.wrap_localCOM.zpp_inner._invalidate=Rs(this,this.localCOM_invalidate);this.wrap_localCOM.zpp_inner._isimmutable=Rs(this,this.localCOM_immutable)},__validate_aabb:function(){if(this.zip_worldCOM){if(this.body!=null){this.zip_worldCOM=false;if(this.zip_localCOM){this.zip_localCOM=false;if(this.type==1)this.polygon.__validate_localCOM();if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}}this.body.validate_axis();this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}}var e=this.radius;var t=this.radius;this.aabb.minx=this.worldCOMx-e;this.aabb.miny=this.worldCOMy-t;this.aabb.maxx=this.worldCOMx+e;this.aabb.maxy=this.worldCOMy+t},_force_validate_aabb:function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy);this.aabb.minx=this.worldCOMx-this.radius;this.aabb.miny=this.worldCOMy-this.radius;this.aabb.maxx=this.worldCOMx+this.radius;this.aabb.maxy=this.worldCOMy+this.radius},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var e=this.radius*this.radius;this.area=e*Math.PI;this.inertia=e*.5+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var e=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy;var t=this.radius*this.radius;var n=this.material.dynamicFriction*N.fluidAngularDragFriction;this.angDrag=(e+2*t)*n+.5*N.fluidAngularDrag*(1+N.fluidVacuumDrag)*e;this.angDrag/=2*(e+.5*t)},__scale:function(e,t){var n;n=((e<0?-e:e)+(t<0?-t:t))/2;if(n<0)this.radius*=-n;else this.radius*=n;this.invalidate_radius();if(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy>0){this.localCOMx*=e;this.localCOMy*=t;this.invalidate_localCOM()}},__translate:function(e,t){var n=1;this.localCOMx+=e*n;this.localCOMy+=t*n;this.invalidate_localCOM()},__rotate:function(e,t){if(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy>0){var n=0;var r=0;n=t*this.localCOMx-e*this.localCOMy;r=this.localCOMx*e+this.localCOMy*t;this.localCOMx=n;this.localCOMy=r;this.invalidate_localCOM()}},__transform:function(e){var t=e.zpp_inner.a*e.zpp_inner.d-e.zpp_inner.b*e.zpp_inner.c;if(t<0)t=-t;this.radius*=Math.sqrt(t);var n=e.zpp_inner.a*this.localCOMx+e.zpp_inner.b*this.localCOMy+e.zpp_inner.tx;this.localCOMy=e.zpp_inner.c*this.localCOMx+e.zpp_inner.d*this.localCOMy+e.zpp_inner.ty;this.localCOMx=n;this.invalidate_radius();this.invalidate_localCOM()},__copy:function(){var e=(new Zt(this.radius)).zpp_inner_zn;e.localCOMx=this.localCOMx;e.localCOMy=this.localCOMy;e.zip_localCOM=false;return e},__class__:Ir});var qr=function(){this.tp1=0;this.tp0=0;this.gp1=null;this.lp1=null;this.gp0=null;this.lp0=null;this.gprojection=0;this.lprojection=0;this.length=0;this.wrap_gnorm=null;this.gnormy=0;this.gnormx=0;this.wrap_lnorm=null;this.lnormy=0;this.lnormx=0;this.outer=null;this.polygon=null;this.next=null;this.lnormx=0;this.lnormy=0;this.gnormx=0;this.gnormy=0;this.length=0;this.lprojection=0;this.gprojection=0};qr.__name__=true;qr.prototype={free:function(){this.polygon=null},alloc:function(){},wrapper:function(){if(this.outer==null){qr.internal=true;this.outer=new en;qr.internal=false;this.outer.zpp_inner=this}return this.outer},lnorm_validate:function(){if(this.polygon==null)throw new g("Error: Edge not currently in use");this.polygon.validate_laxi();this.wrap_lnorm.zpp_inner.x=this.lnormx;this.wrap_lnorm.zpp_inner.y=this.lnormy},gnorm_validate:function(){if(this.polygon==null)throw new g("Error: Edge not currently in use");if(this.polygon.body==null)throw new g("Error: Edge worldNormal only makes sense if the parent Polygon is contained within a rigid body");this.polygon.validate_gaxi();this.wrap_gnorm.zpp_inner.x=this.gnormx;this.wrap_gnorm.zpp_inner.y=this.gnormy},getlnorm:function(){this.wrap_lnorm=_t.get(this.lnormx,this.lnormy,null);this.wrap_lnorm.zpp_inner._immutable=true;this.wrap_lnorm.zpp_inner._validate=Rs(this,this.lnorm_validate)},getgnorm:function(){this.wrap_gnorm=_t.get(this.gnormx,this.gnormy,null);this.wrap_gnorm.zpp_inner._immutable=true;this.wrap_gnorm.zpp_inner._validate=Rs(this,this.gnorm_validate)},__class__:qr};var Rr=function(){this.zip_sanitation=false;this.zip_valid=false;this.zip_gaxi=false;this.zip_gverts=false;this.zip_laxi=false;this.zip_lverts=false;this.reverse_flag=false;this.edgeCnt=0;this.wrap_edges=null;this.edges=null;this.wrap_gverts=null;this.gverts=null;this.wrap_lverts=null;this.lverts=null;this.outer_zn=null;Fr.call(this,1);this.polygon=this;this.lverts=new Or;this.gverts=new Or;this.edges=new wi;this.edgeCnt=0};Rr.__name__=true;Rr.__super__=Fr;Rr.prototype=n(Fr.prototype,{__clear:function(){},lverts_pa_invalidate:function(e){this.invalidate_lverts()},lverts_pa_immutable:function(){if(this.body!=null&&this.body.type==1&&this.body.space!=null)throw new g("Error: Cannot modify local vertex of Polygon added to a static body whilst within a Space")},gverts_pa_validate:function(){if(this.body==null)throw new g("Error: World vertex only makes sense when Polygon is contained in a rigid body");this.validate_gverts()},lverts_post_adder:function(e){e.zpp_inner._invalidate=Rs(this,this.lverts_pa_invalidate);e.zpp_inner._isimmutable=Rs(this,this.lverts_pa_immutable);var t=null;var n=null;var r=this.lverts.next;while(r!=null){var i=r;if(i==e.zpp_inner)break;else{if(t==null)t=this.gverts.next;else t=t.next;if(n==null)n=this.edges.head;else n=n.next}r=r.next}var s=Or.get(0,0,true);this.gverts.insert(t,s);if(this.lverts.next.next!=null){if(this.lverts.next.next.next==null){var o;if(qr.zpp_pool==null)o=new qr;else{o=qr.zpp_pool;qr.zpp_pool=o.next;o.next=null}null;o.polygon=this;this.edges.add(o);var u;if(qr.zpp_pool==null)u=new qr;else{u=qr.zpp_pool;qr.zpp_pool=u.next;u.next=null}null;u.polygon=this;this.edges.add(u);this.edgeCnt+=2}else{var a;if(qr.zpp_pool==null)a=new qr;else{a=qr.zpp_pool;qr.zpp_pool=a.next;a.next=null}null;a.polygon=this;this.edges.insert(n,a);this.edgeCnt++}}s._validate=Rs(this,this.gverts_pa_validate)},lverts_subber:function(e){this.cleanup_lvert(e.zpp_inner)},lverts_invalidate:function(e){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},lverts_modifiable:function(){this.immutable_midstep("Polygon::localVerts");if(this.body!=null&&this.body.type==1&&this.body.space!=null)throw new g("Error: Cannot modifiy shapes of static object once added to Space")},gverts_validate:function(){this.validate_gverts()},edges_validate:function(){this.validate_lverts()},getlverts:function(){var e=this;this.wrap_lverts=ps.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=Rs(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=Rs(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=Rs(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=Rs(this,this.lverts_validate);this.wrap_lverts.zpp_inner._modifiable=Rs(this,this.lverts_modifiable);this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},getgverts:function(){var e=this;this.wrap_gverts=ps.get(this.gverts,true);this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag;this.wrap_gverts.zpp_inner._validate=Rs(this,this.gverts_validate)},getedges:function(){var e=this;this.wrap_edges=Ts.get(this.edges,true);this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag;this.wrap_edges.zpp_inner._validate=Rs(this,this.edges_validate)},invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_localCOM();this.invalidate_gverts();this.zip_lverts=true;this.zip_valid=true;this.zip_sanitation=true;if(this.body!=null)this.body.wake()},invalidate_laxi:function(){this.invalidate_gaxi();this.zip_sweepRadius=true;this.zip_laxi=true},invalidate_gverts:function(){this.zip_aabb=true;if(this.body!=null)this.body.zip_aabb=true;this.zip_gverts=true},invalidate_gaxi:function(){this.zip_gaxi=true},valid:function(){if(this.zip_valid){this.zip_valid=false;if(this.zip_sanitation){this.zip_sanitation=false;this.splice_collinear_real()}if(this.lverts.length<3)return function(e){var t;if(Tn.ValidationResult_DEGENERATE==null){Tn.internal=true;Tn.ValidationResult_DEGENERATE=new an;Tn.internal=false}t=e.validation=Tn.ValidationResult_DEGENERATE;return t}(this);else{this.validate_lverts();this.validate_area_inertia();if(this.area<N.epsilon)return function(e){var t;if(Tn.ValidationResult_DEGENERATE==null){Tn.internal=true;Tn.ValidationResult_DEGENERATE=new an;Tn.internal=false}t=e.validation=Tn.ValidationResult_DEGENERATE;return t}(this);else{var e=false;var t=false;var n=true;var r=this.lverts.next;var i=r;r=r.next;var s=r;r=r.next;while(r!=null){var o=r;var u=0;var a=0;u=o.x-s.x;a=o.y-s.y;var f=0;var l=0;f=s.x-i.x;l=s.y-i.y;var c=l*u-f*a;if(c>N.epsilon)t=true;else if(c<-N.epsilon)e=true;if(t&&e){n=false;break}i=s;s=o;r=r.next}if(n){r=this.lverts.next;var h=r;do{var p=0;var d=0;p=h.x-s.x;d=h.y-s.y;var v=0;var m=0;v=s.x-i.x;m=s.y-i.y;var g=m*p-v*d;if(g>N.epsilon)t=true;else if(g<-N.epsilon)e=true;if(t&&e){n=false;break}}while(false);if(n){i=s;s=h;r=r.next;var y=r;do{var b=0;var w=0;b=y.x-s.x;w=y.y-s.y;var E=0;var S=0;E=s.x-i.x;S=s.y-i.y;var x=S*b-E*w;if(x>N.epsilon)t=true;else if(x<-N.epsilon)e=true;if(t&&e)break}while(false)}}if(t&&e)return function(e){var t;if(Tn.ValidationResult_CONCAVE==null){Tn.internal=true;Tn.ValidationResult_CONCAVE=new an;Tn.internal=false}t=e.validation=Tn.ValidationResult_CONCAVE;return t}(this);else{var T=true;var C=true;var k=this.lverts.next;var L=k;k=k.next;while(k!=null){var A=k;if(!T){C=false;break}var O=true;var M=this.lverts.next;var _=M;M=M.next;while(M!=null){var D=M;if(L==_||L==D||A==_||A==D){_=D;M=M.next;continue}var P=0;var H=0;P=L.x-_.x;H=L.y-_.y;var B=0;var j=0;B=A.x-L.x;j=A.y-L.y;var F=0;var I=0;F=D.x-_.x;I=D.y-_.y;var q=j*F-B*I;if(q*q>N.epsilon){q=1/q;var R=(I*P-F*H)*q;if(R>N.epsilon&&R<1-N.epsilon){var U=(j*P-B*H)*q;if(U>N.epsilon&&U<1-N.epsilon){T=false;O=false;break}}}_=D;M=M.next}if(O)do{var z=this.lverts.next;if(L==_||L==z||A==_||A==z)break;var W=0;var X=0;W=L.x-_.x;X=L.y-_.y;var V=0;var $=0;V=A.x-L.x;$=A.y-L.y;var J=0;var K=0;J=z.x-_.x;K=z.y-_.y;var Q=$*J-V*K;if(Q*Q>N.epsilon){Q=1/Q;var G=(K*W-J*X)*Q;if(G>N.epsilon&&G<1-N.epsilon){var Y=($*W-V*X)*Q;if(Y>N.epsilon&&Y<1-N.epsilon){T=false;break}}}}while(false);L=A;k=k.next}if(C)do{var Z=this.lverts.next;if(!T)break;var et=true;var tt=this.lverts.next;var nt=tt;tt=tt.next;while(tt!=null){var rt=tt;if(L==nt||L==rt||Z==nt||Z==rt){nt=rt;tt=tt.next;continue}var it=0;var st=0;it=L.x-nt.x;st=L.y-nt.y;var ot=0;var ut=0;ot=Z.x-L.x;ut=Z.y-L.y;var at=0;var ft=0;at=rt.x-nt.x;ft=rt.y-nt.y;var lt=ut*at-ot*ft;if(lt*lt>N.epsilon){lt=1/lt;var ct=(ft*it-at*st)*lt;if(ct>N.epsilon&&ct<1-N.epsilon){var ht=(ut*it-ot*st)*lt;if(ht>N.epsilon&&ht<1-N.epsilon){T=false;et=false;break}}}nt=rt;tt=tt.next}if(et)do{var pt=this.lverts.next;if(L==nt||L==pt||Z==nt||Z==pt)break;var dt=0;var vt=0;dt=L.x-nt.x;vt=L.y-nt.y;var mt=0;var gt=0;mt=Z.x-L.x;gt=Z.y-L.y;var yt=0;var bt=0;yt=pt.x-nt.x;bt=pt.y-nt.y;var wt=gt*yt-mt*bt;if(wt*wt>N.epsilon){wt=1/wt;var Et=(bt*dt-yt*vt)*wt;if(Et>N.epsilon&&Et<1-N.epsilon){var St=(gt*dt-mt*vt)*wt;if(St>N.epsilon&&St<1-N.epsilon){T=false;break}}}}while(false)}while(false);if(!T)return function(e){var t;if(Tn.ValidationResult_SELF_INTERSECTING==null){Tn.internal=true;Tn.ValidationResult_SELF_INTERSECTING=new an;Tn.internal=false}t=e.validation=Tn.ValidationResult_SELF_INTERSECTING;return t}(this);else return function(e){var t;if(Tn.ValidationResult_VALID==null){Tn.internal=true;Tn.ValidationResult_VALID=new an;Tn.internal=false}t=e.validation=Tn.ValidationResult_VALID;return t}(this)}}}}else return this.validation},validate_lverts:function(){if(this.zip_lverts){this.zip_lverts=false;if(this.lverts.length>2){this.validate_area_inertia();if(this.area<0){this.reverse_vertices();this.area=-this.area}}}},cleanup_lvert:function(e){var t=null;var n=null;var r=this.lverts.next;while(r!=null){var i=r;if(i==e)break;else{if(t==null)t=this.gverts.next;else t=t.next;if(n==null)n=this.edges.head;else n=n.next}r=r.next}var s;if(t==null)s=this.gverts.next;else s=t.next;this.gverts.erase(t);var o=s;if(o.outer!=null){o.outer.zpp_inner=null;o.outer=null}o._isimmutable=null;o._validate=null;o._invalidate=null;o.next=Or.zpp_pool;Or.zpp_pool=o;if(this.edgeCnt==2){var u=this.edges.pop_unsafe();var a=u;a.polygon=null;a.next=qr.zpp_pool;qr.zpp_pool=a;u=this.edges.pop_unsafe();var f=u;f.polygon=null;f.next=qr.zpp_pool;qr.zpp_pool=f;this.edgeCnt=0}else if(this.edgeCnt!=0){var l;if(n==null)l=this.edges.head.elt;else l=n.next.elt;this.edges.erase(n);var c=l;c.polygon=null;c.next=qr.zpp_pool;qr.zpp_pool=c;this.edgeCnt--}},splice_collinear:function(){if(this.zip_sanitation){this.zip_sanitation=false;this.splice_collinear_real()}},splice_collinear_real:function(){if(this.lverts.next==null)return;if(this.lverts.next.next==null)return;if(this.lverts.next.next.next==null)return;var e=null;var t=this.lverts.next;while(t!=null){var n;if(t.next==null)n=this.lverts.next;else n=t.next;var r=t;var i=n;if(_r.vec_dsq(r.x,r.y,i.x,i.y)<N.epsilon*N.epsilon){this.cleanup_lvert(t);t=this.lverts.erase(e)}else{e=t;t=t.next}}if(this.lverts.next==null)return;var s;do{s=false;var o=this.lverts.next;while(o!=null){var u;if(o.next==null)u=this.lverts.next;else u=o.next;var a;if(u.next==null)a=this.lverts.next;else a=u.next;var f=o;var l=u;var c=a;var h=0;var p=0;h=l.x-f.x;p=l.y-f.y;var d=0;var v=0;d=c.x-l.x;v=c.y-l.y;var m=v*h-d*p;if(m*m>=N.epsilon*N.epsilon)o=o.next;else{this.cleanup_lvert(u);this.lverts.erase(o.next==null?null:o);s=true;o=o.next}}}while(s)},reverse_vertices:function(){this.lverts.reverse();this.gverts.reverse();this.edges.reverse();var e=this.edges.iterator_at(this.edgeCnt-1);var t=this.edges.pop_unsafe();this.edges.insert(e,t);this.reverse_flag=!this.reverse_flag;if(this.wrap_lverts!=null)this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag;if(this.wrap_gverts!=null)this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag;if(this.wrap_edges!=null)this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=false;this.validate_lverts();var e=this.edges.head;var t=this.lverts.next;var n=t;t=t.next;while(t!=null){var r=t;var i=e.elt;e=e.next;i.lp0=n;i.lp1=r;var s=0;var o=0;s=n.x-r.x;o=n.y-r.y;var u=Math.sqrt(s*s+o*o);i.length=u;var a=1/u;s*=a;o*=a;var f=s;s=-o;o=f;i.lprojection=s*n.x+o*n.y;i.lnormx=s;i.lnormy=o;if(i.wrap_lnorm!=null){i.wrap_lnorm.zpp_inner.x=s;i.wrap_lnorm.zpp_inner.y=o}n=r;t=t.next}var l=this.lverts.next;var c=e.elt;e=e.next;c.lp0=n;c.lp1=l;var h=0;var p=0;h=n.x-l.x;p=n.y-l.y;var d=Math.sqrt(h*h+p*p);c.length=d;var v=1/d;h*=v;p*=v;var m=h;h=-p;p=m;c.lprojection=h*n.x+p*n.y;c.lnormx=h;c.lnormy=p;if(c.wrap_lnorm!=null){c.wrap_lnorm.zpp_inner.x=h;c.wrap_lnorm.zpp_inner.y=p}}},validate_gverts:function(){if(this.zip_gverts){if(this.body!=null){this.zip_gverts=false;this.validate_lverts();this.body.validate_axis();var e=this.lverts.next;var t=this.gverts.next;while(t!=null){var n=t;var r=e;e=e.next;n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y);n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy);t=t.next}}}},validate_gaxi:function(){if(this.zip_gaxi){if(this.body!=null){this.zip_gaxi=false;this.validate_laxi();this.body.validate_axis();this.validate_gverts();var e=this.edges.head;var t=this.gverts.next;var n=t;t=t.next;while(t!=null){var r=t;var i=e.elt;e=e.next;i.gp0=n;i.gp1=r;i.gnormx=this.body.axisy*i.lnormx-this.body.axisx*i.lnormy;i.gnormy=i.lnormx*this.body.axisx+i.lnormy*this.body.axisy;i.gprojection=this.body.posx*i.gnormx+this.body.posy*i.gnormy+i.lprojection;if(i.wrap_gnorm!=null){i.wrap_gnorm.zpp_inner.x=i.gnormx;i.wrap_gnorm.zpp_inner.y=i.gnormy}i.tp0=i.gp0.y*i.gnormx-i.gp0.x*i.gnormy;i.tp1=i.gp1.y*i.gnormx-i.gp1.x*i.gnormy;n=r;t=t.next}var s=this.gverts.next;var o=e.elt;e=e.next;o.gp0=n;o.gp1=s;o.gnormx=this.body.axisy*o.lnormx-this.body.axisx*o.lnormy;o.gnormy=o.lnormx*this.body.axisx+o.lnormy*this.body.axisy;o.gprojection=this.body.posx*o.gnormx+this.body.posy*o.gnormy+o.lprojection;if(o.wrap_gnorm!=null){o.wrap_gnorm.zpp_inner.x=o.gnormx;o.wrap_gnorm.zpp_inner.y=o.gnormy}o.tp0=o.gp0.y*o.gnormx-o.gp0.x*o.gnormy;o.tp1=o.gp1.y*o.gnormx-o.gp1.x*o.gnormy}}},__validate_aabb:function(){this.validate_gverts();if(this.lverts.next==null)throw new g("Error: An empty polygon has no meaningful bounds");var e=this.gverts.next;this.aabb.minx=e.x;this.aabb.miny=e.y;this.aabb.maxx=e.x;this.aabb.maxy=e.y;var t=this.gverts.next.next;while(t!=null){var n=t;if(n.x<this.aabb.minx)this.aabb.minx=n.x;if(n.x>this.aabb.maxx)this.aabb.maxx=n.x;if(n.y<this.aabb.miny)this.aabb.miny=n.y;if(n.y>this.aabb.maxy)this.aabb.maxy=n.y;t=t.next}},_force_validate_aabb:function(){var e=this.lverts.next;var t=this.gverts.next;var n=e;e=e.next;t.x=this.body.posx+(this.body.axisy*n.x-this.body.axisx*n.y);t.y=this.body.posy+(n.x*this.body.axisx+n.y*this.body.axisy);this.aabb.minx=t.x;this.aabb.miny=t.y;this.aabb.maxx=t.x;this.aabb.maxy=t.y;var r=this.gverts.next.next;while(r!=null){var i=r;var s=e;e=e.next;i.x=this.body.posx+(this.body.axisy*s.x-this.body.axisx*s.y);i.y=this.body.posy+(s.x*this.body.axisx+s.y*this.body.axisy);if(i.x<this.aabb.minx)this.aabb.minx=i.x;if(i.x>this.aabb.maxx)this.aabb.maxx=i.x;if(i.y<this.aabb.miny)this.aabb.miny=i.y;if(i.y>this.aabb.maxy)this.aabb.maxy=i.y;r=r.next}},__validate_sweepRadius:function(){var e=0;var t=0;this.validate_laxi();var n=this.lverts.next;while(n!=null){var r=n;var i=r.x*r.x+r.y*r.y;if(i>e)e=i;n=n.next}var s=this.edges.head;while(s!=null){var o=s.elt;if(o.lprojection<t){t=o.lprojection;if(t<0)break}s=s.next}if(t<0)t=0;this.sweepRadius=Math.sqrt(e);this.sweepCoef=this.sweepRadius-t},__validate_area_inertia:function(){if(this.lverts.next==null||this.lverts.next.next==null||this.lverts.next.next.next==null){this.area=0;this.inertia=0}else{this.area=0;var e=0;var t=0;var n=this.lverts.next;var r=n;n=n.next;var i=n;n=n.next;while(n!=null){var s=n;var o=i.y*r.x-i.x*r.y;var u=i.x*i.x+i.y*i.y+(i.x*r.x+i.y*r.y)+(r.x*r.x+r.y*r.y);e+=o*u;t+=o;this.area+=i.x*(s.y-r.y);r=i;i=s;n=n.next}n=this.lverts.next;var a=n;var f=i.y*r.x-i.x*r.y;var l=i.x*i.x+i.y*i.y+(i.x*r.x+i.y*r.y)+(r.x*r.x+r.y*r.y);e+=f*l;t+=f;this.area+=i.x*(a.y-r.y);r=i;i=a;n=n.next;var c=n;var h=i.y*r.x-i.x*r.y;var p=i.x*i.x+i.y*i.y+(i.x*r.x+i.y*r.y)+(r.x*r.x+r.y*r.y);e+=h*p;t+=h;this.area+=i.x*(c.y-r.y);this.inertia=e/(6*t);this.area*=.5;if(this.area<0){this.area=-this.area;this.reverse_vertices()}}},__validate_angDrag:function(){if(this.lverts.length<3)throw new g("Error: Polygon's with less than 3 vertices have no meaningful angDrag");this.validate_area_inertia();this.validate_laxi();var e=0;var t=this.edges.head;var n=0;var r=true;var i=this.lverts.next;var s=i;var o=i.next;while(o!=null){var u=o;var a=t.elt;t=t.next;n+=a.length;var f=0;var l=0;f=u.x-s.x;l=u.y-s.y;e+=a.length*N.fluidAngularDragFriction*this.material.dynamicFriction*a.lprojection*a.lprojection;var c=-(s.y*a.lnormx-s.x*a.lnormy)/(l*a.lnormx-f*a.lnormy);if(c>0){var h;if(c>1)h=1;else h=c;var p=0;var d=0;p=s.x;d=s.y;var v=h;p+=f*v;d+=l*v;var m=a.lnormy*s.x-a.lnormx*s.y;var y=a.lnormy*p-a.lnormx*d;var b=(y*y*y-m*m*m)/(3*(y-m));e+=b*h*a.length*N.fluidAngularDrag}if(c<1){var w;if(c<0)w=0;else w=c;var E=0;var S=0;E=s.x;S=s.y;var x=w;E+=f*x;S+=l*x;var T=a.lnormy*E-a.lnormx*S;var C=a.lnormy*u.x-a.lnormx*u.y;var k=(C*C*C-T*T*T)/(3*(C-T));e+=k*N.fluidVacuumDrag*(1-w)*a.length*N.fluidAngularDrag}i=o;s=u;o=o.next}if(r)do{o=this.lverts.next;var L=o;var A=t.elt;t=t.next;n+=A.length;var O=0;var M=0;O=L.x-s.x;M=L.y-s.y;e+=A.length*N.fluidAngularDragFriction*this.material.dynamicFriction*A.lprojection*A.lprojection;var _=-(s.y*A.lnormx-s.x*A.lnormy)/(M*A.lnormx-O*A.lnormy);if(_>0){var D;if(_>1)D=1;else D=_;var P=0;var H=0;P=s.x;H=s.y;var B=D;P+=O*B;H+=M*B;var j=A.lnormy*s.x-A.lnormx*s.y;var F=A.lnormy*P-A.lnormx*H;var I=(F*F*F-j*j*j)/(3*(F-j));e+=I*D*A.length*N.fluidAngularDrag}if(_<1){var q;if(_<0)q=0;else q=_;var R=0;var U=0;R=s.x;U=s.y;var z=q;R+=O*z;U+=M*z;var W=A.lnormy*R-A.lnormx*U;var X=A.lnormy*L.x-A.lnormx*L.y;var V=(X*X*X-W*W*W)/(3*(X-W));e+=V*N.fluidVacuumDrag*(1-q)*A.length*N.fluidAngularDrag}}while(false);this.angDrag=e/(this.inertia*n)},__validate_localCOM:function(){if(this.lverts.next==null)throw new g("Error: An empty polygon has no meaningful localCOM");if(this.lverts.next.next==null){this.localCOMx=this.lverts.next.x;this.localCOMy=this.lverts.next.y}else if(this.lverts.next.next.next==null){this.localCOMx=this.lverts.next.x;this.localCOMy=this.lverts.next.y;var e=1;this.localCOMx+=this.lverts.next.next.x*e;this.localCOMy+=this.lverts.next.next.y*e;var t=.5;this.localCOMx*=t;this.localCOMy*=t}else{this.localCOMx=0;this.localCOMy=0;var n=0;var r=this.lverts.next;var i=r;r=r.next;var s=r;r=r.next;while(r!=null){var o=r;n+=s.x*(o.y-i.y);var u=o.y*s.x-o.x*s.y;this.localCOMx+=(s.x+o.x)*u;this.localCOMy+=(s.y+o.y)*u;i=s;s=o;r=r.next}r=this.lverts.next;var a=r;n+=s.x*(a.y-i.y);var f=a.y*s.x-a.x*s.y;this.localCOMx+=(s.x+a.x)*f;this.localCOMy+=(s.y+a.y)*f;i=s;s=a;r=r.next;var l=r;n+=s.x*(l.y-i.y);var c=l.y*s.x-l.x*s.y;this.localCOMx+=(s.x+l.x)*c;this.localCOMy+=(s.y+l.y)*c;n=1/(3*n);var h=n;this.localCOMx*=h;this.localCOMy*=h}},localCOM_validate:function(){if(this.lverts.next==null)throw new g("Error: An empty polygon does not have any meaningful localCOM");if(this.zip_localCOM){this.zip_localCOM=false;if(this.type==1)this.polygon.__validate_localCOM();if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}}},localCOM_invalidate:function(e){if(this.zip_localCOM){this.zip_localCOM=false;if(this.type==1)this.polygon.__validate_localCOM();if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}}var t=0;var n=0;t=e.x-this.localCOMx;n=e.y-this.localCOMy;var r=this.lverts.next;while(r!=null){var i=r;var s=1;i.x+=t*s;i.y+=n*s;r=r.next}this.invalidate_lverts()},setupLocalCOM:function(){this.wrap_localCOM=_t.get(this.localCOMx,this.localCOMy,null);this.wrap_localCOM.zpp_inner._inuse=true;this.wrap_localCOM.zpp_inner._validate=Rs(this,this.localCOM_validate);this.wrap_localCOM.zpp_inner._invalidate=Rs(this,this.localCOM_invalidate)},__translate:function(e,t){var n=this.lverts.next;while(n!=null){var r=n;var i=1;r.x+=e*i;r.y+=t*i;n=n.next}this.invalidate_lverts()},__scale:function(e,t){var n=this.lverts.next;while(n!=null){var r=n;r.x*=e;r.y*=t;n=n.next}this.invalidate_lverts()},__rotate:function(e,t){var n=this.lverts.next;while(n!=null){var r=n;var i=0;var s=0;i=t*r.x-e*r.y;s=r.x*e+r.y*t;r.x=i;r.y=s;n=n.next}this.invalidate_lverts()},__transform:function(e){var t=this.lverts.next;while(t!=null){var n=t;var r=e.zpp_inner.a*n.x+e.zpp_inner.b*n.y+e.zpp_inner.tx;n.y=e.zpp_inner.c*n.x+e.zpp_inner.d*n.y+e.zpp_inner.ty;n.x=r;t=t.next}this.invalidate_lverts()},__copy:function(){var e=(new rn(this.outer_zn.get_localVerts())).zpp_inner_zn;return e},__class__:Rr});var Ur=function(){this.circShape=null;this.matrix=null;this.aabbShape=null;this.dynab=null;this.sweep=null;this.is_sweep=false;this.space=null};Ur.__name__=true;Ur.prototype={insert:function(e){if(this.is_sweep)this.sweep.__insert(e);else this.dynab.__insert(e)},remove:function(e){if(this.is_sweep)this.sweep.__remove(e);else this.dynab.__remove(e)},sync:function(e){if(this.is_sweep){if(!this.sweep.space.continuous){if(e.zip_aabb){if(e.body!=null){e.zip_aabb=false;if(e.type==0)e.circle.__validate_aabb();else e.polygon.__validate_aabb()}}}}else this.dynab.__sync(e)},broadphase:function(e,t){},clear:function(){},shapesUnderPoint:function(e,t,n,r){return null},bodiesUnderPoint:function(e,t,n,r){return null},updateAABBShape:function(e){if(this.aabbShape==null){var t=new Ft(function(e){var t;if(Tn.BodyType_STATIC==null){Tn.internal=true;Tn.BodyType_STATIC=new Rt;Tn.internal=false}t=Tn.BodyType_STATIC;return t}(this));t.zpp_inner.wrap_shapes.add(this.aabbShape=new rn(rn.rect(e.minx,e.miny,e.maxx-e.minx,e.maxy-e.miny)))}else{var n=this.aabbShape.zpp_inner.aabb;var r=(e.maxx-e.minx)/(n.maxx-n.minx);var i=(e.maxy-e.miny)/(n.maxy-n.miny);if(this.matrix==null)this.matrix=new Ct;this.matrix.set_a(r);this.matrix.set_b(this.matrix.set_c(0));this.matrix.set_d(i);this.matrix.set_tx(e.minx-r*n.minx);this.matrix.set_ty(e.miny-i*n.miny);this.aabbShape.transform(this.matrix)}this.aabbShape.zpp_inner.validate_aabb();this.aabbShape.zpp_inner.polygon.validate_gaxi()},shapesInAABB:function(e,t,n,r,i){return null},bodiesInAABB:function(e,t,n,r,i){return null},updateCircShape:function(e,t,n){if(this.circShape==null){var r=new Ft(function(e){var t;if(Tn.BodyType_STATIC==null){Tn.internal=true;Tn.BodyType_STATIC=new Rt;Tn.internal=false}t=Tn.BodyType_STATIC;return t}(this));r.zpp_inner.wrap_shapes.add(this.circShape=new Zt(n,_t.get(e,t,null)))}else{var i=this.circShape.zpp_inner.circle;var s=n/i.radius;if(this.matrix==null)this.matrix=new Ct;this.matrix.set_a(this.matrix.set_d(s));this.matrix.set_b(this.matrix.set_c(0));this.matrix.set_tx(e-s*i.localCOMx);this.matrix.set_ty(t-s*i.localCOMy);this.circShape.transform(this.matrix)}this.circShape.zpp_inner.validate_aabb()},shapesInCircle:function(e,t,n,r,i,s){return null},bodiesInCircle:function(e,t,n,r,i,s){return null},validateShape:function(e){if(e.type==1)e.polygon.validate_gaxi();if(e.zip_aabb){if(e.body!=null){e.zip_aabb=false;if(e.type==0)e.circle.__validate_aabb();else e.polygon.__validate_aabb()}}if(e.zip_worldCOM){if(e.body!=null){e.zip_worldCOM=false;if(e.zip_localCOM){e.zip_localCOM=false;if(e.type==1)e.polygon.__validate_localCOM();if(e.wrap_localCOM!=null){e.wrap_localCOM.zpp_inner.x=e.localCOMx;e.wrap_localCOM.zpp_inner.y=e.localCOMy}}e.body.validate_axis();e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy);e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}}},shapesInShape:function(e,t,n,r){return null},bodiesInShape:function(e,t,n,r){return null},rayCast:function(e,t,n){return null},rayMultiCast:function(e,t,n,r){return null},__class__:Ur};var zr=function(){this.first_sync=false;this.synced=false;this.snext=null;this.moved=false;this.mnext=null;this.next=null;this.rayt=0;this.height=0;this.child2=null;this.child1=null;this.parent=null;this.dyn=false;this.shape=null;this.aabb=null;this.height=-1};zr.__name__=true;zr.prototype={alloc:function(){if(Gn.zpp_pool==null)this.aabb=new Gn;else{this.aabb=Gn.zpp_pool;Gn.zpp_pool=this.aabb.next;this.aabb.next=null}null;this.moved=false;this.synced=false;this.first_sync=false},free:function(){this.height=-1;var e=this.aabb;if(e.outer!=null){e.outer.zpp_inner=null;e.outer=null}e.wrap_min=e.wrap_max=null;e._invalidate=null;e._validate=null;e.next=Gn.zpp_pool;Gn.zpp_pool=e;this.child1=this.child2=this.parent=null;this.next=null;this.snext=null;this.mnext=null},isLeaf:function(){return this.child1==null},__class__:zr};var Wr=function(){this.next=null;this.arb=null;this.di=0;this.id=0;this.sleeping=false;this.first=false;this.n2=null;this.n1=null};Wr.__name__=true;Wr.prototype={alloc:function(){},free:function(){this.n1=this.n2=null;this.sleeping=false},__class__:Wr};var Xr=function(){this.root=null};Xr.__name__=true;Xr.prototype={clear:function(){if(this.root==null)return;var e=null;this.root.next=e;e=this.root;while(e!=null){var t;var n=e;e=n.next;n.next=null;t=n;if(t.child1==null){t.shape.node=null;t.shape.removedFromSpace();t.shape=null}else{if(t.child1!=null){t.child1.next=e;e=t.child1}if(t.child2!=null){t.child2.next=e;e=t.child2}}var r=t;r.free();r.next=zr.zpp_pool;zr.zpp_pool=r}this.root=null},insertLeaf:function(e){this.inlined_insertLeaf(e)},inlined_insertLeaf:function(e){if(this.root==null){this.root=e;this.root.parent=null}else{var t=e.aabb;var n=this.root;while(!(n.child1==null)){var r=n.child1;var i=n.child2;var s=n.aabb.perimeter();Xr.tmpaabb.setCombine(n.aabb,t);var o=Xr.tmpaabb.perimeter();var u=2*o;var a=2*(o-s);var f;Xr.tmpaabb.setCombine(t,r.aabb);if(r.child1==null)f=Xr.tmpaabb.perimeter()+a;else{var l=r.aabb.perimeter();var c=Xr.tmpaabb.perimeter();f=c-l+a}var h;Xr.tmpaabb.setCombine(t,i.aabb);if(i.child1==null)h=Xr.tmpaabb.perimeter()+a;else{var p=i.aabb.perimeter();var d=Xr.tmpaabb.perimeter();h=d-p+a}if(u<f&&u<h)break;else if(f<h)n=r;else n=i}var v=n;var m=v.parent;var g;if(zr.zpp_pool==null)g=new zr;else{g=zr.zpp_pool;zr.zpp_pool=g.next;g.next=null}if(Gn.zpp_pool==null)g.aabb=new Gn;else{g.aabb=Gn.zpp_pool;Gn.zpp_pool=g.aabb.next;g.aabb.next=null}null;g.moved=false;g.synced=false;g.first_sync=false;g.parent=m;g.aabb.setCombine(t,v.aabb);g.height=v.height+1;if(m!=null){if(m.child1==v)m.child1=g;else m.child2=g;g.child1=v;g.child2=e;v.parent=g;e.parent=g}else{g.child1=v;g.child2=e;v.parent=g;e.parent=g;this.root=g}n=e.parent;while(n!=null){n=this.balance(n);var y=n.child1;var b=n.child2;n.height=1+function(e){var t;var n=y.height;var r=b.height;t=n>r?n:r;return t}(this);n.aabb.setCombine(y.aabb,b.aabb);n=n.parent}}},removeLeaf:function(e){this.inlined_removeLeaf(e)},inlined_removeLeaf:function(e){if(e==this.root){this.root=null;return}else{var t=e.parent;var n=t.parent;var r;if(t.child1==e)r=t.child2;else r=t.child1;if(n!=null){if(n.child1==t)n.child1=r;else n.child2=r;r.parent=n;var i=t;i.free();i.next=zr.zpp_pool;zr.zpp_pool=i;var s=n;while(s!=null){s=this.balance(s);var o=s.child1;var u=s.child2;s.aabb.setCombine(o.aabb,u.aabb);s.height=1+function(e){var t;var n=o.height;var r=u.height;t=n>r?n:r;return t}(this);s=s.parent}}else{this.root=r;r.parent=null;var a=t;a.free();a.next=zr.zpp_pool;zr.zpp_pool=a}}},balance:function(e){if(e.child1==null||e.height<2)return e;else{var t=e.child1;var n=e.child2;var r=n.height-t.height;if(r>1){var i=n.child1;var s=n.child2;n.child1=e;n.parent=e.parent;e.parent=n;if(n.parent!=null){if(n.parent.child1==e)n.parent.child1=n;else n.parent.child2=n}else this.root=n;if(i.height>s.height){n.child2=i;e.child2=s;s.parent=e;e.aabb.setCombine(t.aabb,s.aabb);n.aabb.setCombine(e.aabb,i.aabb);e.height=1+function(e){var n;var r=t.height;var i=s.height;n=r>i?r:i;return n}(this);n.height=1+function(t){var n;var r=e.height;var s=i.height;n=r>s?r:s;return n}(this)}else{n.child2=s;e.child2=i;i.parent=e;e.aabb.setCombine(t.aabb,i.aabb);n.aabb.setCombine(e.aabb,s.aabb);e.height=1+function(e){var n;var r=t.height;var s=i.height;n=r>s?r:s;return n}(this);n.height=1+function(t){var n;var r=e.height;var i=s.height;n=r>i?r:i;return n}(this)}return n}else if(r<-1){var o=t.child1;var u=t.child2;t.child1=e;t.parent=e.parent;e.parent=t;if(t.parent!=null){if(t.parent.child1==e)t.parent.child1=t;else t.parent.child2=t}else this.root=t;if(o.height>u.height){t.child2=o;e.child1=u;u.parent=e;e.aabb.setCombine(n.aabb,u.aabb);t.aabb.setCombine(e.aabb,o.aabb);e.height=1+function(e){var t;var r=n.height;var i=u.height;t=r>i?r:i;return t}(this);t.height=1+function(t){var n;var r=e.height;var i=o.height;n=r>i?r:i;return n}(this)}else{t.child2=u;e.child1=o;o.parent=e;e.aabb.setCombine(n.aabb,o.aabb);t.aabb.setCombine(e.aabb,u.aabb);e.height=1+function(e){var t;var r=n.height;var i=o.height;t=r>i?r:i;return t}(this);t.height=1+function(t){var n;var r=e.height;var i=u.height;n=r>i?r:i;return n}(this)}return t}else return e}},__class__:Xr};var Vr=function(e){this.openlist=null;this.failed=null;this.treeStack2=null;this.treeStack=null;this.moves=null;this.syncs=null;this.pairs=null;this.dtree=null;this.stree=null;Ur.call(this);this.space=e;this.is_sweep=false;this.dynab=this;this.stree=new Xr;this.dtree=new Xr};Vr.__name__=true;Vr.__super__=Ur;Vr.prototype=n(Ur.prototype,{dyn:function(e){if(e.body.type==1)return false;else return!e.body.component.sleeping},__insert:function(e){var t;if(zr.zpp_pool==null)t=new zr;else{t=zr.zpp_pool;zr.zpp_pool=t.next;t.next=null}if(Gn.zpp_pool==null)t.aabb=new Gn;else{t.aabb=Gn.zpp_pool;Gn.zpp_pool=t.aabb.next;t.aabb.next=null}null;t.moved=false;t.synced=false;t.first_sync=false;t.shape=e;e.node=t;t.synced=true;t.first_sync=true;t.snext=this.syncs;this.syncs=t},__remove:function(e){var t=e.node;if(!t.first_sync){if(t.dyn)this.dtree.removeLeaf(t);else this.stree.removeLeaf(t)}e.node=null;if(t.synced){var n=null;var r=this.syncs;while(r!=null){if(r==t)break;n=r;r=r.snext}if(n==null)this.syncs=r.snext;else n.snext=r.snext;r.snext=null;t.synced=false}if(t.moved){var i=null;var s=this.moves;while(s!=null){if(s==t)break;i=s;s=s.mnext}if(i==null)this.moves=s.mnext;else i.mnext=s.mnext;s.mnext=null;t.moved=false}var o=null;var u=this.pairs;while(u!=null){var a=u.next;if(u.n1==t||u.n2==t){if(o==null)this.pairs=a;else o.next=a;if(u.arb!=null)u.arb.pair=null;u.arb=null;u.n1.shape.pairs.remove(u);u.n2.shape.pairs.remove(u);var f=u;f.n1=f.n2=null;f.sleeping=false;f.next=Wr.zpp_pool;Wr.zpp_pool=f;u=a;continue}o=u;u=a}while(!(e.pairs.head==null)){var l=e.pairs.pop_unsafe();if(l.n1==t)l.n2.shape.pairs.remove(l);else l.n1.shape.pairs.remove(l);if(l.arb!=null)l.arb.pair=null;l.arb=null;var c=l;c.n1=c.n2=null;c.sleeping=false;c.next=Wr.zpp_pool;Wr.zpp_pool=c}var h=t;h.free();h.next=zr.zpp_pool;zr.zpp_pool=h},__sync:function(e){var t=e.node;if(!t.synced){if(!this.space.continuous){if(e.zip_aabb){if(e.body!=null){e.zip_aabb=false;if(e.type==0)e.circle.__validate_aabb();else e.polygon.__validate_aabb()}}}var n;n=t.dyn!=(e.body.type==1?false:!e.body.component.sleeping)||!t.aabb.contains(e.aabb);if(n){t.synced=true;t.snext=this.syncs;this.syncs=t}}},sync_broadphase:function(){this.space.validation();if(this.syncs!=null){if(this.moves==null){var e=this.syncs;while(e!=null){var t=e.shape;if(!e.first_sync){var n;if(e.dyn)n=this.dtree;else n=this.stree;n.inlined_removeLeaf(e)}else e.first_sync=false;var r=e.aabb;if(!this.space.continuous){if(t.zip_aabb){if(t.body!=null){t.zip_aabb=false;if(t.type==0)t.circle.__validate_aabb();else t.polygon.__validate_aabb()}}}r.setExpand(t.aabb,3);var i;if(t.body.type==1?e.dyn=false:e.dyn=!t.body.component.sleeping)i=this.dtree;else i=this.stree;i.inlined_insertLeaf(e);e.synced=false;e.moved=true;e.mnext=e.snext;e.snext=null;e=e.mnext}var s=this.syncs;this.syncs=this.moves;this.moves=s}else while(this.syncs!=null){var o;var u=this.syncs;this.syncs=u.snext;u.snext=null;o=u;var a=o.shape;if(!o.first_sync){var f;if(o.dyn)f=this.dtree;else f=this.stree;f.inlined_removeLeaf(o)}else o.first_sync=false;var l=o.aabb;if(!this.space.continuous){if(a.zip_aabb){if(a.body!=null){a.zip_aabb=false;if(a.type==0)a.circle.__validate_aabb();else a.polygon.__validate_aabb()}}}l.setExpand(a.aabb,3);var c;if(a.body.type==1?o.dyn=false:o.dyn=!a.body.component.sleeping)c=this.dtree;else c=this.stree;c.inlined_insertLeaf(o);o.synced=false;if(!o.moved){o.moved=true;o.mnext=this.moves;this.moves=o}}}},broadphase:function(e,t){var n=this.syncs;while(n!=null){var r=n.shape;if(!n.first_sync){var i;if(n.dyn)i=this.dtree;else i=this.stree;i.inlined_removeLeaf(n)}else n.first_sync=false;var s=n.aabb;if(!e.continuous){if(r.zip_aabb){if(r.body!=null){r.zip_aabb=false;if(r.type==0)r.circle.__validate_aabb();else r.polygon.__validate_aabb()}}}s.setExpand(r.aabb,3);var o;if(r.body.type==1?n.dyn=false:n.dyn=!r.body.component.sleeping)o=this.dtree;else o=this.stree;o.inlined_insertLeaf(n);n.synced=false;n=n.snext}while(this.syncs!=null){var u;var a=this.syncs;this.syncs=a.snext;a.snext=null;u=a;if(u.moved)continue;u.moved=false;var f=u.shape;var l=f.body;if(l.component.sleeping)continue;var c=u.aabb;var h=null;if(this.dtree.root!=null){this.dtree.root.next=h;h=this.dtree.root}while(h!=null){var p;var d=h;h=d.next;d.next=null;p=d;if(p==u)continue;if(p.child1==null){var v=p.shape;if(v.body!=f.body&&!(v.body.type==1&&f.body.type==1)){if(c.intersect(p.aabb)){var m;var g;if(f.id<v.id){m=f.id;g=v.id}else{m=v.id;g=f.id}var y;if(f.pairs.length<v.pairs.length)y=f;else y=v;var b=null;var w=y.pairs.head;while(w!=null){var E=w.elt;if(E.id==m&&E.di==g){b=E;break}w=w.next}if(b!=null){if(b.sleeping){b.sleeping=false;b.next=this.pairs;this.pairs=b;b.first=true}continue}if(Wr.zpp_pool==null)b=new Wr;else{b=Wr.zpp_pool;Wr.zpp_pool=b.next;b.next=null}null;b.n1=u;b.n2=p;b.id=m;b.di=g;b.next=this.pairs;this.pairs=b;b.first=true;f.pairs.inlined_add(b);v.pairs.inlined_add(b)}}}else if(c.intersect(p.aabb)){if(p.child1!=null){p.child1.next=h;h=p.child1}if(p.child2!=null){p.child2.next=h;h=p.child2}}}if(this.stree.root!=null){this.stree.root.next=h;h=this.stree.root}while(h!=null){var S;var x=h;h=x.next;x.next=null;S=x;if(S==u)continue;if(S.child1==null){var T=S.shape;if(T.body!=f.body&&!(T.body.type==1&&f.body.type==1)){if(c.intersect(S.aabb)){var N;var C;if(f.id<T.id){N=f.id;C=T.id}else{N=T.id;C=f.id}var k;if(f.pairs.length<T.pairs.length)k=f;else k=T;var L=null;var A=k.pairs.head;while(A!=null){var O=A.elt;if(O.id==N&&O.di==C){L=O;break}A=A.next}if(L!=null){if(L.sleeping){L.sleeping=false;L.next=this.pairs;this.pairs=L;L.first=true}continue}if(Wr.zpp_pool==null)L=new Wr;else{L=Wr.zpp_pool;Wr.zpp_pool=L.next;L.next=null}null;L.n1=u;L.n2=S;L.id=N;L.di=C;L.next=this.pairs;this.pairs=L;L.first=true;f.pairs.inlined_add(L);T.pairs.inlined_add(L)}}}else if(c.intersect(S.aabb)){if(S.child1!=null){S.child1.next=h;h=S.child1}if(S.child2!=null){S.child2.next=h;h=S.child2}}}}while(this.moves!=null){var M;var _=this.moves;this.moves=_.mnext;_.mnext=null;M=_;M.moved=false;var D=M.shape;var P=D.body;if(P.component.sleeping)continue;var H=M.aabb;var B=null;if(this.dtree.root!=null){this.dtree.root.next=B;B=this.dtree.root}while(B!=null){var j;var F=B;B=F.next;F.next=null;j=F;if(j==M)continue;if(j.child1==null){var I=j.shape;if(I.body!=D.body&&!(I.body.type==1&&D.body.type==1)){if(H.intersect(j.aabb)){var q;var R;if(D.id<I.id){q=D.id;R=I.id}else{q=I.id;R=D.id}var U;if(D.pairs.length<I.pairs.length)U=D;else U=I;var z=null;var W=U.pairs.head;while(W!=null){var X=W.elt;if(X.id==q&&X.di==R){z=X;break}W=W.next}if(z!=null){if(z.sleeping){z.sleeping=false;z.next=this.pairs;this.pairs=z;z.first=true}continue}if(Wr.zpp_pool==null)z=new Wr;else{z=Wr.zpp_pool;Wr.zpp_pool=z.next;z.next=null}null;z.n1=M;z.n2=j;z.id=q;z.di=R;z.next=this.pairs;this.pairs=z;z.first=true;D.pairs.inlined_add(z);I.pairs.inlined_add(z)}}}else if(H.intersect(j.aabb)){if(j.child1!=null){j.child1.next=B;B=j.child1}if(j.child2!=null){j.child2.next=B;B=j.child2}}}if(this.stree.root!=null){this.stree.root.next=B;B=this.stree.root}while(B!=null){var V;var $=B;B=$.next;$.next=null;V=$;if(V==M)continue;if(V.child1==null){var J=V.shape;if(J.body!=D.body&&!(J.body.type==1&&D.body.type==1)){if(H.intersect(V.aabb)){var K;var Q;if(D.id<J.id){K=D.id;Q=J.id}else{K=J.id;Q=D.id}var G;if(D.pairs.length<J.pairs.length)G=D;else G=J;var Y=null;var Z=G.pairs.head;while(Z!=null){var et=Z.elt;if(et.id==K&&et.di==Q){Y=et;break}Z=Z.next}if(Y!=null){if(Y.sleeping){Y.sleeping=false;Y.next=this.pairs;this.pairs=Y;Y.first=true}continue}if(Wr.zpp_pool==null)Y=new Wr;else{Y=Wr.zpp_pool;Wr.zpp_pool=Y.next;Y.next=null}null;Y.n1=M;Y.n2=V;Y.id=K;Y.di=Q;Y.next=this.pairs;this.pairs=Y;Y.first=true;D.pairs.inlined_add(Y);J.pairs.inlined_add(Y)}}}else if(H.intersect(V.aabb)){if(V.child1!=null){V.child1.next=B;B=V.child1}if(V.child2!=null){V.child2.next=B;B=V.child2}}}}var tt=null;var nt=this.pairs;while(nt!=null){if(!nt.first&&!nt.n1.aabb.intersect(nt.n2.aabb)){if(tt==null)this.pairs=nt.next;else tt.next=nt.next;nt.n1.shape.pairs.inlined_try_remove(nt);nt.n2.shape.pairs.inlined_try_remove(nt);var rt=nt.next;if(nt.arb!=null)nt.arb.pair=null;nt.arb=null;var it=nt;it.n1=it.n2=null;it.sleeping=false;it.next=Wr.zpp_pool;Wr.zpp_pool=it;nt=rt;continue}var st=nt.n1.shape;var ot=st.body;var ut=nt.n2.shape;var at=ut.body;if(!nt.first){if((ot.component.sleeping||ot.type==1)&&(at.component.sleeping||at.type==1)){nt.sleeping=true;if(tt==null)this.pairs=nt.next;else tt.next=nt.next;nt=nt.next;continue}}nt.first=false;if(st.aabb.intersect(ut.aabb)){var ft=nt.arb;if(t)nt.arb=e.narrowPhase(st,ut,!(ot.type==2)||!(at.type==2),nt.arb,false);else nt.arb=e.continuousEvent(st,ut,!(ot.type==2)||!(at.type==2),nt.arb,false);if(nt.arb==null){if(ft!=null)ft.pair=null}else nt.arb.pair=nt}tt=nt;nt=nt.next}},clear:function(){while(this.syncs!=null){var e=this.syncs.snext;this.syncs.snext=null;if(this.syncs.first_sync){this.syncs.shape.node=null;this.syncs.shape.removedFromSpace();this.syncs.shape=null}this.syncs=e}while(this.moves!=null){var t=this.moves.mnext;this.moves.mnext=null;if(this.moves.first_sync){this.moves.shape.node=null;this.moves.shape.removedFromSpace();this.moves.shape=null}this.moves=t}while(this.pairs!=null){var n=this.pairs.next;if(this.pairs.arb!=null)this.pairs.arb.pair=null;this.pairs.arb=null;this.pairs.n1.shape.pairs.inlined_try_remove(this.pairs);this.pairs.n2.shape.pairs.inlined_try_remove(this.pairs);var r=this.pairs;r.n1=r.n2=null;r.sleeping=false;r.next=Wr.zpp_pool;Wr.zpp_pool=r;this.pairs=n}this.dtree.clear();this.stree.clear()},shapesUnderPoint:function(e,t,n,r){this.sync_broadphase();var i=Or.get(e,t,null);var s;if(r==null)s=new on;else s=r;if(this.stree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.stree.root);while(!(this.treeStack.head==null)){var o=this.treeStack.pop_unsafe();if(o.aabb.containsPoint(i)){if(o.child1==null){if(n==null||o.shape.filter.shouldCollide(n)){if(o.shape.type==0){if(Zn.circleContains(o.shape.circle,i))s.push(o.shape.outer)}else if(Zn.polyContains(o.shape.polygon,i))s.push(o.shape.outer)}}else{if(o.child1!=null)this.treeStack.add(o.child1);if(o.child2!=null)this.treeStack.add(o.child2)}}}}if(this.dtree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.dtree.root);while(!(this.treeStack.head==null)){var u=this.treeStack.pop_unsafe();if(u.aabb.containsPoint(i)){if(u.child1==null){if(n==null||u.shape.filter.shouldCollide(n)){if(u.shape.type==0){if(Zn.circleContains(u.shape.circle,i))s.push(u.shape.outer)}else if(Zn.polyContains(u.shape.polygon,i))s.push(u.shape.outer)}}else{if(u.child1!=null)this.treeStack.add(u.child1);if(u.child2!=null)this.treeStack.add(u.child2)}}}}var a=i;if(a.outer!=null){a.outer.zpp_inner=null;a.outer=null}a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=Or.zpp_pool;Or.zpp_pool=a;return s},bodiesUnderPoint:function(e,t,n,r){this.sync_broadphase();var i=Or.get(e,t,null);var s;if(r==null)s=new qt;else s=r;if(this.stree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.stree.root);while(!(this.treeStack.head==null)){var o=this.treeStack.pop_unsafe();if(o.aabb.containsPoint(i)){if(o.child1==null){var u=o.shape.body.outer;if(!s.has(u)){if(n==null||o.shape.filter.shouldCollide(n)){if(o.shape.type==0){if(Zn.circleContains(o.shape.circle,i))s.push(u)}else if(Zn.polyContains(o.shape.polygon,i))s.push(u)}}}else{if(o.child1!=null)this.treeStack.add(o.child1);if(o.child2!=null)this.treeStack.add(o.child2)}}}}if(this.dtree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.dtree.root);while(!(this.treeStack.head==null)){var a=this.treeStack.pop_unsafe();if(a.aabb.containsPoint(i)){if(a.child1==null){var f=a.shape.body.outer;if(!s.has(f)){if(n==null||a.shape.filter.shouldCollide(n)){if(a.shape.type==0){if(Zn.circleContains(a.shape.circle,i))s.push(f)}else if(Zn.polyContains(a.shape.polygon,i))s.push(f)}}}else{if(a.child1!=null)this.treeStack.add(a.child1);if(a.child2!=null)this.treeStack.add(a.child2)}}}}var l=i;if(l.outer!=null){l.outer.zpp_inner=null;l.outer=null}l._isimmutable=null;l._validate=null;l._invalidate=null;l.next=Or.zpp_pool;Or.zpp_pool=l;return s},shapesInAABB:function(e,t,n,r,i){this.sync_broadphase();this.updateAABBShape(e);var s=this.aabbShape.zpp_inner.aabb;var o;if(i==null)o=new on;else o=i;if(this.stree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.stree.root);while(!(this.treeStack.head==null)){var u=this.treeStack.pop_unsafe();if(s.contains(u.aabb)){if(u.child1==null){if(r==null||u.shape.filter.shouldCollide(r))o.push(u.shape.outer)}else{if(this.treeStack2==null)this.treeStack2=new Ei;this.treeStack2.add(u);while(!(this.treeStack2.head==null)){var a=this.treeStack2.pop_unsafe();if(a.child1==null){if(r==null||a.shape.filter.shouldCollide(r))o.push(a.shape.outer)}else{if(a.child1!=null)this.treeStack2.add(a.child1);if(a.child2!=null)this.treeStack2.add(a.child2)}}}}else if(u.aabb.intersect(s)){if(u.child1==null){if(r==null||u.shape.filter.shouldCollide(r)){if(t){if(n){if(Zn.containTest(this.aabbShape.zpp_inner,u.shape))o.push(u.shape.outer)}else if(s.contains(u.shape.aabb))o.push(u.shape.outer);else if(Zn.testCollide_safe(u.shape,this.aabbShape.zpp_inner))o.push(u.shape.outer)}else if(!n||s.contains(u.shape.aabb))o.push(u.shape.outer)}}else{if(u.child1!=null)this.treeStack.add(u.child1);if(u.child2!=null)this.treeStack.add(u.child2)}}}}if(this.dtree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.dtree.root);while(!(this.treeStack.head==null)){var f=this.treeStack.pop_unsafe();if(s.contains(f.aabb)){if(f.child1==null){if(r==null||f.shape.filter.shouldCollide(r))o.push(f.shape.outer)}else{if(this.treeStack2==null)this.treeStack2=new Ei;this.treeStack2.add(f);while(!(this.treeStack2.head==null)){var l=this.treeStack2.pop_unsafe();if(l.child1==null){if(r==null||l.shape.filter.shouldCollide(r))o.push(l.shape.outer)}else{if(l.child1!=null)this.treeStack2.add(l.child1);if(l.child2!=null)this.treeStack2.add(l.child2)}}}}else if(f.aabb.intersect(s)){if(f.child1==null){if(r==null||f.shape.filter.shouldCollide(r)){if(t){if(n){if(Zn.containTest(this.aabbShape.zpp_inner,f.shape))o.push(f.shape.outer)}else if(s.contains(f.shape.aabb))o.push(f.shape.outer);else if(Zn.testCollide_safe(f.shape,this.aabbShape.zpp_inner))o.push(f.shape.outer)}else if(!n||s.contains(f.shape.aabb))o.push(f.shape.outer)}}else{if(f.child1!=null)this.treeStack.add(f.child1);if(f.child2!=null)this.treeStack.add(f.child2)}}}}return o},bodiesInAABB:function(e,t,n,r,i){this.sync_broadphase();this.updateAABBShape(e);var s=this.aabbShape.zpp_inner.aabb;var o;if(i==null)o=new qt;else o=i;if(this.failed==null)this.failed=new qt;if(this.stree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.stree.root);while(!(this.treeStack.head==null)){var u=this.treeStack.pop_unsafe();if(s.contains(u.aabb)){if(u.child1==null){if(r==null||u.shape.filter.shouldCollide(r)){var a=u.shape.body.outer;if(!o.has(a))o.push(a)}}else{if(this.treeStack2==null)this.treeStack2=new Ei;this.treeStack2.add(u);while(!(this.treeStack2.head==null)){var f=this.treeStack2.pop_unsafe();if(f.child1==null){if(r==null||f.shape.filter.shouldCollide(r)){var l=f.shape.body.outer;if(!o.has(l))o.push(l)}}else{if(f.child1!=null)this.treeStack2.add(f.child1);if(f.child2!=null)this.treeStack2.add(f.child2)}}}}else if(u.aabb.intersect(s)){if(u.child1==null){var c=u.shape.body.outer;if(r==null||u.shape.filter.shouldCollide(r)){if(t){if(n){if(!this.failed.has(c)){var h=Zn.containTest(this.aabbShape.zpp_inner,u.shape);if(!o.has(c)&&h)o.push(c);else if(!h){o.remove(c);this.failed.push(c)}}}else if(!o.has(c)&&Zn.testCollide_safe(u.shape,this.aabbShape.zpp_inner))o.push(c)}else if(n){if(!this.failed.has(c)){var p=s.contains(u.shape.aabb);if(!o.has(c)&&p)o.push(c);else if(!p){o.remove(c);this.failed.push(c)}}}else if(!o.has(c)&&s.contains(u.shape.aabb))o.push(c)}}else{if(u.child1!=null)this.treeStack.add(u.child1);if(u.child2!=null)this.treeStack.add(u.child2)}}}}if(this.dtree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.dtree.root);while(!(this.treeStack.head==null)){var d=this.treeStack.pop_unsafe();if(s.contains(d.aabb)){if(d.child1==null){if(r==null||d.shape.filter.shouldCollide(r)){var v=d.shape.body.outer;if(!o.has(v))o.push(v)}}else{if(this.treeStack2==null)this.treeStack2=new Ei;this.treeStack2.add(d);while(!(this.treeStack2.head==null)){var m=this.treeStack2.pop_unsafe();if(m.child1==null){if(r==null||m.shape.filter.shouldCollide(r)){var g=m.shape.body.outer;if(!o.has(g))o.push(g)}}else{if(m.child1!=null)this.treeStack2.add(m.child1);if(m.child2!=null)this.treeStack2.add(m.child2)}}}}else if(d.aabb.intersect(s)){if(d.child1==null){var y=d.shape.body.outer;if(r==null||d.shape.filter.shouldCollide(r)){if(t){if(n){if(!this.failed.has(y)){var b=Zn.containTest(this.aabbShape.zpp_inner,d.shape);if(!o.has(y)&&b)o.push(y);else if(!b){o.remove(y);this.failed.push(y)}}}else if(!o.has(y)&&Zn.testCollide_safe(d.shape,this.aabbShape.zpp_inner))o.push(y)}else if(n){if(!this.failed.has(y)){var w=s.contains(d.shape.aabb);if(!o.has(y)&&w)o.push(y);else if(!w){o.remove(y);this.failed.push(y)}}}else if(!o.has(y)&&s.contains(d.shape.aabb))o.push(y)}}else{if(d.child1!=null)this.treeStack.add(d.child1);if(d.child2!=null)this.treeStack.add(d.child2)}}}}this.failed.clear();return o},shapesInCircle:function(e,t,n,r,i,s){this.sync_broadphase();this.updateCircShape(e,t,n);var o=this.circShape.zpp_inner.aabb;var u;if(s==null)u=new on;else u=s;if(this.stree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.stree.root);while(!(this.treeStack.head==null)){var a=this.treeStack.pop_unsafe();if(a.aabb.intersect(o)){if(a.child1==null){if(i==null||a.shape.filter.shouldCollide(i)){if(r){if(Zn.containTest(this.circShape.zpp_inner,a.shape))u.push(a.shape.outer)}else if(Zn.testCollide_safe(a.shape,this.circShape.zpp_inner))u.push(a.shape.outer)}}else{if(a.child1!=null)this.treeStack.add(a.child1);if(a.child2!=null)this.treeStack.add(a.child2)}}}}if(this.dtree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.dtree.root);while(!(this.treeStack.head==null)){var f=this.treeStack.pop_unsafe();if(f.aabb.intersect(o)){if(f.child1==null){if(i==null||f.shape.filter.shouldCollide(i)){if(r){if(Zn.containTest(this.circShape.zpp_inner,f.shape))u.push(f.shape.outer)}else if(Zn.testCollide_safe(f.shape,this.circShape.zpp_inner))u.push(f.shape.outer)}}else{if(f.child1!=null)this.treeStack.add(f.child1);if(f.child2!=null)this.treeStack.add(f.child2)}}}}return u},bodiesInCircle:function(e,t,n,r,i,s){this.sync_broadphase();this.updateCircShape(e,t,n);var o=this.circShape.zpp_inner.aabb;var u;if(s==null)u=new qt;else u=s;if(this.failed==null)this.failed=new qt;if(this.stree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.stree.root);while(!(this.treeStack.head==null)){var a=this.treeStack.pop_unsafe();if(a.aabb.intersect(o)){if(a.child1==null){var f=a.shape.body.outer;if(i==null||a.shape.filter.shouldCollide(i)){if(r){if(!this.failed.has(f)){var l=Zn.containTest(this.circShape.zpp_inner,a.shape);if(!u.has(f)&&l)u.push(f);else if(!l){u.remove(f);this.failed.push(f)}}}else if(!u.has(f)&&Zn.testCollide_safe(a.shape,this.circShape.zpp_inner))u.push(f)}}else{if(a.child1!=null)this.treeStack.add(a.child1);if(a.child2!=null)this.treeStack.add(a.child2)}}}}if(this.dtree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.dtree.root);while(!(this.treeStack.head==null)){var c=this.treeStack.pop_unsafe();if(c.aabb.intersect(o)){if(c.child1==null){var h=c.shape.body.outer;if(i==null||c.shape.filter.shouldCollide(i)){if(r){if(!this.failed.has(h)){var p=Zn.containTest(this.circShape.zpp_inner,c.shape);if(!u.has(h)&&p)u.push(h);else if(!p){u.remove(h);this.failed.push(h)}}}else if(!u.has(h)&&Zn.testCollide_safe(c.shape,this.circShape.zpp_inner))u.push(h)}}else{if(c.child1!=null)this.treeStack.add(c.child1);if(c.child2!=null)this.treeStack.add(c.child2)}}}}this.failed.clear();return u},shapesInShape:function(e,t,n,r){this.sync_broadphase();this.validateShape(e);var i=e.aabb;var s;if(r==null)s=new on;else s=r;if(this.stree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.stree.root);while(!(this.treeStack.head==null)){var o=this.treeStack.pop_unsafe();if(o.aabb.intersect(i)){if(o.child1==null){if(n==null||o.shape.filter.shouldCollide(n)){if(t){if(Zn.containTest(e,o.shape))s.push(o.shape.outer)}else if(Zn.testCollide_safe(o.shape,e))s.push(o.shape.outer)}}else{if(o.child1!=null)this.treeStack.add(o.child1);if(o.child2!=null)this.treeStack.add(o.child2)}}}}if(this.dtree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.dtree.root);while(!(this.treeStack.head==null)){var u=this.treeStack.pop_unsafe();if(u.aabb.intersect(i)){if(u.child1==null){if(n==null||u.shape.filter.shouldCollide(n)){if(t){if(Zn.containTest(e,u.shape))s.push(u.shape.outer)}else if(Zn.testCollide_safe(u.shape,e))s.push(u.shape.outer)}}else{if(u.child1!=null)this.treeStack.add(u.child1);if(u.child2!=null)this.treeStack.add(u.child2)}}}}return s},bodiesInShape:function(e,t,n,r){this.sync_broadphase();this.validateShape(e);var i=e.aabb;var s;if(r==null)s=new qt;else s=r;if(this.failed==null)this.failed=new qt;if(this.stree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.stree.root);while(!(this.treeStack.head==null)){var o=this.treeStack.pop_unsafe();if(o.aabb.intersect(i)){if(o.child1==null){var u=o.shape.body.outer;if(n==null||o.shape.filter.shouldCollide(n)){if(t){if(!this.failed.has(u)){var a=Zn.containTest(e,o.shape);if(!s.has(u)&&a)s.push(u);else if(!a){s.remove(u);this.failed.push(u)}}}else if(!s.has(u)&&Zn.testCollide_safe(o.shape,e))s.push(u)}}else{if(o.child1!=null)this.treeStack.add(o.child1);if(o.child2!=null)this.treeStack.add(o.child2)}}}}if(this.dtree.root!=null){if(this.treeStack==null)this.treeStack=new Ei;this.treeStack.add(this.dtree.root);while(!(this.treeStack.head==null)){var f=this.treeStack.pop_unsafe();if(f.aabb.intersect(i)){if(f.child1==null){var l=f.shape.body.outer;if(n==null||f.shape.filter.shouldCollide(n)){if(t){if(!this.failed.has(l)){var c=Zn.containTest(e,f.shape);if(!s.has(l)&&c)s.push(l);else if(!c){s.remove(l);this.failed.push(l)}}}else if(!s.has(l)&&Zn.testCollide_safe(f.shape,e))s.push(l)}}else{if(f.child1!=null)this.treeStack.add(f.child1);if(f.child2!=null)this.treeStack.add(f.child2)}}}}this.failed.clear();return s},rayCast:function(e,t,n){if(this.openlist==null)this.openlist=new Ei;this.sync_broadphase();e.validate_dir();var r=e.maxdist;if(this.dtree.root!=null){if(e.aabbtest(this.dtree.root.aabb)){var i=e.aabbsect(this.dtree.root.aabb);if(i>=0&&i<r){this.dtree.root.rayt=i;var s=null;var o=this.openlist.head;while(o!=null){var u=o.elt;if(this.dtree.root.rayt<u.rayt)break;s=o;o=o.next}this.openlist.inlined_insert(s,this.dtree.root)}}}if(this.stree.root!=null){if(e.aabbtest(this.stree.root.aabb)){var a=e.aabbsect(this.stree.root.aabb);if(a>=0&&a<r){this.stree.root.rayt=a;var f=null;var l=this.openlist.head;while(l!=null){var c=l.elt;if(this.stree.root.rayt<c.rayt)break;f=l;l=l.next}this.openlist.inlined_insert(f,this.stree.root)}}}var h=null;while(!(this.openlist.head==null)){var p=this.openlist.pop_unsafe();if(p.rayt>=r)break;if(p.child1==null){var d=p.shape;if(n==null||d.filter.shouldCollide(n)){var v;if(d.type==0)v=e.circlesect(d.circle,t,r);else if(e.aabbtest(d.aabb))v=e.polysect(d.polygon,t,r);else v=null;if(v!=null){if(v.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");r=v.zpp_inner.toiDistance;if(h!=null){if(h.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");h.zpp_inner.free()}h=v}}}else{if(p.child1!=null){if(e.aabbtest(p.child1.aabb)){var m=e.aabbsect(p.child1.aabb);if(m>=0&&m<r){p.child1.rayt=m;var y=null;var b=this.openlist.head;while(b!=null){var w=b.elt;if(p.child1.rayt<w.rayt)break;y=b;b=b.next}this.openlist.inlined_insert(y,p.child1)}}}if(p.child2!=null){if(e.aabbtest(p.child2.aabb)){var E=e.aabbsect(p.child2.aabb);if(E>=0&&E<r){p.child2.rayt=E;var S=null;var x=this.openlist.head;while(x!=null){var T=x.elt;if(p.child2.rayt<T.rayt)break;S=x;x=x.next}this.openlist.inlined_insert(S,p.child2)}}}}}this.openlist.clear();return h},rayMultiCast:function(e,t,n,r){if(this.openlist==null)this.openlist=new Ei;this.sync_broadphase();e.validate_dir();var i=e.maxdist>=Infinity;var s;if(r==null)s=new Mt;else s=r;if(this.dtree.root!=null){if(e.aabbtest(this.dtree.root.aabb)){if(i)this.openlist.add(this.dtree.root);else{var o=e.aabbsect(this.dtree.root.aabb);if(o>=0&&o<e.maxdist)this.openlist.add(this.dtree.root)}}}if(this.stree.root!=null){if(e.aabbtest(this.stree.root.aabb)){if(i)this.openlist.add(this.stree.root);else{var u=e.aabbsect(this.stree.root.aabb);if(u>=0&&u<e.maxdist)this.openlist.add(this.stree.root)}}}while(!(this.openlist.head==null)){var a=this.openlist.pop_unsafe();if(a.child1==null){var f=a.shape;if(n==null||f.filter.shouldCollide(n)){if(f.type==0)e.circlesect2(f.circle,t,s);else if(e.aabbtest(f.aabb))e.polysect2(f.polygon,t,s)}}else{if(a.child1!=null){if(e.aabbtest(a.child1.aabb)){if(i)this.openlist.add(a.child1);else{var l=e.aabbsect(a.child1.aabb);if(l>=0&&l<e.maxdist)this.openlist.add(a.child1)}}}if(a.child2!=null){if(e.aabbtest(a.child2.aabb)){if(i)this.openlist.add(a.child2);else{var c=e.aabbsect(a.child2.aabb);if(c>=0&&c<e.maxdist)this.openlist.add(a.child2)}}}}}this.openlist.clear();return s},__class__:Vr});var $r=function(){this.waket=0;this.sleep=false;this.comps=null;this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null;this.comps=new Si};$r.__name__=true;$r.prototype={elem:function(){return this},begin:function(){return this.next},setbegin:function(e){this.next=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;e._inuse=true;t=e;t.next=this.next;this.next=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.next;while(t!=null){var n=t;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;t._inuse=true;n=t;if(e==null){n.next=this.next;this.next=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.next;this.next=e.next;e._inuse=false;if(this.next==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.next;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.next;n=t.next;this.next=n;if(this.next==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}t._inuse=false;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){},inlined_clear:function(){},reverse:function(){var e=this.next;var t=null;while(e!=null){var n=e.next;e.next=t;this.next=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.next==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.next;while(n!=null){var r=n;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.next},back:function(){var e=this.next;var t=e;while(t!=null){e=t;t=t.next}return e},iterator_at:function(e){var t=this.next;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t;else return null},free:function(){},alloc:function(){this.waket=0},__class__:$r};var Jr=function(){this.woken=false;this.waket=0;this.sleeping=false;this.island=null;this.constraint=null;this.body=null;this.isBody=false;this.rank=0;this.parent=null;this.next=null;this.sleeping=false;this.island=null;this.parent=this;this.rank=0;this.woken=false};Jr.__name__=true;Jr.prototype={free:function(){this.body=null;this.constraint=null},alloc:function(){},reset:function(){this.sleeping=false;this.island=null;this.parent=this;this.rank=0},__class__:Jr};var Kr=function(){this.lazydel=false;this.freed=false;this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null;this.int2=null;this.int1=null;this.di=0;this.id=0;this.arbiters=new fi};Kr.__name__=true;Kr.get=function(e,t){var n;if(Kr.zpp_pool==null)n=new Kr;else{n=Kr.zpp_pool;Kr.zpp_pool=n.next;n.next=null}n.freed=false;n.lazydel=false;n.COLLISIONstate=1;n.COLLISIONstamp=0;n.SENSORstate=1;n.SENSORstamp=0;n.FLUIDstate=1;n.FLUIDstamp=0;if(e.id<t.id){n.int1=e;n.int2=t}else{n.int1=t;n.int2=e}n.id=n.int1.id;n.di=n.int2.id;return n};Kr.prototype={elem:function(){return this},begin:function(){return this.next},setbegin:function(e){this.next=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;e._inuse=true;t=e;t.next=this.next;this.next=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.next;while(t!=null){var n=t;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;t._inuse=true;n=t;if(e==null){n.next=this.next;this.next=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.next;this.next=e.next;e._inuse=false;if(this.next==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.next;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.next;var r=false;while(n!=null){if(n==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.next;n=t.next;this.next=n;if(this.next==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}t._inuse=false;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){},inlined_clear:function(){},reverse:function(){var e=this.next;var t=null;while(e!=null){var n=e.next;e.next=t;this.next=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.next==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.next;while(n!=null){var r=n;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.next},back:function(){var e=this.next;var t=e;while(t!=null){e=t;t=t.next}return e},iterator_at:function(e){var t=this.next;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t;else return null},free:function(){this.int1=this.int2=null;this.id=this.di=-1;this.freed=true},alloc:function(){this.freed=false;this.lazydel=false;this.COLLISIONstate=1;this.COLLISIONstamp=0;this.SENSORstate=1;this.SENSORstamp=0;this.FLUIDstate=1;this.FLUIDstamp=0},add_arb:function(e){if(!this.arbiters.inlined_has(e)){this.arbiters.inlined_add(e);return true}else return false},try_remove_arb:function(e){return this.arbiters.inlined_try_remove(e)},remove_arb:function(e){this.arbiters.inlined_try_remove(e)},empty_arb:function(e){var t;t=true;var n=this.arbiters.head;while(n!=null){var r=n.elt;if((r.type&e)==0){n=n.next;continue}else{t=false;break}n=n.next}return t},really_empty:function(){return this.arbiters.head==null},sleeping:function(){var e;e=true;var t=this.arbiters.head;while(t!=null){var n=t.elt;if(n.sleeping){t=t.next;continue}else{e=false;break}t=t.next}return e},__class__:Kr};var Qr=function(e){this.space=null;this.cbsets=null;if(Fs.zpp_pool==null)this.cbsets=new Fs;else{this.cbsets=Fs.zpp_pool;Fs.zpp_pool=this.cbsets.next;this.cbsets.next=null}null;this.cbsets.lt=vn.setlt;this.space=e};Qr.__name__=true;Qr.prototype={get:function(e){if(e.head==null)return null;var t;if(vn.zpp_pool==null)t=new vn;else{t=vn.zpp_pool;vn.zpp_pool=t.next;t.next=null}null;var n=t.cbTypes;t.cbTypes=e;var r=this.cbsets.find_weak(t);var i;if(r!=null)i=r.data;else{var s=vn.get(e);this.cbsets.insert(s);s.manager=this;i=s}t.cbTypes=n;var o=t;o.free();o.next=vn.zpp_pool;vn.zpp_pool=o;return i},remove:function(e){this.cbsets.remove(e);while(!(e.cbpairs.head==null)){var t=e.cbpairs.pop_unsafe();if(t.a!=t.b){if(e==t.a)t.b.cbpairs.remove(t);else t.a.cbpairs.remove(t)}var n=t;n.a=n.b=null;n.listeners.clear();n.next=mn.zpp_pool;mn.zpp_pool=n}e.manager=null},clear:function(){},validate:function(){if(!this.cbsets.empty()){var e=this.cbsets.parent;while(e.prev!=null)e=e.prev;while(e!=null){var t=e.data;t.validate();if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{while(e.parent!=null&&e==e.parent.next)e=e.parent;e=e.parent}}}},pair:function(e,t){var n=null;var r;if(e.cbpairs.length<t.cbpairs.length)r=e.cbpairs;else r=t.cbpairs;var i=r.head;while(i!=null){var s=i.elt;if(s.a==e&&s.b==t||s.a==t&&s.b==e){n=s;break}i=i.next}if(n==null){n=mn.get(e,t);e.cbpairs.add(n);if(t!=e)t.cbpairs.add(n)}if(n.zip_listeners){n.zip_listeners=false;n.__validate()}return n},valid_listener:function(e){return e.space==this.space},__class__:Qr};var Gr=function(e,t){this.prelisteners=null;this.precb=null;this.continuous=false;this.toiEvents=null;this.pre_dt=0;this.convexShapeList=null;this.cbsets=null;this.callbackset_list=null;this.callbacks=null;this.wrap_listeners=null;this.listeners=null;this.islands=null;this.staticsleep=null;this.wrap_livecon=null;this.live_constraints=null;this.wrap_live=null;this.live=null;this.wrap_arbiters=null;this.s_arbiters=null;this.f_arbiters=null;this.c_arbiters_false=null;this.c_arbiters_true=null;this.sortcontacts=false;this.time=0;this.midstep=false;this.stamp=0;this.global_ang_drag=0;this.global_lin_drag=0;this.__static=null;this.bphase=null;this.kinematics=null;this.wrap_constraints=null;this.constraints=null;this.wrap_compounds=null;this.compounds=null;this.wrap_bodies=null;this.bodies=null;this.wrap_gravity=null;this.gravityy=0;this.gravityx=0;this.userData=null;this.outer=null;this.toiEvents=new Li;this.global_lin_drag=.015;this.global_ang_drag=.015;dn.internal=true;this.precb=new z;this.precb.zpp_inner=new dn;dn.internal=false;this.sortcontacts=true;this.pre_dt=0;if(t==null||t==function(e){var t;if(Tn.Broadphase_DYNAMIC_AABB_TREE==null){Tn.internal=true;Tn.Broadphase_DYNAMIC_AABB_TREE=new fn;Tn.internal=false}t=Tn.Broadphase_DYNAMIC_AABB_TREE;return t}(this))this.bphase=new Vr(this);else if(t==function(e){var t;if(Tn.Broadphase_SWEEP_AND_PRUNE==null){Tn.internal=true;Tn.Broadphase_SWEEP_AND_PRUNE=new fn;Tn.internal=false}t=Tn.Broadphase_SWEEP_AND_PRUNE;return t}(this))this.bphase=new Zr(this);this.time=0;var n=this;if(e!=null){this.gravityx=e.x;this.gravityy=e.y}else{this.gravityx=0;this.gravityy=0}this.bodies=new ui;this.wrap_bodies=vs.get(this.bodies);this.wrap_bodies.zpp_inner.adder=Rs(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=Rs(this,this.bodies_subber);this.wrap_bodies.zpp_inner._modifiable=Rs(this,this.bodies_modifiable);this.compounds=new ai;this.wrap_compounds=gs.get(this.compounds);this.wrap_compounds.zpp_inner.adder=Rs(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=Rs(this,this.compounds_subber);this.wrap_compounds.zpp_inner._modifiable=Rs(this,this.compounds_modifiable);this.kinematics=new ui;this.c_arbiters_true=new Ci;this.c_arbiters_false=new Ci;this.f_arbiters=new xi;this.s_arbiters=new Ti;this.islands=new $r;this.live=new ui;this.wrap_live=vs.get(this.live,true);this.staticsleep=new ui;this.constraints=new wn;this.wrap_constraints=ds.get(this.constraints);this.wrap_constraints.zpp_inner.adder=Rs(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=Rs(this,this.constraints_subber);this.wrap_constraints.zpp_inner._modifiable=Rs(this,this.constraints_modifiable);this.live_constraints=new wn;this.wrap_livecon=ds.get(this.live_constraints,true);this.__static=Pr.__static();this.__static.zpp_inner.space=this;this.callbacks=new dn;this.midstep=false;this.listeners=new Ni;this.wrap_listeners=ys.get(this.listeners);this.wrap_listeners.zpp_inner.adder=Rs(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=Rs(this,this.listeners_subber);this.wrap_listeners.zpp_inner._modifiable=Rs(this,this.listeners_modifiable);this.callbackset_list=new Kr;this.mrca1=new En;this.mrca2=new En;this.prelisteners=new gn;this.cbsets=new Qr(this)};Gr.__name__=true;Gr.prototype={getgravity:function(){this.wrap_gravity=_t.get(this.gravityx,this.gravityy,null);this.wrap_gravity.zpp_inner._inuse=true;this.wrap_gravity.zpp_inner._invalidate=Rs(this,this.gravity_invalidate);this.wrap_gravity.zpp_inner._validate=Rs(this,this.gravity_validate)},gravity_invalidate:function(e){if(this.midstep)throw new g("Error: Space::gravity cannot be set during space step");this.gravityx=e.x;this.gravityy=e.y;var t=new ai;var n=this.bodies.head;while(n!=null){var r=n.elt;var i=r;if(!i.world){i.component.waket=this.stamp+(this.midstep?0:1);if(i.type==3)i.kinematicDelaySleep=true;if(i.component.sleeping)this.really_wake(i,false)}n=n.next}var s=this.compounds.head;while(s!=null){var o=s.elt;t.add(o);s=s.next}while(!(t.head==null)){var u=t.pop_unsafe();var a=u.bodies.head;while(a!=null){var f=a.elt;var l=f;if(!l.world){l.component.waket=this.stamp+(this.midstep?0:1);if(l.type==3)l.kinematicDelaySleep=true;if(l.component.sleeping)this.really_wake(l,false)}a=a.next}var c=u.compounds.head;while(c!=null){var h=c.elt;t.add(h);c=c.next}}},gravity_validate:function(){this.wrap_gravity.zpp_inner.x=this.gravityx;this.wrap_gravity.zpp_inner.y=this.gravityy},clear:function(){while(!(this.listeners.head==null)){var e=this.listeners.pop_unsafe();this.remListener(e)}while(!(this.callbackset_list.next==null)){var t=this.callbackset_list.pop_unsafe();t.arbiters.clear();var n=t;n.int1=n.int2=null;n.id=n.di=-1;n.freed=true;null;n.next=Kr.zpp_pool;Kr.zpp_pool=n}while(!(this.c_arbiters_true.head==null)){var r=this.c_arbiters_true.pop_unsafe();r.retire()}while(!(this.c_arbiters_false.head==null)){var i=this.c_arbiters_false.pop_unsafe();i.retire()}while(!(this.s_arbiters.head==null)){var s=this.s_arbiters.pop_unsafe();s.retire()}while(!(this.f_arbiters.head==null)){var o=this.f_arbiters.pop_unsafe();o.retire()}this.bphase.clear();while(!(this.bodies.head==null)){var u=this.bodies.pop_unsafe();if(u.component!=null){var a=u.component.island;if(a!=null){while(!(a.comps.head==null)){var f=a.comps.pop_unsafe();f.sleeping=false;f.island=null;f.parent=f;f.rank=0}var l=a;l.next=$r.zpp_pool;$r.zpp_pool=l}}u.removedFromSpace();u.space=null}while(!(this.constraints.head==null)){var c=this.constraints.pop_unsafe();if(c.component!=null){var h=c.component.island;if(h!=null){while(!(h.comps.head==null)){var p=h.comps.pop_unsafe();p.sleeping=false;p.island=null;p.parent=p;p.rank=0}var d=h;d.next=$r.zpp_pool;$r.zpp_pool=d}}c.removedFromSpace();c.space=null}this.kinematics.clear();var v=new ai;while(!(this.compounds.head==null)){var m=this.compounds.pop_unsafe();v.add(m)}while(!(v.head==null)){var g=v.pop_unsafe();g.removedFromSpace();g.space=null;var y=g.bodies.head;while(y!=null){var b=y.elt;if(b.component!=null){var w=b.component.island;if(w!=null){while(!(w.comps.head==null)){var E=w.comps.pop_unsafe();E.sleeping=false;E.island=null;E.parent=E;E.rank=0}var S=w;S.next=$r.zpp_pool;$r.zpp_pool=S}}b.removedFromSpace();b.space=null;y=y.next}var x=g.constraints.head;while(x!=null){var T=x.elt;if(T.component!=null){var N=T.component.island;if(N!=null){while(!(N.comps.head==null)){var C=N.comps.pop_unsafe();C.sleeping=false;C.island=null;C.parent=C;C.rank=0}var k=N;k.next=$r.zpp_pool;$r.zpp_pool=k}}T.removedFromSpace();T.space=null;x=x.next}var L=g.compounds.head;while(L!=null){var A=L.elt;v.add(A);L=L.next}}this.staticsleep.clear();this.live.clear();this.live_constraints.clear();this.stamp=0;this.time=0;this.mrca1.clear();this.mrca2.clear();this.prelisteners.clear();this.cbsets.clear()},bodies_adder:function(e){if(e.zpp_inner.compound!=null)throw new g("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");if(e.zpp_inner.space!=this){if(e.zpp_inner.space!=null)e.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(e);this.addBody(e.zpp_inner);return true}else return false},bodies_subber:function(e){this.remBody(e.zpp_inner)},bodies_modifiable:function(){if(this.midstep)throw new g("Error: Space::bodies cannot be set during space step()")},compounds_adder:function(e){if(e.zpp_inner.compound!=null)throw new g("Error: Cannot set the space of an inner Compound, only the root Compound space can be set");if(e.zpp_inner.space!=this){if(e.zpp_inner.space!=null)e.zpp_inner.space.wrap_compounds.remove(e);this.addCompound(e.zpp_inner);return true}else return false},compounds_subber:function(e){this.remCompound(e.zpp_inner)},compounds_modifiable:function(){if(this.midstep)throw new g("Error: Space::compounds cannot be set during space step()")},constraints_adder:function(e){if(e.zpp_inner.compound!=null)throw new g("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");if(e.zpp_inner.space!=this){if(e.zpp_inner.space!=null)e.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(e);this.addConstraint(e.zpp_inner);return true}else return false},constraints_subber:function(e){this.remConstraint(e.zpp_inner)},constraints_modifiable:function(){if(this.midstep)throw new g("Error: Space::constraints cannot be set during space step()")},listeners_adder:function(e){if(e.zpp_inner.space!=this){if(e.zpp_inner.space!=null)e.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(e);this.addListener(e.zpp_inner);return true}else return false},listeners_subber:function(e){this.remListener(e.zpp_inner)},listeners_modifiable:function(){if(this.midstep)throw new g("Error: Space::listeners cannot be set during space step()")},revoke_listener:function(e){},unrevoke_listener:function(e){},addListener:function(e){e.space=this;e.addedToSpace();if(e.interaction!=null)null},remListener:function(e){if(e.interaction!=null)null;e.removedFromSpace();e.space=null},add_callbackset:function(e){e.int1.cbsets.inlined_add(e);e.int2.cbsets.inlined_add(e);this.callbackset_list.inlined_add(e)},remove_callbackset:function(e){e.lazydel=true;e.int1.cbsets.inlined_try_remove(e);e.int2.cbsets.inlined_try_remove(e)},transmitType:function(e,t){var n=e;if(!n.world){n.component.waket=this.stamp+(this.midstep?0:1);if(n.type==3)n.kinematicDelaySleep=true;if(n.component.sleeping)this.really_wake(n,false)}if(e.type==2)this.live.remove(e);else if(e.type==3){this.kinematics.remove(e);this.staticsleep.remove(e)}else if(e.type==1)this.staticsleep.remove(e);e.type=t;if(e.type==3)this.kinematics.add(e);if(e.type==1)this.static_validation(e);e.component.sleeping=true;var r=e;if(!r.world){r.component.waket=this.stamp+(this.midstep?0:1);if(r.type==3)r.kinematicDelaySleep=true;if(r.component.sleeping)this.really_wake(r,true)}},added_shape:function(e,t){if(t==null)t=false;if(!t){var n=e.body;if(!n.world){n.component.waket=this.stamp+(this.midstep?0:1);if(n.type==3)n.kinematicDelaySleep=true;if(n.component.sleeping)this.really_wake(n,false)}}this.bphase.insert(e);e.addedToSpace()},removed_shape:function(e,t){if(t==null)t=false;var n=this;var r=e.body;if(!t)r.wake();var i=null;var s=r.arbiters.head;while(s!=null){var o=[s.elt];var u=o[0].ws1==e||o[0].ws2==e;if(u){if(o[0].present!=0){this.MRCA_chains(o[0].ws1,o[0].ws2);var a=this.mrca1.head;while(a!=null){var f=a.elt;var l=this.mrca2.head;while(l!=null){var c=l.elt;var h=f.cbSet;var p=c.cbSet;h.validate();p.validate();if(h.manager.pair(h,p).empty_intersection()){l=l.next;continue}var d=[Dr.get(f,c)];d[0].remove_arb(o[0]);o[0].present--;h.manager.pair(h,p).forall(1,function(e,t){return function(r){if((r.itype&t[0].type)!=0&&e[0].empty_arb(r.itype)){var i=n.push_callback(r);i.event=1;Dr.int_callback(e[0],r,i);i.set=e[0]}}}(d,o));if(d[0].arbiters.head==null)this.remove_callbackset(d[0]);l=l.next}a=a.next}}if(o[0].b1!=r&&o[0].b1.type==2){var v=o[0].b1;if(!v.world){v.component.waket=this.stamp+(this.midstep?0:1);if(v.type==3)v.kinematicDelaySleep=true;if(v.component.sleeping)this.really_wake(v,false)}}if(o[0].b2!=r&&o[0].b2.type==2){var m=o[0].b2;if(!m.world){m.component.waket=this.stamp+(this.midstep?0:1);if(m.type==3)m.kinematicDelaySleep=true;if(m.component.sleeping)this.really_wake(m,false)}}o[0].cleared=true;if(r==null||o[0].b2==r)o[0].b1.arbiters.inlined_try_remove(o[0]);if(r==null||o[0].b1==r)o[0].b2.arbiters.inlined_try_remove(o[0]);if(o[0].pair!=null){o[0].pair.arb=null;o[0].pair=null}o[0].active=false;this.f_arbiters.modified=true;s=r.arbiters.erase(i);continue}i=s;s=s.next}this.bphase.remove(e);e.removedFromSpace()},addConstraint:function(e){e.space=this;e.addedToSpace();if(e.active){e.component.sleeping=true;this.wake_constraint(e,true)}},remConstraint:function(e){if(e.active){this.wake_constraint(e,true);this.live_constraints.remove(e)}e.removedFromSpace();e.space=null},addCompound:function(e){e.space=this;e.addedToSpace();var t=e.bodies.head;while(t!=null){var n=t.elt;this.addBody(n);t=t.next}var r=e.constraints.head;while(r!=null){var i=r.elt;this.addConstraint(i);r=r.next}var s=e.compounds.head;while(s!=null){var o=s.elt;this.addCompound(o);s=s.next}},remCompound:function(e){var t=e.bodies.head;while(t!=null){var n=t.elt;this.remBody(n);t=t.next}var r=e.constraints.head;while(r!=null){var i=r.elt;this.remConstraint(i);r=r.next}var s=e.compounds.head;while(s!=null){var o=s.elt;this.remCompound(o);s=s.next}e.removedFromSpace();e.space=null},addBody:function(e,t){if(t==null)t=-1;e.space=this;e.addedToSpace();e.component.sleeping=true;var n=e;if(!n.world){n.component.waket=this.stamp+(this.midstep?0:1);if(n.type==3)n.kinematicDelaySleep=true;if(n.component.sleeping)this.really_wake(n,true)}var r=e.shapes.head;while(r!=null){var i=r.elt;this.added_shape(i,true);r=r.next}if(e.type==1){this.static_validation(e)}else if(e.type==2){}else{if(t!=3)this.kinematics.add(e)}},remBody:function(e,t){if(t==null)t=-1;if(e.type==1){var n=e;if(!n.world){n.component.waket=this.stamp+(this.midstep?0:1);if(n.type==3)n.kinematicDelaySleep=true;if(n.component.sleeping)this.really_wake(n,true)}this.staticsleep.remove(e)}else if(e.type==2){var r=e;if(!r.world){r.component.waket=this.stamp+(this.midstep?0:1);if(r.type==3)r.kinematicDelaySleep=true;if(r.component.sleeping)this.really_wake(r,true)}this.live.remove(e)}else{if(t!=3)this.kinematics.remove(e);var i=e;if(!i.world){i.component.waket=this.stamp+(this.midstep?0:1);if(i.type==3)i.kinematicDelaySleep=true;if(i.component.sleeping)this.really_wake(i,true)}this.staticsleep.remove(e)}var s=e.shapes.head;while(s!=null){var o=s.elt;this.removed_shape(o,true);s=s.next}e.removedFromSpace();e.space=null},shapesUnderPoint:function(e,t,n,r){return this.bphase.shapesUnderPoint(e,t,n,r)},bodiesUnderPoint:function(e,t,n,r){return this.bphase.bodiesUnderPoint(e,t,n,r)},shapesInAABB:function(e,t,n,r,i){return this.bphase.shapesInAABB(e.zpp_inner,t,n,r,i)},bodiesInAABB:function(e,t,n,r,i){return this.bphase.bodiesInAABB(e.zpp_inner,t,n,r,i)},shapesInCircle:function(e,t,n,r,i){return this.bphase.shapesInCircle(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this),t,n,r,i)},bodiesInCircle:function(e,t,n,r,i){return this.bphase.bodiesInCircle(function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.x;return n}(this),function(t){var n;if(e!=null&&e.zpp_disp)throw new g("Error: "+"Vec2"+" has been disposed and cannot be used!");e.zpp_inner.validate();n=e.zpp_inner.y;return n}(this),t,n,r,i)},shapesInShape:function(e,t,n,r){return this.bphase.shapesInShape(e,t,n,r)},bodiesInShape:function(e,t,n,r){return this.bphase.bodiesInShape(e,t,n,r)},rayCast:function(e,t,n){return this.bphase.rayCast(e.zpp_inner,t,n==null?null:n.zpp_inner)},rayMultiCast:function(e,t,n,r){return this.bphase.rayMultiCast(e.zpp_inner,t,n==null?null:n.zpp_inner,r)},convexCast:function(e,t,n,r){var i;if(Cr.zpp_pool==null)i=new Cr;else{i=Cr.zpp_pool;Cr.zpp_pool=i.next;i.next=null}i.failed=false;i.s1=i.s2=null;i.arbiter=null;if(e.type==0)e.circle.validate_worldCOM();else e.polygon.validate_gaxi();var s=e.body;var o=s.posx;var u=s.posy;s.sweepTime=0;s.sweep_angvel=s.angvel;s.sweepIntegrate(t);var a=s.posx;var f=s.posy;e.validate_sweepRadius();var l=e.sweepRadius;var c;if(Gn.zpp_pool==null)c=new Gn;else{c=Gn.zpp_pool;Gn.zpp_pool=c.next;c.next=null}null;c.minx=function(e){var t;var n=o;var r=a;t=n<r?n:r;return t}(this)-l;c.maxx=function(e){var t;var n=o;var r=a;t=n>r?n:r;return t}(this)+l;c.miny=function(e){var t;var n=u;var r=f;t=n<r?n:r;return t}(this)-l;c.maxy=function(e){var t;var n=u;var r=f;t=n>r?n:r;return t}(this)+l;var h=this.convexShapeList=this.bphase.shapesInAABB(c,false,false,n==null?null:n.zpp_inner,this.convexShapeList);var p=c;if(p.outer!=null){p.outer.zpp_inner=null;p.outer=null}p.wrap_min=p.wrap_max=null;p._invalidate=null;p._validate=null;p.next=Gn.zpp_pool;Gn.zpp_pool=p;var d=0;var v=0;d=0;v=0;var m=0;var g=0;m=0;g=0;var y=null;var b=t+1;var w;h.zpp_inner.valmod();w=sn.get(h);while(w.hasNext()){var E;w.zpp_critical=false;E=w.zpp_inner.at(w.zpp_i++);if(E!=e.outer&&(E.zpp_inner.body!=null?E.zpp_inner.body.outer:null)!=s.outer){i.s1=e;i.s2=E.zpp_inner;if(r){E.zpp_inner.validate_sweepRadius();(E.zpp_inner.body!=null?E.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(E.zpp_inner.body!=null?E.zpp_inner.body.outer:null).zpp_inner.angvel;(E.zpp_inner.body!=null?E.zpp_inner.body.outer:null).zpp_inner.sweepTime=0;kr.dynamicSweep(i,t,0,0,true);(E.zpp_inner.body!=null?E.zpp_inner.body.outer:null).zpp_inner.sweepIntegrate(0);(E.zpp_inner.body!=null?E.zpp_inner.body.outer:null).zpp_inner.sweepValidate(E.zpp_inner)}else kr.staticSweep(i,t,0,0);i.toi*=t;if(i.toi>0&&i.toi<b){b=i.toi;d=i.axis.x;v=i.axis.y;m=i.c2.x;g=i.c2.y;y=E}}}h.clear();var S=i;S.next=Cr.zpp_pool;Cr.zpp_pool=S;s.sweepIntegrate(0);s.sweepValidate(e);if(b<=t)return tr.getConvex(_t.get(-d,-v,null),_t.get(m,g,null),b,y);else return null},prepareCast:function(e){if(e.type==0)e.circle.validate_worldCOM();else e.polygon.validate_gaxi()},convexMultiCast:function(e,t,n,r,i){var s;if(Cr.zpp_pool==null)s=new Cr;else{s=Cr.zpp_pool;Cr.zpp_pool=s.next;s.next=null}s.failed=false;s.s1=s.s2=null;s.arbiter=null;if(e.type==0)e.circle.validate_worldCOM();else e.polygon.validate_gaxi();var o=e.body;var u=o.posx;var a=o.posy;o.sweepTime=0;o.sweep_angvel=o.angvel;o.sweepIntegrate(t);var f=o.posx;var l=o.posy;e.validate_sweepRadius();var c=e.sweepRadius;var h;if(Gn.zpp_pool==null)h=new Gn;else{h=Gn.zpp_pool;Gn.zpp_pool=h.next;h.next=null}null;h.minx=function(e){var t;var n=u;var r=f;t=n<r?n:r;return t}(this)-c;h.maxx=function(e){var t;var n=u;var r=f;t=n>r?n:r;return t}(this)+c;h.miny=function(e){var t;var n=a;var r=l;t=n<r?n:r;return t}(this)-c;h.maxy=function(e){var t;var n=a;var r=l;t=n>r?n:r;return t}(this)+c;var p=this.convexShapeList=this.bphase.shapesInAABB(h,false,false,n==null?null:n.zpp_inner,this.convexShapeList);var d=h;if(d.outer!=null){d.outer.zpp_inner=null;d.outer=null}d.wrap_min=d.wrap_max=null;d._invalidate=null;d._validate=null;d.next=Gn.zpp_pool;Gn.zpp_pool=d;var v;if(i==null)v=new bt;else v=i;var m;p.zpp_inner.valmod();m=sn.get(p);while(m.hasNext()){var y;m.zpp_critical=false;y=m.zpp_inner.at(m.zpp_i++);if(y!=e.outer&&(y.zpp_inner.body!=null?y.zpp_inner.body.outer:null)!=o.outer){s.s1=e;s.s2=y.zpp_inner;if(r){y.zpp_inner.validate_sweepRadius();(y.zpp_inner.body!=null?y.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(y.zpp_inner.body!=null?y.zpp_inner.body.outer:null).zpp_inner.angvel;(y.zpp_inner.body!=null?y.zpp_inner.body.outer:null).zpp_inner.sweepTime=0;kr.dynamicSweep(s,t,0,0,true);(y.zpp_inner.body!=null?y.zpp_inner.body.outer:null).zpp_inner.sweepIntegrate(0);(y.zpp_inner.body!=null?y.zpp_inner.body.outer:null).zpp_inner.sweepValidate(y.zpp_inner)}else kr.staticSweep(s,t,0,0);s.toi*=t;if(s.toi>0){var b=tr.getConvex(_t.get(-s.axis.x,-s.axis.y,null),_t.get(s.c2.x,s.c2.y,null),s.toi,y);var w=null;var E=v.zpp_inner.inner.head;while(E!=null){var S=E.elt;if(function(e){var t;if(b.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=b.zpp_inner.toiDistance;return t}(this)<function(e){var t;if(S.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");t=S.zpp_inner.toiDistance;return t}(this))break;w=E;E=E.next}v.zpp_inner.inner.inlined_insert(w,b)}}}p.clear();var x=s;x.next=Cr.zpp_pool;Cr.zpp_pool=x;o.sweepIntegrate(0);o.sweepValidate(e);return v},push_callback:function(e){var t;if(dn.zpp_pool==null)t=new dn;else{t=dn.zpp_pool;dn.zpp_pool=t.next;t.next=null}null;this.callbacks.push(t);t.listener=e;return t},step:function(e,t,n){var r=this;if(this.midstep)throw new g("Error: ... REALLY?? you're going to call space.step() inside of space.step()? COME ON!!");this.time+=e;this.pre_dt=e;this.midstep=true;this.stamp++;this.validation();this.bphase.broadphase(this,true);this.prestep(e);if(this.sortcontacts){var i=this.c_arbiters_false;if(!(i.head==null)&&i.head.next!=null){var s=i.head;var o=null;var u=null;var a=null;var f=null;var l=1;var c;var h;var p;do{c=0;u=s;o=s=null;while(u!=null){c++;a=u;h=0;p=l;while(a!=null&&h<l){h++;a=a.next}while(h>0||p>0&&a!=null){if(h==0){f=a;a=a.next;p--}else if(p==0||a==null){f=u;u=u.next;h--}else if(u.elt.active&&a.elt.active?u.elt.oc1.dist<a.elt.oc1.dist:true){f=u;u=u.next;h--}else{f=a;a=a.next;p--}if(o!=null)o.next=f;else s=f;o=f}u=a}o.next=null;l<<=1}while(c>1);i.head=s;i.modified=true;i.pushmod=true}}this.updateVel(e);this.warmStart();this.iterateVel(t);var d=this.kinematics.head;while(d!=null){var v=d.elt;v.pre_posx=v.posx;v.pre_posy=v.posy;v.pre_rot=v.rot;d=d.next}var m=this.live.head;while(m!=null){var y=m.elt;y.pre_posx=y.posx;y.pre_posy=y.posy;y.pre_rot=y.rot;m=m.next}this.updatePos(e);this.continuous=true;this.continuousCollisions(e);this.continuous=false;this.iteratePos(n);var b=this.kinematics.head;while(b!=null){var w=b.elt;var E=!(w.posx==w.pre_posx&&w.posy==w.pre_posy);var S=w.pre_rot!=w.rot;if(E)w.invalidate_pos();if(S)w.invalidate_rot();b=b.next}var x=this.live.head;while(x!=null){var T=x.elt;var N=!(T.posx==T.pre_posx&&T.posy==T.pre_posy);var C=T.pre_rot!=T.rot;if(N)T.invalidate_pos();if(C)T.invalidate_rot();x=x.next}var k=null;var L=this.staticsleep.head;while(L!=null){var A=L.elt;if(!(A.type==3)||A.velx==0&&A.vely==0&&A.angvel==0){if(A.kinematicDelaySleep){A.kinematicDelaySleep=false;L=L.next;continue}A.component.sleeping=true;L=this.staticsleep.inlined_erase(k);continue}k=L;L=L.next}this.doForests(e);this.sleepArbiters();this.midstep=false;var O=null;var M=this.callbackset_list.next;while(M!=null){var _=[M];if(_[0].arbiters.head==null){M=this.callbackset_list.inlined_erase(O);var D=_[0];D.int1=D.int2=null;D.id=D.di=-1;D.freed=true;null;D.next=Kr.zpp_pool;Kr.zpp_pool=D;continue}var P=[_[0].sleeping()];vn.find_all(_[0].int1.cbSet,_[0].int2.cbSet,6,function(e,t){return function(n){if((!e[0]||n.allowSleepingCallbacks)&&!t[0].empty_arb(n.itype)){var i=r.push_callback(n);i.event=6;Dr.int_callback(t[0],n,i);i.set=t[0]}}}(P,_));O=M;M=M.next}while(!this.callbacks.empty()){var H=this.callbacks.pop();if(H.listener.type==0){var B=H.listener.body;B.handler(H.wrapper_body())}else if(H.listener.type==1){var j=H.listener.constraint;j.handler(H.wrapper_con())}else if(H.listener.type==2){var F=H.listener.interaction;F.handleri(H.wrapper_int())}var I=H;I.int1=I.int2=null;I.body=null;I.constraint=null;I.listener=null;if(I.wrap_arbiters!=null)I.wrap_arbiters.zpp_inner.inner=null;I.set=null;I.next=dn.zpp_pool;dn.zpp_pool=I}},continuousCollisions:function(e){var t=2*Math.PI/e;this.bphase.broadphase(this,false);var n=0;while(n<1&&!(this.toiEvents.head==null)){var r=null;var i=2;var s=false;var o=null;var u=null;var a=this.toiEvents.head;while(a!=null){var f=a.elt;var l=f.s1.body;var c=f.s2.body;if(l.sweepFrozen&&c.sweepFrozen){if(f.toi!=0&&Zn.testCollide_safe(f.s1,f.s2))f.toi=0;else{a=this.toiEvents.erase(u);var h=f;h.next=Cr.zpp_pool;Cr.zpp_pool=h;continue}}if(f.frozen1!=l.sweepFrozen||f.frozen2!=c.sweepFrozen){if(!f.kinematic){f.frozen1=l.sweepFrozen;f.frozen2=c.sweepFrozen;if(f.frozen1){var p=f.s1;f.s1=f.s2;f.s2=p;f.frozen1=false;f.frozen2=true}kr.staticSweep(f,e,0,N.collisionSlopCCD);if(f.toi<0){a=this.toiEvents.erase(u);var d=f;d.next=Cr.zpp_pool;Cr.zpp_pool=d;continue}}else{a=this.toiEvents.erase(u);var v=f;v.next=Cr.zpp_pool;Cr.zpp_pool=v;continue}}if(f.toi>=0&&(f.toi<i||!s&&f.kinematic)){r=f;i=f.toi;s=f.kinematic;o=u}u=a;a=a.next}if(r==null)break;this.toiEvents.erase(o);n=r.toi;var m=r.s1.body;var g=r.s2.body;if(!m.sweepFrozen){m.sweepIntegrate(n*e);m.sweepValidate(r.s1)}if(!g.sweepFrozen){g.sweepIntegrate(n*e);g.sweepValidate(r.s2)}var y=r.arbiter==null;var b=this.narrowPhase(r.s1,r.s2,true,r.arbiter,true);if(b==null){if(r.arbiter!=null&&r.arbiter.pair!=null){r.arbiter.pair.arb=null;r.arbiter.pair=null}}else if(!this.presteparb(b,e,true)){if(b.type==Un.COL&&b.active&&(b.immState&1)!=0){b.colarb.warmStart();b.colarb.applyImpulseVel();b.colarb.applyImpulseVel();b.colarb.applyImpulseVel();b.colarb.applyImpulseVel();m.sweep_angvel=m.angvel%t;g.sweep_angvel=g.angvel%t}}if(b!=null&&b.active&&(b.immState&1)!=0&&b.type==Un.COL){if(!m.sweepFrozen&&!(m.type==3)){m.sweepFrozen=true;if(r.failed)m.angvel=m.sweep_angvel=0;else if(r.slipped)m.angvel=m.sweep_angvel*=N.angularCCDSlipScale;else m.angvel=m.sweep_angvel}if(!g.sweepFrozen&&!(g.type==3)){g.sweepFrozen=true;if(r.failed)g.angvel=g.sweep_angvel=0;else if(r.slipped)g.angvel=g.sweep_angvel*=N.angularCCDSlipScale;else g.angvel=g.sweep_angvel}}var w=r;w.next=Cr.zpp_pool;Cr.zpp_pool=w}while(!(this.toiEvents.head==null)){var E=this.toiEvents.pop_unsafe();var S=E;S.next=Cr.zpp_pool;Cr.zpp_pool=S}var x=this.kinematics.head;while(x!=null){var T=x.elt;T.sweepIntegrate(e);T.sweepTime=0;x=x.next}var C=this.live.head;while(C!=null){var k=C.elt;if(!k.sweepFrozen)k.sweepIntegrate(e);k.sweepTime=0;C=C.next}},continuousEvent:function(e,t,n,r,i){if(e.body.sweepFrozen&&t.body.sweepFrozen)return r;if(e.body.disableCCD||t.body.disableCCD)return r;if(r!=null&&r.colarb==null||this.interactionType(e,t,e.body,t.body)<=0)return r;var s=e.body;var o=t.body;if(n||s.bullet||o.bullet){var u;if(Cr.zpp_pool==null)u=new Cr;else{u=Cr.zpp_pool;Cr.zpp_pool=u.next;u.next=null}u.failed=false;u.s1=u.s2=null;u.arbiter=null;var a=s.type==3||o.type==3;if(n&&!a){if(!(e.body.type==2)){u.s2=e;u.s1=t}else{u.s1=e;u.s2=t}u.kinematic=false;kr.staticSweep(u,this.pre_dt,0,N.collisionSlopCCD)}else{u.s1=e;u.s2=t;u.kinematic=a;if(u.s1.body.sweepFrozen||u.s2.body.sweepFrozen){if(u.s1.body.sweepFrozen){var f=u.s1;u.s1=u.s2;u.s2=f;u.frozen1=false;u.frozen2=true}kr.staticSweep(u,this.pre_dt,0,N.collisionSlopCCD)}else kr.dynamicSweep(u,this.pre_dt,0,N.collisionSlopCCD)}if(n&&u.toi<0||u.failed){var l=u;l.next=Cr.zpp_pool;Cr.zpp_pool=l}else{this.toiEvents.add(u);u.frozen1=u.s1.body.sweepFrozen;u.frozen2=u.s2.body.sweepFrozen;if(r!=null)u.arbiter=r.colarb;else u.arbiter=null}}return r},bodyCbWake:function(e){if(e.type==2&&e.cbSet!=null){if(this.midstep){var t=e.cbSet.bodylisteners.head;while(t!=null){var n=t.elt;if(n.event!=2){t=t.next;continue}var r=this.push_callback(n);r.event=2;r.body=e;t=t.next}}else e.component.woken=true}},bodyCbSleep:function(e){if(e.type==2&&e.cbSet!=null){var t=e.cbSet.bodylisteners.head;while(t!=null){var n=t.elt;if(n.event!=3){t=t.next;continue}var r=this.push_callback(n);r.event=3;r.body=e;t=t.next}}},constraintCbWake:function(e){if(e.cbSet!=null){if(this.midstep){var t=e.cbSet.conlisteners.head;while(t!=null){var n=t.elt;if(n.event!=2){t=t.next;continue}var r=this.push_callback(n);r.event=2;r.constraint=e;t=t.next}}else e.component.woken=true}},constraintCbSleep:function(e){if(e.cbSet!=null){var t=e.cbSet.conlisteners.head;while(t!=null){var n=t.elt;if(n.event!=3){t=t.next;continue}var r=this.push_callback(n);r.event=3;r.constraint=e;t=t.next}}},constraintCbBreak:function(e){if(e.cbSet!=null){var t=e.cbSet.conlisteners.head;while(t!=null){var n=t.elt;if(n.event!=4){t=t.next;continue}var r=this.push_callback(n);r.event=4;r.constraint=e;t=t.next}}},nullListenerType:function(e,t){var n=new En;var r=e.interactors.head;while(r!=null){var i=r.elt;n.add(i);r=r.next}if(e!=t){var s=t.interactors.head;while(s!=null){var o=s.elt;n.add(o);s=s.next}}while(!(n.head==null)){var u=n.pop_unsafe();if(u.icompound!=null){var a=u.icompound;var f=a.bodies.head;while(f!=null){var l=f.elt;n.add(l);f=f.next}var c=a.compounds.head;while(c!=null){var h=c.elt;n.add(h);c=c.next}}else{var p;if(u.ibody!=null)p=u.ibody;else p=u.ishape.body;var d;if(u.ishape!=null)d=u.ishape;else d=null;var v=p.arbiters.head;while(v!=null){var m=v.elt;if(m.present==0){v=v.next;continue}if(d!=null&&!(m.ws1==d||m.ws2==d)){v=v.next;continue}this.MRCA_chains(m.ws1,m.ws2);var g=this.mrca1.head;while(g!=null){var y=g.elt;if(y.cbSet!=e&&y.cbSet!=t){g=g.next;continue}var b=this.mrca2.head;while(b!=null){var w=b.elt;if(y.cbSet==e&&w.cbSet!=t||y.cbSet==t&&w.cbSet!=e){b=b.next;continue}var E=Dr.get(y,w);if(E!=null){while(!(E.arbiters.head==null)){var S=E.arbiters.pop_unsafe();S.present--}this.remove_callbackset(E)}b=b.next}g=g.next}v=v.next}}}},nullInteractorType:function(e,t){if(t==null)t=e;if(e.icompound!=null){var n=e.icompound;var r=n.bodies.head;while(r!=null){var i=r.elt;this.nullInteractorType(i,t);r=r.next}var s=n.compounds.head;while(s!=null){var o=s.elt;this.nullInteractorType(o,t);s=s.next}}else{var u;if(e.ibody!=null)u=e.ibody;else u=e.ishape.body;var a;if(e.ishape!=null)a=e.ishape;else a=null;var f=u.arbiters.head;while(f!=null){var l=f.elt;if(l.present==0){f=f.next;continue}if(a!=null&&!(l.ws1==a||l.ws2==a)){f=f.next;continue}this.MRCA_chains(l.ws1,l.ws2);var c=this.mrca1.head;while(c!=null){var h=c.elt;var p=this.mrca2.head;while(p!=null){var d=p.elt;if(h!=t&&d!=t){p=p.next;continue}var v=Dr.get(h,d);if(v!=null){l.present--;v.remove_arb(l);if(v.arbiters.head==null)this.remove_callbackset(v)}p=p.next}c=c.next}f=f.next}}},freshListenerType:function(e,t){var n=new En;var r=e.interactors.head;while(r!=null){var i=r.elt;n.add(i);r=r.next}if(e!=t){var s=t.interactors.head;while(s!=null){var o=s.elt;n.add(o);s=s.next}}while(!(n.head==null)){var u=n.pop_unsafe();if(u.icompound!=null){var a=u.icompound;var f=a.bodies.head;while(f!=null){var l=f.elt;n.add(l);f=f.next}var c=a.compounds.head;while(c!=null){var h=c.elt;n.add(h);c=c.next}}else{var p;if(u.ibody!=null)p=u.ibody;else p=u.ishape.body;var d;if(u.ishape!=null)d=u.ishape;else d=null;var v=p.arbiters.head;while(v!=null){var m=v.elt;if(!m.presentable){v=v.next;continue}if(d!=null&&!(m.ws1==d||m.ws2==d)){v=v.next;continue}this.MRCA_chains(m.ws1,m.ws2);var g=this.mrca1.head;while(g!=null){var y=g.elt;if(y.cbSet!=e&&y.cbSet!=t){g=g.next;continue}var b=this.mrca2.head;while(b!=null){var w=b.elt;if(y.cbSet==e&&w.cbSet!=t||y.cbSet==t&&w.cbSet!=e){b=b.next;continue}var E=Dr.get(y,w);if(E==null){E=Kr.get(y,w);this.add_callbackset(E)}if(!E.arbiters.inlined_has(m)?function(e){var t;E.arbiters.inlined_add(m);t=true;return t}(this):false)m.present++;b=b.next}g=g.next}v=v.next}}}},freshInteractorType:function(e,t){if(t==null)t=e;if(e.icompound!=null){var n=e.icompound;var r=n.bodies.head;while(r!=null){var i=r.elt;this.freshInteractorType(i,t);r=r.next}var s=n.compounds.head;while(s!=null){var o=s.elt;this.freshInteractorType(o,t);s=s.next}}else{var u;if(e.ibody!=null)u=e.ibody;else u=e.ishape.body;var a;if(e.ishape!=null)a=e.ishape;else a=null;var f=u.arbiters.head;while(f!=null){var l=f.elt;if(!l.presentable){f=f.next;continue}if(a!=null&&!(l.ws1==a||l.ws2==a)){f=f.next;continue}this.MRCA_chains(l.ws1,l.ws2);var c=this.mrca1.head;while(c!=null){var h=c.elt;var p=this.mrca2.head;while(p!=null){var d=p.elt;if(h!=t&&d!=t){p=p.next;continue}var v=h.cbSet;var m=d.cbSet;v.validate();m.validate();if(!v.manager.pair(v,m).empty_intersection()){var g=Dr.get(h,d);if(g==null){g=Kr.get(h,d);this.add_callbackset(g)}if(!g.arbiters.inlined_has(l)?function(e){var t;g.arbiters.inlined_add(l);t=true;return t}(this):false)l.present++}p=p.next}c=c.next}f=f.next}}},wakeCompound:function(e){var t=e.bodies.head;while(t!=null){var n=t.elt;var r=n;if(!r.world){r.component.waket=this.stamp+(this.midstep?0:1);if(r.type==3)r.kinematicDelaySleep=true;if(r.component.sleeping)this.really_wake(r,false)}t=t.next}var i=e.constraints.head;while(i!=null){var s=i.elt;this.wake_constraint(s);i=i.next}var o=e.compounds.head;while(o!=null){var u=o.elt;this.wakeCompound(u);o=o.next}},wakeIsland:function(e){while(!(e.comps.head==null)){var t=e.comps.pop_unsafe();t.waket=this.stamp+(this.midstep?0:1);if(t.isBody){var n=t.body;this.live.add(n);var r=n.arbiters.head;while(r!=null){var i=r.elt;if(i.sleeping){i.sleeping=false;i.up_stamp+=this.stamp-i.sleep_stamp;if(i.type==Un.COL){var s=i.colarb;if(s.stat)this.c_arbiters_true.inlined_add(s);else this.c_arbiters_false.inlined_add(s)}else if(i.type==Un.FLUID)this.f_arbiters.inlined_add(i.fluidarb);else this.s_arbiters.inlined_add(i.sensorarb)}r=r.next}this.bodyCbWake(n);t.sleeping=false;t.island=null;t.parent=t;t.rank=0;if(!(n.type==1)){var o=n.shapes.head;while(o!=null){var u=o.elt;if(u.node!=null)this.bphase.sync(u);o=o.next}}}else{var a=t.constraint;this.live_constraints.inlined_add(a);this.constraintCbWake(a);t.sleeping=false;t.island=null;t.parent=t;t.rank=0}}var f=e;f.next=$r.zpp_pool;$r.zpp_pool=f},non_inlined_wake:function(e,t){if(t==null)t=false;var n=e;if(!n.world){n.component.waket=this.stamp+(this.midstep?0:1);if(n.type==3)n.kinematicDelaySleep=true;if(n.component.sleeping)this.really_wake(n,t)}},really_wake:function(e,t){if(t==null)t=false;if(e.component.island==null){e.component.sleeping=false;if(e.type==3||e.type==1)this.staticsleep.inlined_add(e);else this.live.inlined_add(e);var n=e.constraints.head;while(n!=null){var r=n.elt;if(r.space==this)this.wake_constraint(r);n=n.next}var i=e.arbiters.head;while(i!=null){var s=i.elt;if(s.sleeping){s.sleeping=false;s.up_stamp+=this.stamp+(this.midstep?0:1)-s.sleep_stamp;if(s.type==Un.COL){var o=s.colarb;if(o.stat)this.c_arbiters_true.inlined_add(o);else this.c_arbiters_false.inlined_add(o)}else if(s.type==Un.FLUID)this.f_arbiters.inlined_add(s.fluidarb);else this.s_arbiters.inlined_add(s.sensorarb)}if(s.type!=Un.SENSOR&&!s.cleared&&s.up_stamp>=this.stamp&&(s.immState&1)!=0){if(s.b1.type==2&&s.b1.component.sleeping){var u=s.b1;if(!u.world){u.component.waket=this.stamp+(this.midstep?0:1);if(u.type==3)u.kinematicDelaySleep=true;if(u.component.sleeping)this.really_wake(u,false)}}if(s.b2.type==2&&s.b2.component.sleeping){var a=s.b2;if(!a.world){a.component.waket=this.stamp+(this.midstep?0:1);if(a.type==3)a.kinematicDelaySleep=true;if(a.component.sleeping)this.really_wake(a,false)}}}i=i.next}if(!t&&e.type==2)this.bodyCbWake(e);if(!t&&!this.bphase.is_sweep&&!(e.type==1)){var f=e.shapes.head;while(f!=null){var l=f.elt;if(l.node!=null)this.bphase.sync(l);f=f.next}}}else this.wakeIsland(e.component.island)},wake_constraint:function(e,t){if(t==null)t=false;if(e.active){e.component.waket=this.stamp+(this.midstep?0:1);if(e.component.sleeping){if(e.component.island==null){e.component.sleeping=false;this.live_constraints.inlined_add(e);e.wake_connected();if(!t)this.constraintCbWake(e)}else this.wakeIsland(e.component.island);return true}else return false}else return false},doForests:function(e){var t=this.c_arbiters_false.head;while(t!=null){var n=t.elt;if(!n.cleared&&n.up_stamp==this.stamp&&(n.immState&1)!=0){if(n.b1.type==2&&n.b2.type==2){var r;if(n.b1.component==n.b1.component.parent)r=n.b1.component;else{var i=n.b1.component;var s=null;while(i!=i.parent){var o=i.parent;i.parent=s;s=i;i=o}while(s!=null){var u=s.parent;s.parent=i;s=u}r=i}var a;if(n.b2.component==n.b2.component.parent)a=n.b2.component;else{var f=n.b2.component;var l=null;while(f!=f.parent){var c=f.parent;f.parent=l;l=f;f=c}while(l!=null){var h=l.parent;l.parent=f;l=h}a=f}if(r!=a){if(r.rank<a.rank)r.parent=a;else if(r.rank>a.rank)a.parent=r;else{a.parent=r;r.rank++}}}}t=t.next}var p=this.f_arbiters.head;while(p!=null){var d=p.elt;if(!d.cleared&&d.up_stamp==this.stamp&&(d.immState&1)!=0){if(d.b1.type==2&&d.b2.type==2){var v;if(d.b1.component==d.b1.component.parent)v=d.b1.component;else{var m=d.b1.component;var g=null;while(m!=m.parent){var y=m.parent;m.parent=g;g=m;m=y}while(g!=null){var b=g.parent;g.parent=m;g=b}v=m}var w;if(d.b2.component==d.b2.component.parent)w=d.b2.component;else{var E=d.b2.component;var S=null;while(E!=E.parent){var x=E.parent;E.parent=S;S=E;E=x}while(S!=null){var T=S.parent;S.parent=E;S=T}w=E}if(v!=w){if(v.rank<w.rank)v.parent=w;else if(v.rank>w.rank)w.parent=v;else{w.parent=v;v.rank++}}}}p=p.next}var N=this.live_constraints.head;while(N!=null){var C=N.elt;C.forest();N=N.next}while(!(this.live.head==null)){var k=this.live.inlined_pop_unsafe();var L=k.component;var A;if(L==L.parent)A=L;else{var O=L;var M=null;while(O!=O.parent){var _=O.parent;O.parent=M;M=O;O=_}while(M!=null){var D=M.parent;M.parent=O;M=D}A=O}if(A.island==null){if($r.zpp_pool==null)A.island=new $r;else{A.island=$r.zpp_pool;$r.zpp_pool=A.island.next;A.island.next=null}A.island.waket=0;this.islands.inlined_add(A.island);A.island.sleep=true}L.island=A.island;L.island.comps.inlined_add(L);var P=k.atRest(e);L.island.sleep=L.island.sleep&&P;if(L.waket>L.island.waket)L.island.waket=L.waket}while(!(this.live_constraints.head==null)){var H=this.live_constraints.inlined_pop_unsafe();var B=H.component;var j;if(B==B.parent)j=B;else{var F=B;var I=null;while(F!=F.parent){var q=F.parent;F.parent=I;I=F;F=q}while(I!=null){var R=I.parent;I.parent=F;I=R}j=F}B.island=j.island;B.island.comps.inlined_add(B);if(B.waket>B.island.waket)B.island.waket=B.waket}while(!(this.islands.next==null)){var U=this.islands.inlined_pop_unsafe();if(U.sleep){var z=U.comps.head;while(z!=null){var W=z.elt;if(W.isBody){var X=W.body;X.velx=0;X.vely=0;X.angvel=0;W.sleeping=true;var V=X.shapes.head;while(V!=null){var $=V.elt;this.bphase.sync($);V=V.next}this.bodyCbSleep(X)}else{var J=W.constraint;this.constraintCbSleep(J);W.sleeping=true}z=z.next}}else{while(!(U.comps.head==null)){var K=U.comps.inlined_pop_unsafe();K.waket=U.waket;if(K.isBody)this.live.inlined_add(K.body);else this.live_constraints.inlined_add(K.constraint);K.sleeping=false;K.island=null;K.parent=K;K.rank=0}var Q=U;Q.next=$r.zpp_pool;$r.zpp_pool=Q}}},sleepArbiters:function(){var e=null;var t=this.c_arbiters_true;var n=t.head;var r=this.c_arbiters_false!=null;if(r&&n==null){r=false;n=this.c_arbiters_false.head;t=this.c_arbiters_false;e=null}while(n!=null){var i=n.elt;if(i.b1.component.sleeping&&i.b2.component.sleeping){i.sleep_stamp=this.stamp;i.sleeping=true;n=t.inlined_erase(e);if(r&&n==null){r=false;n=this.c_arbiters_false.head;t=this.c_arbiters_false;e=null}continue}e=n;n=n.next;if(r&&n==null){r=false;n=this.c_arbiters_false.head;t=this.c_arbiters_false;e=null}}var s=null;var o=this.f_arbiters;var u=o.head;var a=false;if(a&&u==null){a=false;o=null;s=null}while(u!=null){var f=u.elt;if(f.b1.component.sleeping&&f.b2.component.sleeping){f.sleep_stamp=this.stamp;f.sleeping=true;u=o.inlined_erase(s);if(a&&u==null){a=false;o=null;s=null}continue}s=u;u=u.next;if(a&&u==null){a=false;o=null;s=null}}var l=null;var c=this.s_arbiters;var h=c.head;var p=false;if(p&&h==null){p=false;c=null;l=null}while(h!=null){var d=h.elt;if(d.b1.component.sleeping&&d.b2.component.sleeping){d.sleep_stamp=this.stamp;d.sleeping=true;h=c.inlined_erase(l);if(p&&h==null){p=false;c=null;l=null}continue}l=h;h=h.next;if(p&&h==null){p=false;c=null;l=null}}},static_validation:function(e){if(!(e.shapes.head==null))e.validate_aabb();e.validate_mass();e.validate_inertia();if(e.velx!=0||e.vely!=0||e.angvel!=0)throw new g("Error: Static body cannot have any real velocity, only kinematic or surface velocities");var t=e.shapes.head;while(t!=null){var n=t.elt;if(n.type==1){n.polygon.splice_collinear();var r=n.polygon.valid();if(r!=function(e){var t;if(Tn.ValidationResult_VALID==null){Tn.internal=true;Tn.ValidationResult_VALID=new an;Tn.internal=false}t=Tn.ValidationResult_VALID;return t}(this))throw new g("Error: Cannot simulate with an invalid Polygon : "+n.polygon.outer.toString()+" is invalid : "+r.toString());n.polygon.validate_gaxi()}t=t.next}e.sweepFrozen=true},validation:function(){this.cbsets.validate();var e=this.live.head;while(e!=null){var t=e.elt;t.sweepRadius=0;var n=t.shapes.head;while(n!=null){var r=n.elt;if(r.type==1){r.polygon.splice_collinear();var i=r.polygon.valid();if(i!=function(e){var t;if(Tn.ValidationResult_VALID==null){Tn.internal=true;Tn.ValidationResult_VALID=new an;Tn.internal=false}t=Tn.ValidationResult_VALID;return t}(this))throw new g("Error: Cannot simulate with an invalid Polygon : "+r.polygon.outer.toString()+" is invalid : "+i.toString());r.polygon.validate_gaxi()}r.validate_sweepRadius();if(r.sweepRadius>t.sweepRadius)t.sweepRadius=r.sweepRadius;n=n.next}t.validate_mass();t.validate_inertia();if(!(t.shapes.head==null)){t.validate_aabb();t.validate_worldCOM()}t.validate_gravMass();if(t.zip_axis){t.zip_axis=false;t.axisx=Math.sin(t.rot);t.axisy=Math.cos(t.rot);null}if(!t.nomove&&t.type==2&&t.mass==0)throw new g("Error: Dynamic Body cannot be simulated with 0 mass unless allowMovement is false");if(!t.norotate&&t.type==2&&t.inertia==0)throw new g("Error: Dynamic Body cannot be simulated with 0 inertia unless allowRotation is false");if(t.component.woken&&t.cbSet!=null){var s=t.cbSet.bodylisteners.head;while(s!=null){var o=s.elt;if(o.event!=2){s=s.next;continue}var u=this.push_callback(o);u.event=2;u.body=t;s=s.next}}t.component.woken=false;var a=t.shapes.head;while(a!=null){var f=a.elt;this.bphase.sync(f);a=a.next}e=e.next}var l=this.kinematics.head;while(l!=null){var c=l.elt;c.sweepRadius=0;var h=c.shapes.head;while(h!=null){var p=h.elt;if(p.type==1){p.polygon.splice_collinear();var d=p.polygon.valid();if(d!=function(e){var t;if(Tn.ValidationResult_VALID==null){Tn.internal=true;Tn.ValidationResult_VALID=new an;Tn.internal=false}t=Tn.ValidationResult_VALID;return t}(this))throw new g("Error: Cannot simulate with an invalid Polygon : "+p.polygon.outer.toString()+" is invalid : "+d.toString());p.polygon.validate_gaxi()}p.validate_sweepRadius();if(p.sweepRadius>c.sweepRadius)c.sweepRadius=p.sweepRadius;h=h.next}c.validate_mass();c.validate_inertia();if(!(c.shapes.head==null)){c.validate_aabb();c.validate_worldCOM()}c.validate_gravMass();if(c.zip_axis){c.zip_axis=false;c.axisx=Math.sin(c.rot);c.axisy=Math.cos(c.rot);null}if(!c.nomove&&c.type==2&&c.mass==0)throw new g("Error: Dynamic Body cannot be simulated with 0 mass unless allowMovement is false");if(!c.norotate&&c.type==2&&c.inertia==0)throw new g("Error: Dynamic Body cannot be simulated with 0 inertia unless allowRotation is false");var v=c.shapes.head;while(v!=null){var m=v.elt;this.bphase.sync(m);v=v.next}l=l.next}var y=this.live_constraints.head;while(y!=null){var b=y.elt;if(b.active){b.validate();if(b.component.woken&&b.cbSet!=null){var w=b.cbSet.conlisteners.head;while(w!=null){var E=w.elt;if(E.event!=2){w=w.next;continue}var S=this.push_callback(E);S.event=2;S.constraint=b;w=w.next}}b.component.woken=false}y=y.next}},updateVel:function(e){var t=null;var n=1-e*this.global_lin_drag;var r=1-e*this.global_ang_drag;var i=this.live.head;while(i!=null){var s=i.elt;if(s.smass!=0){var o=e*s.imass;s.velx=n*s.velx+(s.forcex+this.gravityx*s.gravMass)*o;s.vely=n*s.vely+(s.forcey+this.gravityy*s.gravMass)*o}if(s.sinertia!=0){var u=0;var a=0;u=s.worldCOMx-s.posx;a=s.worldCOMy-s.posy;var f=s.torque+(this.gravityy*u-this.gravityx*a)*s.gravMass;s.angvel=r*s.angvel+f*e*s.iinertia}t=i;i=i.next}},updatePos:function(e){var t=2*Math.PI/e;var n=this.live.head;while(n!=null){var r=n.elt;r.pre_posx=r.posx;r.pre_posy=r.posy;r.pre_rot=r.rot;r.sweepTime=0;r.sweep_angvel=r.angvel%t;r.sweepIntegrate(e);if(!r.disableCCD){var i=N.staticCCDLinearThreshold*r.sweepRadius;var s=N.staticCCDAngularThreshold;if((r.velx*r.velx+r.vely*r.vely)*e*e>i*i||r.angvel*r.angvel*e*e>s*s||r.type==3){var o=r.sweep_angvel;if(o<0)o=-o;var u=1/o;var a=r.shapes.head;while(a!=null){var f=a.elt;var l=f.aabb;var c=l.minx;var h=l.miny;var p=l.maxx;var d=l.maxy;var v=o*e*f.sweepCoef*.008333333333333333|0;if(v>8)v=8;var m=o*e/v;r.sweepIntegrate(e);if(f.type==0)f.circle._force_validate_aabb();else f.polygon._force_validate_aabb();if(c<l.minx)l.minx=c;else c=l.minx;if(h<l.miny)l.miny=h;else h=l.miny;if(p>l.maxx)l.maxx=p;else p=l.maxx;if(d>l.maxy)l.maxy=d;else d=l.maxy;var g=1;while(g<v){var y=g++;r.sweepIntegrate(m*y*u);if(f.type==0)f.circle._force_validate_aabb();else f.polygon._force_validate_aabb();if(c<l.minx)l.minx=c;else c=l.minx;if(h<l.miny)l.miny=h;else h=l.miny;if(p>l.maxx)l.maxx=p;else p=l.maxx;if(d>l.maxy)l.maxy=d;else d=l.maxy}this.bphase.sync(f);a=a.next}r.sweepFrozen=false;if(r.type==2&&r.bulletEnabled){var b=N.bulletCCDLinearThreshold*r.sweepRadius;var w=N.bulletCCDAngularThreshold;if((r.velx*r.velx+r.vely*r.vely)*e*e>b*b||r.angvel*r.angvel*e*e>w*w)r.bullet=true}}else{r.sweepFrozen=true;r.bullet=false}}else{r.sweepFrozen=true;r.bullet=false}n=n.next}var E=this.kinematics.head;while(E!=null){var S=E.elt;S.pre_posx=S.posx;S.pre_posy=S.posy;S.pre_rot=S.rot;S.sweepTime=0;S.sweep_angvel=S.angvel%t;S.sweepIntegrate(e);if(!S.disableCCD){var x=N.staticCCDLinearThreshold*S.sweepRadius;var T=N.staticCCDAngularThreshold;if((S.velx*S.velx+S.vely*S.vely)*e*e>x*x||S.angvel*S.angvel*e*e>T*T||S.type==3){var C=S.sweep_angvel;if(C<0)C=-C;var k=1/C;var L=S.shapes.head;while(L!=null){var A=L.elt;var O=A.aabb;var M=O.minx;var _=O.miny;var D=O.maxx;var P=O.maxy;var H=C*e*A.sweepCoef*.008333333333333333|0;if(H>8)H=8;var B=C*e/H;S.sweepIntegrate(e);if(A.type==0)A.circle._force_validate_aabb();else A.polygon._force_validate_aabb();if(M<O.minx)O.minx=M;else M=O.minx;if(_<O.miny)O.miny=_;else _=O.miny;if(D>O.maxx)O.maxx=D;else D=O.maxx;if(P>O.maxy)O.maxy=P;else P=O.maxy;var j=1;while(j<H){var F=j++;S.sweepIntegrate(B*F*k);if(A.type==0)A.circle._force_validate_aabb();else A.polygon._force_validate_aabb();if(M<O.minx)O.minx=M;else M=O.minx;if(_<O.miny)O.miny=_;else _=O.miny;if(D>O.maxx)O.maxx=D;else D=O.maxx;if(P>O.maxy)O.maxy=P;else P=O.maxy}this.bphase.sync(A);L=L.next}S.sweepFrozen=false;if(S.type==2&&S.bulletEnabled){var I=N.bulletCCDLinearThreshold*S.sweepRadius;var q=N.bulletCCDAngularThreshold;if((S.velx*S.velx+S.vely*S.vely)*e*e>I*I||S.angvel*S.angvel*e*e>q*q)S.bullet=true}}else{S.sweepFrozen=true;S.bullet=false}}else{S.sweepFrozen=true;S.bullet=false}E=E.next}},presteparb:function(e,t,n){if(n==null)n=false;var r=this;if(!e.cleared&&e.b1.component.sleeping&&e.b2.component.sleeping){e.sleep_stamp=this.stamp;e.sleeping=true;return true}if(!e.cleared||e.present!=0||e.intchange){var i=!n&&e.up_stamp==this.stamp-1&&!e.cleared&&!e.intchange;var s=e.fresh&&!e.cleared&&!e.intchange;if(i)e.endGenerated=this.stamp;if(s||i||e.cleared||e.intchange){this.inlined_MRCA_chains(e.ws1,e.ws2);var o=this.mrca1.head;while(o!=null){var u=o.elt;var a=this.mrca2.head;while(a!=null){var f=a.elt;var l=u.cbSet;var c=f.cbSet;if(l.manager.pair(l,c).empty_intersection()){a=a.next;continue}var h=[Dr.get(u,f)];if(s||e.intchange){if(h[0]==null){h[0]=Kr.get(u,f);this.add_callbackset(h[0])}l.manager.pair(l,c).forall(0,function(t){return function(n){if((n.itype&e.type)!=0&&t[0].empty_arb(n.itype)){var i=r.push_callback(n);i.event=0;Dr.int_callback(t[0],n,i);i.set=t[0]}}}(h));if(!h[0].arbiters.inlined_has(e)?function(t){var n;h[0].arbiters.inlined_add(e);n=true;return n}(this):false)e.present++}else{e.present--;h[0].remove_arb(e);l.manager.pair(l,c).forall(1,function(t){return function(n){if((n.itype&e.type)!=0&&t[0].empty_arb(n.itype)){var i=r.push_callback(n);i.event=1;Dr.int_callback(t[0],n,i);i.set=t[0]}}}(h));if(h[0].arbiters.head==null)this.remove_callbackset(h[0])}a=a.next}o=o.next}}e.fresh=false;e.intchange=false}if(e.cleared||e.up_stamp+(e.type==Un.COL?N.arbiterExpirationDelay:0)<this.stamp){if(e.type==Un.SENSOR)e.sensorarb.retire();else if(e.type==Un.FLUID)e.fluidarb.retire();else e.colarb.retire();return true}var p=e.active;e.active=e.presentable=e.up_stamp==this.stamp;if((e.immState&1)!=0){if(e.active&&e.type!=Un.SENSOR){if(e.colarb!=null){if(e.colarb.preStep(t))e.active=false}else e.fluidarb.preStep(this,t)}}else if(e.colarb!=null){if(e.colarb.cleanupContacts())e.active=false}if(p!=e.active){e.b1.arbiters.modified=true;e.b2.arbiters.modified=true;this.c_arbiters_true.modified=this.c_arbiters_false.modified=true;this.s_arbiters.modified=this.f_arbiters.modified=true}return false},prestep:function(e){var t=null;var n=this.live_constraints.head;while(n!=null){var r=n.elt;if(r.preStep(e)){n=this.live_constraints.erase(t);r.broken();this.constraintCbBreak(r);if(r.removeOnBreak){r.component.sleeping=true;this.midstep=false;if(r.compound!=null)r.compound.wrap_constraints.remove(r.outer);else this.wrap_constraints.remove(r.outer);this.midstep=true}else r.active=false;r.clearcache();continue}t=n;n=n.next}var i=null;var s=this.c_arbiters_true;var o=s.head;var u=this.c_arbiters_false!=null;if(u&&o==null){u=false;o=this.c_arbiters_false.head;s=this.c_arbiters_false;i=null}while(o!=null){var a=o.elt;if(this.presteparb(a,e)){o=s.inlined_erase(i);if(u&&o==null){u=false;o=this.c_arbiters_false.head;s=this.c_arbiters_false;i=null}continue}i=o;o=o.next;if(u&&o==null){u=false;o=this.c_arbiters_false.head;s=this.c_arbiters_false;i=null}}var f=null;var l=this.f_arbiters;var c=l.head;var h=false;if(h&&c==null){h=false;l=null;f=null}while(c!=null){var p=c.elt;if(this.presteparb(p,e)){c=l.inlined_erase(f);if(h&&c==null){h=false;l=null;f=null}continue}f=c;c=c.next;if(h&&c==null){h=false;l=null;f=null}}var d=null;var v=this.s_arbiters;var m=v.head;var g=false;if(g&&m==null){g=false;v=null;d=null}while(m!=null){var y=m.elt;if(this.presteparb(y,e)){m=v.inlined_erase(d);if(g&&m==null){g=false;v=null;d=null}continue}d=m;m=m.next;if(g&&m==null){g=false;v=null;d=null}}},warmStart:function(){var e=this.f_arbiters.head;while(e!=null){var t=e.elt;if(t.active&&(t.immState&1)!=0)t.warmStart();e=e.next}var n=this.c_arbiters_false.head;var r=true;if(n==null){n=this.c_arbiters_true.head;r=false}while(n!=null){var i=n.elt;if(i.active&&(i.immState&1)!=0)i.warmStart();n=n.next;if(r&&n==null){n=this.c_arbiters_true.head;r=false}}var s=this.live_constraints.head;while(s!=null){var o=s.elt;o.warmStart();s=s.next}},iterateVel:function(e){var t=0;while(t<e){var n=t++;var r=this.f_arbiters.head;while(r!=null){var i=r.elt;if(i.active&&(i.immState&1)!=0)i.applyImpulseVel();r=r.next}var s=null;var o=this.live_constraints.head;while(o!=null){var u=o.elt;if(u.applyImpulseVel()){o=this.live_constraints.erase(s);u.broken();this.constraintCbBreak(u);if(u.removeOnBreak){u.component.sleeping=true;this.midstep=false;if(u.compound!=null)u.compound.wrap_constraints.remove(u.outer);else this.wrap_constraints.remove(u.outer);this.midstep=true}else u.active=false;u.clearcache();continue}s=o;o=o.next}var a=this.c_arbiters_false.head;var f=true;if(a==null){a=this.c_arbiters_true.head;f=false}while(a!=null){var l=a.elt;if(l.active&&(l.immState&1)!=0)l.applyImpulseVel();a=a.next;if(f&&a==null){a=this.c_arbiters_true.head;f=false}}}},iteratePos:function(e){var t=0;while(t<e){var n=t++;var r=null;var i=this.live_constraints.head;while(i!=null){var s=i.elt;if(!s.__velocity&&s.stiff){if(s.applyImpulsePos()){i=this.live_constraints.erase(r);s.broken();this.constraintCbBreak(s);if(s.removeOnBreak){s.component.sleeping=true;this.midstep=false;if(s.compound!=null)s.compound.wrap_constraints.remove(s.outer);else this.wrap_constraints.remove(s.outer);this.midstep=true}else s.active=false;s.clearcache();continue}}r=i;i=i.next}var o=this.c_arbiters_false.head;var u=true;if(o==null){o=this.c_arbiters_true.head;u=false}while(o!=null){var a=o.elt;if(a.active&&(a.immState&1)!=0)a.applyImpulsePos();o=o.next;if(u&&o==null){o=this.c_arbiters_true.head;u=false}}}},group_ignore:function(e,t){var n=e.lookup_group();if(n==null)return false;else{var r=t.lookup_group();if(r==null)return false;else{var i=false;while(n!=null&&r!=null){if(n==r){i=n.ignore;break}if(n.depth<r.depth)r=r.group;else n=n.group}return i}}},interactionType:function(e,t,n,r){var i;i=false;var s=n.constraints.head;while(s!=null){var o=s.elt;if(o.ignore&&o.pair_exists(n.id,r.id)){i=true;break}s=s.next}if(!i&&!this.group_ignore(e,t)){if((e.sensorEnabled||t.sensorEnabled)&&e.filter.shouldSense(t.filter))return 2;else if((e.fluidEnabled||t.fluidEnabled)&&e.filter.shouldFlow(t.filter)&&!(n.imass==0&&r.imass==0&&n.iinertia==0&&r.iinertia==0))return 0;else if(e.filter.shouldCollide(t.filter)&&!(n.imass==0&&r.imass==0&&n.iinertia==0&&r.iinertia==0))return 1;else return-1}else return-1},narrowPhase:function(e,t,n,r,i){var s=this;var o=null;var u=e.body;var a=t.body;var f=this.interactionType(e,t,u,a);if(f!=-1){var l;var c;if(e.type>t.type){l=t;c=e}else if(e.type==t.type){if(e.id<t.id){l=e;c=t}else{c=e;l=t}}else{l=e;c=t}var h=l==t;if(f==0){var p;if(r==null){var d=null;var v;if(u.arbiters.length<a.arbiters.length)v=u;else v=a;var m=v.arbiters.head;while(m!=null){var g=m.elt;if(g.id==l.id&&g.di==c.id){d=g;break}m=m.next}p=d}else p=r;var y=p==null;var b;var w=false;if(y){if(Wn.zpp_pool==null)b=new Wn;else{b=Wn.zpp_pool;Wn.zpp_pool=b.next;b.next=null}null}else if(p.fluidarb==null){p.cleared=true;p.b1.arbiters.inlined_try_remove(p);p.b2.arbiters.inlined_try_remove(p);if(p.pair!=null){p.pair.arb=null;p.pair=null}p.active=false;this.f_arbiters.modified=true;if(Wn.zpp_pool==null)b=new Wn;else{b=Wn.zpp_pool;Wn.zpp_pool=b.next;b.next=null}null;b.intchange=true;y=true;w=true}else b=p.fluidarb;var E=4;if(y||b.stamp!=this.stamp||i){b.stamp=this.stamp;if(Zn.flowCollide(l,c,b)){if(y){b.b1=e.body;b.ws1=e;b.b2=t.body;b.ws2=t;b.id=l.id;b.di=c.id;b.b1.arbiters.inlined_add(b);b.b2.arbiters.inlined_add(b);b.active=true;b.present=0;b.cleared=false;b.sleeping=false;b.fresh=false;b.presentable=false;b.nx=0;b.ny=1;b.dampx=0;b.dampy=0;b.adamp=0;this.f_arbiters.inlined_add(b);b.fresh=!w}else b.fresh=b.up_stamp<this.stamp-1||b.endGenerated==this.stamp&&i;b.up_stamp=b.stamp;if(b.fresh||(b.immState&4)==0){b.immState=1;var S=false;var x;if(b.ws1.id>b.ws2.id)x=b.ws2;else x=b.ws1;var T;if(b.ws1.id>b.ws2.id)T=b.ws1;else T=b.ws2;this.inlined_MRCA_chains(x,T);var N=this.mrca1.head;while(N!=null){var C=N.elt;var k=this.mrca2.head;while(k!=null){var L=k.elt;var A=C.cbSet;var O=L.cbSet;if(A.manager.pair(A,O).empty_intersection()){k=k.next;continue}var M=null;var _=null;this.prelisteners.inlined_clear();var D=[null];A.manager.pair(A,O).forall(5,function(e){return function(t){if((t.itype&E)!=0){e[0]=s.prelisteners.inlined_insert(e[0],t);S=S||!t.pure}}}(D));if(this.prelisteners.head==null){k=k.next;continue}M=Dr.get(C,L);if(M==null){_=Kr.get(C,L);this.add_callbackset(_)}if(M==null||(M.FLUIDstamp!=this.stamp||i)&&(M.FLUIDstate&4)==0){if(_!=null)M=_;if(M!=null){var P=this.prelisteners.head;while(P!=null){var H=P.elt;if(H.itype==7){M.COLLISIONstamp=this.stamp;M.SENSORstamp=this.stamp;M.FLUIDstamp=this.stamp}else M.FLUIDstamp=this.stamp;P=P.next}}b.mutable=true;if(b.wrap_position!=null)b.wrap_position.zpp_inner._immutable=false;var B=b.active;b.active=true;var j=false;this.precb.zpp_inner.pre_arbiter=b;this.precb.zpp_inner.set=M;var F=this.prelisteners.head;while(F!=null){var I=F.elt;this.precb.zpp_inner.listener=I;Dr.int_callback(M,I,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=C!=this.precb.zpp_inner.int1;var q=I.handlerp(this.precb);if(q!=null)if(q==function(e){var t;if(Tn.PreFlag_ACCEPT==null){Tn.internal=true;Tn.PreFlag_ACCEPT=new W;Tn.internal=false}t=Tn.PreFlag_ACCEPT;return t}(this))b.immState=5;else if(q==function(e){var t;if(Tn.PreFlag_ACCEPT_ONCE==null){Tn.internal=true;Tn.PreFlag_ACCEPT_ONCE=new W;Tn.internal=false}t=Tn.PreFlag_ACCEPT_ONCE;return t}(this))b.immState=1;else if(q==function(e){var t;if(Tn.PreFlag_IGNORE==null){Tn.internal=true;Tn.PreFlag_IGNORE=new W;Tn.internal=false}t=Tn.PreFlag_IGNORE;return t}(this))b.immState=6;else b.immState=2;F=F.next}b.mutable=false;if(b.wrap_position!=null)b.wrap_position.zpp_inner._immutable=true;b.active=B;if(M!=null){var R=this.prelisteners.head;while(R!=null){var U=R.elt;if(U.itype==7){M.COLLISIONstate=b.immState;M.SENSORstate=b.immState;M.FLUIDstate=b.immState}else M.FLUIDstate=b.immState;R=R.next}}}else if(M==null){if((b.immState&4)==0)b.immState=1}else b.immState=M.FLUIDstate;k=k.next}N=N.next}if(S&&(b.immState&4)==0){if(b.b1.type==2){var z=b.b1;if(!z.world){z.component.waket=this.stamp+(this.midstep?0:1);if(z.type==3)z.kinematicDelaySleep=true;if(z.component.sleeping)this.really_wake(z,false)}}if(b.b1.type==2){var X=b.b2;if(!X.world){X.component.waket=this.stamp+(this.midstep?0:1);if(X.type==3)X.kinematicDelaySleep=true;if(X.component.sleeping)this.really_wake(X,false)}}}}if((b.immState&1)!=0){if(b.b1.type==2&&b.b1.component.sleeping){var V=b.b1;if(!V.world){V.component.waket=this.stamp+(this.midstep?0:1);if(V.type==3)V.kinematicDelaySleep=true;if(V.component.sleeping)this.really_wake(V,false)}}if(b.b2.type==2&&b.b2.component.sleeping){var $=b.b2;if(!$.world){$.component.waket=this.stamp+(this.midstep?0:1);if($.type==3)$.kinematicDelaySleep=true;if($.component.sleeping)this.really_wake($,false)}}}if(b.sleeping){b.sleeping=false;this.f_arbiters.inlined_add(b)}o=b}else if(y){var J=b;J.next=Wn.zpp_pool;Wn.zpp_pool=J;o=null}else o=b}else o=b}else if(f==1){var K;if(n)K=this.c_arbiters_true;else K=this.c_arbiters_false;var Q;if(r==null){var G=null;var Y;if(u.arbiters.length<a.arbiters.length)Y=u;else Y=a;var Z=Y.arbiters.head;while(Z!=null){var et=Z.elt;if(et.id==l.id&&et.di==c.id){G=et;break}Z=Z.next}Q=G}else Q=r;var tt=Q==null;var nt;var rt=false;if(tt){if(Xn.zpp_pool==null)nt=new Xn;else{nt=Xn.zpp_pool;Xn.zpp_pool=nt.next;nt.next=null}null;nt.stat=n}else if(Q.colarb==null){Q.cleared=true;Q.b1.arbiters.inlined_try_remove(Q);Q.b2.arbiters.inlined_try_remove(Q);if(Q.pair!=null){Q.pair.arb=null;Q.pair=null}Q.active=false;this.f_arbiters.modified=true;if(Xn.zpp_pool==null)nt=new Xn;else{nt=Xn.zpp_pool;Xn.zpp_pool=nt.next;nt.next=null}null;nt.intchange=true;nt.stat=n;tt=true;rt=true}else{nt=Q.colarb;h=l!=nt.s1;if(nt.stat!=n){nt.stat=n;if(!nt.sleeping){(n?this.c_arbiters_false:this.c_arbiters_true).remove(nt);K.add(nt)}}}var it=1;if(tt||nt.stamp!=this.stamp||i){nt.stamp=this.stamp;if(Zn.contactCollide(l,c,nt,h)){if(tt){nt.b1=e.body;nt.ws1=e;nt.b2=t.body;nt.ws2=t;nt.id=l.id;nt.di=c.id;nt.b1.arbiters.inlined_add(nt);nt.b2.arbiters.inlined_add(nt);nt.active=true;nt.present=0;nt.cleared=false;nt.sleeping=false;nt.fresh=false;nt.presentable=false;nt.s1=e;nt.s2=t;if(!nt.userdef_restitution){if(nt.s1.material.elasticity<=-Infinity||nt.s2.material.elasticity<=-Infinity)nt.restitution=0;else if(nt.s1.material.elasticity>=Infinity||nt.s2.material.elasticity>=Infinity)nt.restitution=1;else nt.restitution=(nt.s1.material.elasticity+nt.s2.material.elasticity)/2;if(nt.restitution<0)nt.restitution=0;if(nt.restitution>1)nt.restitution=1}if(!nt.userdef_dyn_fric)nt.dyn_fric=Math.sqrt(nt.s1.material.dynamicFriction*nt.s2.material.dynamicFriction);if(!nt.userdef_stat_fric)nt.stat_fric=Math.sqrt(nt.s1.material.staticFriction*nt.s2.material.staticFriction);if(!nt.userdef_rfric)nt.rfric=Math.sqrt(nt.s1.material.rollingFriction*nt.s2.material.rollingFriction);K.inlined_add(nt);nt.fresh=!rt}else nt.fresh=nt.up_stamp<this.stamp-1||nt.endGenerated==this.stamp&&i;nt.up_stamp=nt.stamp;if(nt.fresh||(nt.immState&4)==0){nt.immState=1;var st=false;var ot;if(nt.ws1.id>nt.ws2.id)ot=nt.ws2;else ot=nt.ws1;var ut;if(nt.ws1.id>nt.ws2.id)ut=nt.ws1;else ut=nt.ws2;this.inlined_MRCA_chains(ot,ut);var at=this.mrca1.head;while(at!=null){var ft=at.elt;var lt=this.mrca2.head;while(lt!=null){var ct=lt.elt;var ht=ft.cbSet;var pt=ct.cbSet;if(ht.manager.pair(ht,pt).empty_intersection()){lt=lt.next;continue}var dt=null;var vt=null;this.prelisteners.inlined_clear();var mt=[null];ht.manager.pair(ht,pt).forall(5,function(e){return function(t){if((t.itype&it)!=0){e[0]=s.prelisteners.inlined_insert(e[0],t);st=st||!t.pure}}}(mt));if(this.prelisteners.head==null){lt=lt.next;continue}dt=Dr.get(ft,ct);if(dt==null){vt=Kr.get(ft,ct);this.add_callbackset(vt)}if(dt==null||(dt.COLLISIONstamp!=this.stamp||i)&&(dt.COLLISIONstate&4)==0){if(vt!=null)dt=vt;if(dt!=null){var gt=this.prelisteners.head;while(gt!=null){var yt=gt.elt;if(yt.itype==7){dt.COLLISIONstamp=this.stamp;dt.SENSORstamp=this.stamp;dt.FLUIDstamp=this.stamp}else dt.COLLISIONstamp=this.stamp;gt=gt.next}}nt.mutable=true;if(nt.wrap_normal!=null)nt.wrap_normal.zpp_inner._immutable=false;if(nt.wrap_contacts!=null)nt.wrap_contacts.zpp_inner.immutable=false;var bt=nt.active;nt.active=true;var wt=false;nt.cleanupContacts();this.precb.zpp_inner.pre_arbiter=nt;this.precb.zpp_inner.set=dt;var Et=this.prelisteners.head;while(Et!=null){var St=Et.elt;this.precb.zpp_inner.listener=St;Dr.int_callback(dt,St,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=ft!=this.precb.zpp_inner.int1;var xt=St.handlerp(this.precb);if(xt!=null)if(xt==function(e){var t;if(Tn.PreFlag_ACCEPT==null){Tn.internal=true;Tn.PreFlag_ACCEPT=new W;Tn.internal=false}t=Tn.PreFlag_ACCEPT;return t}(this))nt.immState=5;else if(xt==function(e){var t;if(Tn.PreFlag_ACCEPT_ONCE==null){Tn.internal=true;Tn.PreFlag_ACCEPT_ONCE=new W;Tn.internal=false}t=Tn.PreFlag_ACCEPT_ONCE;return t}(this))nt.immState=1;else if(xt==function(e){var t;if(Tn.PreFlag_IGNORE==null){Tn.internal=true;Tn.PreFlag_IGNORE=new W;Tn.internal=false}t=Tn.PreFlag_IGNORE;return t}(this))nt.immState=6;else nt.immState=2;Et=Et.next}nt.mutable=false;if(nt.wrap_normal!=null)nt.wrap_normal.zpp_inner._immutable=true;if(nt.wrap_contacts!=null)nt.wrap_contacts.zpp_inner.immutable=true;nt.active=bt;if(dt!=null){var Tt=this.prelisteners.head;while(Tt!=null){var Nt=Tt.elt;if(Nt.itype==7){dt.COLLISIONstate=nt.immState;dt.SENSORstate=nt.immState;dt.FLUIDstate=nt.immState}else dt.COLLISIONstate=nt.immState;Tt=Tt.next}}}else if(dt==null){if((nt.immState&4)==0)nt.immState=1}else nt.immState=dt.COLLISIONstate;lt=lt.next}at=at.next}if(st&&(nt.immState&4)==0){if(nt.b1.type==2){var Ct=nt.b1;if(!Ct.world){Ct.component.waket=this.stamp+(this.midstep?0:1);if(Ct.type==3)Ct.kinematicDelaySleep=true;if(Ct.component.sleeping)this.really_wake(Ct,false)}}if(nt.b1.type==2){var kt=nt.b2;if(!kt.world){kt.component.waket=this.stamp+(this.midstep?0:1);if(kt.type==3)kt.kinematicDelaySleep=true;if(kt.component.sleeping)this.really_wake(kt,false)}}}}if((nt.immState&1)!=0){if(nt.b1.type==2&&nt.b1.component.sleeping){var Lt=nt.b1;if(!Lt.world){Lt.component.waket=this.stamp+(this.midstep?0:1);if(Lt.type==3)Lt.kinematicDelaySleep=true;if(Lt.component.sleeping)this.really_wake(Lt,false)}}if(nt.b2.type==2&&nt.b2.component.sleeping){var At=nt.b2;if(!At.world){At.component.waket=this.stamp+(this.midstep?0:1);if(At.type==3)At.kinematicDelaySleep=true;if(At.component.sleeping)this.really_wake(At,false)}}}if(nt.sleeping){nt.sleeping=false;K.inlined_add(nt)}o=nt}else if(tt){var Ot=nt;Ot.userdef_dyn_fric=false;Ot.userdef_stat_fric=false;Ot.userdef_restitution=false;Ot.userdef_rfric=false;Ot.__ref_edge1=Ot.__ref_edge2=null;Ot.next=Xn.zpp_pool;Xn.zpp_pool=Ot;o=null}else o=nt}else o=nt}else{var Mt;if(r==null){var _t=null;var Dt;if(u.arbiters.length<a.arbiters.length)Dt=u;else Dt=a;var Pt=Dt.arbiters.head;while(Pt!=null){var Ht=Pt.elt;if(Ht.id==l.id&&Ht.di==c.id){_t=Ht;break}Pt=Pt.next}Mt=_t}else Mt=r;var Bt=Mt==null;var jt;var Ft=false;if(Bt){if(zn.zpp_pool==null)jt=new zn;else{jt=zn.zpp_pool;zn.zpp_pool=jt.next;jt.next=null}null}else if(Mt.sensorarb==null){Mt.cleared=true;Mt.b1.arbiters.inlined_try_remove(Mt);Mt.b2.arbiters.inlined_try_remove(Mt);if(Mt.pair!=null){Mt.pair.arb=null;Mt.pair=null}Mt.active=false;this.f_arbiters.modified=true;if(zn.zpp_pool==null)jt=new zn;else{jt=zn.zpp_pool;zn.zpp_pool=jt.next;jt.next=null}null;jt.intchange=true;Bt=true;Ft=true}else jt=Mt.sensorarb;var It=2;if(Bt||jt.stamp!=this.stamp||i){jt.stamp=this.stamp;if(Zn.testCollide(l,c)){if(Bt){jt.b1=e.body;jt.ws1=e;jt.b2=t.body;jt.ws2=t;jt.id=l.id;jt.di=c.id;jt.b1.arbiters.inlined_add(jt);jt.b2.arbiters.inlined_add(jt);jt.active=true;jt.present=0;jt.cleared=false;jt.sleeping=false;jt.fresh=false;jt.presentable=false;this.s_arbiters.inlined_add(jt);jt.fresh=!Ft}else jt.fresh=jt.up_stamp<this.stamp-1||jt.endGenerated==this.stamp&&i;jt.up_stamp=jt.stamp;if(jt.fresh||(jt.immState&4)==0){jt.immState=1;var qt=false;var Rt;if(jt.ws1.id>jt.ws2.id)Rt=jt.ws2;else Rt=jt.ws1;var Ut;if(jt.ws1.id>jt.ws2.id)Ut=jt.ws1;else Ut=jt.ws2;this.inlined_MRCA_chains(Rt,Ut);var zt=this.mrca1.head;while(zt!=null){var Wt=zt.elt;var Xt=this.mrca2.head;while(Xt!=null){var Vt=Xt.elt;var $t=Wt.cbSet;var Jt=Vt.cbSet;if($t.manager.pair($t,Jt).empty_intersection()){Xt=Xt.next;continue}var Kt=null;var Qt=null;this.prelisteners.inlined_clear();var Gt=[null];$t.manager.pair($t,Jt).forall(5,function(e){return function(t){if((t.itype&It)!=0){e[0]=s.prelisteners.inlined_insert(e[0],t);qt=qt||!t.pure}}}(Gt));if(this.prelisteners.head==null){Xt=Xt.next;continue}Kt=Dr.get(Wt,Vt);if(Kt==null){Qt=Kr.get(Wt,Vt);this.add_callbackset(Qt)}if(Kt==null||(Kt.SENSORstamp!=this.stamp||i)&&(Kt.SENSORstate&4)==0){if(Qt!=null)Kt=Qt;if(Kt!=null){var Yt=this.prelisteners.head;while(Yt!=null){var Zt=Yt.elt;if(Zt.itype==7){Kt.COLLISIONstamp=this.stamp;Kt.SENSORstamp=this.stamp;Kt.FLUIDstamp=this.stamp}else Kt.SENSORstamp=this.stamp;Yt=Yt.next}}var en=jt.active;jt.active=true;var tn=false;this.precb.zpp_inner.pre_arbiter=jt;this.precb.zpp_inner.set=Kt;var nn=this.prelisteners.head;while(nn!=null){var rn=nn.elt;this.precb.zpp_inner.listener=rn;Dr.int_callback(Kt,rn,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=Wt!=this.precb.zpp_inner.int1;var sn=rn.handlerp(this.precb);if(sn!=null)if(sn==function(e){var t;if(Tn.PreFlag_ACCEPT==null){Tn.internal=true;Tn.PreFlag_ACCEPT=new W;Tn.internal=false}t=Tn.PreFlag_ACCEPT;return t}(this))jt.immState=5;else if(sn==function(e){var t;if(Tn.PreFlag_ACCEPT_ONCE==null){Tn.internal=true;Tn.PreFlag_ACCEPT_ONCE=new W;Tn.internal=false}t=Tn.PreFlag_ACCEPT_ONCE;return t}(this))jt.immState=1;else if(sn==function(e){var t;if(Tn.PreFlag_IGNORE==null){Tn.internal=true;Tn.PreFlag_IGNORE=new W;Tn.internal=false}t=Tn.PreFlag_IGNORE;return t}(this))jt.immState=6;else jt.immState=2;nn=nn.next}jt.active=en;if(Kt!=null){var on=this.prelisteners.head;while(on!=null){var un=on.elt;if(un.itype==7){Kt.COLLISIONstate=jt.immState;Kt.SENSORstate=jt.immState;Kt.FLUIDstate=jt.immState}else Kt.SENSORstate=jt.immState;on=on.next}}}else if(Kt==null){if((jt.immState&4)==0)jt.immState=1}else jt.immState=Kt.SENSORstate;Xt=Xt.next}zt=zt.next}if(qt&&(jt.immState&4)==0){if(!(jt.b1.type==1)){var an=jt.b1;if(!an.world){an.component.waket=this.stamp+(this.midstep?0:1);if(an.type==3)an.kinematicDelaySleep=true;if(an.component.sleeping)this.really_wake(an,false)}}if(!(jt.b2.type==1)){var fn=jt.b2;if(!fn.world){fn.component.waket=this.stamp+(this.midstep?0:1);if(fn.type==3)fn.kinematicDelaySleep=true;if(fn.component.sleeping)this.really_wake(fn,false)}}}}if(jt.sleeping){jt.sleeping=false;this.s_arbiters.inlined_add(jt)}o=jt}else if(Bt){var ln=jt;ln.next=zn.zpp_pool;zn.zpp_pool=ln;o=null}else o=jt}else o=jt}}return o},MRCA_chains:function(e,t){this.inlined_MRCA_chains(e,t)},inlined_MRCA_chains:function(e,t){this.mrca1.inlined_clear();this.mrca2.inlined_clear();if(e.cbSet!=null)this.mrca1.inlined_add(e);if(e.body.cbSet!=null)this.mrca1.inlined_add(e.body);if(t.cbSet!=null)this.mrca2.inlined_add(t);if(t.body.cbSet!=null)this.mrca2.inlined_add(t.body);var n=e.body.compound;var r=t.body.compound;while(n!=r){var i;if(n==null)i=0;else i=n.depth;var s;if(r==null)s=0;else s=r.depth;if(i<s){if(r.cbSet!=null)this.mrca2.inlined_add(r);r=r.compound}else{if(n.cbSet!=null)this.mrca1.inlined_add(n);n=n.compound}}},__class__:Gr};var Yr=function(){this.aabb=null;this.shape=null;this.prev=null;this.next=null};Yr.__name__=true;Yr.prototype={free:function(){this.prev=null;this.shape=null;this.aabb=null},alloc:function(){},gt:function(e){return this.aabb.minx>e.aabb.minx},__class__:Yr};var Zr=function(e){this.failed=null;this.list=null;Ur.call(this);this.space=e;this.is_sweep=true;this.sweep=this};Zr.__name__=true;Zr.__super__=Ur;Zr.prototype=n(Ur.prototype,{__insert:function(e){var t;if(Yr.zpp_pool==null)t=new Yr;else{t=Yr.zpp_pool;Yr.zpp_pool=t.next;t.next=null}null;e.sweep=t;t.shape=e;t.aabb=e.aabb;t.next=this.list;if(this.list!=null)this.list.prev=t;this.list=t},__remove:function(e){var t=e.sweep;if(t.prev==null)this.list=t.next;else t.prev.next=t.next;if(t.next!=null)t.next.prev=t.prev;e.sweep=null;var n=t;n.prev=null;n.shape=null;n.aabb=null;n.next=Yr.zpp_pool;Yr.zpp_pool=n},__sync:function(e){if(!this.space.continuous){if(e.zip_aabb){if(e.body!=null){e.zip_aabb=false;if(e.type==0)e.circle.__validate_aabb();else e.polygon.__validate_aabb()}}}},sync_broadphase:function(){this.space.validation();if(this.list!=null)this.sync_broadphase_fast()},sync_broadphase_fast:function(){var e=this.list.next;while(e!=null){var t=e.next;var n=e.prev;if(e.aabb.minx>n.aabb.minx){e=t;continue}while(n.prev!=null&&n.prev.aabb.minx>e.aabb.minx)n=n.prev;var r=e.prev;r.next=e.next;if(e.next!=null)e.next.prev=r;if(n.prev==null){e.prev=null;this.list=e;e.next=n;n.prev=e}else{e.prev=n.prev;n.prev=e;e.prev.next=e;e.next=n}e=t}},broadphase:function(e,t){if(this.list!=null){this.sync_broadphase_fast();var n=this.list;while(n!=null){var r=n.next;var i=n.shape;var s=i.body;var o=n.aabb.maxx;while(r!=null){if(r.aabb.minx>o)break;var u=r.shape;var a=u.body;if(a==s){r=r.next;continue}if(s.type==1&&a.type==1){r=r.next;continue}if(s.component.sleeping&&a.component.sleeping){r=r.next;continue}if(i.aabb.intersectY(u.aabb)){if(t)e.narrowPhase(i,u,!(s.type==2)||!(a.type==2),null,false);else e.continuousEvent(i,u,!(s.type==2)||!(a.type==2),null,false)}r=r.next}n=n.next}}},clear:function(){while(this.list!=null){this.list.shape.removedFromSpace();this.__remove(this.list.shape)}},shapesUnderPoint:function(e,t,n,r){this.sync_broadphase();var i=Or.get(e,t,null);var s;if(r==null)s=new on;else s=r;var o=this.list;while(o!=null&&o.aabb.minx>e)o=o.next;while(o!=null&&o.aabb.minx<=e){if(o.aabb.maxx>=e&&o.aabb.miny<=t&&o.aabb.maxy>=t){var u=o.shape;if(n==null||u.filter.shouldCollide(n)){if(u.type==0){if(Zn.circleContains(u.circle,i))s.push(u.outer)}else if(Zn.polyContains(u.polygon,i))s.push(u.outer)}}o=o.next}var a=i;if(a.outer!=null){a.outer.zpp_inner=null;a.outer=null}a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=Or.zpp_pool;Or.zpp_pool=a;return s},bodiesUnderPoint:function(e,t,n,r){this.sync_broadphase();var i=Or.get(e,t,null);var s;if(r==null)s=new qt;else s=r;var o=this.list;while(o!=null&&o.aabb.minx>e)o=o.next;while(o!=null&&o.aabb.minx<=e){if(o.aabb.maxx>=e&&o.aabb.miny<=t&&o.aabb.maxy>=t){var u=o.shape;var a=u.body.outer;if(!s.has(a)){if(n==null||u.filter.shouldCollide(n)){if(u.type==0){if(Zn.circleContains(u.circle,i))s.push(a)}else if(Zn.polyContains(u.polygon,i))s.push(a)}}}o=o.next}var f=i;if(f.outer!=null){f.outer.zpp_inner=null;f.outer=null}f._isimmutable=null;f._validate=null;f._invalidate=null;f.next=Or.zpp_pool;Or.zpp_pool=f;return s},shapesInAABB:function(e,t,n,r,i){this.sync_broadphase();this.updateAABBShape(e);var s=this.aabbShape.zpp_inner.aabb;var o;if(i==null)o=new on;else o=i;var u=this.list;while(u!=null&&u.aabb.maxx<s.minx)u=u.next;while(u!=null&&u.aabb.minx<=s.maxx){var a=u.shape;if(r==null||a.filter.shouldCollide(r)){if(t){if(n){if(Zn.containTest(this.aabbShape.zpp_inner,a))o.push(a.outer)}else if(s.contains(u.aabb))o.push(a.outer);else if(u.aabb.intersect(s)){if(Zn.testCollide_safe(a,this.aabbShape.zpp_inner))o.push(a.outer)}}else if(n?s.contains(u.aabb):u.aabb.intersect(s))o.push(a.outer)}u=u.next}return o},bodiesInAABB:function(e,t,n,r,i){this.sync_broadphase();this.updateAABBShape(e);var s=this.aabbShape.zpp_inner.aabb;var o;if(i==null)o=new qt;else o=i;if(this.failed==null)this.failed=new qt;var u=this.list;while(u!=null&&u.aabb.maxx<s.minx)u=u.next;while(u!=null&&u.aabb.minx<=s.maxx){var a=u.shape;var f=a.body.outer;if(u.aabb.intersect(s)){if(r==null||a.filter.shouldCollide(r)){if(t){if(n){if(!this.failed.has(f)){var l=Zn.containTest(this.aabbShape.zpp_inner,a);if(!o.has(f)&&l)o.push(f);else if(!l){o.remove(f);this.failed.push(f)}}}else if(!o.has(f)&&Zn.testCollide_safe(a,this.aabbShape.zpp_inner))o.push(f)}else if(n){if(!this.failed.has(f)){var c=s.contains(a.aabb);if(!o.has(f)&&c)o.push(f);else if(!c){o.remove(f);this.failed.push(f)}}}else if(!o.has(f)&&s.contains(a.aabb))o.push(f)}}u=u.next}this.failed.clear();return o},shapesInCircle:function(e,t,n,r,i,s){this.sync_broadphase();this.updateCircShape(e,t,n);var o=this.circShape.zpp_inner.aabb;var u;if(s==null)u=new on;else u=s;var a=this.list;while(a!=null&&a.aabb.maxx<o.minx)a=a.next;while(a!=null&&a.aabb.minx<=o.maxx){if(a.aabb.intersect(o)){var f=a.shape;if(i==null||f.filter.shouldCollide(i)){if(r){if(Zn.containTest(this.circShape.zpp_inner,f))u.push(f.outer)}else if(Zn.testCollide_safe(f,this.circShape.zpp_inner))u.push(f.outer)}}a=a.next}return u},bodiesInCircle:function(e,t,n,r,i,s){this.sync_broadphase();this.updateCircShape(e,t,n);var o=this.circShape.zpp_inner.aabb;var u;if(s==null)u=new qt;else u=s;if(this.failed==null)this.failed=new qt;var a=this.list;while(a!=null&&a.aabb.maxx<o.minx)a=a.next;while(a!=null&&a.aabb.minx<=o.maxx){if(a.aabb.intersect(o)){var f=a.shape;var l=f.body.outer;if(i==null||f.filter.shouldCollide(i)){if(r){if(!this.failed.has(l)){var c=Zn.containTest(this.circShape.zpp_inner,f);if(!u.has(l)&&c)u.push(l);else if(!c){u.remove(l);this.failed.push(l)}}}else if(!u.has(l)&&Zn.testCollide_safe(f,this.circShape.zpp_inner))u.push(l)}}a=a.next}this.failed.clear();return u},shapesInShape:function(e,t,n,r){this.sync_broadphase();this.validateShape(e);var i=e.aabb;var s;if(r==null)s=new on;else s=r;var o=this.list;while(o!=null&&o.aabb.maxx<i.minx)o=o.next;while(o!=null&&o.aabb.minx<=i.maxx){if(o.aabb.intersect(i)){var u=o.shape;if(n==null||u.filter.shouldCollide(n)){if(t){if(Zn.containTest(e,u))s.push(u.outer)}else if(Zn.testCollide_safe(u,e))s.push(u.outer)}}o=o.next}return s},bodiesInShape:function(e,t,n,r){this.sync_broadphase();this.validateShape(e);var i=e.aabb;var s;if(r==null)s=new qt;else s=r;if(this.failed==null)this.failed=new qt;var o=this.list;while(o!=null&&o.aabb.maxx<i.minx)o=o.next;while(o!=null&&o.aabb.minx<=i.maxx){if(o.aabb.intersect(i)){var u=o.shape;var a=u.body.outer;if(n==null||u.filter.shouldCollide(n)){if(t){if(!this.failed.has(a)){var f=Zn.containTest(e,u);if(!s.has(a)&&f)s.push(a);else if(!f){s.remove(a);this.failed.push(a)}}}else if(!s.has(a)&&Zn.testCollide_safe(e,u))s.push(a)}}o=o.next}this.failed.clear();return s},rayCast:function(e,t,n){this.sync_broadphase();e.validate_dir();var r=e.rayAABB();var i=e.maxdist;var s=null;if(e.dirx==0){var o=this.list;while(o!=null&&o.aabb.minx<=r.minx){if(o.aabb.intersect(r)&&(n==null||o.shape.filter.shouldCollide(n))){var u=e.aabbsect(o.aabb);if(u>=0&&u<i){var a;if(o.shape.type==0)a=e.circlesect(o.shape.circle,t,i);else a=e.polysect(o.shape.polygon,t,i);if(a!=null){if(a.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");i=a.zpp_inner.toiDistance;if(s!=null){if(s.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");s.zpp_inner.free()}s=a}}}o=o.next}}else if(e.dirx<0){var f=this.list;var l=null;while(f!=null&&f.aabb.minx<=r.maxx){l=f;f=f.next}f=l;while(f!=null){if(f.aabb.intersect(r)&&(n==null||f.shape.filter.shouldCollide(n))){var c=e.aabbsect(f.aabb);if(c>=0&&c<i){var h;if(f.shape.type==0)h=e.circlesect(f.shape.circle,t,i);else h=e.polysect(f.shape.polygon,t,i);if(h!=null){if(h.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");i=h.zpp_inner.toiDistance;if(s!=null){if(s.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");s.zpp_inner.free()}s=h}}}f=f.prev}}else{var p=this.list;while(p!=null&&p.aabb.minx<=r.maxx&&p.aabb.minx<e.originx+e.dirx*i){if(p.aabb.intersect(r)&&(n==null||p.shape.filter.shouldCollide(n))){var d=e.aabbsect(p.aabb);if(d>=0&&d<i){var v;if(p.shape.type==0)v=e.circlesect(p.shape.circle,t,i);else v=e.polysect(p.shape.polygon,t,i);if(v!=null){if(v.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");i=v.zpp_inner.toiDistance;if(s!=null){if(s.zpp_inner.next!=null)throw new g("Error: This object has been disposed of and cannot be used");s.zpp_inner.free()}s=v}}}p=p.next}}var m=r;if(m.outer!=null){m.outer.zpp_inner=null;m.outer=null}m.wrap_min=m.wrap_max=null;m._invalidate=null;m._validate=null;m.next=Gn.zpp_pool;Gn.zpp_pool=m;return s},rayMultiCast:function(e,t,n,r){this.sync_broadphase();e.validate_dir();var i=e.rayAABB();var s;if(r==null)s=new Mt;else s=r;if(e.dirx==0){var o=this.list;while(o!=null&&o.aabb.minx<=i.minx){if(o.aabb.intersect(i)&&(n==null||o.shape.filter.shouldCollide(n))){var u=e.aabbsect(o.aabb);if(u>=0){if(o.shape.type==0)e.circlesect2(o.shape.circle,t,s);else e.polysect2(o.shape.polygon,t,s)}}o=o.next}}else if(e.dirx<0){var a=this.list;var f=null;while(a!=null&&a.aabb.minx<=i.maxx){f=a;a=a.next}a=f;while(a!=null){if(a.aabb.intersect(i)&&(n==null||a.shape.filter.shouldCollide(n))){var l=e.aabbsect(a.aabb);if(l>=0){if(a.shape.type==0)e.circlesect2(a.shape.circle,t,s);else e.polysect2(a.shape.polygon,t,s)}}a=a.prev}}else{var c=this.list;while(c!=null&&c.aabb.minx<=i.maxx){if(c.aabb.intersect(i)&&(n==null||c.shape.filter.shouldCollide(n))){var h=e.aabbsect(c.aabb);if(h>=0){if(c.shape.type==0)e.circlesect2(c.shape.circle,t,s);else e.polysect2(c.shape.polygon,t,s)}}c=c.next}}var p=i;if(p.outer!=null){p.outer.zpp_inner=null;p.outer=null}p.wrap_min=p.wrap_max=null;p._invalidate=null;p._validate=null;p.next=Gn.zpp_pool;Gn.zpp_pool=p;return s},__class__:Zr});var ei=function(e,t){this.width=0;this.list=null;this.width=e;this.list=[]};ei.__name__=true;ei.prototype={resize:function(e,t,n){this.width=e;var r=0;var i=e*t;while(r<i){var s=r++;this.list[s]=n}},get:function(e,t){return this.list[t*this.width+e]},set:function(e,t,n){return this.list[t*this.width+e]=n},__class__:ei};var ti=function(e,t){this.width=0;this.list=null;this.width=e;this.list=[]};ti.__name__=true;ti.prototype={resize:function(e,t,n){this.width=e;var r=0;var i=e*t;while(r<i){var s=r++;this.list[s]=n}},get:function(e,t){return this.list[t*this.width+e]},set:function(e,t,n){return this.list[t*this.width+e]=n},__class__:ti};var ni=function(e,t){this.width=0;this.list=null;this.width=e;this.list=[]};ni.__name__=true;ni.prototype={resize:function(e,t,n){this.width=e;var r=0;var i=e*t;while(r<i){var s=r++;this.list[s]=n}},get:function(e,t){return this.list[t*this.width+e]},set:function(e,t,n){return this.list[t*this.width+e]=n},__class__:ni};var ri=function(){this.di=0;this.id=0;this.hnext=null;this.next=null;this.value=false};ri.__name__=true;ri.get=function(e,t,n){var r=ri.getpersist(e,t);r.value=n;return r};ri.getpersist=function(e,t){var n;if(ri.zpp_pool==null)n=new ri;else{n=ri.zpp_pool;ri.zpp_pool=n.next;n.next=null}null;n.id=e;n.di=t;return n};ri.ordered_get=function(e,t,n){if(e<=t)return ri.get(e,t,n);else return ri.get(t,e,n)};ri.ordered_get_persist=function(e,t){if(e<=t)return ri.getpersist(e,t);else return ri.getpersist(t,e)};ri.prototype={free:function(){},alloc:function(){},__class__:ri};var ii=function(){this.cnt=0;this.table=null;this.cnt=0;this.table=[];var e=0;var t=1048576;while(e<t){var n=e++;this.table.push(null)}};ii.__name__=true;ii.prototype={empty:function(){return this.cnt==0},clear:function(){var e=0;var t=this.table.length;while(e<t){var n=e++;var r=this.table[n];if(r==null)continue;while(r!=null){var i=r.hnext;r.hnext=null;r;r=i}this.table[n]=null}},get:function(e,t){var n=this.table[e*106039+t&1048575];if(n==null)return null;else if(n.id==e&&n.di==t)return n;else{do n=n.hnext;while(n!=null&&(n.id!=e||n.di!=t));return n}},ordered_get:function(e,t){if(e>t){var n=e;e=t;t=n}return this.get(e,t)},has:function(e,t){var n=this.table[e*106039+t&1048575];if(n==null)return false;else if(n.id==e&&n.di==t)return true;else{do n=n.hnext;while(n!=null&&(n.id!=e||n.di!=t));return n!=null}},maybeAdd:function(e){var t=e.id*106039+e.di&1048575;var n=this.table[t];var r=true;if(n==null){this.table[t]=e;e.hnext=null}else if(r){e.hnext=n.hnext;n.hnext=e}if(r)this.cnt++},add:function(e){var t=e.id*106039+e.di&1048575;var n=this.table[t];if(n==null){this.table[t]=e;e.hnext=null}else{e.hnext=n.hnext;n.hnext=e}this.cnt++},remove:function(e){var t=e.id*106039+e.di&1048575;var n=this.table[t];if(n==e)this.table[t]=n.hnext;else if(n!=null){var r;do{r=n;n=n.hnext}while(n!=null&&n!=e);r.hnext=n.hnext}e.hnext=null;this.cnt--},hash:function(e,t){return e*106039+t&1048575},__class__:ii};var si=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};si.__name__=true;si.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Di.zpp_pool==null)n=new Di;else{n=Di.zpp_pool;Di.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Di.zpp_pool==null)r=new Di;else{r=Di.zpp_pool;Di.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Di.zpp_pool;Di.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Di.zpp_pool;Di.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:si};var oi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};oi.__name__=true;oi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Pi.zpp_pool==null)n=new Pi;else{n=Pi.zpp_pool;Pi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Pi.zpp_pool==null)r=new Pi;else{r=Pi.zpp_pool;Pi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Pi.zpp_pool;Pi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Pi.zpp_pool;Pi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:oi};var ui=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};ui.__name__=true;ui.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Hi.zpp_pool==null)n=new Hi;else{n=Hi.zpp_pool;Hi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Hi.zpp_pool==null)r=new Hi;else{r=Hi.zpp_pool;Hi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Hi.zpp_pool;Hi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Hi.zpp_pool;Hi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:ui};var ai=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};ai.__name__=true;ai.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(ji.zpp_pool==null)n=new ji;else{n=ji.zpp_pool;ji.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(ji.zpp_pool==null)r=new ji;else{r=ji.zpp_pool;ji.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=ji.zpp_pool;ji.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=ji.zpp_pool;ji.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:ai};var fi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};fi.__name__=true;fi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Fi.zpp_pool==null)n=new Fi;else{n=Fi.zpp_pool;Fi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Fi.zpp_pool==null)r=new Fi;else{r=Fi.zpp_pool;Fi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Fi.zpp_pool;Fi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Fi.zpp_pool;Fi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:fi};var li=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};li.__name__=true;li.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(zi.zpp_pool==null)n=new zi;else{n=zi.zpp_pool;zi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(zi.zpp_pool==null)r=new zi;else{r=zi.zpp_pool;zi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=zi.zpp_pool;zi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=zi.zpp_pool;zi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:li};var ci=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};ci.__name__=true;ci.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Xi.zpp_pool==null)n=new Xi;else{n=Xi.zpp_pool;Xi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Xi.zpp_pool==null)r=new Xi;else{r=Xi.zpp_pool;Xi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Xi.zpp_pool;Xi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Xi.zpp_pool;Xi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:ci};var hi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};hi.__name__=true;hi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Vi.zpp_pool==null)n=new Vi;else{n=Vi.zpp_pool;Vi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Vi.zpp_pool==null)r=new Vi;else{r=Vi.zpp_pool;Vi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Vi.zpp_pool;Vi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Vi.zpp_pool;Vi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:hi};var pi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};pi.__name__=true;pi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if($i.zpp_pool==null)n=new $i;else{n=$i.zpp_pool;$i.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if($i.zpp_pool==null)r=new $i;else{r=$i.zpp_pool;$i.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=$i.zpp_pool;$i.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=$i.zpp_pool;$i.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:pi};var di=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};di.__name__=true;di.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Ji.zpp_pool==null)n=new Ji;else{n=Ji.zpp_pool;Ji.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Ji.zpp_pool==null)r=new Ji;else{r=Ji.zpp_pool;Ji.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Ji.zpp_pool;Ji.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Ji.zpp_pool;Ji.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:di};var vi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};vi.__name__=true;vi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Ki.zpp_pool==null)n=new Ki;else{n=Ki.zpp_pool;Ki.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Ki.zpp_pool==null)r=new Ki;else{r=Ki.zpp_pool;Ki.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Ki.zpp_pool;Ki.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Ki.zpp_pool;Ki.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:vi};var mi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};mi.__name__=true;mi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Qi.zpp_pool==null)n=new Qi;else{n=Qi.zpp_pool;Qi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Qi.zpp_pool==null)r=new Qi;else{r=Qi.zpp_pool;Qi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Qi.zpp_pool;Qi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Qi.zpp_pool;Qi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:mi};var gi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};gi.__name__=true;gi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Gi.zpp_pool==null)n=new Gi;else{n=Gi.zpp_pool;Gi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Gi.zpp_pool==null)r=new Gi;else{r=Gi.zpp_pool;Gi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Gi.zpp_pool;Gi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Gi.zpp_pool;Gi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:gi};var yi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};yi.__name__=true;yi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(Yi.zpp_pool==null)n=new Yi;else{n=Yi.zpp_pool;Yi.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(Yi.zpp_pool==null)r=new Yi;else{r=Yi.zpp_pool;Yi.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=Yi.zpp_pool;Yi.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=Yi.zpp_pool;Yi.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:yi};var bi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};bi.__name__=true;bi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(es.zpp_pool==null)n=new es;else{n=es.zpp_pool;es.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(es.zpp_pool==null)r=new es;else{r=es.zpp_pool;es.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=es.zpp_pool;es.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=es.zpp_pool;es.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:bi};var wi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};wi.__name__=true;wi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(ts.zpp_pool==null)n=new ts;else{n=ts.zpp_pool;ts.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(ts.zpp_pool==null)r=new ts;else{r=ts.zpp_pool;ts.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=ts.zpp_pool;ts.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=ts.zpp_pool;ts.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:wi};var Ei=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Ei.__name__=true;Ei.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(ns.zpp_pool==null)n=new ns;else{n=ns.zpp_pool;ns.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(ns.zpp_pool==null)r=new ns;else{r=ns.zpp_pool;ns.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=ns.zpp_pool;ns.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=ns.zpp_pool;ns.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Ei};var Si=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Si.__name__=true;Si.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(rs.zpp_pool==null)n=new rs;else{n=rs.zpp_pool;rs.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(rs.zpp_pool==null)r=new rs;else{r=rs.zpp_pool;rs.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=rs.zpp_pool;rs.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=rs.zpp_pool;rs.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Si};var xi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};xi.__name__=true;xi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(is.zpp_pool==null)n=new is;else{n=is.zpp_pool;is.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(is.zpp_pool==null)r=new is;else{r=is.zpp_pool;is.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=is.zpp_pool;is.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=is.zpp_pool;is.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:xi};var Ti=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Ti.__name__=true;Ti.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(ss.zpp_pool==null)n=new ss;else{n=ss.zpp_pool;ss.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(ss.zpp_pool==null)r=new ss;else{r=ss.zpp_pool;ss.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=ss.zpp_pool;ss.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=ss.zpp_pool;ss.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Ti};var Ni=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Ni.__name__=true;Ni.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(os.zpp_pool==null)n=new os;else{n=os.zpp_pool;os.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(os.zpp_pool==null)r=new os;else{r=os.zpp_pool;os.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=os.zpp_pool;os.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=os.zpp_pool;os.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Ni};var Ci=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Ci.__name__=true;Ci.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(us.zpp_pool==null)n=new us;else{n=us.zpp_pool;us.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(us.zpp_pool==null)r=new us;else{r=us.zpp_pool;us.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=us.zpp_pool;us.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=us.zpp_pool;us.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Ci};var ki=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};ki.__name__=true;ki.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(as.zpp_pool==null)n=new as;else{n=as.zpp_pool;as.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(as.zpp_pool==null)r=new as;else{r=as.zpp_pool;as.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=as.zpp_pool;as.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=as.zpp_pool;as.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:ki};var Li=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Li.__name__=true;Li.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(fs.zpp_pool==null)n=new fs;else{n=fs.zpp_pool;fs.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(fs.zpp_pool==null)r=new fs;else{r=fs.zpp_pool;fs.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=fs.zpp_pool;fs.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=fs.zpp_pool;fs.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Li};var Ai=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Ai.__name__=true;Ai.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(ls.zpp_pool==null)n=new ls;else{n=ls.zpp_pool;ls.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(ls.zpp_pool==null)r=new ls;else{r=ls.zpp_pool;ls.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=ls.zpp_pool;ls.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=ls.zpp_pool;ls.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Ai};var Oi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Oi.__name__=true;Oi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(cs.zpp_pool==null)n=new cs;else{n=cs.zpp_pool;cs.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(cs.zpp_pool==null)r=new cs;else{r=cs.zpp_pool;cs.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=cs.zpp_pool;cs.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=cs.zpp_pool;cs.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Oi};var Mi=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};Mi.__name__=true;Mi.prototype={begin:function(){return this.head},setbegin:function(e){this.head=e;this.modified=true;this.pushmod=true},add:function(e){return this.inlined_add(e)},inlined_add:function(e){var t;var n;if(hs.zpp_pool==null)n=new hs;else{n=hs.zpp_pool;hs.zpp_pool=n.next;n.next=null}null;n.elt=e;t=n;t.next=this.head;this.head=t;this.modified=true;this.length++;return e},addAll:function(e){var t=e.head;while(t!=null){var n=t.elt;this.add(n);t=t.next}},insert:function(e,t){return this.inlined_insert(e,t)},inlined_insert:function(e,t){var n;var r;if(hs.zpp_pool==null)r=new hs;else{r=hs.zpp_pool;hs.zpp_pool=r.next;r.next=null}null;r.elt=t;n=r;if(e==null){n.next=this.head;this.head=n}else{n.next=e.next;e.next=n}this.pushmod=this.modified=true;this.length++;return n},pop:function(){this.inlined_pop()},inlined_pop:function(){var e=this.head;this.head=e.next;var t=e;t.elt=null;t.next=hs.zpp_pool;hs.zpp_pool=t;if(this.head==null)this.pushmod=true;this.modified=true;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var e=this.head.elt;this.pop();return e},remove:function(e){this.inlined_try_remove(e)},try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.erase(t);r=true;break}t=n;n=n.next}return r},inlined_remove:function(e){this.inlined_try_remove(e)},inlined_try_remove:function(e){var t=null;var n=this.head;var r=false;while(n!=null){if(n.elt==e){this.inlined_erase(t);r=true;break}t=n;n=n.next}return r},erase:function(e){return this.inlined_erase(e)},inlined_erase:function(e){var t;var n;if(e==null){t=this.head;n=t.next;this.head=n;if(this.head==null)this.pushmod=true}else{t=e.next;n=t.next;e.next=n;if(n==null)this.pushmod=true}var r=t;r.elt=null;r.next=hs.zpp_pool;hs.zpp_pool=r;this.modified=true;this.length--;this.pushmod=true;return n},splice:function(e,t){while(t-->0&&e.next!=null)this.erase(e);return e.next},clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},inlined_clear:function(){while(!(this.head==null))this.inlined_pop();this.pushmod=true},reverse:function(){var e=this.head;var t=null;while(e!=null){var n=e.next;e.next=t;this.head=e;t=e;e=n}this.modified=true;this.pushmod=true},empty:function(){return this.head==null},size:function(){return this.length},has:function(e){return this.inlined_has(e)},inlined_has:function(e){var t;t=false;var n=this.head;while(n!=null){var r=n.elt;if(r==e){t=true;break}n=n.next}return t},front:function(){return this.head.elt},back:function(){var e=this.head;var t=e;while(t!=null){e=t;t=t.next}return e.elt},iterator_at:function(e){var t=this.head;while(e-->0&&t!=null)t=t.next;return t},at:function(e){var t=this.iterator_at(e);if(t!=null)return t.elt;else return null},__class__:Mi};var _i=function(){this.elt=null;this.next=null};_i.__name__=true;_i.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:_i};var Di=function(){this.elt=null;this.next=null};Di.__name__=true;Di.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Di};var Pi=function(){this.elt=null;this.next=null};Pi.__name__=true;Pi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Pi};var Hi=function(){this.elt=null;this.next=null};Hi.__name__=true;Hi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Hi};var Bi=function(){this.elt=null;this.next=null};Bi.__name__=true;Bi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Bi};var ji=function(){this.elt=null;this.next=null};ji.__name__=true;ji.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:ji};var Fi=function(){this.elt=null;this.next=null};Fi.__name__=true;Fi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Fi};var Ii=function(){this.elt=null;this.next=null};Ii.__name__=true;Ii.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Ii};var qi=function(){this.elt=null;this.next=null};qi.__name__=true;qi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:qi};var Ri=function(){this.elt=null;this.next=null};Ri.__name__=true;Ri.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Ri};var Ui=function(){this.elt=null;this.next=null};Ui.__name__=true;Ui.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Ui};var zi=function(){this.elt=null;this.next=null};zi.__name__=true;zi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:zi};var Wi=function(){this.elt=null;this.next=null};Wi.__name__=true;Wi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Wi};var Xi=function(){this.elt=null;this.next=null};Xi.__name__=true;Xi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Xi};var Vi=function(){this.elt=null;this.next=null};Vi.__name__=true;Vi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Vi};var $i=function(){this.elt=null;this.next=null};$i.__name__=true;$i.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:$i};var Ji=function(){this.elt=null;this.next=null};Ji.__name__=true;Ji.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Ji};var Ki=function(){this.elt=null;this.next=null};Ki.__name__=true;Ki.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Ki};var Qi=function(){this.elt=null;this.next=null};Qi.__name__=true;Qi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Qi};var Gi=function(){this.elt=null;this.next=null};Gi.__name__=true;Gi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Gi};var Yi=function(){this.elt=null;this.next=null};Yi.__name__=true;Yi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Yi};var Zi=function(){this.elt=null;this.next=null};Zi.__name__=true;Zi.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:Zi};var es=function(){this.elt=null;this.next=null};es.__name__=true;es.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:es};var ts=function(){this.elt=null;this.next=null};ts.__name__=true;ts.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:ts};var ns=function(){this.elt=null;this.next=null};ns.__name__=true;ns.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:ns};var rs=function(){this.elt=null;this.next=null};rs.__name__=true;rs.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:rs};var is=function(){this.elt=null;this.next=null};is.__name__=true;is.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:is};var ss=function(){this.elt=null;this.next=null};ss.__name__=true;ss.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:ss};var os=function(){this.elt=null;this.next=null};os.__name__=true;os.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:os};var us=function(){this.elt=null;this.next=null};us.__name__=true;us.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:us};var as=function(){this.elt=null;this.next=null};as.__name__=true;as.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:as};var fs=function(){this.elt=null;this.next=null};fs.__name__=true;fs.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:fs};var ls=function(){this.elt=null;this.next=null};ls.__name__=true;ls.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:ls};var cs=function(){this.elt=null;this.next=null};cs.__name__=true;cs.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:cs};var hs=function(){this.elt=null;this.next=null};hs.__name__=true;hs.prototype={alloc:function(){},free:function(){this.elt=null},elem:function(){return this.elt},__class__:hs};var ps=function(){this.at_index=0;this.at_ite=null;this.zip_length=false;this._length=0;this.inner=null;Pt.call(this);this.at_ite=null;this.at_index=0;this.zip_length=true;this._length=0};ps.__name__=true;ps.get=function(e,t){if(t==null)t=false;var n=new ps;n.inner=e;n.zpp_inner.immutable=t;return n};ps.__super__=Pt;ps.prototype=n(Pt.prototype,{zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;var e=this.inner.next;while(e!=null){var t=e;this._length++;e=e.next}this.zip_length=false}return this._length},zpp_vm:function(){this.zpp_inner.validate();if(this.inner.modified){this.zip_length=true;this._length=0;this.at_ite=null}},at:function(e){this.zpp_vm();if(e<0||e>=this.zpp_gl())throw new g("Error: Index out of bounds");if(this.zpp_inner.reverse_flag)e=this.zpp_gl()-1-e;if(e<this.at_index||this.at_ite==null){this.at_index=0;this.at_ite=this.inner.next;while(true){var t=this.at_ite;break;this.at_ite=this.at_ite.next}}while(this.at_index!=e){this.at_index++;this.at_ite=this.at_ite.next;while(true){var n=this.at_ite;break;this.at_ite=this.at_ite.next}}return this.at_ite.wrapper()},push:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");this.zpp_inner.modify_test();this.zpp_vm();if(e.zpp_inner._inuse)throw new g("Error: "+"Vec2"+" is already in use");var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag)this.inner.add(e.zpp_inner);else{var n=this.inner.iterator_at(this.zpp_gl()-1);this.inner.insert(n,e.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},unshift:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");this.zpp_inner.modify_test();this.zpp_vm();if(e.zpp_inner._inuse)throw new g("Error: "+"Vec2"+" is already in use");var t;if(this.zpp_inner.adder!=null)t=this.zpp_inner.adder(e);else t=true;if(t){if(this.zpp_inner.reverse_flag){var n=this.inner.iterator_at(this.zpp_gl()-1);this.inner.insert(n,e.zpp_inner)}else this.inner.add(e.zpp_inner);this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null)this.zpp_inner.post_adder(e)}return t},pop:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");this.zpp_inner.modify_test();if(this.empty())throw new g("Error: Cannot remove from empty list");this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){e=this.inner.next;var t=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(t);if(!this.zpp_inner.dontremove)this.inner.pop()}else{if(this.at_ite!=null&&this.at_ite.next==null)this.at_ite=null;var n;if(this.zpp_gl()==1)n=null;else n=this.inner.iterator_at(this.zpp_gl()-2);if(n==null)e=this.inner.next;else e=n.next;var r=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.inner.erase(n)}this.zpp_inner.invalidate();var i=e.wrapper();return i},shift:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");this.zpp_inner.modify_test();if(this.empty())throw new g("Error: Cannot remove from empty list");this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){if(this.at_ite!=null&&this.at_ite.next==null)this.at_ite=null;var t;if(this.zpp_gl()==1)t=null;else t=this.inner.iterator_at(this.zpp_gl()-2);if(t==null)e=this.inner.next;else e=t.next;var n=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(n);if(!this.zpp_inner.dontremove)this.inner.erase(t)}else{e=this.inner.next;var r=e.wrapper();if(this.zpp_inner.subber!=null)this.zpp_inner.subber(r);if(!this.zpp_inner.dontremove)this.inner.pop()}this.zpp_inner.invalidate();var i=e.wrapper();return i},remove:function(e){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");this.zpp_inner.modify_test();this.zpp_vm();var t;t=false;var n=this.inner.next;while(n!=null){var r=n;if(e.zpp_inner==r){t=true;break}n=n.next}if(t){if(this.zpp_inner.subber!=null)this.zpp_inner.subber(e);if(!this.zpp_inner.dontremove)this.inner.remove(e.zpp_inner);this.zpp_inner.invalidate()}return t},clear:function(){if(this.zpp_inner.immutable)throw new g("Error: "+"Vec2"+"List is immutable");if(this.zpp_inner.reverse_flag)while(!this.empty())this.pop();else while(!this.empty())this.shift()},__class__:ps});var ds=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new wn;this._invalidated=true};ds.__name__=true;ds.get=function(e,t){if(t==null)t=false;var n=new K;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};ds.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:ds};var vs=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new ui;this._invalidated=true};vs.__name__=true;vs.get=function(e,t){if(t==null)t=false;var n=new qt;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};vs.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:vs};var ms=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new En;this._invalidated=true};ms.__name__=true;ms.get=function(e,t){if(t==null)t=false;var n=new Kt;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};ms.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:ms};var gs=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new ai;this._invalidated=true};gs.__name__=true;gs.get=function(e,t){if(t==null)t=false;var n=new Wt;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};gs.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:gs};var ys=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new Ni;this._invalidated=true};ys.__name__=true;ys.get=function(e,t){if(t==null)t=false;var n=new q;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};ys.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:ys};var bs=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new Ln;this._invalidated=true};bs.__name__=true;bs.get=function(e,t){if(t==null)t=false;var n=new D;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};bs.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:bs};var ws=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new Yn;this._invalidated=true};ws.__name__=true;ws.get=function(e,t){if(t==null)t=false;var n=new Pt;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};ws.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:ws};var Es=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new Oi;this._invalidated=true};Es.__name__=true;Es.get=function(e,t){if(t==null)t=false;var n=new xt;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};Es.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:Es};var Ss=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new Mi;this._invalidated=true};Ss.__name__=true;Ss.get=function(e,t){if(t==null)t=false;var n=new Mt;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};Ss.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:Ss};var xs=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new Ai;this._invalidated=true};xs.__name__=true;xs.get=function(e,t){if(t==null)t=false;var n=new bt;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};xs.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:xs};var Ts=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new wi;this._invalidated=true};Ts.__name__=true;Ts.get=function(e,t){if(t==null)t=false;var n=new nn;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};Ts.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:Ts};var Ns=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new oi;this._invalidated=true};Ns.__name__=true;Ns.get=function(e,t){if(t==null)t=false;var n=new on;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};Ns.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:Ns};var Cs=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new ki;this._invalidated=true};Cs.__name__=true;Cs.get=function(e,t){if(t==null)t=false;var n=new vt;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};Cs.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:Cs};var ks=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new fi;this._invalidated=true};ks.__name__=true;ks.get=function(e,t){if(t==null)t=false;var n=new st;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};ks.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:ks};var Ls=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._modifiable=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new Vn;this._invalidated=true};Ls.__name__=true;Ls.get=function(e,t){if(t==null)t=false;var n=new lt;n.zpp_inner.inner=e;if(t)n.zpp_inner.immutable=true;n.zpp_inner.zip_length=true;return n};Ls.prototype={valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod)this.push_ite=null;this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},modified:function(){this.zip_length=true;this.at_ite=null;this.push_ite=null},modify_test:function(){if(this._modifiable!=null)this._modifiable()},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null)this._validate()}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null)this._invalidate(this)},__class__:Ls};var As=function(){};As.__name__=true;As.sqrt=function(e){return Math.sqrt(e)};As.invsqrt=function(e){return 1/Math.sqrt(e)};As.sqr=function(e){return e*e};As.clamp2=function(e,t){return As.clamp(e,-t,t)};As.clamp=function(e,t,n){if(e<t)return t;else if(e>n)return n;else return e};var Os=function(){};Os.__name__=true;var Ms=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};Ms.__name__=true;Ms.prototype={free:function(){this.data=null;this.lt=null;this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){var e=this.parent;while(e.prev!=null)e=e.prev;while(e!=null){var t=e.data;var n=true;if(!this.empty()){var r=this.parent;while(r.prev!=null)r=r.prev;while(r!=null){var i=r.data;if(!n){if(!this.lt(t,i)&&this.lt(i,t))return false}else if(t==i)n=false;else if(!this.lt(i,t)&&this.lt(t,i))return false;if(r.next!=null){r=r.next;while(r.prev!=null)r=r.prev}else{while(r.parent!=null&&r==r.parent.next)r=r.parent;r=r.parent}}}if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{while(e.parent!=null&&e==e.parent.next)e=e.parent;e=e.parent}}}return true},empty:function(){return this.parent==null},singular:function(){return this.parent!=null&&this.parent.prev==null&&this.parent.next==null},size:function(){var e=0;if(!this.empty()){var t=this.parent;while(t.prev!=null)t=t.prev;while(t!=null){var n=t.data;e++;if(t.next!=null){t=t.next;while(t.prev!=null)t=t.prev}else{while(t.parent!=null&&t==t.parent.next)t=t.parent;t=t.parent}}}return e},has:function(e){return this.find(e)!=null},find:function(e){var t=this.parent;while(t!=null&&t.data!=e)if(this.lt(e,t.data))t=t.prev;else t=t.next;return t},has_weak:function(e){return this.find_weak(e)!=null},find_weak:function(e){var t=this.parent;while(t!=null)if(this.lt(e,t.data))t=t.prev;else if(this.lt(t.data,e))t=t.next;else break;return t},lower_bound:function(e){var t=null;if(!this.empty()){var n=this.parent;while(n.prev!=null)n=n.prev;while(n!=null){var r=n.data;if(!this.lt(r,e)){t=r;break}if(n.next!=null){n=n.next;while(n.prev!=null)n=n.prev}else{while(n.parent!=null&&n==n.parent.next)n=n.parent;n=n.parent}}}return t},first:function(){var e=this.parent;while(e.prev!=null)e=e.prev;return e.data},pop_front:function(){var e=this.parent;while(e.prev!=null)e=e.prev;var t=e.data;this.remove_node(e);return t},remove:function(e){var t=this.find(e);this.remove_node(t)},successor_node:function(e){if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{var t=e;e=e.parent;while(e!=null&&e.prev!=t){t=e;e=e.parent}}return e},predecessor_node:function(e){if(e.prev!=null){e=e.prev;while(e.next!=null)e=e.next}else{var t=e;e=e.parent;while(e!=null&&e.next!=t){t=e;e=e.parent}}return e},successor:function(e){var t=this.successor_node(this.find(e));if(t==null)return null;else return t.data},predecessor:function(e){var t=this.predecessor_node(this.find(e));if(t==null)return null;else return t.data},remove_node:function(e){if(e.next!=null&&e.prev!=null){var t=e.next;while(t.prev!=null)t=t.prev;var n=e.data;e.data=t.data;t.data=n;if(this.swapped!=null)this.swapped(e.data,t.data);e=t}var r;if(e.prev==null)r=e.next;else r=e.prev;if(e.colour==1){if(e.prev!=null||e.next!=null)r.colour=1;else if(e.parent!=null){var i=e.parent;while(true){i.colour++;i.prev.colour--;i.next.colour--;var s=i.prev;if(s.colour==-1){this.__fix_neg_red(s);break}else if(s.colour==0){if(s.prev!=null&&s.prev.colour==0){this.__fix_dbl_red(s.prev);break}if(s.next!=null&&s.next.colour==0){this.__fix_dbl_red(s.next);break}}var o=i.next;if(o.colour==-1){this.__fix_neg_red(o);break}else if(o.colour==0){if(o.prev!=null&&o.prev.colour==0){this.__fix_dbl_red(o.prev);break}if(o.next!=null&&o.next.colour==0){this.__fix_dbl_red(o.next);break}}if(i.colour==2){if(i.parent==null)i.colour=1;else{i=i.parent;continue}}break}}}var u=e.parent;if(u==null)this.parent=r;else if(u.prev==e)u.prev=r;else u.next=r;if(r!=null)r.parent=u;e.parent=e.prev=e.next=null;var a=e;a.data=null;a.lt=null;a.swapped=null;a.next=Ms.zpp_pool;Ms.zpp_pool=a},clear:function(){this.clear_with(function(e){})},clear_with:function(e){if(this.parent==null)return;else{var t=this.parent;while(t!=null)if(t.prev!=null)t=t.prev;else if(t.next!=null)t=t.next;else t=this.clear_node(t,e);this.parent=null}},clear_node:function(e,t){t(e.data);var n=e.parent;if(n!=null){if(e==n.prev)n.prev=null;else n.next=null;e.parent=null}var r=e;r.data=null;r.lt=null;r.swapped=null;r.next=Ms.zpp_pool;Ms.zpp_pool=r;return n},__fix_neg_red:function(e){var t=e.parent;var n;if(t.prev==e){var r=e.prev;var i=e.next;var s=i.prev;var o=i.next;r.colour=0;e.colour=t.colour=1;e.next=s;if(s!=null)s.parent=e;var u=t.data;t.data=i.data;i.data=u;if(this.swapped!=null)this.swapped(t.data,i.data);i.prev=o;if(o!=null)o.parent=i;i.next=t.next;if(t.next!=null)t.next.parent=i;t.next=i;if(i!=null)i.parent=t;n=r}else{var a=e.next;var f=e.prev;var l=f.next;var c=f.prev;a.colour=0;e.colour=t.colour=1;e.prev=l;if(l!=null)l.parent=e;var h=t.data;t.data=f.data;f.data=h;if(this.swapped!=null)this.swapped(t.data,f.data);f.next=c;if(c!=null)c.parent=f;f.prev=t.prev;if(t.prev!=null)t.prev.parent=f;t.prev=f;if(f!=null)f.parent=t;n=a}if(n.prev!=null&&n.prev.colour==0)this.__fix_dbl_red(n.prev);else if(n.next!=null&&n.next.colour==0)this.__fix_dbl_red(n.next)},__fix_dbl_red:function(e){while(true){var t=e.parent;var n=t.parent;if(n==null){t.colour=1;break}var r;var i;var s;var o;var u;var a;var f;if(t==n.prev){s=n;f=n.next;if(e==t.prev){r=e;i=t;o=e.prev;u=e.next;a=t.next}else{r=t;i=e;o=t.prev;u=e.prev;a=e.next}}else{r=n;o=n.prev;if(e==t.prev){i=e;s=t;u=e.prev;a=e.next;f=t.next}else{i=t;s=e;u=t.prev;a=e.prev;f=e.next}}var l=n.parent;if(l==null)this.parent=i;else if(l.prev==n)l.prev=i;else l.next=i;if(i!=null)i.parent=l;r.prev=o;if(o!=null)o.parent=r;r.next=u;if(u!=null)u.parent=r;i.prev=r;if(r!=null)r.parent=i;i.next=s;if(s!=null)s.parent=i;s.prev=a;if(a!=null)a.parent=s;s.next=f;if(f!=null)f.parent=s;i.colour=n.colour-1;r.colour=1;s.colour=1;if(i==this.parent)this.parent.colour=1;else if(i.colour==0&&i.parent.colour==0){e=i;continue}break}},try_insert_bool:function(e){var t=null;var n=null;if(this.parent==null){if(Ms.zpp_pool==null)t=new Ms;else{t=Ms.zpp_pool;Ms.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Ms.zpp_pool==null)t=new Ms;else{t=Ms.zpp_pool;Ms.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Ms.zpp_pool==null)t=new Ms;else{t=Ms.zpp_pool;Ms.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return false;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return true}},try_insert:function(e){var t=null;var n=null;if(this.parent==null){if(Ms.zpp_pool==null)t=new Ms;else{t=Ms.zpp_pool;Ms.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Ms.zpp_pool==null)t=new Ms;else{t=Ms.zpp_pool;Ms.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Ms.zpp_pool==null)t=new Ms;else{t=Ms.zpp_pool;Ms.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return n;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t}},insert:function(e){var t;if(Ms.zpp_pool==null)t=new Ms;else{t=Ms.zpp_pool;Ms.zpp_pool=t.next;t.next=null}null;t.data=e;if(this.parent==null)this.parent=t;else{var n=this.parent;while(true)if(this.lt(t.data,n.data)){if(n.prev==null){n.prev=t;t.parent=n;break}else n=n.prev}else if(n.next==null){n.next=t;t.parent=n;break}else n=n.next}if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t},__class__:Ms};var _s=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};_s.__name__=true;_s.prototype={free:function(){this.data=null;this.lt=null;this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){var e=this.parent;while(e.prev!=null)e=e.prev;while(e!=null){var t=e.data;var n=true;if(!this.empty()){var r=this.parent;while(r.prev!=null)r=r.prev;while(r!=null){var i=r.data;if(!n){if(!this.lt(t,i)&&this.lt(i,t))return false}else if(t==i)n=false;else if(!this.lt(i,t)&&this.lt(t,i))return false;if(r.next!=null){r=r.next;while(r.prev!=null)r=r.prev}else{while(r.parent!=null&&r==r.parent.next)r=r.parent;r=r.parent}}}if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{while(e.parent!=null&&e==e.parent.next)e=e.parent;e=e.parent}}}return true},empty:function(){return this.parent==null},singular:function(){return this.parent!=null&&this.parent.prev==null&&this.parent.next==null},size:function(){var e=0;if(!this.empty()){var t=this.parent;while(t.prev!=null)t=t.prev;while(t!=null){var n=t.data;e++;if(t.next!=null){t=t.next;while(t.prev!=null)t=t.prev}else{while(t.parent!=null&&t==t.parent.next)t=t.parent;t=t.parent}}}return e},has:function(e){return this.find(e)!=null},find:function(e){var t=this.parent;while(t!=null&&t.data!=e)if(this.lt(e,t.data))t=t.prev;else t=t.next;return t},has_weak:function(e){return this.find_weak(e)!=null},find_weak:function(e){var t=this.parent;while(t!=null)if(this.lt(e,t.data))t=t.prev;else if(this.lt(t.data,e))t=t.next;else break;return t},lower_bound:function(e){var t=null;if(!this.empty()){var n=this.parent;while(n.prev!=null)n=n.prev;while(n!=null){var r=n.data;if(!this.lt(r,e)){t=r;break}if(n.next!=null){n=n.next;while(n.prev!=null)n=n.prev}else{while(n.parent!=null&&n==n.parent.next)n=n.parent;n=n.parent}}}return t},first:function(){var e=this.parent;while(e.prev!=null)e=e.prev;return e.data},pop_front:function(){var e=this.parent;while(e.prev!=null)e=e.prev;var t=e.data;this.remove_node(e);return t},remove:function(e){var t=this.find(e);this.remove_node(t)},successor_node:function(e){if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{var t=e;e=e.parent;while(e!=null&&e.prev!=t){t=e;e=e.parent}}return e},predecessor_node:function(e){if(e.prev!=null){e=e.prev;while(e.next!=null)e=e.next}else{var t=e;e=e.parent;while(e!=null&&e.next!=t){t=e;e=e.parent}}return e},successor:function(e){var t=this.successor_node(this.find(e));if(t==null)return null;else return t.data},predecessor:function(e){var t=this.predecessor_node(this.find(e));if(t==null)return null;else return t.data},remove_node:function(e){if(e.next!=null&&e.prev!=null){var t=e.next;while(t.prev!=null)t=t.prev;var n=e.data;e.data=t.data;t.data=n;if(this.swapped!=null)this.swapped(e.data,t.data);e=t}var r;if(e.prev==null)r=e.next;else r=e.prev;if(e.colour==1){if(e.prev!=null||e.next!=null)r.colour=1;else if(e.parent!=null){var i=e.parent;while(true){i.colour++;i.prev.colour--;i.next.colour--;var s=i.prev;if(s.colour==-1){this.__fix_neg_red(s);break}else if(s.colour==0){if(s.prev!=null&&s.prev.colour==0){this.__fix_dbl_red(s.prev);break}if(s.next!=null&&s.next.colour==0){this.__fix_dbl_red(s.next);break}}var o=i.next;if(o.colour==-1){this.__fix_neg_red(o);break}else if(o.colour==0){if(o.prev!=null&&o.prev.colour==0){this.__fix_dbl_red(o.prev);break}if(o.next!=null&&o.next.colour==0){this.__fix_dbl_red(o.next);break}}if(i.colour==2){if(i.parent==null)i.colour=1;else{i=i.parent;continue}}break}}}var u=e.parent;if(u==null)this.parent=r;else if(u.prev==e)u.prev=r;else u.next=r;if(r!=null)r.parent=u;e.parent=e.prev=e.next=null;var a=e;a.data=null;a.lt=null;a.swapped=null;a.next=_s.zpp_pool;_s.zpp_pool=a},clear:function(){this.clear_with(function(e){})},clear_with:function(e){if(this.parent==null)return;else{var t=this.parent;while(t!=null)if(t.prev!=null)t=t.prev;else if(t.next!=null)t=t.next;else t=this.clear_node(t,e);this.parent=null}},clear_node:function(e,t){t(e.data);var n=e.parent;if(n!=null){if(e==n.prev)n.prev=null;else n.next=null;e.parent=null}var r=e;r.data=null;r.lt=null;r.swapped=null;r.next=_s.zpp_pool;_s.zpp_pool=r;return n},__fix_neg_red:function(e){var t=e.parent;var n;if(t.prev==e){var r=e.prev;var i=e.next;var s=i.prev;var o=i.next;r.colour=0;e.colour=t.colour=1;e.next=s;if(s!=null)s.parent=e;var u=t.data;t.data=i.data;i.data=u;if(this.swapped!=null)this.swapped(t.data,i.data);i.prev=o;if(o!=null)o.parent=i;i.next=t.next;if(t.next!=null)t.next.parent=i;t.next=i;if(i!=null)i.parent=t;n=r}else{var a=e.next;var f=e.prev;var l=f.next;var c=f.prev;a.colour=0;e.colour=t.colour=1;e.prev=l;if(l!=null)l.parent=e;var h=t.data;t.data=f.data;f.data=h;if(this.swapped!=null)this.swapped(t.data,f.data);f.next=c;if(c!=null)c.parent=f;f.prev=t.prev;if(t.prev!=null)t.prev.parent=f;t.prev=f;if(f!=null)f.parent=t;n=a}if(n.prev!=null&&n.prev.colour==0)this.__fix_dbl_red(n.prev);else if(n.next!=null&&n.next.colour==0)this.__fix_dbl_red(n.next)},__fix_dbl_red:function(e){while(true){var t=e.parent;var n=t.parent;if(n==null){t.colour=1;break}var r;var i;var s;var o;var u;var a;var f;if(t==n.prev){s=n;f=n.next;if(e==t.prev){r=e;i=t;o=e.prev;u=e.next;a=t.next}else{r=t;i=e;o=t.prev;u=e.prev;a=e.next}}else{r=n;o=n.prev;if(e==t.prev){i=e;s=t;u=e.prev;a=e.next;f=t.next}else{i=t;s=e;u=t.prev;a=e.prev;f=e.next}}var l=n.parent;if(l==null)this.parent=i;else if(l.prev==n)l.prev=i;else l.next=i;if(i!=null)i.parent=l;r.prev=o;if(o!=null)o.parent=r;r.next=u;if(u!=null)u.parent=r;i.prev=r;if(r!=null)r.parent=i;i.next=s;if(s!=null)s.parent=i;s.prev=a;if(a!=null)a.parent=s;s.next=f;if(f!=null)f.parent=s;i.colour=n.colour-1;r.colour=1;s.colour=1;if(i==this.parent)this.parent.colour=1;else if(i.colour==0&&i.parent.colour==0){e=i;continue}break}},try_insert_bool:function(e){var t=null;var n=null;if(this.parent==null){if(_s.zpp_pool==null)t=new _s;else{t=_s.zpp_pool;_s.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(_s.zpp_pool==null)t=new _s;else{t=_s.zpp_pool;_s.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(_s.zpp_pool==null)t=new _s;else{t=_s.zpp_pool;_s.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return false;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return true}},try_insert:function(e){var t=null;var n=null;if(this.parent==null){if(_s.zpp_pool==null)t=new _s;else{t=_s.zpp_pool;_s.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(_s.zpp_pool==null)t=new _s;else{t=_s.zpp_pool;_s.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(_s.zpp_pool==null)t=new _s;else{t=_s.zpp_pool;_s.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return n;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t}},insert:function(e){var t;if(_s.zpp_pool==null)t=new _s;else{t=_s.zpp_pool;_s.zpp_pool=t.next;t.next=null}null;t.data=e;if(this.parent==null)this.parent=t;else{var n=this.parent;while(true)if(this.lt(t.data,n.data)){if(n.prev==null){n.prev=t;t.parent=n;break}else n=n.prev}else if(n.next==null){n.next=t;t.parent=n;break}else n=n.next}if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t},__class__:_s};var Ds=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};Ds.__name__=true;Ds.prototype={free:function(){this.data=null;this.lt=null;this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){var e=this.parent;while(e.prev!=null)e=e.prev;while(e!=null){var t=e.data;var n=true;if(!this.empty()){var r=this.parent;while(r.prev!=null)r=r.prev;while(r!=null){var i=r.data;if(!n){if(!this.lt(t,i)&&this.lt(i,t))return false}else if(t==i)n=false;else if(!this.lt(i,t)&&this.lt(t,i))return false;if(r.next!=null){r=r.next;while(r.prev!=null)r=r.prev}else{while(r.parent!=null&&r==r.parent.next)r=r.parent;r=r.parent}}}if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{while(e.parent!=null&&e==e.parent.next)e=e.parent;e=e.parent}}}return true},empty:function(){return this.parent==null},singular:function(){return this.parent!=null&&this.parent.prev==null&&this.parent.next==null},size:function(){var e=0;if(!this.empty()){var t=this.parent;while(t.prev!=null)t=t.prev;while(t!=null){var n=t.data;e++;if(t.next!=null){t=t.next;while(t.prev!=null)t=t.prev}else{while(t.parent!=null&&t==t.parent.next)t=t.parent;t=t.parent}}}return e},has:function(e){return this.find(e)!=null},find:function(e){var t=this.parent;while(t!=null&&t.data!=e)if(this.lt(e,t.data))t=t.prev;else t=t.next;return t},has_weak:function(e){return this.find_weak(e)!=null},find_weak:function(e){var t=this.parent;while(t!=null)if(this.lt(e,t.data))t=t.prev;else if(this.lt(t.data,e))t=t.next;else break;return t},lower_bound:function(e){var t=null;if(!this.empty()){var n=this.parent;while(n.prev!=null)n=n.prev;while(n!=null){var r=n.data;if(!this.lt(r,e)){t=r;break}if(n.next!=null){n=n.next;while(n.prev!=null)n=n.prev}else{while(n.parent!=null&&n==n.parent.next)n=n.parent;n=n.parent}}}return t},first:function(){var e=this.parent;while(e.prev!=null)e=e.prev;return e.data},pop_front:function(){var e=this.parent;while(e.prev!=null)e=e.prev;var t=e.data;this.remove_node(e);return t},remove:function(e){var t=this.find(e);this.remove_node(t)},successor_node:function(e){if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{var t=e;e=e.parent;while(e!=null&&e.prev!=t){t=e;e=e.parent}}return e},predecessor_node:function(e){if(e.prev!=null){e=e.prev;while(e.next!=null)e=e.next}else{var t=e;e=e.parent;while(e!=null&&e.next!=t){t=e;e=e.parent}}return e},successor:function(e){var t=this.successor_node(this.find(e));if(t==null)return null;else return t.data},predecessor:function(e){var t=this.predecessor_node(this.find(e));if(t==null)return null;else return t.data},remove_node:function(e){if(e.next!=null&&e.prev!=null){var t=e.next;while(t.prev!=null)t=t.prev;var n=e.data;e.data=t.data;t.data=n;if(this.swapped!=null)this.swapped(e.data,t.data);e=t}var r;if(e.prev==null)r=e.next;else r=e.prev;if(e.colour==1){if(e.prev!=null||e.next!=null)r.colour=1;else if(e.parent!=null){var i=e.parent;while(true){i.colour++;i.prev.colour--;i.next.colour--;var s=i.prev;if(s.colour==-1){this.__fix_neg_red(s);break}else if(s.colour==0){if(s.prev!=null&&s.prev.colour==0){this.__fix_dbl_red(s.prev);break}if(s.next!=null&&s.next.colour==0){this.__fix_dbl_red(s.next);break}}var o=i.next;if(o.colour==-1){this.__fix_neg_red(o);break}else if(o.colour==0){if(o.prev!=null&&o.prev.colour==0){this.__fix_dbl_red(o.prev);break}if(o.next!=null&&o.next.colour==0){this.__fix_dbl_red(o.next);break}}if(i.colour==2){if(i.parent==null)i.colour=1;else{i=i.parent;continue}}break}}}var u=e.parent;if(u==null)this.parent=r;else if(u.prev==e)u.prev=r;else u.next=r;if(r!=null)r.parent=u;e.parent=e.prev=e.next=null;var a=e;a.data=null;a.lt=null;a.swapped=null;a.next=Ds.zpp_pool;Ds.zpp_pool=a},clear:function(){this.clear_with(function(e){})},clear_with:function(e){if(this.parent==null)return;else{var t=this.parent;while(t!=null)if(t.prev!=null)t=t.prev;else if(t.next!=null)t=t.next;else t=this.clear_node(t,e);this.parent=null}},clear_node:function(e,t){t(e.data);var n=e.parent;if(n!=null){if(e==n.prev)n.prev=null;else n.next=null;e.parent=null}var r=e;r.data=null;r.lt=null;r.swapped=null;r.next=Ds.zpp_pool;Ds.zpp_pool=r;return n},__fix_neg_red:function(e){var t=e.parent;var n;if(t.prev==e){var r=e.prev;var i=e.next;var s=i.prev;var o=i.next;r.colour=0;e.colour=t.colour=1;e.next=s;if(s!=null)s.parent=e;var u=t.data;t.data=i.data;i.data=u;if(this.swapped!=null)this.swapped(t.data,i.data);i.prev=o;if(o!=null)o.parent=i;i.next=t.next;if(t.next!=null)t.next.parent=i;t.next=i;if(i!=null)i.parent=t;n=r}else{var a=e.next;var f=e.prev;var l=f.next;var c=f.prev;a.colour=0;e.colour=t.colour=1;e.prev=l;if(l!=null)l.parent=e;var h=t.data;t.data=f.data;f.data=h;if(this.swapped!=null)this.swapped(t.data,f.data);f.next=c;if(c!=null)c.parent=f;f.prev=t.prev;if(t.prev!=null)t.prev.parent=f;t.prev=f;if(f!=null)f.parent=t;n=a}if(n.prev!=null&&n.prev.colour==0)this.__fix_dbl_red(n.prev);else if(n.next!=null&&n.next.colour==0)this.__fix_dbl_red(n.next)},__fix_dbl_red:function(e){while(true){var t=e.parent;var n=t.parent;if(n==null){t.colour=1;break}var r;var i;var s;var o;var u;var a;var f;if(t==n.prev){s=n;f=n.next;if(e==t.prev){r=e;i=t;o=e.prev;u=e.next;a=t.next}else{r=t;i=e;o=t.prev;u=e.prev;a=e.next}}else{r=n;o=n.prev;if(e==t.prev){i=e;s=t;u=e.prev;a=e.next;f=t.next}else{i=t;s=e;u=t.prev;a=e.prev;f=e.next}}var l=n.parent;if(l==null)this.parent=i;else if(l.prev==n)l.prev=i;else l.next=i;if(i!=null)i.parent=l;r.prev=o;if(o!=null)o.parent=r;r.next=u;if(u!=null)u.parent=r;i.prev=r;if(r!=null)r.parent=i;i.next=s;if(s!=null)s.parent=i;s.prev=a;if(a!=null)a.parent=s;s.next=f;if(f!=null)f.parent=s;i.colour=n.colour-1;r.colour=1;s.colour=1;if(i==this.parent)this.parent.colour=1;else if(i.colour==0&&i.parent.colour==0){e=i;continue}break}},try_insert_bool:function(e){var t=null;var n=null;if(this.parent==null){if(Ds.zpp_pool==null)t=new Ds;else{t=Ds.zpp_pool;Ds.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Ds.zpp_pool==null)t=new Ds;else{t=Ds.zpp_pool;Ds.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Ds.zpp_pool==null)t=new Ds;else{t=Ds.zpp_pool;Ds.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return false;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return true}},try_insert:function(e){var t=null;var n=null;if(this.parent==null){if(Ds.zpp_pool==null)t=new Ds;else{t=Ds.zpp_pool;Ds.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Ds.zpp_pool==null)t=new Ds;else{t=Ds.zpp_pool;Ds.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Ds.zpp_pool==null)t=new Ds;else{t=Ds.zpp_pool;Ds.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return n;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t}},insert:function(e){var t;if(Ds.zpp_pool==null)t=new Ds;else{t=Ds.zpp_pool;Ds.zpp_pool=t.next;t.next=null}null;t.data=e;if(this.parent==null)this.parent=t;else{var n=this.parent;while(true)if(this.lt(t.data,n.data)){if(n.prev==null){n.prev=t;t.parent=n;break}else n=n.prev}else if(n.next==null){n.next=t;t.parent=n;break}else n=n.next}if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t},__class__:Ds};var Ps=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};Ps.__name__=true;Ps.prototype={free:function(){this.data=null;this.lt=null;this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){var e=this.parent;while(e.prev!=null)e=e.prev;while(e!=null){var t=e.data;var n=true;if(!this.empty()){var r=this.parent;while(r.prev!=null)r=r.prev;while(r!=null){var i=r.data;if(!n){if(!this.lt(t,i)&&this.lt(i,t))return false}else if(t==i)n=false;else if(!this.lt(i,t)&&this.lt(t,i))return false;if(r.next!=null){r=r.next;while(r.prev!=null)r=r.prev}else{while(r.parent!=null&&r==r.parent.next)r=r.parent;r=r.parent}}}if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{while(e.parent!=null&&e==e.parent.next)e=e.parent;e=e.parent}}}return true},empty:function(){return this.parent==null},singular:function(){return this.parent!=null&&this.parent.prev==null&&this.parent.next==null},size:function(){var e=0;if(!this.empty()){var t=this.parent;while(t.prev!=null)t=t.prev;while(t!=null){var n=t.data;e++;if(t.next!=null){t=t.next;while(t.prev!=null)t=t.prev}else{while(t.parent!=null&&t==t.parent.next)t=t.parent;t=t.parent}}}return e},has:function(e){return this.find(e)!=null},find:function(e){var t=this.parent;while(t!=null&&t.data!=e)if(this.lt(e,t.data))t=t.prev;else t=t.next;return t},has_weak:function(e){return this.find_weak(e)!=null},find_weak:function(e){var t=this.parent;while(t!=null)if(this.lt(e,t.data))t=t.prev;else if(this.lt(t.data,e))t=t.next;else break;return t},lower_bound:function(e){var t=null;if(!this.empty()){var n=this.parent;while(n.prev!=null)n=n.prev;while(n!=null){var r=n.data;if(!this.lt(r,e)){t=r;break}if(n.next!=null){n=n.next;while(n.prev!=null)n=n.prev}else{while(n.parent!=null&&n==n.parent.next)n=n.parent;n=n.parent}}}return t},first:function(){var e=this.parent;while(e.prev!=null)e=e.prev;return e.data},pop_front:function(){var e=this.parent;while(e.prev!=null)e=e.prev;var t=e.data;this.remove_node(e);return t},remove:function(e){var t=this.find(e);this.remove_node(t)},successor_node:function(e){if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{var t=e;e=e.parent;while(e!=null&&e.prev!=t){t=e;e=e.parent}}return e},predecessor_node:function(e){if(e.prev!=null){e=e.prev;while(e.next!=null)e=e.next}else{var t=e;e=e.parent;while(e!=null&&e.next!=t){t=e;e=e.parent}}return e},successor:function(e){var t=this.successor_node(this.find(e));if(t==null)return null;else return t.data},predecessor:function(e){var t=this.predecessor_node(this.find(e));if(t==null)return null;else return t.data},remove_node:function(e){if(e.next!=null&&e.prev!=null){var t=e.next;while(t.prev!=null)t=t.prev;var n=e.data;e.data=t.data;t.data=n;if(this.swapped!=null)this.swapped(e.data,t.data);e=t}var r;if(e.prev==null)r=e.next;else r=e.prev;if(e.colour==1){if(e.prev!=null||e.next!=null)r.colour=1;else if(e.parent!=null){var i=e.parent;while(true){i.colour++;i.prev.colour--;i.next.colour--;var s=i.prev;if(s.colour==-1){this.__fix_neg_red(s);break}else if(s.colour==0){if(s.prev!=null&&s.prev.colour==0){this.__fix_dbl_red(s.prev);break}if(s.next!=null&&s.next.colour==0){this.__fix_dbl_red(s.next);break}}var o=i.next;if(o.colour==-1){this.__fix_neg_red(o);break}else if(o.colour==0){if(o.prev!=null&&o.prev.colour==0){this.__fix_dbl_red(o.prev);break}if(o.next!=null&&o.next.colour==0){this.__fix_dbl_red(o.next);break}}if(i.colour==2){if(i.parent==null)i.colour=1;else{i=i.parent;continue}}break}}}var u=e.parent;if(u==null)this.parent=r;else if(u.prev==e)u.prev=r;else u.next=r;if(r!=null)r.parent=u;e.parent=e.prev=e.next=null;var a=e;a.data=null;a.lt=null;a.swapped=null;a.next=Ps.zpp_pool;Ps.zpp_pool=a},clear:function(){this.clear_with(function(e){})},clear_with:function(e){if(this.parent==null)return;else{var t=this.parent;while(t!=null)if(t.prev!=null)t=t.prev;else if(t.next!=null)t=t.next;else t=this.clear_node(t,e);this.parent=null}},clear_node:function(e,t){t(e.data);var n=e.parent;if(n!=null){if(e==n.prev)n.prev=null;else n.next=null;e.parent=null}var r=e;r.data=null;r.lt=null;r.swapped=null;r.next=Ps.zpp_pool;Ps.zpp_pool=r;return n},__fix_neg_red:function(e){var t=e.parent;var n;if(t.prev==e){var r=e.prev;var i=e.next;var s=i.prev;var o=i.next;r.colour=0;e.colour=t.colour=1;e.next=s;if(s!=null)s.parent=e;var u=t.data;t.data=i.data;i.data=u;if(this.swapped!=null)this.swapped(t.data,i.data);i.prev=o;if(o!=null)o.parent=i;i.next=t.next;if(t.next!=null)t.next.parent=i;t.next=i;if(i!=null)i.parent=t;n=r}else{var a=e.next;var f=e.prev;var l=f.next;var c=f.prev;a.colour=0;e.colour=t.colour=1;e.prev=l;if(l!=null)l.parent=e;var h=t.data;t.data=f.data;f.data=h;if(this.swapped!=null)this.swapped(t.data,f.data);f.next=c;if(c!=null)c.parent=f;f.prev=t.prev;if(t.prev!=null)t.prev.parent=f;t.prev=f;if(f!=null)f.parent=t;n=a}if(n.prev!=null&&n.prev.colour==0)this.__fix_dbl_red(n.prev);else if(n.next!=null&&n.next.colour==0)this.__fix_dbl_red(n.next)},__fix_dbl_red:function(e){while(true){var t=e.parent;var n=t.parent;if(n==null){t.colour=1;break}var r;var i;var s;var o;var u;var a;var f;if(t==n.prev){s=n;f=n.next;if(e==t.prev){r=e;i=t;o=e.prev;u=e.next;a=t.next}else{r=t;i=e;o=t.prev;u=e.prev;a=e.next}}else{r=n;o=n.prev;if(e==t.prev){i=e;s=t;u=e.prev;a=e.next;f=t.next}else{i=t;s=e;u=t.prev;a=e.prev;f=e.next}}var l=n.parent;if(l==null)this.parent=i;else if(l.prev==n)l.prev=i;else l.next=i;if(i!=null)i.parent=l;r.prev=o;if(o!=null)o.parent=r;r.next=u;if(u!=null)u.parent=r;i.prev=r;if(r!=null)r.parent=i;i.next=s;if(s!=null)s.parent=i;s.prev=a;if(a!=null)a.parent=s;s.next=f;if(f!=null)f.parent=s;i.colour=n.colour-1;r.colour=1;s.colour=1;if(i==this.parent)this.parent.colour=1;else if(i.colour==0&&i.parent.colour==0){e=i;continue}break}},try_insert_bool:function(e){var t=null;var n=null;if(this.parent==null){if(Ps.zpp_pool==null)t=new Ps;else{t=Ps.zpp_pool;Ps.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Ps.zpp_pool==null)t=new Ps;else{t=Ps.zpp_pool;Ps.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Ps.zpp_pool==null)t=new Ps;else{t=Ps.zpp_pool;Ps.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return false;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return true}},try_insert:function(e){var t=null;var n=null;if(this.parent==null){if(Ps.zpp_pool==null)t=new Ps;else{t=Ps.zpp_pool;Ps.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Ps.zpp_pool==null)t=new Ps;else{t=Ps.zpp_pool;Ps.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Ps.zpp_pool==null)t=new Ps;else{t=Ps.zpp_pool;Ps.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return n;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t}},insert:function(e){var t;if(Ps.zpp_pool==null)t=new Ps;else{t=Ps.zpp_pool;Ps.zpp_pool=t.next;t.next=null}null;t.data=e;if(this.parent==null)this.parent=t;else{var n=this.parent;while(true)if(this.lt(t.data,n.data)){if(n.prev==null){n.prev=t;t.parent=n;break}else n=n.prev}else if(n.next==null){n.next=t;t.parent=n;break}else n=n.next}if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t},__class__:Ps};var Hs=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};Hs.__name__=true;Hs.prototype={free:function(){this.data=null;this.lt=null;this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){var e=this.parent;while(e.prev!=null)e=e.prev;while(e!=null){var t=e.data;var n=true;if(!this.empty()){var r=this.parent;while(r.prev!=null)r=r.prev;while(r!=null){var i=r.data;if(!n){if(!this.lt(t,i)&&this.lt(i,t))return false}else if(t==i)n=false;else if(!this.lt(i,t)&&this.lt(t,i))return false;if(r.next!=null){r=r.next;while(r.prev!=null)r=r.prev}else{while(r.parent!=null&&r==r.parent.next)r=r.parent;r=r.parent}}}if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{while(e.parent!=null&&e==e.parent.next)e=e.parent;e=e.parent}}}return true},empty:function(){return this.parent==null},singular:function(){return this.parent!=null&&this.parent.prev==null&&this.parent.next==null},size:function(){var e=0;if(!this.empty()){var t=this.parent;while(t.prev!=null)t=t.prev;while(t!=null){var n=t.data;e++;if(t.next!=null){t=t.next;while(t.prev!=null)t=t.prev}else{while(t.parent!=null&&t==t.parent.next)t=t.parent;t=t.parent}}}return e},has:function(e){return this.find(e)!=null},find:function(e){var t=this.parent;while(t!=null&&t.data!=e)if(this.lt(e,t.data))t=t.prev;else t=t.next;return t},has_weak:function(e){return this.find_weak(e)!=null},find_weak:function(e){var t=this.parent;while(t!=null)if(this.lt(e,t.data))t=t.prev;else if(this.lt(t.data,e))t=t.next;else break;return t},lower_bound:function(e){var t=null;if(!this.empty()){var n=this.parent;while(n.prev!=null)n=n.prev;while(n!=null){var r=n.data;if(!this.lt(r,e)){t=r;break}if(n.next!=null){n=n.next;while(n.prev!=null)n=n.prev}else{while(n.parent!=null&&n==n.parent.next)n=n.parent;n=n.parent}}}return t},first:function(){var e=this.parent;while(e.prev!=null)e=e.prev;return e.data},pop_front:function(){var e=this.parent;while(e.prev!=null)e=e.prev;var t=e.data;this.remove_node(e);return t},remove:function(e){var t=this.find(e);this.remove_node(t)},successor_node:function(e){if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{var t=e;e=e.parent;while(e!=null&&e.prev!=t){t=e;e=e.parent}}return e},predecessor_node:function(e){if(e.prev!=null){e=e.prev;while(e.next!=null)e=e.next}else{var t=e;e=e.parent;while(e!=null&&e.next!=t){t=e;e=e.parent}}return e},successor:function(e){var t=this.successor_node(this.find(e));if(t==null)return null;else return t.data},predecessor:function(e){var t=this.predecessor_node(this.find(e));if(t==null)return null;else return t.data},remove_node:function(e){if(e.next!=null&&e.prev!=null){var t=e.next;while(t.prev!=null)t=t.prev;var n=e.data;e.data=t.data;t.data=n;if(this.swapped!=null)this.swapped(e.data,t.data);e=t}var r;if(e.prev==null)r=e.next;else r=e.prev;if(e.colour==1){if(e.prev!=null||e.next!=null)r.colour=1;else if(e.parent!=null){var i=e.parent;while(true){i.colour++;i.prev.colour--;i.next.colour--;var s=i.prev;if(s.colour==-1){this.__fix_neg_red(s);break}else if(s.colour==0){if(s.prev!=null&&s.prev.colour==0){this.__fix_dbl_red(s.prev);break}if(s.next!=null&&s.next.colour==0){this.__fix_dbl_red(s.next);break}}var o=i.next;if(o.colour==-1){this.__fix_neg_red(o);break}else if(o.colour==0){if(o.prev!=null&&o.prev.colour==0){this.__fix_dbl_red(o.prev);break}if(o.next!=null&&o.next.colour==0){this.__fix_dbl_red(o.next);break}}if(i.colour==2){if(i.parent==null)i.colour=1;else{i=i.parent;continue}}break}}}var u=e.parent;if(u==null)this.parent=r;else if(u.prev==e)u.prev=r;else u.next=r;if(r!=null)r.parent=u;e.parent=e.prev=e.next=null;var a=e;a.data=null;a.lt=null;a.swapped=null;a.next=Hs.zpp_pool;Hs.zpp_pool=a},clear:function(){this.clear_with(function(e){})},clear_with:function(e){if(this.parent==null)return;else{var t=this.parent;while(t!=null)if(t.prev!=null)t=t.prev;else if(t.next!=null)t=t.next;else t=this.clear_node(t,e);this.parent=null}},clear_node:function(e,t){t(e.data);var n=e.parent;if(n!=null){if(e==n.prev)n.prev=null;else n.next=null;e.parent=null}var r=e;r.data=null;r.lt=null;r.swapped=null;r.next=Hs.zpp_pool;Hs.zpp_pool=r;return n},__fix_neg_red:function(e){var t=e.parent;var n;if(t.prev==e){var r=e.prev;var i=e.next;var s=i.prev;var o=i.next;r.colour=0;e.colour=t.colour=1;e.next=s;if(s!=null)s.parent=e;var u=t.data;t.data=i.data;i.data=u;if(this.swapped!=null)this.swapped(t.data,i.data);i.prev=o;if(o!=null)o.parent=i;i.next=t.next;if(t.next!=null)t.next.parent=i;t.next=i;if(i!=null)i.parent=t;n=r}else{var a=e.next;var f=e.prev;var l=f.next;var c=f.prev;a.colour=0;e.colour=t.colour=1;e.prev=l;if(l!=null)l.parent=e;var h=t.data;t.data=f.data;f.data=h;if(this.swapped!=null)this.swapped(t.data,f.data);f.next=c;if(c!=null)c.parent=f;f.prev=t.prev;if(t.prev!=null)t.prev.parent=f;t.prev=f;if(f!=null)f.parent=t;n=a}if(n.prev!=null&&n.prev.colour==0)this.__fix_dbl_red(n.prev);else if(n.next!=null&&n.next.colour==0)this.__fix_dbl_red(n.next)},__fix_dbl_red:function(e){while(true){var t=e.parent;var n=t.parent;if(n==null){t.colour=1;break}var r;var i;var s;var o;var u;var a;var f;if(t==n.prev){s=n;f=n.next;if(e==t.prev){r=e;i=t;o=e.prev;u=e.next;a=t.next}else{r=t;i=e;o=t.prev;u=e.prev;a=e.next}}else{r=n;o=n.prev;if(e==t.prev){i=e;s=t;u=e.prev;a=e.next;f=t.next}else{i=t;s=e;u=t.prev;a=e.prev;f=e.next}}var l=n.parent;if(l==null)this.parent=i;else if(l.prev==n)l.prev=i;else l.next=i;if(i!=null)i.parent=l;r.prev=o;if(o!=null)o.parent=r;r.next=u;if(u!=null)u.parent=r;i.prev=r;if(r!=null)r.parent=i;i.next=s;if(s!=null)s.parent=i;s.prev=a;if(a!=null)a.parent=s;s.next=f;if(f!=null)f.parent=s;i.colour=n.colour-1;r.colour=1;s.colour=1;if(i==this.parent)this.parent.colour=1;else if(i.colour==0&&i.parent.colour==0){e=i;continue}break}},try_insert_bool:function(e){var t=null;var n=null;if(this.parent==null){if(Hs.zpp_pool==null)t=new Hs;else{t=Hs.zpp_pool;Hs.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Hs.zpp_pool==null)t=new Hs;else{t=Hs.zpp_pool;Hs.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Hs.zpp_pool==null)t=new Hs;else{t=Hs.zpp_pool;Hs.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return false;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return true}},try_insert:function(e){var t=null;var n=null;if(this.parent==null){if(Hs.zpp_pool==null)t=new Hs;else{t=Hs.zpp_pool;Hs.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Hs.zpp_pool==null)t=new Hs;else{t=Hs.zpp_pool;Hs.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Hs.zpp_pool==null)t=new Hs;else{t=Hs.zpp_pool;Hs.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return n;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t}},insert:function(e){var t;if(Hs.zpp_pool==null)t=new Hs;else{t=Hs.zpp_pool;Hs.zpp_pool=t.next;t.next=null}null;t.data=e;if(this.parent==null)this.parent=t;else{var n=this.parent;while(true)if(this.lt(t.data,n.data)){if(n.prev==null){n.prev=t;t.parent=n;break}else n=n.prev}else if(n.next==null){n.next=t;t.parent=n;break}else n=n.next}if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t},__class__:Hs};var Bs=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};Bs.__name__=true;Bs.prototype={free:function(){this.data=null;this.lt=null;this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){var e=this.parent;while(e.prev!=null)e=e.prev;while(e!=null){var t=e.data;var n=true;if(!this.empty()){var r=this.parent;while(r.prev!=null)r=r.prev;while(r!=null){var i=r.data;if(!n){if(!this.lt(t,i)&&this.lt(i,t))return false}else if(t==i)n=false;else if(!this.lt(i,t)&&this.lt(t,i))return false;if(r.next!=null){r=r.next;while(r.prev!=null)r=r.prev}else{while(r.parent!=null&&r==r.parent.next)r=r.parent;r=r.parent}}}if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{while(e.parent!=null&&e==e.parent.next)e=e.parent;e=e.parent}}}return true},empty:function(){return this.parent==null},singular:function(){return this.parent!=null&&this.parent.prev==null&&this.parent.next==null},size:function(){var e=0;if(!this.empty()){var t=this.parent;while(t.prev!=null)t=t.prev;while(t!=null){var n=t.data;e++;if(t.next!=null){t=t.next;while(t.prev!=null)t=t.prev}else{while(t.parent!=null&&t==t.parent.next)t=t.parent;t=t.parent}}}return e},has:function(e){return this.find(e)!=null},find:function(e){var t=this.parent;while(t!=null&&t.data!=e)if(this.lt(e,t.data))t=t.prev;else t=t.next;return t},has_weak:function(e){return this.find_weak(e)!=null},find_weak:function(e){var t=this.parent;while(t!=null)if(this.lt(e,t.data))t=t.prev;else if(this.lt(t.data,e))t=t.next;else break;return t},lower_bound:function(e){var t=null;if(!this.empty()){var n=this.parent;while(n.prev!=null)n=n.prev;while(n!=null){var r=n.data;if(!this.lt(r,e)){t=r;break}if(n.next!=null){n=n.next;while(n.prev!=null)n=n.prev}else{while(n.parent!=null&&n==n.parent.next)n=n.parent;n=n.parent}}}return t},first:function(){var e=this.parent;while(e.prev!=null)e=e.prev;return e.data},pop_front:function(){var e=this.parent;while(e.prev!=null)e=e.prev;var t=e.data;this.remove_node(e);return t},remove:function(e){var t=this.find(e);this.remove_node(t)},successor_node:function(e){if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{var t=e;e=e.parent;while(e!=null&&e.prev!=t){t=e;e=e.parent}}return e},predecessor_node:function(e){if(e.prev!=null){e=e.prev;while(e.next!=null)e=e.next}else{var t=e;e=e.parent;while(e!=null&&e.next!=t){t=e;e=e.parent}}return e},successor:function(e){var t=this.successor_node(this.find(e));if(t==null)return null;else return t.data},predecessor:function(e){var t=this.predecessor_node(this.find(e));if(t==null)return null;else return t.data},remove_node:function(e){if(e.next!=null&&e.prev!=null){var t=e.next;while(t.prev!=null)t=t.prev;var n=e.data;e.data=t.data;t.data=n;if(this.swapped!=null)this.swapped(e.data,t.data);e=t}var r;if(e.prev==null)r=e.next;else r=e.prev;if(e.colour==1){if(e.prev!=null||e.next!=null)r.colour=1;else if(e.parent!=null){var i=e.parent;while(true){i.colour++;i.prev.colour--;i.next.colour--;var s=i.prev;if(s.colour==-1){this.__fix_neg_red(s);break}else if(s.colour==0){if(s.prev!=null&&s.prev.colour==0){this.__fix_dbl_red(s.prev);break}if(s.next!=null&&s.next.colour==0){this.__fix_dbl_red(s.next);break}}var o=i.next;if(o.colour==-1){this.__fix_neg_red(o);break}else if(o.colour==0){if(o.prev!=null&&o.prev.colour==0){this.__fix_dbl_red(o.prev);break}if(o.next!=null&&o.next.colour==0){this.__fix_dbl_red(o.next);break}}if(i.colour==2){if(i.parent==null)i.colour=1;else{i=i.parent;continue}}break}}}var u=e.parent;if(u==null)this.parent=r;else if(u.prev==e)u.prev=r;else u.next=r;if(r!=null)r.parent=u;e.parent=e.prev=e.next=null;var a=e;a.data=null;a.lt=null;a.swapped=null;a.next=Bs.zpp_pool;Bs.zpp_pool=a},clear:function(){this.clear_with(function(e){})},clear_with:function(e){if(this.parent==null)return;else{var t=this.parent;while(t!=null)if(t.prev!=null)t=t.prev;else if(t.next!=null)t=t.next;else t=this.clear_node(t,e);this.parent=null}},clear_node:function(e,t){t(e.data);var n=e.parent;if(n!=null){if(e==n.prev)n.prev=null;else n.next=null;e.parent=null}var r=e;r.data=null;r.lt=null;r.swapped=null;r.next=Bs.zpp_pool;Bs.zpp_pool=r;return n},__fix_neg_red:function(e){var t=e.parent;var n;if(t.prev==e){var r=e.prev;var i=e.next;var s=i.prev;var o=i.next;r.colour=0;e.colour=t.colour=1;e.next=s;if(s!=null)s.parent=e;var u=t.data;t.data=i.data;i.data=u;if(this.swapped!=null)this.swapped(t.data,i.data);i.prev=o;if(o!=null)o.parent=i;i.next=t.next;if(t.next!=null)t.next.parent=i;t.next=i;if(i!=null)i.parent=t;n=r}else{var a=e.next;var f=e.prev;var l=f.next;var c=f.prev;a.colour=0;e.colour=t.colour=1;e.prev=l;if(l!=null)l.parent=e;var h=t.data;t.data=f.data;f.data=h;if(this.swapped!=null)this.swapped(t.data,f.data);f.next=c;if(c!=null)c.parent=f;f.prev=t.prev;if(t.prev!=null)t.prev.parent=f;t.prev=f;if(f!=null)f.parent=t;n=a}if(n.prev!=null&&n.prev.colour==0)this.__fix_dbl_red(n.prev);else if(n.next!=null&&n.next.colour==0)this.__fix_dbl_red(n.next)},__fix_dbl_red:function(e){while(true){var t=e.parent;var n=t.parent;if(n==null){t.colour=1;break}var r;var i;var s;var o;var u;var a;var f;if(t==n.prev){s=n;f=n.next;if(e==t.prev){r=e;i=t;o=e.prev;u=e.next;a=t.next}else{r=t;i=e;o=t.prev;u=e.prev;a=e.next}}else{r=n;o=n.prev;if(e==t.prev){i=e;s=t;u=e.prev;a=e.next;f=t.next}else{i=t;s=e;u=t.prev;a=e.prev;f=e.next}}var l=n.parent;if(l==null)this.parent=i;else if(l.prev==n)l.prev=i;else l.next=i;if(i!=null)i.parent=l;r.prev=o;if(o!=null)o.parent=r;r.next=u;if(u!=null)u.parent=r;i.prev=r;if(r!=null)r.parent=i;i.next=s;if(s!=null)s.parent=i;s.prev=a;if(a!=null)a.parent=s;s.next=f;if(f!=null)f.parent=s;i.colour=n.colour-1;r.colour=1;s.colour=1;if(i==this.parent)this.parent.colour=1;else if(i.colour==0&&i.parent.colour==0){e=i;continue}break}},try_insert_bool:function(e){var t=null;var n=null;if(this.parent==null){if(Bs.zpp_pool==null)t=new Bs;else{t=Bs.zpp_pool;Bs.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Bs.zpp_pool==null)t=new Bs;else{t=Bs.zpp_pool;Bs.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Bs.zpp_pool==null)t=new Bs;else{t=Bs.zpp_pool;Bs.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return false;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return true}},try_insert:function(e){var t=null;var n=null;if(this.parent==null){if(Bs.zpp_pool==null)t=new Bs;else{t=Bs.zpp_pool;Bs.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Bs.zpp_pool==null)t=new Bs;else{t=Bs.zpp_pool;Bs.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Bs.zpp_pool==null)t=new Bs;else{t=Bs.zpp_pool;Bs.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return n;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t}},insert:function(e){var t;if(Bs.zpp_pool==null)t=new Bs;else{t=Bs.zpp_pool;Bs.zpp_pool=t.next;t.next=null}null;t.data=e;if(this.parent==null)this.parent=t;else{var n=this.parent;while(true)if(this.lt(t.data,n.data)){if(n.prev==null){n.prev=t;t.parent=n;break}else n=n.prev}else if(n.next==null){n.next=t;t.parent=n;break}else n=n.next}if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t},__class__:Bs};var js=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};js.__name__=true;js.prototype={free:function(){this.data=null;this.lt=null;this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){var e=this.parent;while(e.prev!=null)e=e.prev;while(e!=null){var t=e.data;var n=true;if(!this.empty()){var r=this.parent;while(r.prev!=null)r=r.prev;while(r!=null){var i=r.data;if(!n){if(!this.lt(t,i)&&this.lt(i,t))return false}else if(t==i)n=false;else if(!this.lt(i,t)&&this.lt(t,i))return false;if(r.next!=null){r=r.next;while(r.prev!=null)r=r.prev}else{while(r.parent!=null&&r==r.parent.next)r=r.parent;r=r.parent}}}if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{while(e.parent!=null&&e==e.parent.next)e=e.parent;e=e.parent}}}return true},empty:function(){return this.parent==null},singular:function(){return this.parent!=null&&this.parent.prev==null&&this.parent.next==null},size:function(){var e=0;if(!this.empty()){var t=this.parent;while(t.prev!=null)t=t.prev;while(t!=null){var n=t.data;e++;if(t.next!=null){t=t.next;while(t.prev!=null)t=t.prev}else{while(t.parent!=null&&t==t.parent.next)t=t.parent;t=t.parent}}}return e},has:function(e){return this.find(e)!=null},find:function(e){var t=this.parent;while(t!=null&&t.data!=e)if(this.lt(e,t.data))t=t.prev;else t=t.next;return t},has_weak:function(e){return this.find_weak(e)!=null},find_weak:function(e){var t=this.parent;while(t!=null)if(this.lt(e,t.data))t=t.prev;else if(this.lt(t.data,e))t=t.next;else break;return t},lower_bound:function(e){var t=null;if(!this.empty()){var n=this.parent;while(n.prev!=null)n=n.prev;while(n!=null){var r=n.data;if(!this.lt(r,e)){t=r;break}if(n.next!=null){n=n.next;while(n.prev!=null)n=n.prev}else{while(n.parent!=null&&n==n.parent.next)n=n.parent;n=n.parent}}}return t},first:function(){var e=this.parent;while(e.prev!=null)e=e.prev;return e.data},pop_front:function(){var e=this.parent;while(e.prev!=null)e=e.prev;var t=e.data;this.remove_node(e);return t},remove:function(e){var t=this.find(e);this.remove_node(t)},successor_node:function(e){if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{var t=e;e=e.parent;while(e!=null&&e.prev!=t){t=e;e=e.parent}}return e},predecessor_node:function(e){if(e.prev!=null){e=e.prev;while(e.next!=null)e=e.next}else{var t=e;e=e.parent;while(e!=null&&e.next!=t){t=e;e=e.parent}}return e},successor:function(e){var t=this.successor_node(this.find(e));if(t==null)return null;else return t.data},predecessor:function(e){var t=this.predecessor_node(this.find(e));if(t==null)return null;else return t.data},remove_node:function(e){if(e.next!=null&&e.prev!=null){var t=e.next;while(t.prev!=null)t=t.prev;var n=e.data;e.data=t.data;t.data=n;if(this.swapped!=null)this.swapped(e.data,t.data);e=t}var r;if(e.prev==null)r=e.next;else r=e.prev;if(e.colour==1){if(e.prev!=null||e.next!=null)r.colour=1;else if(e.parent!=null){var i=e.parent;while(true){i.colour++;i.prev.colour--;i.next.colour--;var s=i.prev;if(s.colour==-1){this.__fix_neg_red(s);break}else if(s.colour==0){if(s.prev!=null&&s.prev.colour==0){this.__fix_dbl_red(s.prev);break}if(s.next!=null&&s.next.colour==0){this.__fix_dbl_red(s.next);break}}var o=i.next;if(o.colour==-1){this.__fix_neg_red(o);break}else if(o.colour==0){if(o.prev!=null&&o.prev.colour==0){this.__fix_dbl_red(o.prev);break}if(o.next!=null&&o.next.colour==0){this.__fix_dbl_red(o.next);break}}if(i.colour==2){if(i.parent==null)i.colour=1;else{i=i.parent;continue}}break}}}var u=e.parent;if(u==null)this.parent=r;else if(u.prev==e)u.prev=r;else u.next=r;if(r!=null)r.parent=u;e.parent=e.prev=e.next=null;var a=e;a.data=null;a.lt=null;a.swapped=null;a.next=js.zpp_pool;js.zpp_pool=a},clear:function(){this.clear_with(function(e){})},clear_with:function(e){if(this.parent==null)return;else{var t=this.parent;while(t!=null)if(t.prev!=null)t=t.prev;else if(t.next!=null)t=t.next;else t=this.clear_node(t,e);this.parent=null}},clear_node:function(e,t){t(e.data);var n=e.parent;if(n!=null){if(e==n.prev)n.prev=null;else n.next=null;e.parent=null}var r=e;r.data=null;r.lt=null;r.swapped=null;r.next=js.zpp_pool;js.zpp_pool=r;return n},__fix_neg_red:function(e){var t=e.parent;var n;if(t.prev==e){var r=e.prev;var i=e.next;var s=i.prev;var o=i.next;r.colour=0;e.colour=t.colour=1;e.next=s;if(s!=null)s.parent=e;var u=t.data;t.data=i.data;i.data=u;if(this.swapped!=null)this.swapped(t.data,i.data);i.prev=o;if(o!=null)o.parent=i;i.next=t.next;if(t.next!=null)t.next.parent=i;t.next=i;if(i!=null)i.parent=t;n=r}else{var a=e.next;var f=e.prev;var l=f.next;var c=f.prev;a.colour=0;e.colour=t.colour=1;e.prev=l;if(l!=null)l.parent=e;var h=t.data;t.data=f.data;f.data=h;if(this.swapped!=null)this.swapped(t.data,f.data);f.next=c;if(c!=null)c.parent=f;f.prev=t.prev;if(t.prev!=null)t.prev.parent=f;t.prev=f;if(f!=null)f.parent=t;n=a}if(n.prev!=null&&n.prev.colour==0)this.__fix_dbl_red(n.prev);else if(n.next!=null&&n.next.colour==0)this.__fix_dbl_red(n.next)},__fix_dbl_red:function(e){while(true){var t=e.parent;var n=t.parent;if(n==null){t.colour=1;break}var r;var i;var s;var o;var u;var a;var f;if(t==n.prev){s=n;f=n.next;if(e==t.prev){r=e;i=t;o=e.prev;u=e.next;a=t.next}else{r=t;i=e;o=t.prev;u=e.prev;a=e.next}}else{r=n;o=n.prev;if(e==t.prev){i=e;s=t;u=e.prev;a=e.next;f=t.next}else{i=t;s=e;u=t.prev;a=e.prev;f=e.next}}var l=n.parent;if(l==null)this.parent=i;else if(l.prev==n)l.prev=i;else l.next=i;if(i!=null)i.parent=l;r.prev=o;if(o!=null)o.parent=r;r.next=u;if(u!=null)u.parent=r;i.prev=r;if(r!=null)r.parent=i;i.next=s;if(s!=null)s.parent=i;s.prev=a;if(a!=null)a.parent=s;s.next=f;if(f!=null)f.parent=s;i.colour=n.colour-1;r.colour=1;s.colour=1;if(i==this.parent)this.parent.colour=1;else if(i.colour==0&&i.parent.colour==0){e=i;continue}break}},try_insert_bool:function(e){var t=null;var n=null;if(this.parent==null){if(js.zpp_pool==null)t=new js;else{t=js.zpp_pool;js.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(js.zpp_pool==null)t=new js;else{t=js.zpp_pool;js.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(js.zpp_pool==null)t=new js;else{t=js.zpp_pool;js.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return false;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return true}},try_insert:function(e){var t=null;var n=null;if(this.parent==null){if(js.zpp_pool==null)t=new js;else{t=js.zpp_pool;js.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(js.zpp_pool==null)t=new js;else{t=js.zpp_pool;js.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(js.zpp_pool==null)t=new js;else{t=js.zpp_pool;js.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return n;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t}},insert:function(e){var t;if(js.zpp_pool==null)t=new js;else{t=js.zpp_pool;js.zpp_pool=t.next;t.next=null}null;t.data=e;if(this.parent==null)this.parent=t;else{var n=this.parent;while(true)if(this.lt(t.data,n.data)){if(n.prev==null){n.prev=t;t.parent=n;break}else n=n.prev}else if(n.next==null){n.next=t;t.parent=n;break}else n=n.next}if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t},__class__:js};var Fs=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};Fs.__name__=true;Fs.prototype={free:function(){this.data=null;this.lt=null;this.swapped=null},alloc:function(){},verify:function(){if(!this.empty()){var e=this.parent;while(e.prev!=null)e=e.prev;while(e!=null){var t=e.data;var n=true;if(!this.empty()){var r=this.parent;while(r.prev!=null)r=r.prev;while(r!=null){var i=r.data;if(!n){if(!this.lt(t,i)&&this.lt(i,t))return false}else if(t==i)n=false;else if(!this.lt(i,t)&&this.lt(t,i))return false;if(r.next!=null){r=r.next;while(r.prev!=null)r=r.prev}else{while(r.parent!=null&&r==r.parent.next)r=r.parent;r=r.parent}}}if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{while(e.parent!=null&&e==e.parent.next)e=e.parent;e=e.parent}}}return true},empty:function(){return this.parent==null},singular:function(){return this.parent!=null&&this.parent.prev==null&&this.parent.next==null},size:function(){var e=0;if(!this.empty()){var t=this.parent;while(t.prev!=null)t=t.prev;while(t!=null){var n=t.data;e++;if(t.next!=null){t=t.next;while(t.prev!=null)t=t.prev}else{while(t.parent!=null&&t==t.parent.next)t=t.parent;t=t.parent}}}return e},has:function(e){return this.find(e)!=null},find:function(e){var t=this.parent;while(t!=null&&t.data!=e)if(this.lt(e,t.data))t=t.prev;else t=t.next;return t},has_weak:function(e){return this.find_weak(e)!=null},find_weak:function(e){var t=this.parent;while(t!=null)if(this.lt(e,t.data))t=t.prev;else if(this.lt(t.data,e))t=t.next;else break;return t},lower_bound:function(e){var t=null;if(!this.empty()){var n=this.parent;while(n.prev!=null)n=n.prev;while(n!=null){var r=n.data;if(!this.lt(r,e)){t=r;break}if(n.next!=null){n=n.next;while(n.prev!=null)n=n.prev}else{while(n.parent!=null&&n==n.parent.next)n=n.parent;n=n.parent}}}return t},first:function(){var e=this.parent;while(e.prev!=null)e=e.prev;return e.data},pop_front:function(){var e=this.parent;while(e.prev!=null)e=e.prev;var t=e.data;this.remove_node(e);return t},remove:function(e){var t=this.find(e);this.remove_node(t)},successor_node:function(e){if(e.next!=null){e=e.next;while(e.prev!=null)e=e.prev}else{var t=e;e=e.parent;while(e!=null&&e.prev!=t){t=e;e=e.parent}}return e},predecessor_node:function(e){if(e.prev!=null){e=e.prev;while(e.next!=null)e=e.next}else{var t=e;e=e.parent;while(e!=null&&e.next!=t){t=e;e=e.parent}}return e},successor:function(e){var t=this.successor_node(this.find(e));if(t==null)return null;else return t.data},predecessor:function(e){var t=this.predecessor_node(this.find(e));if(t==null)return null;else return t.data},remove_node:function(e){if(e.next!=null&&e.prev!=null){var t=e.next;while(t.prev!=null)t=t.prev;var n=e.data;e.data=t.data;t.data=n;if(this.swapped!=null)this.swapped(e.data,t.data);e=t}var r;if(e.prev==null)r=e.next;else r=e.prev;if(e.colour==1){if(e.prev!=null||e.next!=null)r.colour=1;else if(e.parent!=null){var i=e.parent;while(true){i.colour++;i.prev.colour--;i.next.colour--;var s=i.prev;if(s.colour==-1){this.__fix_neg_red(s);break}else if(s.colour==0){if(s.prev!=null&&s.prev.colour==0){this.__fix_dbl_red(s.prev);break}if(s.next!=null&&s.next.colour==0){this.__fix_dbl_red(s.next);break}}var o=i.next;if(o.colour==-1){this.__fix_neg_red(o);break}else if(o.colour==0){if(o.prev!=null&&o.prev.colour==0){this.__fix_dbl_red(o.prev);break}if(o.next!=null&&o.next.colour==0){this.__fix_dbl_red(o.next);break}}if(i.colour==2){if(i.parent==null)i.colour=1;else{i=i.parent;continue}}break}}}var u=e.parent;if(u==null)this.parent=r;else if(u.prev==e)u.prev=r;else u.next=r;if(r!=null)r.parent=u;e.parent=e.prev=e.next=null;var a=e;a.data=null;a.lt=null;a.swapped=null;a.next=Fs.zpp_pool;Fs.zpp_pool=a},clear:function(){this.clear_with(function(e){})},clear_with:function(e){if(this.parent==null)return;else{var t=this.parent;while(t!=null)if(t.prev!=null)t=t.prev;else if(t.next!=null)t=t.next;else t=this.clear_node(t,e);this.parent=null}},clear_node:function(e,t){t(e.data);var n=e.parent;if(n!=null){if(e==n.prev)n.prev=null;else n.next=null;e.parent=null}var r=e;r.data=null;r.lt=null;r.swapped=null;r.next=Fs.zpp_pool;Fs.zpp_pool=r;return n},__fix_neg_red:function(e){var t=e.parent;var n;if(t.prev==e){var r=e.prev;var i=e.next;var s=i.prev;var o=i.next;r.colour=0;e.colour=t.colour=1;e.next=s;if(s!=null)s.parent=e;var u=t.data;t.data=i.data;i.data=u;if(this.swapped!=null)this.swapped(t.data,i.data);i.prev=o;if(o!=null)o.parent=i;i.next=t.next;if(t.next!=null)t.next.parent=i;t.next=i;if(i!=null)i.parent=t;n=r}else{var a=e.next;var f=e.prev;var l=f.next;var c=f.prev;a.colour=0;e.colour=t.colour=1;e.prev=l;if(l!=null)l.parent=e;var h=t.data;t.data=f.data;f.data=h;if(this.swapped!=null)this.swapped(t.data,f.data);f.next=c;if(c!=null)c.parent=f;f.prev=t.prev;if(t.prev!=null)t.prev.parent=f;t.prev=f;if(f!=null)f.parent=t;n=a}if(n.prev!=null&&n.prev.colour==0)this.__fix_dbl_red(n.prev);else if(n.next!=null&&n.next.colour==0)this.__fix_dbl_red(n.next)},__fix_dbl_red:function(e){while(true){var t=e.parent;var n=t.parent;if(n==null){t.colour=1;break}var r;var i;var s;var o;var u;var a;var f;if(t==n.prev){s=n;f=n.next;if(e==t.prev){r=e;i=t;o=e.prev;u=e.next;a=t.next}else{r=t;i=e;o=t.prev;u=e.prev;a=e.next}}else{r=n;o=n.prev;if(e==t.prev){i=e;s=t;u=e.prev;a=e.next;f=t.next}else{i=t;s=e;u=t.prev;a=e.prev;f=e.next}}var l=n.parent;if(l==null)this.parent=i;else if(l.prev==n)l.prev=i;else l.next=i;if(i!=null)i.parent=l;r.prev=o;if(o!=null)o.parent=r;r.next=u;if(u!=null)u.parent=r;i.prev=r;if(r!=null)r.parent=i;i.next=s;if(s!=null)s.parent=i;s.prev=a;if(a!=null)a.parent=s;s.next=f;if(f!=null)f.parent=s;i.colour=n.colour-1;r.colour=1;s.colour=1;if(i==this.parent)this.parent.colour=1;else if(i.colour==0&&i.parent.colour==0){e=i;continue}break}},try_insert_bool:function(e){var t=null;var n=null;if(this.parent==null){if(Fs.zpp_pool==null)t=new Fs;else{t=Fs.zpp_pool;Fs.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Fs.zpp_pool==null)t=new Fs;else{t=Fs.zpp_pool;Fs.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Fs.zpp_pool==null)t=new Fs;else{t=Fs.zpp_pool;Fs.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return false;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return true}},try_insert:function(e){var t=null;var n=null;if(this.parent==null){if(Fs.zpp_pool==null)t=new Fs;else{t=Fs.zpp_pool;Fs.zpp_pool=t.next;t.next=null}null;t.data=e;this.parent=t}else{n=this.parent;while(true)if(this.lt(e,n.data)){if(n.prev==null){if(Fs.zpp_pool==null)t=new Fs;else{t=Fs.zpp_pool;Fs.zpp_pool=t.next;t.next=null}null;t.data=e;n.prev=t;t.parent=n;break}else n=n.prev}else if(this.lt(n.data,e)){if(n.next==null){if(Fs.zpp_pool==null)t=new Fs;else{t=Fs.zpp_pool;Fs.zpp_pool=t.next;t.next=null}null;t.data=e;n.next=t;t.parent=n;break}else n=n.next}else break}if(t==null)return n;else{if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t}},insert:function(e){var t;if(Fs.zpp_pool==null)t=new Fs;else{t=Fs.zpp_pool;Fs.zpp_pool=t.next;t.next=null}null;t.data=e;if(this.parent==null)this.parent=t;else{var n=this.parent;while(true)if(this.lt(t.data,n.data)){if(n.prev==null){n.prev=t;t.parent=n;break}else n=n.prev}else if(n.next==null){n.next=t;t.parent=n;break}else n=n.next}if(t.parent==null)t.colour=1;else{t.colour=0;if(t.parent.colour==0)this.__fix_dbl_red(t)}return t},__class__:Fs};var Is,qs=0;if(Array.prototype.indexOf)r.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)};String.prototype.__class__=String;String.__name__=true;Array.__name__=true;var Us={__name__:["Int"]};var zs={__name__:["Dynamic"]};var Ws=Number;Ws.__name__=["Float"];var Xs=Boolean;Xs.__ename__=["Bool"];var Vs={__name__:["Class"]};var $s={};var Js={};s.simulation="simulation";o["American Desserts"]=["ambrosia","angelcake","applecrisp","appledumpling","applepie","bananapudding","bananasplit","beanpie","blackberrypie","blackbottompie","blondie","blueberrypie","bostoncreampie","brownbetty","brownie","bundtcake","buttermilkpie","butterscotch","caramel","checkerboardcake","cheesecake","cherrypie","chiffonpie","chocolatebrownie","chocolatechipcookie","chocolatepudding","cobbler","coconutcake","congobar","corncookie","creampie","cupcake","cupcone","derbypie","dessertbar","dirtcake","dobergecake","doughnut","frieddough","friedicecream","friedpie","frozenyogurt","fudge","funnelcake","gooeybuttercake","grapepie","grasshopperpie","grasshopperpie","hastypudding","hermitcookies","hotmilkcake","huckleberrypie","hummingbirdcake","iceboxcake","icecreamcake","icecreamcone","jamcake","jello","jellybean","jellycreampie","keylimepie","kingcake","lanecake","lemonsquares","maracapie","marshmallowcreme","moltenchocolatecake","mudpie","oreo","panocha","parfait","pastryhearts","pecanpie","persimmonpudding","pistachiopudding","potpie","pumpkinpie","redvelvetcake","rhubarbpie","ricepudding","scotcheroos","shooflypie","snackcake","snickerdoodles","snickerssalad","stackcake","strawberryshortcake","sundae","sweetpotatopie","tapiocapudding","tipsycake","twinkie","waldorfpudding","watergatesalad","whoopiepie"];o["American Forenames"]=["aaron","ada","adam","adrian","adrienne","agnes","alan","albert","alberta","alberto","alex","alexander","alexandra","alexis","alfred","alfredo","alice","alicia","alison","allan","allen","allison","alma","alvin","alyssa","amanda","amber","amelia","amy","ana","andre","andrea","andrew","andy","angel","angel","angela","angelica","angelina","angie","anita","ann","anna","anne","annette","annie","anthony","antoinette","antonia","antonio","april","arlene","armando","arnold","arthur","ashley","audrey","barbara","barry","beatrice","becky","belinda","ben","benjamin","bernadette","bernard","bernice","bertha","bessie","beth","bethany","betsy","betty","beulah","beverly","bill","billie","billy","blanca","blanche","bob","bobbie","bobby","bonnie","brad","bradley","brandi","brandon","brandy","brenda","brent","brett","brian","bridget","brittany","brooke","bruce","bryan","byron","calvin","camille","candace","candice","carl","carla","carlos","carmen","carol","carole","caroline","carolyn","carrie","casey","casey","cassandra","catherine","cathy","cecelia","cecil","cecilia","celia","chad","charlene","charles","charlie","charlotte","chelsea","cheryl","chester","chris","christian","christie","christina","christine","christopher","christy","cindy","claire","clara","clarence","claude","claudia","clayton","clifford","clifton","clinton","clyde","cody","colleen","connie","constance","cora","corey","cory","courtney","craig","cristina","crystal","curtis","cynthia","daisy","dale","dan","dana","daniel","danielle","danny","darla","darlene","darrell","darren","darryl","daryl","dave","david","dawn","dean","deanna","debbie","deborah","debra","delia","della","delores","denise","dennis","derek","derrick","desiree","diana","diane","dianna","dianne","dixie","dolores","don","donald","donna","dora","doreen","doris","dorothy","douglas","duane","dustin","dwayne","dwight","earl","ebony","eddie","edgar","edith","edna","eduardo","edward","edwin","eileen","elaine","eleanor","elena","elisa","elizabeth","ella","ellen","elmer","eloise","elsa","elsie","elvira","emily","emma","enrique","eric","erica","erik","erika","erin","erma","ernest","ernestine","essie","estelle","esther","ethel","eugene","eula","eunice","eva","evelyn","everett","faith","fannie","faye","felicia","felix","fernando","flora","florence","floyd","frances","francis","francis","francisco","frank","franklin","fred","freda","freddie","frederick","gabriel","gail","gary","gayle","gene","geneva","genevieve","george","georgia","gerald","geraldine","gertrude","gilbert","gina","ginger","gladys","glen","glenda","glenn","gloria","gordon","grace","greg","gregory","gretchen","guadalupe","guy","gwen","gwendolyn","hannah","harold","harriet","harry","harvey","hattie","hazel","heather","hector","heidi","helen","henrietta","henry","herbert","herman","hilda","holly","hope","howard","hugh","ian","ida","inez","irene","iris","irma","isaac","isabel","ivan","jack","jackie","jacob","jacqueline","jacquelyn","jaime","jaime","james","jamie","jamie","jan","jana","jane","janet","janice","janie","janis","jared","jasmine","jason","javier","jay","jean","jeanette","jeanne","jeannette","jeannie","jeff","jeffery","jeffrey","jenna","jennie","jennifer","jenny","jeremy","jerome","jerry","jesse","jessica","jessie","jessie","jesus","jill","jim","jimmie","jimmy","jo","joan","joann","joanna","joanne","jodi","jody","joe","joel","johanna","john","johnnie","johnnie","johnny","jon","jonathan","jordan","jorge","jose","josefina","joseph","josephine","joshua","joy","joyce","juan","juana","juanita","judith","judy","julia","julian","julie","julio","june","justin","kara","karen","kari","karl","karla","kate","katherine","kathleen","kathryn","kathy","katie","katrina","kay","kayla","keith","kelley","kelli","kellie","kelly","kelly","ken","kendra","kenneth","kent","kerry","kevin","kim","kimberly","kirk","krista","kristen","kristi","kristie","kristin","kristina","kristine","kristy","krystal","kurt","kyle","lana","lance","larry","latoya","laura","lauren","laurie","laverne","lawrence","leah","lee","lee","leigh","lela","lena","leo","leon","leona","leonard","leroy","leslie","leslie","lester","leticia","lewis","lila","lillian","lillie","linda","lindsay","lindsey","lisa","lloyd","lois","lola","lonnie","lora","lorena","lorene","loretta","lori","lorraine","louis","louise","lucia","lucille","lucy","luis","lula","luz","lydia","lynda","lynette","lynn","lynne","mabel","mable","madeline","mae","maggie","mamie","mandy","manuel","marc","marcella","marcia","marcus","margaret","margarita","margie","marguerite","maria","marian","marianne","marie","marilyn","mario","marion","marion","marjorie","mark","marlene","marsha","marshall","marta","martha","martin","marvin","mary","maryann","mathew","matthew","mattie","maureen","maurice","max","maxine","may","megan","meghan","melanie","melba","melinda","melissa","melody","melvin","mercedes","meredith","michael","micheal","michele","michelle","miguel","mike","mildred","milton","mindy","minnie","miranda","miriam","misty","mitchell","molly","mona","monica","monique","morris","muriel","myra","myrtle","nadine","nancy","naomi","natalie","natasha","nathan","nathaniel","neil","nellie","nelson","nettie","nicholas","nichole","nicole","nina","nora","norma","norman","olga","olive","olivia","ollie","opal","ora","oscar","pam","pamela","pat","patricia","patrick","patsy","patti","patty","paul","paula","paulette","pauline","pearl","pedro","peggy","penny","perry","peter","philip","phillip","phyllis","priscilla","rachael","rachel","rafael","ralph","ramon","ramona","randall","randy","raquel","raul","ray","raymond","rebecca","regina","reginald","rene","renee","rhonda","ricardo","richard","rick","ricky","rita","robert","roberta","roberto","robin","robyn","rochelle","rodney","roger","roland","ron","ronald","ronnie","rosa","rosalie","rose","rosemarie","rosemary","rosie","ross","roxanne","roy","ruben","ruby","russell","ruth","ryan","sabrina","sadie","sally","salvador","sam","samantha","samuel","sandra","sandy","sara","sarah","scott","sean","sergio","seth","shane","shannon","shari","sharon","shawn","shawna","sheila","shelia","shelley","shelly","sheri","sherri","sherry","sheryl","shirley","sidney","silvia","sonia","sonja","sonya","sophia","sophie","stacey","stacy","stanley","stella","stephanie","stephen","steve","steven","sue","susan","susie","suzanne","sylvia","tabitha","tamara","tami","tammy","tanya","tara","tasha","ted","teresa","teri","terrance","terrence","terri","terry","terry","thelma","theodore","theresa","thomas","tiffany","tim","timothy","tina","todd","tom","tommy","toni","tony","tonya","tracey","traci","tracy","tracy","travis","tricia","troy","tyler","tyrone","valerie","vanessa","velma","vera","verna","vernon","veronica","vicki","vickie","vicky","victor","victoria","vincent","viola","violet","virgil","virginia","vivian","wade","wallace","walter","wanda","warren","wayne","wendy","wesley","whitney","willard","william","willie","willie","wilma","winifred","yolanda","yvette","yvonne","zachary"];o.Animals=["aardvark","aardwolf","albatross","alligator","alpaca","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","ass","baboon","badger","baldeagle","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","blackpanther","blackwidow","bluebird","bluejay","bluewhale","boa","boar","bobcat","bonobo","buffalo","butterfly","buzzard","camel","capybara","caribou","carp","cat","caterpillar","catfish","catshark","centipede","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","clam","clownfish","cobra","cockroach","cod","condor","coral","cougar","cow","coyote","crab","crane","cranefly","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dog","dolphin","donkey","dormouse","dove","dragonfly","duck","dungbeetle","eagle","earthworm","earwig","echidna","eel","egret","elephant","elephantseal","elk","emu","ermine","falcon","ferret","finch","firefly","fish","flamingo","flea","fly","fowl","fox","frog","fruitbat","galliform","gamefowl","gazelle","gecko","gerbil","giantpanda","giantsquid","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grizzlybear","groundshark","groundsloth","grouse","guan","guanaco","guineafowl","guineapig","gull","haddock","halibut","hammerheadshark","hamster","hare","hawk","hedgehog","hermitcrab","heron","herring","hippopotamus","hornet","horse","hoverfly","hummingbird","humpbackwhale","hyena","iguana","jackal","jaguar","jay","jellyfish","kangaroo","kingfisher","kiwi","koala","koi","komodo","krill","ladybug","lamprey","lark","leech","lemming","lemur","leopard","limpet","lion","lizard","llama","lobster","locust","loon","louse","lynx","macaw","mackerel","magpie","mammal","manatee","mantaray","marmoset","marmot","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monitor","monkey","moose","mosquito","moth","mouse","mule","narwhal","newt","nightingale","octopus","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","partridge","peacock","peafowl","pelican","penguin","perch","peregrine","pheasant","pig","pigeon","pike","piranha","platypus","polarbear","pony","porcupine","porpoise","possum","prairiedog","prawn","prayingmantis","primate","puffin","puma","python","quail","rabbit","raccoon","rat","rattlesnake","raven","redpanda","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","salamander","salmon","scorpion","seahorse","sealion","seaslug","seasnail","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","snail","snake","snipe","sole","sparrow","spermwhale","spider","spidermonkey","squid","squirrel","starfish","stingray","stoat","stork","swallow","swan","swift","swordfish","swordtail","tarantula","termite","thrush","tiger","tigershark","toad","tortoise","toucan","treefrog","trout","tuna","turkey","turtle","tyrannosaurus","vampirebat","viper","vole","vulture","wallaby","walrus","wasp","waterbuffalo","weasel","whale","whitefish","wildcat","wildebeest","wolf","wolverine","wombat","woodpecker","yak","zebra"];o["Board Games"]=["abalone","acronymble","agricola","alias","articulate","backgammon","balderdash","battleship","blockade","buckaroo","checkers","chess","clue","diamond","diplomacy","dominion","dominos","downfall","draughts","go","guesswho","hex","isola","jenga","kerplunk","kropki","ludo","mahjong","mastermind","monopoly","mousetrap","obsession","operation","othello","pandemic","pictionary","risk","scattergories","scrabble","senet","shogi","stratego","trivialpursuit","twister","ubongo","uno","upwords","yahtzee"];o["Breakfast Cereals"]=["addamsfamilycereal","allbran","almonddelight","alpen","alphabits","applecinnamoncheerios","appleclones","applejacks","applejacksgliders","appleraisincrisp","applezingaroos","applezings","bakedapplelife","bananafrostedflakes","banananutcheerios","berrryluckycharms","berryberrykix","berryburstcheerios","berrykrispies","booberry","capncrunch","captainplanetcereal","caramelcrunchfuls","ceccettios","cheerios","chocapic","chococrunch","chocolatecheerios","chocolatechex","chocolatecrunchfuls","chocolatedonutz","chocolateflake","chocolatekrave","chocolateoatcrunchlife","chocolatetoastcrunch","chrebetcrunch","christmascrunch","cinnabon","cinnamoncheerios","cinnamonchex","cinnamoncrunch","cinnamongrahams","cinnamonjacks","cinnamonlife","cinnamonnutcheerios","cinnamontoastcrunch","cinnamontoasters","cinnasaryapplejacks","circusfun","clackers","clusters","cocoafrostedflakes","cocoahoots","cocoakrispies","cocoapebbles","cocoapuffs","cocopops","cocoroos","cocowheats","colossalcrunch","cometballs","cookiecrisp","cookiecrispbrownie","cookiecrispcereal","cornbran","cornbransquares","cornbursts","cornchex","cornflakes","cornpops","cornsoya","cornysnaps","countchocula","cranberryalmondcrunch","cranberrywheats","crazycow","crazyflakes","crispix","crispix","crispycritters","crispyrice","crispywheats","croonchystars","crunchberries","cruncheroos","crunchybran","crunchycornbran","crunchynutcornflakes","cupcakepebbles","diamondshreddies","dinersaurs","dinkydonuts","dinopebbles","doublechex","doubledipcrunch","dynobites","eggocereal","fantuzflakes","fiberone","flutieflakes","fortifiedoatflakes","frankenberry","freakies","frenchtoastcrunch","frootloops","frootloops","frostedcheerios","frostedflakes","frostedflakesgold","frostedminichex","frostedminiwheats","frosties","fruitbrute","fruitharvest","fruitycheerios","fruitypebbles","fruitypebbles","goldencrisp","goldengoals","goldengrahams","goldennuggets","goldenpuffs","goleancereal","gorillamunch","grahamchex","granola","granola","granolove","granula","grapenutflakes","grapenuts","halfsies","harvestcrunch","honeybunny","honeybuzzers","honeycomb","honeycomb","honeycrisps","honeycups","honeygrahamchex","honeykix","honeynutcheerios","honeypuffs","honeyricekrispies","honeysmacks","honeysmacks","hulkcereal","iceberrypebbles","jets","jif","jumbokrispies","jurassicparkcrunch","kaboom","kingvitaman","kix","kokokrunch","krispykritters","krunchios","krustyos","littlebites","luckycharms","luckycharms","magicpuffscereal","mallowoats","marshmallowpebbles","millenios","milocereal","miniwheats","moonstones","muesli","mueslix","muffets","multigraincheerios","nestlenesquik","nutrigrain","oatbake","oatbransquares","oatcrisp","oatibix","oatkrunchies","oatmealcookiecrisp","oatmealcrisp","oatmealsquares","optivita","orangeblossom","peanutbuttercrunch","pebblesboulders","pebblescereal","pinkpantherflakes","pokemoncereal","powdereddonutz","pronutro","prostarz","puffapuffarice","puffedrice","puffedwheat","puffins","puffkins","punchcrunch","quakequangaroos","quakerohs","quisp","railroadtracks","raisinbran","raisinbran","raisinbranccrunch","raisincrisps","raisinlife","raisinnutbran","raisinsquares","raisinwheats","razzledazzlericekrispies","readybrek","reesespuffs","reptarcrunch","ricebubbles","ricechex","ricehoneys","ricekrinkles","ricekrispies","rockyroad","scoobydoo","sesamestreetcereal","shredddspoonfuls","shreddedoats","shreddedwheat","shreddies","shreddies","shreks","sirgrapefellow","smartbbran","smartstart","smorz","smurfberrycrunch","snowflakes","spidermancereal","sprinklespangles","stars","starwarscereal","strawberryblastedhoneycomb","strawberryricekrispies","strawberryshortcake","strawberrysquares","sugarcrisp","sugarjets","sugarpuffs","sugarsmacks","sugarsprinkledtwinkles","sultanabran","suncrunchers","sunflakes","supermanstars","sweetenedwheatfuls","teamflakes","tigerpower","toastedcinnamonsquares","toastedwheatfuls","toasties","totalcinnamoncrunch","totalcorn","totalcranberrycrunch","totalhoneyclusters","triples","triplesnack","turbocereal","twinkles","unclesamcereal","undercoverbears","vanillycrunch","veggieos","vive","wackies","waffelos","wafflecrisp","weetabix","weetabixminis","weetbix","weetbix","weetos","wheatena","wheathoneys","wheaties","wheatstax","wildanimalcrunch","winterfruitypebbles","yogactive","zanyfruits"];o["British Desserts"]=["angelcake","angeldelight","applecake","applepie","arcticroll","bakewelltart","banburycake","banoffeepie","battenbergcake","blackbun","blancmange","brandysnaps","breadpudding","cabinetpudding","carawayseedcake","carrotcake","chelseabun","chorleycake","christmaspudding","clootie","cobbler","cranachan","crumble","custardtart ","dundeecake","ecclescake","empirebiscuit","etonmess","fatrascal","figgypudding","flummery","fruitfool","fruithat","fudgedoughnut","gypsytart","happyfaces","icecream","jaffacakes","jamrolypoly","knickerbockerglory","lardycake","lardycake","liverpooltart","madeiracake","maltloaf","malvernpudding","manchestertart","mincepie","parkin","penguin","pinkwafer","poundcake","raspberryripple","rhubarbpie","ricepudding","rockcake","scone","shortcake","shrewsburycake","spongecake","spoom","spotteddick","suetpudding","summerpudding","tottenhamcake","treaclespong","treacletart","trifle","welshcake"];o["Brythonic Deities"]=["abandinus","abellio","abnoba","adsullata","aericura","agrona","alaunus","alisanos","ambisagrus","ancamna","ancasta","andarta","andraste","anextiomarus","ankou","arausio","arduinna","arnemetia","artio","arvernus","atepomarus","aufaniae","aventia","aveta","barinthus","belatucadros","belenus","belisama","borrum","borvo","brigantia","britannia","buxenus","campestres","camulus","canetonnessis","cernunnos","cicolluis","cimbrianus","cissonius","clota","cocidius","condatis","contrebis","coventina","damara","damona","esus","fagus","grannus","hueteris","huetiris","intarabus","iovantucarus","latobius","lenus","leucetios","lugus","luxovius","luxovius","maponos","maponus","moguns","moritasgus","mullo","nemausus","nerius","nodens","ogmios","robor","rudianos","sedatus","segomo","smertrios","sucellos","taranis","toutatis","tridamos","veteris","vheteris","vindonnus","vinotonus","virotutis","visucius","vitiris","vosegus"];o["Capital Cities"]=["abudhabi","abuja","adamstown","addisababa","algiers","amman","amsterdam","ankara","antananarivo","asmara","astana","athens","baghdad","bangkok","basseterre","beijing","beirut","belgrade","berlin","bern","bloemfontein","bogota","brasilia","bratislava","brazzaville","bridgetown","brussels","bucharest","budapest","buenosaires","cairo","canberra","capetown","caracas","cayenne","cockburn town","conakry","copenhagen","dakar","damascus","dhaka","djibouti","doha","douglas","dublin","dushanbe","freetown","funafuti","gaborone","georgetown","gibraltar","grozny","gustavia","hamilton","hanoi","harare","hargeisa","havana","helsinki","hongkong","honiara","islamabad","jakarta","jamestown","jerusalem","juba","kabul","kathmandu","khartoum","kiev","kingston","kingstown","kualalumpur","kuwaitcity","libreville","lima","lisbon","london","luxembourg","madrid","manila","maputo","marigot","maseru","mexicocity","minsk","mogadishu","monaco","monrovia","montevideo","moscow","muscat","nairobi","nassau","nicosia","oslo","ottawa","paris","philipsburg","phnompenh","plymouth","prague","praia","pretoria","pristina","pyongyang","quito","rabat","ramallah","reykjavik","riga","riyadh","roadtown","rome","roseau","saipan","sanjose","sanjuan","sanmarino","sansalvador","santiago","santodomingo","saotome","sarajevo","seoul","singapore","skopje","sofia","stanley","stockholm","sukhumi","suva","taipei","tallinn","tashkent","tehran","tokyo","tripoli","tunis","vaduz","valletta","vaticancity","victoria","vienna","vientiane","vilnius","warsaw","washington","wellington","windhoek","zagreb"];o.Clothing=["anorak","bikini","blazer","bloomers","blouse","bra","cape","cardigan","cloak","coat","corset","dress","dungarees","frock","garters","gloves","gown","jacket","jeans","jumper","kilt","kimino","knickers","leggings","leotard","lingerie","longjohns","mackintosh","mittens","negligee","nightgown","nylons","overalls","overcoat","pajamas","pants","petticoat","poncho","raincoat","robe","sari","sarong","scarf","shirt","skirt","skivvy","slacks","socks","stockings","suit","sweater","sweatshirt","tie","trousers","tshirt","tuxedo","underclothes","underpants","undershirt","underwear","uniform","veil","vest","waistcoat"];o.Colours=["amaranth","amber","amethyst","apricot","aquamarine","azure","babyblue","beige","black","blue","bluegreen","blush","bronze","brown","burgundy","byzantium","carmine","cerise","cerulean","champagne","chocolate","cobaltblue","coffee","copper","coral","crimson","cyan","desertsand","electricblue","emerald","erin","gold","gray","green","harlequin","indigo","ivory","jade","junglegreen","lavender","lemon","lilac","lime","magenta","magentarose","maroon","mauve","navyblue","ocher","olive","orange","orchid","peach","pear","periwinkle","persianblue","pink","plum","prussianblue","puce","purple","raspberry","red","redviolet","rose","ruby","salmon","sangria","sapphire","scarlet","silver","slategray","springbud","springgreen","tan","taupe","teal","turquoise","violet","viridian","white","yellow"];o["Constellations Modern"]=["andromeda","antlia","apus","aquarius","aquila","ara","aries","auriga","botes","caelum","camelopardalis","cancer","canesvenatici","canismajor","canisminor","capricornus","carina","cassiopeia","centaurus","cepheus","cetus","chamaeleon","circinus","columba","coma","corona","corvus","crater","crux","cygnus","delphinus","dorado","draco","equuleus","eridanus","fornax","gemini","grus","hercules","horologium","hydra","hydrus","indus","lacerta","leo","leominor","lepus","libra","lupus","lynx","lyra","mensa","microscopium","monoceros","musca","norma","octans","ophiuchus","orion","pavo","pegasus","perseus","phoenix","pictor","pisces","puppis","pyxis","reticulum","sagitta","sagittarius","scorpius","sculptor","scutum","serpens","sextans","taurus","telescopium","triangulum","tucana","ursamajor","ursaminor","vela","virgo","volans","vulpecula"];o["Cooking Utensils"]=["applecorer","applecutter","baster","biscuitcutter","biscuitpress","blowtorch","boiloverpreventer","bottleopener","bowl","breadknife","browningtray","buttercurler","cakeandpieserver","cheesecloth","cheeseknife","chefsknife","cherrypitter","chinois","chopfork","chopsticks","cleaver","colander","corkscrew","crabcracker","crabcracker","cuttingboard","doughscraper","eggpiercer","eggpoacher","eggseparator","eggslicer","eggtimer","filletknife","fishscaler","fishslice","floursifter","fonduefork","foodmill","fork","funnel","garlicpress","grapefruitknife","grater","gravystrainer","herbchopper","honeydipper","honeydipper","knife","knork","ladle","lame","lemonreamer","lemonsqueezer","lobsterpick","mandoline","matedcolanderpot","measuringcup","measuringspoon","meatgrinder","meattenderiser","meatthermometer","melonballer","mezzaluna","mortarandpestle","nutcracker","nutcracker","nutmeggrater","ovenglove","pastrybag","pastryblender","pastrybrush","pastrywheel","peel","peeler","peppermill","piebird","pizzacutter","pot-holder","potatomasher","potatoricer","poultryshears","rollerdocker","rollingpin","saltshaker","scales","scissors","scoop","sieve","skewer","slottedspoon","spatula","spider","spoon","sporf","spork","sugarthermometer","tamis","tinopener","tomatoknife","tongs","tongs","trongs","trussingneedle","twine","whisk","woodspoon","zester"];o.Countries=["afghanistan","africa","albania","algeria","andorra","angola","antigua","arabia","argentina","armenia","ascension","australia","austria","bahamas","bahrain","bangladesh","barbados","belarus","belgium","belize","bermuda","bolivia","bosnia","botswana","brazil","britain","brunei","bulgaria","burundi","cambodia","cameroon","canada","chad","chile","china","china","colombia","congo","costarica","croatia","cuba","cyprus","cyrenaica","czech","denmark","ecuador","egypt","emirates","eritrea","estonia","ethiopia","falklands","finland","france","gambia","georgia","germany","ghana","greece","greenland","grenada","guam","guatemala","guernsey","guinea","guinea","haiti","hongkong","hungary","iceland","india","indonesia","iran","iraq","ireland","israel","italy","jamaica","japan","jordan","kashmir","kenya","korea","kosovo","kurdistan","kuwait","laos","latvia","lebanon","libya","liechtenstein","lithuania","luxembourg","macau","macedonia","madagascar","malaysia","maldives","mali","malta","mexico","micronesia","monaco","mongolia","morocco","mozambique","nepal","netherlands","nicaragua","niger","nigeria","norway","norway","oman","pakistan","palestine","panama","paraguay","peru","philippines","poland","portugal","romania","ross","russia","rwanda","salvador","saudi","serbia","seychelles","singapore","slovakia","slovenia","somalia","spain","sudan","sudan","svalbard","sweden","switzerland","syria","taiwan","taiwan","thailand","timor","tobago","trinidad","tunisia","turkey","turkmenistan","uganda","ukraine","unitedkingdom","uruguay","uzbekistan","vanuatu","vatican","venezuela","vietnam","yemen","zealand","zimbabwe"];o.Dinosaurs=["aachenosaurus","aardonyx","abdallahsaurus","abelisaurus","abrictosaurus","abrosaurus","abydosaurus","acanthopholis","achelousaurus","acheroraptor","achillesaurus","achillobator","acristavus","acrocanthosaurus","acrotholus","actiosaurus","adamantisaurus","adasaurus","adelolophus","adeopapposaurus","aegyptosaurus","aeolosaurus","aepisaurus","aerosteon","aetonyx","afrovenator","agathaumas","aggiosaurus","agilisaurus","agnosphitys","agrosaurus","agujaceratops","agustinia","ahshislepelta","ajancingenia","ajkaceratops","alamosaurus","alaskacephale","albalophosaurus","albertaceratops","albertadromeus","albertonykus","albertosaurus","albinykus","albisaurus","alcovasaurus","alectrosaurus","aletopelta","algoasaurus","alioramus","aliwalia","allosaurus","alnashetri","alocodon","altirhinus","altispinax","alvarezsaurus","alwalkeria","alxasaurus","amargasaurus","amargastegos","amargatitanis","amazonsaurus","ammosaurus","ampelosaurus","amphicoelias","amphicoelicaudia","amphisaurus","amtocephale","amtosaurus","amurosaurus","amygdalodon","anabisetia","anasazisaurus","anatosaurus","anatotitan","anchiceratops","anchiornis","anchisaurus","andesaurus","andhrasaurus","angaturama","angloposeidon","angolatitan","angulomastacator","aniksosaurus","animantarx","ankistrodon","ankylosaurus","anodontosaurus","anoplosaurus","anserimimus","antarctopelta","antarctosaurus","antetonitrus","anthodon","antrodemus","anzu","aorun","apatodon","apatoraptor","apatosaurus","appalachiosaurus","aquilops","aragosaurus","aralosaurus","araucanoraptor","archaeoceratops","archaeodontosaurus","archaeopteryx","archaeoraptor","archaeornis","archaeornithoides","archaeornithomimus","arcovenator","arctosaurus","arcusaurus","arenysaurus","argentinosaurus","argyrosaurus","aristosaurus","aristosuchus","arizonasaurus","arkansaurus","arkharavia","arrhinoceratops","arstanosaurus","asiaceratops","asiamericana","asiatosaurus","astrodon","astrodonius","astrodontaurus","astrophocaudia","asylosaurus","atacamatitan","atlantosaurus","atlasaurus","atlascopcosaurus","atopodentatus","atrociraptor","atsinganosaurus","aublysodon","aucasaurus","augustia","augustynolophus","auroraceratops","aurornis","australodocus","australovenator","austrocheirus","austroraptor","austrosaurus","avaceratops","avalonia","avalonianus","aviatyrannis","avimimus","avipes","azendohsaurus","bactrosaurus","bagaceratops","bagaraatan","bahariasaurus","bainoceratops","bakesaurus","balaur","balochisaurus","bambiraptor","banji","baotianmansaurus","barapasaurus","barilium","barosaurus","barrosasaurus","barsboldia","baryonyx","bashunosaurus","basutodon","bathygnathus","batyrosaurus","baurutitan","bayosaurus","becklespinax","beelemodon","beipiaosaurus","beishanlong","bellusaurus","belodon","berberosaurus","betasuchus","bicentenaria","bienosaurus","bihariosaurus","bilbeyhallorum","bissektipelta","bistahieversor","blancocerosaurus","blasisaurus","blikanasaurus","bolong","bonapartenykus","bonatitan","bonitasaura","borealosaurus","boreonykus","borogovia","bothriospondylus","brachiosaurus","brachyceratops","brachylophosaurus","brachypodosaurus","brachyrophus","brachytaenius","brachytrachelopan","bradycneme","brasileosaurus","brasilotitan","bravoceratops","breviceratops","brohisaurus","brontomerus","brontoraptor","brontosaurus","bruhathkayosaurus","bugenasaura","buitreraptor","byranjaffia","byronosaurus","caenagnathasia","caenagnathus","calamosaurus","calamospondylus","calamospondylus","callovosaurus","camarasaurus","camarillasaurus","camelotia","camposaurus","camptonotus","camptosaurus","campylodon","campylodoniscus","canardia","capitalsaurus","carcharodontosaurus","cardiodon","carnotaurus","caseosaurus","cathartesaura","cathetosaurus","caudipteryx","caudocoelus","caulodon","cedarosaurus","cedarpelta","cedrorestes","centemodon","centrosaurus","cerasinops","ceratonykus","ceratops","ceratosaurus","cetiosauriscus","cetiosaurus","changchunsaurus","changdusaurus","changyuraptor","chaoyangsaurus","charonosaurus","chasmosaurus","chassternbergia","chebsaurus","cheneosaurus","chialingosaurus","chiayusaurus","chienkosaurus","chilantaisaurus","chilesaurus","chindesaurus","chingkankousaurus","chinshakiangosaurus","chirostenotes","chondrosteosaurus","chromogisaurus","chuandongocoelurus","chuanjiesaurus","chuanqilong","chubutisaurus","chungkingosaurus","chuxiongosaurus","cinizasaurus","cionodon","citipati","cladeiodon","claorhynchus","claosaurus","clarencea","clasmodosaurus","clepsysaurus","coahuilaceratops","coelophysis","coelosaurus","coeluroides","coelurosauravus","coelurus","colepiocephale","coloradia","coloradisaurus","colossosaurus","comahuesaurus","comanchesaurus","compsognathus","compsosuchus","concavenator","conchoraptor","condorraptor","coronosaurus","corythosaurus","craspedodon","crataeomus","craterosaurus","creosaurus","crichtonpelta","crichtonsaurus","cristatusaurus","crosbysaurus","cruxicheiros","cryolophosaurus","cryptodraco","cryptoraptor","cryptosaurus","cryptovolans","cumnoria","daanosaurus","dacentrurus","dachongosaurus","daemonosaurus","dahalokely","dakosaurus","dakotadon","dakotaraptor","damalasaurus","dandakosaurus","danubiosaurus","daptosaurus","darwinsaurus","dashanpusaurus","daspletosaurus","dasygnathoides","dasygnathus","datanglong","datonglong","datousaurus","daurosaurus","daxiatitan","deinocheirus","deinodon","deinonychus","delapparentia","deltadromeus","demandasaurus","denversaurus","deuterosaurus","diabloceratops","diamantinasaurus","dianchungosaurus","diceratops","diceratus","diclonius","dicraeosaurus","didanodon","dilong","dilophosaurus","dimodosaurus","dinheirosaurus","dinodocus","dinosaurus","dinotyrannus","diplodocus","diplotomodon","diracodon","dolichosuchus","dollodon","domeykosaurus","dongbeititan","dongyangopelta","dongyangosaurus","doratodon","doryphorosaurus","draconyx","dracopelta","dracoraptor","deinonychusskeleton","dracorex","dracovenator","dravidosaurus","dreadnoughtus","drinker","dromaeosauroides","dromaeosaurus","dromiceiomimus","dromicosaurus","drusilasaura","dryosaurus","dryptosauroides","dryptosaurus","dubreuillosaurus","duriatitan","duriavenator","dynamosaurus","dyoplosaurus","dysalotosaurus","dysganus","dyslocosaurus","dystrophaeus","dystylosaurus","echinodon","edmarka","edmontonia","edmontosaurus","efraasia","einiosaurus","ekrixinatosaurus","elachistosuchus","elaltitan","elaphrosaurus","elmisaurus","elopteryx","elosaurus","elrhazosaurus","elvisaurus","emausaurus","embasaurus","enigmosaurus","eoabelisaurus","eobrontosaurus","eocarcharia","eoceratops","eocursor","eodromaeus","eohadrosaurus","eolambia","eomamenchisaurus","eoplophysis","eoraptor","eosinopteryx","eotrachodon","eotriceratops","eotyrannus","eousdryosaurus","epachthosaurus","epanterias","ephoenosaurus","epicampodon","epichirostenotes","epidendrosaurus","epidexipteryx","equijubus","erectopus","erketu","erliansaurus","erlikosaurus","eshanosaurus","euacanthus","eucamerotus","eucentrosaurus","eucercosaurus","eucnemesaurus","eucoelophysis","eugongbusaurus","euhelopus","euoplocephalus","eupodosaurus","eureodon","eurolimnornis","euronychodon","europasaurus","europelta","euskelosaurus","eustreptospondylus","fabrosaurus","falcarius","fenestrosaurus","ferganasaurus","ferganastegos","ferganocephale","fosterovenator","frenguellisaurus","fruitadens","fukuiraptor","fukuisaurus","fukuivenator","fukuititan","fulengia","fulgurotherium","fusinasus","fusuisaurus","futabasaurus","futalognkosaurus","gadolosaurus","galeamopus","galesaurus","gallimimus","galtonia","galveosaurus","galvesaurus","gannansaurus","gansutitan","ganzhousaurus","gargoyleosaurus","garudimimus","gasosaurus","gasparinisaura","gastonia","gavinosaurus","geminiraptor","genusaurus","genyodectes","geranosaurus","gideonmantellia","giganotosaurus","gigantoraptor","gigantoscelus","gigantspinosaurus","gilmoreosaurus","ginnareemimus","giraffatitan","glacialisaurus","glishades","glyptodontopelta","gobiceratops","gobisaurus","gobititan","gobivenator","godzillasaurus","gojirasaurus","gondwanatitan","gongbusaurus","gongpoquansaurus","gongxianosaurus","gorgosaurus","goyocephale","graciliceratops","graciliraptor","gracilisuchus","gravitholus","gresslyosaurus","griphornis","griphosaurus","gryphoceratops","gryponyx","gryposaurus","guaibasaurus","guanlong","gwyneddosaurus","gyposaurus","hadrosauravus","hadrosaurus","haestasaurus","hagryphus","hallopus","halticosaurus","hanssuesia","hanwulosaurus","haplocanthosaurus","haplocanthus","haplocheirus","harpymimus","haya","hecatasaurus","heilongjiangosaurus","heishansaurus","helioceratops","helopus","heptasteornis","herbstosaurus","herrerasaurus","hesperonychus","hesperosaurus","heterodontosaurus","heterosaurus","hexing","hexinlusaurus","heyuannia","hierosaurus","hippodraco","hironosaurus","hisanohamasaurus","histriasaurus","homalocephale","honghesaurus","hongshanosaurus","hoplitosaurus","hoplosaurus","horshamosaurus","hortalotarsus","huabeisaurus","hualianceratops","huanansaurus","huanghetitan","huangshanlong","huaxiagnathus","huaxiaosaurus","huaxiasaurus","huayangosaurus","hudiesaurus","huehuecanauhtlus","hulsanpes","hungarosaurus","huxleysaurus","hylaeosaurus","hylosaurus","hypacrosaurus","hypselorhachis","hypselosaurus","hypselospinus","hypsibema","hypsilophodon","hypsirophus","ichabodcraniosaurus","ichthyovenator","ignavusaurus","iguanacolossus","iguanodon","iguanoides","iguanosaurus","iliosuchus","ilokelesia","incisivosaurus","indosaurus","indosuchus","ingenia","inosaurus","irritator","isanosaurus","ischioceratops","ischisaurus","ischyrosaurus","isisaurus","issasaurus","itemirus","iuticosaurus","jainosaurus","jaklapallisaurus","janenschia","jaxartosaurus","jeholosaurus","jenghizkhan","jensenosaurus","jeyawati","jianchangosaurus","jiangjunmiaosaurus","jiangjunosaurus","jiangshanosaurus","jiangxisaurus","jinfengopteryx","jingshanosaurus","jintasaurus","jinzhousaurus","jiutaisaurus","jobaria","jubbulpuria","judiceratops","jurapteryx","jurassosaurus","juratyrant","juravenator","kaatedocus","kagasaurus","kaijiangosaurus","kakuru","kangnasaurus","karongasaurus","katepensaurus","katsuyamasaurus","kayentavenator","kazaklambia","kelmayisaurus","kemkemia","kentrosaurus","kentrurosaurus","kerberosaurus","khaan","khetranisaurus","kileskus","kinnareemimus","kitadanisaurus","kittysaurus","klamelisaurus","kol","koparion","koreaceratops","koshisaurus","kosmoceratops","kotasaurus","koutalisaurus","kritosaurus","kryptops","krzyzanowskisaurus","kukufeldia","kulceratops","kulindadromeus","kulindapteryx","kunbarrasaurus","kundurosaurus","kunmingosaurus","kuszholia","labocania","labrosaurus","laelaps","laevisuchus","lagerpeton","lagosuchus","lamaceratops","lambeosaurus","lametasaurus","lamplughsaura","lanasaurus","lancangosaurus","lancanjiangosaurus","lanzhousaurus","laosaurus","lapampasaurus","laplatasaurus","lapparentosaurus","laquintasaura","latirhinus","leaellynasaura","leinkupal","leipsanosaurus","lengosaurus","leonerasaurus","lepidocheirosaurus","lepidus","leptoceratops","leptorhynchos","leptospondylus","leshansaurus","lesothosaurus","lessemsaurus","levnesovia","lewisuchus","lexovisaurus","leyesaurus","liaoceratops","liaoningosaurus","libycosaurus","ligabueino","ligabuesaurus","ligomasaurus","likhoelesaurus","liliensternus","limaysaurus","limnornis","limnosaurus","limusaurus","linhenykus","linheraptor","linhevenator","lirainosaurus","lisboasaurus","liubangosaurus","loncosaurus","longisquama","longosaurus","lophorhothon","lophostropheus","loricatosaurus","loricosaurus","losillasaurus","lourinhanosaurus","lourinhasaurus","luanchuanraptor","luanpingosaurus","lucianosaurus","lufengosaurus","lukousaurus","luoyanggia","lurdusaurus","lusitanosaurus","lusotitan","lycorhinus","lythronax","macelognathus","machairasaurus","macrodontophion","macrogryphosaurus","macrophalangia","macroscelosaurus","macrurosaurus","madsenius","magnapaulia","magnirostris","magnosaurus","magulodon","magyarosaurus","mahakala","maiasaura","majungasaurus","majungatholus","malarguesaurus","malawisaurus","maleevosaurus","maleevus","mamenchisaurus","manidens","mandschurosaurus","manospondylus","mantellisaurus","mantellodon","mapusaurus","marasuchus","marisaurus","marmarospondylus","marshosaurus","martharaptor","masiakasaurus","massospondylus","maxakalisaurus","medusaceratops","megacervixosaurus","megadactylus","megadontosaurus","megalosaurus","megapnosaurus","megaraptor","melanorosaurus","mendozasaurus","mercuriceratops","meroktenos","metriacanthosaurus","microcephale","microceratops","microceratus","microcoelus","microdontosaurus","microhadrosaurus","micropachycephalosaurus","microraptor","microvenator","mifunesaurus","minmi","minotaurasaurus","miragaia","mirischia","moabosaurus","mochlodon","mohammadisaurus","mojoceratops","mongolosaurus","monkonosaurus","monoclonius","monolophosaurus","mononychus","mononykus","montanoceratops","morelladon","morinosaurus","morosaurus","morrosaurus","mosaiceratops","moshisaurus","mtapaiasaurus","mtotosaurus","mussaurus","muttaburrasaurus","muyelensaurus","mymoorapelta","naashoibitosaurus","nambalia","nankangia","nanningosaurus","nanosaurus","nanotyrannus","nanshiungosaurus","nanuqsaurus","nanyangosaurus","narambuenatitan","nasutoceratops","natronasaurus","nebulasaurus","nectosaurus","nedcolbertia","nedoceratops","neimongosaurus","nemegtia","nemegtomaia","nemegtosaurus","neosaurus","neosodon","neovenator","neuquenraptor","neuquensaurus","newtonsaurus","ngexisaurus","nigersaurus","ningyuansaurus","niobrarasaurus","nipponosaurus","noasaurus","nodocephalosaurus","nodosaurus","nomingia","nopcsaspondylus","normanniasaurus","nothronychus","notoceratops","notocolossus","notohypsilophodon","nqwebasaurus","nteregosaurus","nurosaurus","nuthetes","nyasasaurus","nyororosaurus","ojoceratops","ojoraptorsaurus","oligosaurus","olorotitan","omeisaurus","omosaurus","onychosaurus","oohkotokia","opisthocoelicaudia","oplosaurus","orcomimus","orinosaurus","orkoraptor","ornatotholus","ornithodesmus","ornithoides","ornitholestes","ornithomerus","ornithomimoides","ornithomimus","ornithopsis","ornithosuchus","ornithotarsus","orodromeus","orosaurus","orthogoniosaurus","orthomerus","oryctodromeus","oshanosaurus","osmakasaurus","ostafrikasaurus","othnielia","othnielosaurus","otogosaurus","ouranosaurus","overosaurus","oviraptor","ovoraptor","owenodon","oxalaia","ozraptor","pachycephalosaurus","pachyrhinosaurus","pachysauriscus","pachysaurops","pachysaurus","pachyspondylus","pachysuchus","padillasaurus","pakisaurus","palaeoctonus","palaeocursornis","palaeolimnornis","palaeopteryx","palaeosauriscus","palaeoscincus","paleosaurus","paludititan","paluxysaurus","pampadromaeus","pamparaptor","panamericansaurus","panguraptor","panoplosaurus","panphagia","pantydraco","paraiguanodon","paralititan","paranthodon","pararhabdodon","parasaurolophus","pareiasaurus","parksosaurus","paronychodon","parrosaurus","parvicursor","patagonykus","patagosaurus","pawpawsaurus","pectinodon","pedopenna","pegomastax","peishansaurus","pekinosaurus","pelecanimimus","pellegrinisaurus","peloroplites","pelorosaurus","peltosaurus","penelopognathus","pentaceratops","petrobrasaurus","phaedrolosaurus","philovenator","phuwiangosaurus","phyllodon","piatnitzkysaurus","picrodon","pinacosaurus","pisanosaurus","pitekunsaurus","piveteausaurus","planicoxa","plateosauravus","plateosaurus","platyceratops","plesiohadros","pleurocoelus","pleuropeltus","pneumatoarthrus","pneumatoraptor","podokesaurus","poekilopleuron","polacanthoides","polacanthus","polyodontosaurus","polyonax","ponerosteus","poposaurus","postosuchus","pradhania","prenocephale","prenoceratops","priconodon","priodontognathus","probrachylophosaurus","probactrosaurus","proceratops","proceratosaurus","procheneosaurus","procompsognathus","prodeinodon","proiguanodon","propanoplosaurus","proplanicoxa","prosaurolophus","protarchaeopteryx","protecovasaurus","protiguanodon","protoavis","protoceratops","protognathosaurus","protognathus","protohadros","protrachodon","proyandusaurus","pseudolagosuchus","psittacosaurus","pteropelyx","pterospondylus","puertasaurus","pukyongosaurus","pulanesaura","pycnonemosaurus","pyroraptor","qantassaurus","qianzhousaurus","qiaowanlong","qijianglong","qinlingosaurus","qingxiusaurus","qiupalong","quaesitosaurus","quetecsaurus","quilmesaurus","rachitrema","rahiolisaurus","rahona","rahonavis","rajasaurus","rapator","rapetosaurus","raptorex","ratchasimasaurus","rayososaurus","razanandrongobe","rebbachisaurus","regaliceratops","regnosaurus","revueltosaurus","rhabdodon","rhadinosaurus","rhinorex","rhodanosaurus","rhoetosaurus","rhopalodon","riabininohadros","richardoestesia","rileya","rileyasuchus","rinchenia","rinconsaurus","rioarribasaurus","riodevasaurus","riojasaurus","riojasuchus","rocasaurus","roccosaurus","rubeosaurus","rukwatitan","ruyangosaurus","sacisaurus","sahaliyania","saichania","saldamosaurus","salimosaurus","saltasaurus","saltopus","saltriosaurus","sanchusaurus","sangonghesaurus","sanjuansaurus","sanpasaurus","santanaraptor","sarahsaurus","sarcolestes","sarcosaurus","sarmientosaurus","saturnalia","sauraechinodon","saurolophus","sauroniops","sauropelta","saurophaganax","saurophagus","sauroplites","sauroposeidon","saurornithoides","saurornitholestes","scansoriopteryx","scaphonyx","scelidosaurus","scipionyx","sciurumimus","scleromochlus","scolosaurus","scutellosaurus","secernosaurus","sefapanosaurus","segisaurus","segnosaurus","seismosaurus","seitaad","selimanosaurus","sellacoxa","sellosaurus","serendipaceratops","shamosaurus","shanshanosaurus","shantungosaurus","shanxia","shanyangosaurus","shaochilong","shenzhousaurus","shidaisaurus","shixinggia","shuangmiaosaurus","shunosaurus","shuvosaurus","shuvuuia","siamodon","siamodracon","siamosaurus","siamotyrannus","sibirosaurus","sigilmassasaurus","silesaurus","siluosaurus","silvisaurus","similicaudipteryx","sinocalliopteryx","sinoceratops","sinocoelurus","sinopeltosaurus","sinornithoides","sinornithomimus","sinornithosaurus","sinosauropteryx","sinosaurus","sinotyrannus","sinovenator","sinraptor","sinusonasus","sirindhorna","skorpiovenator","smilodon","sonidosaurus","sonorasaurus","sphaerotholus","sphenosaurus","sphenospondylus","spinophorosaurus","spinops","spinosaurus","spinostropheus","spinosuchus","spondylosoma","squalodon","staurikosaurus","stegoceras","stegopelta","stegosaurides","stegosaurus","stenonychosaurus","stenopelix","stenotholus","stephanosaurus","stereocephalus","sterrholophus","stokesosaurus","stormbergia","strenusaurus","streptospondylus","struthiomimus","struthiosaurus","stygimoloch","stygivenator","styracosaurus","succinodon","suchomimus","suchosaurus","suchoprion","sugiyamasaurus","skeletonofsuchomimus","sulaimanisaurus","supersaurus","suuwassea","suzhousaurus","symphyrophus","syngonosaurus","syntarsus","syrmosaurus","szechuanosaurus","tachiraptor","talarurus","talenkauen","tambatitanis","tangvayosaurus","tanius","tanycolagreus","tanystropheus","tanystrosuchus","taohelong","tapinocephalus","tapuiasaurus","tarascosaurus","tarbosaurus","tarchia","tastavinsaurus","tatankacephalus","tatankaceratops","tataouinea","tatisaurus","taveirosaurus","tawasaurus","tazoudasaurus","technosaurus","tecovasaurus","tehuelchesaurus","teinurosaurus","teleocrater","telmatosaurus","tenantosaurus","tenchisaurus","tendaguria","tenontosaurus","teratophoneus","teratosaurus","termatosaurus","tethyshadros","tetragonosaurus","texacephale","texasetes","teyuwasu","thecocoelurus","thecodontosaurus","thecospondylus","theiophytalia","therizinosaurus","therosaurus","thescelosaurus","thespesius","thotobolosaurus","tianchisaurus","tianchungosaurus","tianyulong","tianyuraptor","tianzhenosaurus","tichosteus","tienshanosaurus","timimus","timurlengia","titanoceratops","tochisaurus","tomodon","tonganosaurus","tonouchisaurus","torilion","tornieria","torosaurus","torvosaurus","tototlmimus","trachodon","traukutitan","trialestes","triassolestes","tribelesodon","triceratops","trigonosaurus","trimucrodon","trinisaura","troodon","tsaagan","tsagantegia","tsintaosaurus","tsuchikurasaurus","tugulusaurus","tuojiangosaurus","turanoceratops","turiasaurus","tylocephale","tylosteus","tyrannosaurus","tyrannotitan","uberabatitan","udanoceratops","ugrosaurus","ugrunaaluk","uintasaurus","ultrasauros","umarsaurus","unaysaurus","unenlagia","unescoceratops","unicerosaurus","unquillosaurus","urbacodon","utahceratops","utahraptor","uteodon","vagaceratops","vahiny","valdoraptor","valdosaurus","variraptor","vectensia","vectisaurus","velafrons","velocipes","velociraptor","velocisaurus","venaticosuchus","venenosaurus","veterupristisaurus","viavenator","vitakridrinda","vitakrisaurus","volkheimeria","vulcanodon","wadhurstia","wakinosaurus","walgettosuchus","walkeria","walkersaurus","wangonisaurus","wannanosaurus","wellnhoferia","wendiceratops","willinakaqe","wintonotitan","wuerhosaurus","wulagasaurus","wulatelong","wyleyia","wyomingraptor","xenoceratops","xenoposeidon","xenotarsosaurus","xianshanosaurus","xiaosaurus","xiaotingia","xinjiangovenator","xinjiangtitan","xiongguanlong","xixianykus","xixiasaurus","xixiposaurus","xuanhanosaurus","xuanhuaceratops","xuanhuasaurus","xuwulong","yaleosaurus","yamaceratops","yandusaurus","yangchuanosaurus","yaverlandia","yezosaurus","yibinosaurus","yimenosaurus","yingshanosaurus","yinlong","yixianosaurus","yizhousaurus","yongjinglong","yuanmouraptor","yuanmousaurus","yueosaurus","yulong","yunganglong","yunnanosaurus","yunxianosaurus","yurgovuchia","yutyrannus","zalmoxes","zanabazar","zanclodon","zapalasaurus","zapsalis","zaraapelta","zatomus","zephyrosaurus","zhanghenglong","zhejiangosaurus","zhenyuanlong","zhongornis","zhongyuansaurus","zhuchengceratops","zhuchengosaurus","zhuchengtyrannus","ziapelta","zigongosaurus","zizhongosaurus","zuniceratops","zuolong","zuoyunlong","zupaysaurus"];o.Diseases=["abscess","anotia","anthrax","appendicitis","apraxia","argyria","arthritis","asthenia","asthma","astigmatism","atherosclerosis","athetosis","atrophy","beriberi","botulism","bronchitis","brucellosis","bubonic plague","bunion","calculi","cancer","candidiasis","chalazion","chancroid","chavia","cherubism","chickenpox","chlamydia","cholera","chordoma","chorea","coccidioidomycosis","cold","colitis","condyloma","cowpox","cretinism","dehydration","dengue","diabetes","diphtheria","dysentery","ebola","emphysema","encephalitis","epilepsy","fibromyalgia","gangrene","gastroenteritis","goitre","gonorrhea","hepatitis","hypermetropia","hyperopia","hyperthyroidism","hypothyroid","hypotonia","impetigo","infertility","influenza","iritis","jaundice","keloids","kuru","laryngitis","legionellosis","leishmaniasis","leprosy","leptospirosis","leukemia","lice","listeriosis","loiasis","lymphoma","malaria","measles","melanoma","meningitis","migraine","mononucleosis","mumps","myelitis","myoclonus","myopia","myxedema","neoplasm","nightblindness","obesity","osteoarthritis","osteoporosis","otitis","peritonitis","pertussis","phenylketonuria","pilia","plague","pneumonia","poliomyelitis","porphyria","progeria","prostatitis","psittacosis","psoriasis","rabies","rheumatism","rickets","rubella","salmonellosis","scabies","schizophrenia","sciatica","scleroderma","scrapie","scurvy","sepsis","septicemia","shigellosis","shingles","siderosis","silicosis","smallpox","strabismus","strepthroat","swineflu","synovitis","syphilis","taeniasis","teratoma","tetanus","thalassaemia","thrush","thymoma","tinnitus","tonsillitis","trichinosis","trichomoniasis","trisomy","tuberculosis","tularemia","tumor","tungiasis","typhus","ulcers","uremia","urticaria","uveitis","varicella","vitiligo","warts","watkins","yersiniosis"];o.Dragons=["aithusa","alduin","ancalagon","ash","azhdeen","bahamut","blaze","buraki","burn","deathwing","discord","draco","dracolich","draconia","draconis","drago","dragon","draigoch","drake","drakon","drogon","eldrax","errol","fafnir","falkor","falkor","faranth","feyrbrand","firetongue","firnen","flame","flametongue","flammie","fraenir","glaedr","glaurung","glouroth","griffin","hasai","hydra","icefyre","kalameet","kalessin","katla","leviathan","livyathan","melba","melusine","mnementh","moon","narse","nidhogg","orm","orochi","ouroboros","paarthurnax","pyre","ramoth","rhaegal","ruin","ryuu","saphira","scatha","scorch","scorcher","seath","smaug","spyro","stormfly","tiamat","typhon","viserion","volvagia"];o["English Towns"]=["abingdon","accrington","acle","acton","adlington","alcester","aldeburgh","aldershot","alford","alfreton","alnwick","alsager","alston","alton","altrincham","amble","ambleside","amersham","amesbury","ampthill","andover","appleby","arlesey","arundel","ashbourne","ashburton","ashby","ashford","ashington","ashton","askern","aspatria","atherstone","attleborough","axbridge","axminster","aylesbury","aylsham","bacup","bakewell","bampton","banbury","barking","barnard","barnes","barnet","barnoldswick","barnsley","barnstaple","barrow","barton","basildon","basingstoke","batley","battle","bawtry","beaconsfield","beaminster","bebington","beccles","beckenham","bedale","bedford","bedworth","belper","bentham","berkeley","berkhamsted","berwick","beverley","bewdley","bexhill","bexley","bicester","biddulph","bideford","biggleswade","billericay","billingham","bilston","bingham","bingley","birchwood","birkenhead","bishop","blackburn","blackpool","blackrod","blackwater","blandford","bletchley","blyth","bodmin","bognor","bollington","bolsover","bolton","bootle","bordon","boroughbridge","boston","bottesford","bourne","bournemouth","bovey","brackley","bracknell","bradford","brading","bradley","bradninch","braintree","brampton","brandon","braunstone","brentford","brentwood","bridgnorth","bridgwater","bridlington","bridport","brierfield","brierley","brigg","brighouse","brightlingsea","brixham","broadstairs","bromborough","bromley","bromsgrove","bromyard","broseley","brough","broughton","bruton","buckfastleigh","buckingham","bude","budleigh","bulwell","bungay","buntingford","burford","burgess","burgh","burnham","burnley","burntwood","burslem","burton","burton","bury","bury","bushey","buxton","caistor","callington","calne","camborne","camelford","cannock","canvey","carlton","carnforth","carshalton","carterton","castle","castleford","chagford","chapel","chard","charlbury","chatham","chatteris","cheadle","cheltenham","chertsey","chesham","cheshunt","chester","chesterfield","chickerell","chilton","chingford","chippenham","chipping","chipping","chipping","chorley","chorleywood","christchurch","chudleigh","chulmleigh","church","cinderford","cirencester","clare","clay","cleator","cleethorpes","cleobury","clevedon","clitheroe","clun","cockermouth","coggeshall","colburn","colchester","coleford","coleshill","colne","colyton","congleton","conisbrough","corbridge","corby","corringham","corsham","cotgrave","coulsdon","cowes","cramlington","cranbrook","craven","crawley","crediton","crewe","crewkerne","cricklade","cromer","crook","crosby","crowborough","crowland","crowle","croydon","cullompton","dagenham","dalton","darley","darlington","dartford","dartmouth","darwen","daventry","dawley","dawlish","deal","denholme","dereham","desborough","devizes","dewsbury","didcot","dinnington","diss","doncaster","dorchester","dorking","dover","dovercourt","downham","driffield","droitwich","dronfield","dudley","dukinfield","dulverton","dunstable","dunwich","dursley","ealing","earby","earl","earley","easingwold","east","east","east","east","eastbourne","eastleigh","eastwood","eccles","eccleshall","edenbridge","edgware","edmonton","egremont","elland","ellesmere","ellesmere","elstree","emsworth","enfield","epping","epworth","erith","eton","evesham","exmouth","eye","fairford","fakenham","falmouth","fareham","faringdon","farnham","faversham","fazeley","featherstone","felixstowe","ferndown","ferryhill","filey","filton","finchley","fleet","fleetwood","flitwick","folkestone","fordbridge","fordingbridge","fordwich","fowey","framlingham","frinton","frodsham","frome","gainsborough","garstang","gateshead","gillingham","gillingham","glastonbury","glossop","godalming","godmanchester","goole","gorleston","gosport","grange","grantham","grassington","gravesend","grays","great","great","great","greater","grimsby","guildford","guisborough","hadleigh","hailsham","halesowen","halesworth","halewood","halifax","halstead","haltwhistle","harlow","harpenden","harrogate","harrow","hartland","hartlepool","harwich","harworth","haslemere","haslingden","hastings","hatfield","hatfield","hatherleigh","havant","haverhill","hawes","hawkinge","haxby","hayle","haywards","heanor","heathfield","hebden","hedge","hednesford","hedon","helmsley","helston","hemel","hemsworth","hendon","henley","hertford","hessle","hetton","hexham","heywood","high","higham","highbridge","highworth","hinckley","hingham","hitchin","hoddesdon","holbeach","holsworthy","holt","honiton","horley","horncastle","hornsea","hornsey","horsforth","horsham","horwich","houghton","hounslow","howden","huddersfield","hungerford","hunstanton","huntingdon","hyde","hythe","ilford","ilfracombe","ilkeston","ilkley","ilminster","immingham","ingleby","ipswich","irthlingborough","ivybridge","jarrow","keighley","kempston","kendal","kenilworth","kesgrave","keswick","kettering","keynsham","kidderminster","kidsgrove","kimberley","kingsbridge","kingsteignton","kingston","kington","kirkby","kirkbymoorside","kirkham","kirton","knaresborough","knutsford","langport","launceston","leatherhead","lechlade","ledbury","leek","leigh","leighton","leiston","leominster","letchworth","lewes","leyburn","leyton","liskeard","littlehampton","loddon","loftus","long","longridge","longtown","looe","lostwithiel","loughborough","loughton","louth","lowestoft","ludgershall","ludlow","luton","lutterworth","lydd","lydney","lyme","lymington","lynton","lytchett","lytham","mablethorpe","macclesfield","madeley","maghull","maidenhead","maidstone","maldon","malmesbury","maltby","malton","malvern","manningtree","mansfield","marazion","march","margate","marlborough","marlow","maryport","masham","matlock","medlar","melksham","meltham","melton","mere","mexborough","middleham","middlesbrough","middleton","middlewich","midhurst","midsomer","mildenhall","millom","milton","minchinhampton","minehead","minster","mirfield","mitcham","mitcheldean","modbury","morecambe","moreton","moretonhampstead","morley","morpeth","mossley","much","nailsea","nailsworth","nantwich","needham","nelson","neston","newark","newbiggin","newbury","newcastle","newent","newhaven","newlyn","newmarket","newport","newquay","newton","normanton","north","northallerton","northam","northampton","northfleet","northleach","northwich","norton","nuneaton","oakengates","oakham","okehampton","oldbury","oldham","ollerton","olney","ongar","orford","ormskirk","ossett","oswestry","otley","ottery","oundle","paddock","padiham","padstow","paignton","painswick","partington","patchway","pateley","peacehaven","penistone","penkridge","penrith","penryn","penwortham","penzance","pershore","peterlee","petersfield","petworth","pickering","plympton","pocklington","polegate","pontefract","ponteland","poole","porthleven","portishead","portland","potton","poynton","preesall","prescot","princes","prudhoe","pudsey","queenborough","radstock","ramsey","ramsgate","raunds","rawtenstall","rayleigh","reading","redcar","redditch","redenhall","redruth","reepham","reigate","richmond","richmond","ringwood","ripley","rochdale","rochester","rochford","romford","romsey","ross","rothbury","rotherham","rothwell","rowley","royal","royston","rugby","rugeley","rushden","ryde","rye","saffron","salcombe","sale","saltash","sandbach","sandhurst","sandiacre","sandown","sandwich","sandy","sawbridgeworth","saxmundham","scarborough","scunthorpe","seaford","seaham","seaton","sedbergh","sedgefield","selby","selsey","settle","sevenoaks","shaftesbury","shanklin","shefford","shepshed","shepton","sherborne","sheringham","shifnal","shildon","shipston","shirebrook","shoreham","shrewsbury","sidmouth","silloth","silsden","sittingbourne","skegness","skelmersdale","skelton","skipton","sleaford","slough","smethwick","snaith","snodland","soham","solihull","somerton","southall","southam","southborough","southend","southgate","southminster","southport","southsea","southwell","southwick","southwold","spalding","spennymoor","spilsby","sprowston","stafford","staines","stainforth","stalbridge","stalham","stalybridge","stamford","stanhope","stanley","stapleford","staveley","stevenage","steyning","stockport","stocksbridge","stockton","stone","stonehouse","stony","stotfold","stourbridge","stourport","stow","stowmarket","stratford","stretford","strood","stroud","sturminster","sudbury","surbiton","sutton","sutton","swaffham","swanage","swanley","swanscombe","swindon","syston","tadcaster","tadley","tamworth","taunton","tavistock","teignmouth","telford","telscombe","tenbury","tenterden","tetbury","tewkesbury","thame","thatcham","thaxted","thetford","thirsk","thornaby","thornbury","thorne","thorpe","thrapston","tickhill","tidworth","tipton","tisbury","tiverton","todmorden","tonbridge","topsham","torpoint","torquay","totnes","tottenham","totton","tow","towcester","town","tring","trowbridge","twickenham","tynemouth","uckfield","ulverston","uppingham","upton","uttoxeter","uxbridge","ventnor","verwood","wadebridge","wadhurst","wainfleet","wallasey","wallingford","wallsend","walsall","waltham","waltham","walthamstow","walton","wantage","ware","wareham","warminster","warrington","warwick","washington","watchet","watford","wath","watlington","watton","wednesbury","wellingborough","wellington","wells","welwyn","wembley","wendover","westbury","westerham","westhoughton","weston","wetherby","weybridge","weymouth","whaley","whitby","whitchurch","whitehaven","whitehill","whitnash","whittlesey","whitworth","wickham","wickwar","widnes","wigan","wigton","willenhall","willesden","wilmslow","wilton","wimbledon","wimborne","wincanton","winchcombe","winchelsea","windermere","windsor","winsford","winslow","winterton","wirksworth","wisbech","witham","withernsea","witney","wiveliscombe","wivenhoe","woburn","woburn","woking","wokingham","wolsingham","wolverton","wood","woodbridge","woodley","woodstock","wooler","workington","worksop","worthing","wotton","wragby","wymondham","yarm","yarmouth","yate","yateley","yeovil"];o["Ethnic Groups Contemporary"]=["albanians","arabs","armenians","assyrians","azerbaijanis","balochis","bamars","basques","bengalis","berbers","biharis","bosniaks","bulgarians","catalans","chuvash","circassians","congolese","croats","czechs","danes","dutch","english","estonians","faroese","finns","french","gagauz","galician","georgians","germans","gorans","greeks","gujaratis","han","hui","hungarians","icelanders","india","irish","italians","japanese","javanese","jews","kannada","kazakhs","koreans","kurds","kyrgyz","laz","lebanese","macedonians","malayali","malays","manchu","marathi","mongols","norwegians","oromo","pashtuns","persians","poles","portuguese","punjabis","romani","romanians","russians","scotland","scottish","serbs","sindhis","sinhalese","slovaks","slovenes","sorans","spaniards","sundanese","swedes","tamils","tatars","telugu","thais","tibetan","tuaregs","turkmens","turks","ukrainians","uyghur","vietnamese","welsh","zazas","zhuang"];o["Fells In Cumbria"]=["allencrags","angletarnpikes","ardcrags","armbothfell","arnisoncrag","arthurspike","bakestall","bannerdalecrags","barrow","basebrown","bedafell","binsey","birkerfell","birkhousemoor","birks","blackcombe","blackfell","blakefell","bleaberryfell","blearigg","blencathra","bonscalepike","bowfell","bowscalefell","braefell","brandreth","branstree","brimfell","brockcrags","broomfell","brownpike","buckbarrow","buckpike","burnbankfell","calfcrag","carlside","carrockfell","castlecrag","catbells","catstycam","caudalemoor","causeypike","cawfell","cloughhead","coldpike","conistonoldman","cragfell","craghill","crinklecrags","dalehead","dent","dollywaggonpike","dovecrag","dowcrag","eaglecrag","eskpike","fairfield","fellbarrow","firbankfell","fleetwithpike","froswick","gavelfell","gibsonknott","glaramara","gowbarrowfell","grangefell","grasmoor","graycrag","grayrigg","graystones","greatborne","greatcalva","greatcarrs","greatcrag","greatdodd","greatend","greatgable","greatmellfell","greatrigg","greatscafell","greencrag","greengable","greycrag","greyfriar","greyknotts","grike","grisedalepike","hallinfell","hardknott","hartcrag","harterfell","harterfell","hartside","hartsopdodd","hartsophow","haycock","haystacks","helmcrag","helvellyn","hencomb","heronpike","highcrag","highpike","highpike","highraise","highrigg","highseat","highspy","highstile","highstreet","hightove","hindscarth","holmefell","hopegillhead","illbell","illgill","kentmerepike","kidstypike","kirkfell","knott","knottrigg","lankrigg","latrigg","lingfell","lingmell","lingmoorfell","littlehartcrag","littlemellfell","loadpothill","loftcrag","longlandsfell","longside","lonscalefell","lordseat","loughriggfell","lowfell","lowpike","lowthwaitefell","maidenmoor","mealfell","mellbreak","middledodd","middlefell","muncasterfell","mungrisdale","nabscar","nethermostpike","outerside","paveyark","pillar","placefell","raise","rampsgillhead","rannerdaleknotts","ravencrag","redpike","redscrees","restdodd","robinson","rossettpike","rosthwaitefell","sail","saintsundaycrag","salefell","sallows","scafell","scafellpike","scarcrags","scoatfell","seatallan","seathwaitefell","seatsandal","selsidepike","sergeantman","sergeantscrag","sheffieldpike","shipmanknotts","silverhow","skiddaw","slatefell","slightside","sourhowes","southerfell","starlingdodd","steelfell","steelknotts","steeple","stonearthur","stybarrow","swirlhow","tarncrag ","thornthwaitecrag","thunacarknott","troutbecktongue","ullockpike","ullscarf","wainwrights","wallacrag","wandope","wansfell","watchhill","wetherhill","wetherlam","whinlatter","whinrigg","whitelesspike","whiteside","whiteside","whitfell","yewbarrow","yoke"];o.Fish=["albacore","albacore","alewife","alfonsino","algaeeater","alligator","alligatorfish","amberjack","anchovy","anchovy","anemonefish","angelfish","angler","anglerfish","arapaima","archerfish","armorhead","arowana","arrowtooth","aruana","ayu","baikal","bala","ballan","bandfish","bangus","banjo","barb","barbel","barfish","barracuda","barracuda","barracudina","barramundi","barreleye","baskingshark","bass","basslet","basslet","batfish","batfish","batray","beachsalmon","beardfish","betta","bichir","bigeye","bigscale","billfish","bitterling","blackchin","blackfish","blackfish","bleak","blenny","blenny","blobfish","blowfish","blueeye","bluefin","bluefish","bluegill","boafish","boarfish","bocaccio","boga","bonefish","bonito","bonnetmouth","bonytongue","bowfin","boxfish","bream","bream","brill","bristlemouth","bristlenose","brooder","brotula","brotula","buffalo","buffalofish","bullhead","bullheadshark","bullshark","bulltrout","burbot","buri","burmadanio","burrfish","butterflyfish","butterflyray","candiru","candlefish","capelin","cardinalfish","cardinalfish","cardinaltetra","carp","carp","carp","carpetshark","carpetshark","carpsucker","catalufa","catalufa","catfish","catfish","catla","catshark","cavefish","channelbass","channelcatfish","char","char","cherrysalmon","cherubfish","chimaera","chimaera","chinooksalmon","chub","chub","chubsucker","chumsalmon","cichlid","cichlid","cisco","clingfish","clingfish","clownfish","cobbler","cobia","cod","cod","codlet","codlet","codling","coelacanth","coffinfish","cohosalmon","coley","combfish","conger","cookiecutter","coolieloach","cornetfish","corydoras","cowfish","cownose","cowshark","crappie","crestfish","croaker","crocodileshark","cuckoowrasse","cusk","cuskeel","cutlassfish","cutthroateel","cutthroattrout","dab","dace","dace","daggertooth","daggertooth","damselfish","danio","danio","danio","darter","darter","darter","dartfish","dealfish","demoiselle","devario","devilray","dhufish","discus","diver","dogfish","dogfish","dogteeth","dolphinfish","dorab","dorado","dory","dory","dottyback","dragonet","dragonfish","dragonfish","dragongoby","driftfish","drum","duckbill","duskygrouper","eagleray","eel","eelgoby","eelpout","eeltailcatfish","elasmobranch","electriceel","elephantnose","elephantnose","elver","emperor","escolar","escolar","eulachon","fangtooth","featherback","fierasfer","filefish","fingerfish","firefish","flagblenny","flagfin","flagfish","flagtail","flashlightfish","flatfish","flathead","flathead","flier","flounder","flounder","flyingfish","flyingfish","footballfish","fringehead","frogfish","fusilier","galjoen","gangesshark","gar","garibaldi","garpike","ghostfish","ghostflathead","ghostknifefish","ghostpipefish","ghostshark","ghoul","gibberfish","glassfish","glassfish","goatfish","goatfish","goby","goby","goldentrout","goldeye","goldfish","gombessa","goosefish","gourami","gourami","gourami","graveldiver","grayling","grayling","greeneye","greenling","grenadier","groundshark","grouper","grunion","grunt","grunter","gruntsculpin","gudgeon","guitarfish","gulper","gulper","gunnel","gunnel","guppy","gurnard","gurnard","gurnard","haddock","hagfish","hairtail","hake","hake","halfbeak","halfmoon","halibut","halibut","halosaur","hamlet","hammerhead","hammerjaw","handfish","hardhead","harelip","hatchetfish","hatchetfish","hawkfish","herring","herring","hogsucker","hoki","hornshark","horsefish","horsemackerel","houndshark","houndshark","huchen","hussar","icefish","icefish","ide","ilisha","inanga","inconnu","jack","jackfish","javelin","jawfish","jellynose","jewel","jewelfish","jewfish","johndory","kafue","kahawai","kaluga","kanyu","kelpfish","kelpfish","kelpperch","killifish","killifish","kingfish","kingofthesalmon","knifefish","knifefish","knifejaw","koi","kokanee","kokopu","labyrinthfish","ladyfish","lagena","lampfish","lampfish","lamprey","lamprey","lancetfish","lanternfish","lanternshark","largemouth","leaffish","leatherjacket","lefteyeflounder","lemonshark","lemonsole","lenok","leopard","lightfish","limia","linedsole","ling","lingcod","lionfish","lionfish","livebearer","lizardfish","loach","longfin","loosejaw","louvar","luderick","lumpsucker","lungfish","lungfish","mackerel","mackerel","mackerelshark","madtom","mahseer","makoshark","manefish","manofwar","mantaray","marblefish","marlin","masu","medaka","medusafish","megamouthshark","menhaden","menhaden","milkfish","minnow","minnow","minnowofthedeep","modocsucker","mojarra","mola","mola","monkfish","mooneye","moonfish","mora","moray","moray","morid","morwong","mosquitofish","mouthbrooder","mrigal","mudcat","mudfish","mudminnow","mudminnow","mudminnow","mudskipper","mudsucker","mudsucker","mullet","mullet","mummichog","murraycod","muskellunge","mustardeel","nase","needlefish","nibblefish","noodlefish","noodlefish","nurseryfish","nurseshark","oarfish","oilfish","oilfish","oldwife","opah","opaleye","oscar","paddlefish","panga","paradisefish","parore","parrotfish","parrotfish","peacockflounder","peamouth","pearleye","pearlfish","pelicaneel","pencilfish","pencilsmelt","perch","pickerel","pickerel","pigfish","pike","pikeblenny","pikeconger","pikeperch","pilchard","pilotfish","pineapplefish","pineconefish","pinksalmon","pipefish","piranha","pirarucu","pirateperch","plaice","platy","platyfish","pleco","plownose","poacher","pollock","pollock","pollyfish","pomfret","pomfret","pompano","ponyfish","porbeagle","porcupinefish","porgy","powen","prickleback","prickleback","pricklefish","pricklyshark","prowfish","prowfish","puffer","puffer","pufferfish","pumpkinseed","pupfish","pupfish","pntano","quillback","quillfish","rabbitfish","ragfish","rainbowfish","rainbowfish","rainbowtrout","rasbora","ratfish","rattail","ray","razorfish","redfin","redfish","redlip","redmouth","redsalmon","redsnapper","reedfish","reefshark","reefshark","remora","requiemshark","ribboneel","ribbonfish","riceeel","ricefish","ridgehead","rivuline","rivuline","roach","roanokebass","rockbass","rockbeauty","rockcod","rockfish","rockfish","rockfish","rockling","rohu","ronquil","roosterfish","ropefish","roughscad","roughsculpin","roughy","roughy","roundhead","rudd","rudderfish","ruffe","sabertooth","sabertoothfish","sablefish","sailfish","salamanderfish","salmon","salmon","salmonshark","sandbarshark","sandburrower","sanddab","sanddiver","sandeel","sandfish","sandgoby","sandknifefish","sandlance","sandperch","sandroller","sandstargazer","sandtiger","sandtilefish","sardine","sargassumfish","sauger","saury","saury","sawfish","sawshark","scabbardfish","scabbardfish","scalyfin","scat","scissortail","scorpionfish","sculpin","sculpin","sculpin","scup","seabass","seabream","seacatfish","seachub","seadevil","seadragon","seahorse","sealamprey","seamoth","searaven","searobin","searobin","searobin","seasnail","seatoad","shad","shad","shark","sharksucker","sharpnose","sheatfish","sheepshead","sheepshead","shiner","shiner","shrimpfish","siamesefightingfish","sillago","silverside","silverside","sixgillray","sixgillshark","skate","skilfish","skipjacktuna","sleeper","sleepershark","slickhead","slimehead","slipmouth","smelt","smelt","smeltwhiting","snailfish","snakeeel","snakehead","snapper","snapper","snipeeel","snipeeel","snipeeel","snipefish","snoek","snook","snubnose","soldierfish","sole","spadefish","spaghettieel","spearfish","speckledtrout","spiderfish","spikefish","spinefoot","spinyfin","splitfin","spookfish","sprat","springfish","squaretail","squaretail","squaretail","squawfish","squawfish","squawfish","squeaker","squirrelfish","stargazer","stargazer","steelhead","stickleback","stickleback","stingfish","stingray","stingray","stonecat","stonefish","stoneroller","sturgeon","sturgeon","sturgeon","sucker","sunfish","sunfish","sunfish","surfperch","surgeonfish","swallower","swallower","swampeel","swampfish","sweeper","swordfish","swordtail","swordtail","sbalo","tadpolefish","tailor","taimen","tang","tang","tapetail","tarpon","tarwhine","telescopefish","tench","tenpounder","tenuis","tetra","tetra","thornfish","threadfin","threadtail","thresher","tigerbarb","tigerperch","tigershark","tilapia","tilefish","toadfish","tommyruff","tompot","tonguefish","tope","topminnow","torpedo","trahira","treefish","trevally","trevally","triggerfish","triggerfish","triplefin","triplespine","tripletail","trout","troutperch","trumpeter","trumpetfish","trunkfish","tubeblenny","tubeeye","tubeshoulder","tubesnout","tuna","tunny","turbot","turkeyfish","uaru","unicornfish","unicornfish","vanjaram","velvetfish","velvetfish","vendace","vimba","viperfish","viperfish","wahoo","wallago","walleye","walu","warmouth","wartyangler","waryfish","waspfish","weaselshark","weatherfish","weaver","weever","weeverfish","whalefish","whalefish","whalefish","whaleshark","whiff","whitebait","whitecroaker","whitefish","whitefish","whitemarlin","whiteshark","whiteshark","whitetip","whitetipshark","whiting","whiting","wobbegong","wolfeel","wolffish","wolfherring","wormeel","wormfish","wrasse","wrasse","wrymouth","yellowbass","yellowhead","yellowjack","yellowmargin","yellowtail","zander","zebrafish","zebraloach","zebrashark","ziege","zingel"];o["French Forenames"]=["adrien","agns","alain","albert","alexandra","alexandre","alexis","alice","aline","amandine","amlie","andr","andre","anglique","anne","annemarie","annick","annie","antoine","arlette","arnaud","arthur","audrey","aurore","aurlie","aurlien","baptiste","benjamin","benot","bernadette","bernard","bertrand","brigitte","bruno","batrice","camille","carole","caroline","catherine","chantal","charles","chlo","christelle","christian","christiane","christine","christophe","claire","clara","claude","claudine","clmence","clment","colette","coralie","corinne","cyril","ccile","cdric","cline","damien","daniel","danielle","danile","david","delphine","denis","denise","didier","dominique","dominique","dylan","emma","emmanuel","emmanuelle","enzo","estelle","fabien","fabienne","fabrice","fanny","florence","florent","florian","francine","francis","franck","franois","franoise","frdric","gabriel","gatan","galle","genevive","georges","georgette","germaine","ghislaine","gilbert","gilles","ginette","gisle","grgory","guillaume","guy","grard","henri","henriette","herv","hugo","huguette","hlne","ins","irne","isabelle","jacqueline","jacques","janine","jean","jeanclaude","jeanfranois","jeanlouis","jeanluc","jeanmarc","jeanmarie","jeanmichel","jeanne","jeannine","jeanpaul","jeanpierre","jennifer","jessica","jocelyne","jonathan","joseph","josette","jos","jol","jolle","julie","julien","juliette","justine","jrme","karine","kevin","laetitia","laura","laure","laurence","laurent","liliane","lionel","louis","louise","loc","luc","lucas","lucie","lucien","lucienne","ludovic","lydie","la","madeleine","magali","manon","marc","marcel","marcelle","marguerite","maria","marie","mariechristine","marieclaude","mariethrse","marine","marion","martine","mathieu","mathilde","matthieu","maurice","maxime","michal","michel","micheline","michelle","michle","mickal","mireille","mohamed","monique","morgane","muriel","myriam","mlanie","mlissa","nadia","nadine","nathalie","nicolas","nicole","nomie","ocane","odette","odile","olivier","pascal","pascale","patrice","patricia","patrick","paul","paulette","pauline","philippe","pierre","pierrette","quentin","raphal","raymond","raymonde","ren","rene","richard","robert","roger","roland","romain","rgine","rgis","rmi","rmy","sabine","sabrina","samuel","sandra","sandrine","sarah","serge","simon","simone","solange","sonia","sophie","stphane","stphanie","suzanne","sylvain","sylvie","sbastien","sverine","thierry","thomas","tho","thrse","valentin","valrie","vanessa","victor","vincent","virginie","vronique","william","xavier","yann","yannick","yves","yvette","yvonne","liane","lisabeth","lise","lodie","milie","ric","tienne","velyne"];o.Fruit=["acai","apple","avocado","banana","beachplum","bilberry","blackapple","blackberry","blackcherry","blackraspberry","blackwalnut","bloodorange","blueberry","breadfruit","breadnut","bushtomato","canarymelon","cantaloupe","carob","cherry","chestnut","chokeberry","clementine","coconut","cocoplum","coffee","colanut","crabapple","cranberry","cucumber","date","dateplum","dragonfruit","elderberry","elderberry","fig","gooseberry","grape","grapefruit","guava","hogplum","honeydew","huckleberry","juniperberry","keylime","kiwifruit","ladyapple","lemon","lime","lingonberry","loquat","lychee","mandarin","mango","mango","mangosteen","marula","miraclefruit","mulberry","muskmelon","nutmeg","olive","orange","papaya","passionfruit","pawpaw","peach","peanut","pear","pecan","persimmon","pineapple","pitaya","pomegranate","prickypear","pumpkin","quince","raisintree","redmulberry","roseapple","rosehip","satsuma","seagrape","snowberry","starfruit","sugarapple","tamarind","tangerine","watermelon"];o.Furniture=["barstool","beanbag","bed","bench","bunkbed","cabinet","canopybed","chair","chest","closet","coffeetable","couch","cupboard","curtains","desk","divan","drawers","drawingboard","endtable","filingcabinet","fourposterbed","futon","hammock","hatstand","loveseat","mattress","nightstand","ottoman","ottoman","pantry","platformbed","recliner","sleighbed","stool","table","wardrobe","washstand","waterbed","winerack","workbench","writingdesk"];o["German Towns"]=["aach","aachen","aalen","abenberg","abensberg","achern","achim","adelsheim","adenau","adorf","ahaus","ahlen","ahrensburg","aichach","aichtal","aken","albstadt","alfeld","allendorf","allstedt","alpirsbach","alsdorf","alsfeld","alsleben","altdorf","altena","altenberg","altenburg","altenkirchen","altensteig","altentreptow","altlandsberg","alttting","alzenau","alzey","amberg","amorbach","amneburg","andernach","angermnde","anklam","annaberg","annaburg","annweiler","ansbach","apolda","arendsee","arneburg","arnis","arnsberg","arnstadt","arnstein","arnstein","artern","arzberg","aschaffenburg","aschersleben","asperg","attendorn","aub","aue","auerbach","auerbach","augsburg","augustusburg","aulendorf","auma","aurich","alar","babenhausen","bacharach","backnang","baden","baesweiler","baiersdorf","balingen","ballenstedt","balve","bamberg","barby","bargteheide","barmstedt","barntrup","barsinghausen","barth","baruth","bassum","battenberg","baumholder","baunach","baunatal","bautzen","bayreuth","bebra","beckum","bedburg","beelitz","beerfelden","beeskow","beilngries","beilstein","belgern","bendorf","bensheim","berching","berga","bergen","bergen","bergheim","bergisch","bergkamen","bergneustadt","berka","berlin","bernau","bernburg","bernkastel","bernsdorf","bernstadt","bersenbrck","besigheim","betzdorf","betzenstein","beverungen","bexbach","biberach","biedenkopf","bielefeld","biesenthal","bietigheim","billerbeck","bingen","birkenfeld","bischofsheim","bischofswerda","bismark","bitburg","bitterfeld","blankenburg","blankenhain","blaubeuren","blaustein","bleckede","bleicherode","blieskastel","blomberg","blumberg","bobingen","bocholt","bochum","bockenem","bodenwerder","bogen","boizenburg","bonn","bonndorf","bopfingen","boppard","borgentreich","borgholzhausen","borken","borken","borkum","borna","bornheim","bottrop","boxberg","brackenheim","brake","brakel","bramsche","brand","brandenburg","brandis","braubach","braunfels","braunlage","braunsbedra","braunschweig","breckerfeld","bredstedt","breisach","bremen","bremerhaven","bremervrde","bretten","breuberg","brilon","brotterode","bruchkbel","bruchsal","brunsbttel","brunlingen","brck","brel","brhl","brssow","buchen","buchholz","buchloe","buckow","burg","burg","burgau","burgbernheim","burgdorf","burghausen","burgkunstadt","burglengenfeld","burgstdt","burgwedel","burladingen","burscheid","buttelstedt","buttstdt","butzbach","buxtehude","brnau","bblingen","bhlen","bnnigheim","bckeburg","bdelsdorf","bdingen","bhl","bnde","bren","brgel","brstadt","btzow","calau","calbe","calw","castrop","celle","cham","chemnitz","clausthal","clingen","cloppenburg","coburg","cochem","coesfeld","colditz","cologne","coswig","coswig","cottbus","crailsheim","creglingen","creuzburg","creuen","crimmitschau","crivitz","cuxhaven","dachau","dahlen","dahme","dahn","damme","dannenberg","dargun","darmstadt","dassel","dassow","datteln","daun","deggendorf","deidesheim","delbrck","delitzsch","delmenhorst","demmin","dessau","detmold","dettelbach","dieburg","diemelstadt","diepholz","dierdorf","dietenheim","dietfurt","dietzenbach","diez","dillenburg","dillingen","dillingen","dingelstdt","dingolfing","dinkelsbhl","dinklage","dinslaken","dippoldiswalde","dissen","ditzingen","doberlug","dohna","dommitzsch","donaueschingen","donauwrth","donzdorf","dorfen","dormagen","dornburg","dornhan","dornstetten","dorsten","dortmund","dransfeld","drebkau","dreieich","drensteinfurt","dresden","drolshagen","duderstadt","duisburg","dbeln","dbern","dmitz","dlmen","dren","dsseldorf","ebeleben","eberbach","ebermannstadt","ebern","ebersbach","ebersbach","ebersberg","eberswalde","eckartsberga","eckernfrde","edenkoben","egeln","eggenfelden","eggesin","ehingen","ehrenfriedersdorf","eibelstadt","eibenstock","eichsttt","eilenburg","einbeck","eisenach","eisenberg","eisenberg","eisenhttenstadt","eisfeld","eisleben","eislingen","ellingen","ellrich","ellwangen","elmshorn","elsdorf","elsfleth","elsterberg","elsterwerda","elstra","elterlein","eltmann","eltville","elzach","elze","emden","emmelshausen","emmendingen","emmerich","emsdetten","endingen","engen","enger","ennepetal","ennigerloh","eppelheim","eppingen","eppstein","erbach","erbach","erbendorf","erding","erftstadt","erfurt","erkelenz","erkner","erkrath","erlangen","erlenbach","erlensee","erwitte","eschborn","eschenbach","eschershausen","eschwege","eschweiler","esens","espelkamp","essen","esslingen","ettenheim","ettlingen","euskirchen","eutin","falkenberg","falkensee","falkenstein","falkenstein","fehmarn","fellbach","felsberg","feuchtwangen","filderstadt","finsterwalde","fladungen","flensburg","florstadt","flha","flrsheim","forchheim","forchtenberg","forst","frankenau","frankenberg","frankenberg","frankenthal","frankfurt","frankfurt","franzburg","frauenstein","frechen","freiberg","freiberg","freiburg","freilassing","freinsheim","freising","freital","freren","freudenberg","freudenberg","freudenstadt","freyburg","freystadt","freyung","fridingen","friedberg","friedberg","friedland","friedland","friedrichroda","friedrichsdorf","friedrichshafen","friedrichstadt","friedrichsthal","friesack","friesoythe","fritzlar","frohburg","frndenberg","fulda","furth","furtwangen","frstenau","frstenberg","frstenfeldbruck","frstenwalde","frth","fssen","gadebusch","gaggenau","gaildorf","gammertingen","garbsen","garching","gardelegen","garding","gartz","garz","gau","gebesee","gedern","geesthacht","geestland","gefell","gefrees","gehrden","gehren","geilenkirchen","geisa","geiselhring","geisenfeld","geisenheim","geisingen","geislingen","geislingen","geithain","geldern","gelnhausen","gelsenkirchen","gemnden","gemnden","gengenbach","genthin","georgsmarienhtte","gera","gerabronn","gerbstedt","geretsried","geringswalde","gerlingen","germering","germersheim","gernsbach","gernsheim","gerolstein","gerolzhofen","gersfeld","gersthofen","gescher","geseke","gevelsberg","geyer","giengen","gieen","gifhorn","ginsheim","gladbeck","gladenbach","glashtte","glauchau","glinde","glcksburg","glckstadt","gnoien","goch","goldberg","goldkronach","golen","gommern","goslar","gotha","grabow","grafenau","grafenwhr","grafing","gransee","grebenau","grebenstein","greding","greifswald","greiz","greuen","greven","grevenbroich","grevesmhlen","griesheim","grimma","grimmen","groitzsch","gronau","gronau","gro","gro","gro","groalmerode","grobottwar","grobreitenbach","groenehrich","groenhain","grorschen","grorhrsdorf","groschirma","grfenberg","grfenhainichen","grfenthal","grditz","grningen","grnberg","grnhain","grnsfeld","grnstadt","guben","gudensberg","gummersbach","gundelfingen","gundelsheim","gunzenhausen","gppingen","grlitz","gttingen","gnitz","gglingen","gnzburg","gsten","gstrow","gtersloh","gtzkow","haan","hachenburg","hadamar","hagen","hagenbach","hagenow","haiger","haigerloch","hainichen","haiterbach","halberstadt","haldensleben","halle","halle","hallenberg","hallstadt","haltern","halver","hamburg","hameln","hamm","hammelburg","hamminkeln","hanau","hanover","harburg","hardegsen","haren","harsewinkel","hartenstein","hartha","harzgerode","haselnne","haslach","hattersheim","hattingen","hatzfeld","hausach","hauzenberg","havelberg","havelsee","hayingen","hafurt","hechingen","hecklingen","heide","heideck","heidelberg","heidenau","heidenheim","heilbad","heilbronn","heiligenhafen","heiligenhaus","heilsbronn","heimbach","heimsheim","heinsberg","heitersheim","heldrungen","helmbrechts","helmstedt","hemau","hemer","hemmingen","hemmoor","hemsbach","hennef","hennigsdorf","heppenheim","herbolzheim","herborn","herbrechtingen","herbstein","herdecke","herdorf","herford","heringen","heringen","hermeskeil","hermsdorf","herne","herrenberg","herrieden","herrnhut","hersbruck","herten","herzberg","herzberg","herzogenaurach","herzogenrath","hessisch","hessisch","hettingen","hettstedt","heubach","heusenstamm","hilchenbach","hildburghausen","hilden","hildesheim","hillesheim","hilpoltstein","hirschau","hirschberg","hirschhorn","hitzacker","hochheim","hockenheim","hof","hofgeismar","hofheim","hofheim","hohen","hohenberg","hohenleuben","hohenmlsen","hohenstein","hohnstein","hollfeld","holzgerlingen","holzminden","homberg","homberg","homburg","horb","horn","hornbach","hornberg","horstmar","hoya","hoyerswerda","hungen","husum","hchstadt","hchstdt","hhr","hrstel","hxter","hckelhoven","hckeswagen","hfingen","hnfeld","hrth","ibbenbren","ichenhausen","idar","idstein","illertissen","ilmenau","ilsenburg","ilshofen","immenhausen","immenstadt","ingelfingen","ingelheim","ingolstadt","iphofen","iserlohn","isny","isselburg","itzehoe","jarmen","jena","jerichow","jessen","jever","joachimsthal","johanngeorgenstadt","jhstadt","jlich","jterbog","kaarst","kahla","kaisersesch","kaiserslautern","kalbe","kalkar","kaltenkirchen","kaltennordheim","kamen","kamenz","kamp","kandel","kandern","kappeln","karben","karlsruhe","karlstadt","kassel","kastellaun","katzenelnbogen","kaub","kaufbeuren","kehl","kelbra","kelheim","kelkheim","kellinghusen","kelsterbach","kemberg","kemnath","kempen","kempten","kenzingen","kerpen","ketzin","kevelaer","kiel","kierspe","kindelbrck","kirchberg","kirchberg","kirchberg","kirchen","kirchenlamitz","kirchhain","kirchheim","kirchheimbolanden","kirn","kirtorf","kitzingen","kitzscher","kleve","klingenberg","klingenthal","kltze","kltz","knittlingen","koblenz","kohren","kolbermoor","konstanz","konz","korbach","korntal","kornwestheim","korschenbroich","kraichtal","krakow","kranichfeld","krautheim","krefeld","kremmen","krempe","kreuztal","kronach","kronberg","kroppenstedt","krumbach","krpelin","kulmbach","kupferberg","kuppenheim","kusel","kyllburg","kyritz","klleda","knigs","knigsberg","knigsbrunn","knigsbrck","knigsee","knigslutter","knigstein","knigstein","knigswinter","knnern","kthen","khlungsborn","klsheim","knzelsau","laage","laatzen","ladenburg","lage","lahnstein","lahr","laichingen","lambrecht","lampertheim","landau","landau","landsberg","landsberg","landshut","landstuhl","langelsheim","langen","langenau","langenburg","langenfeld","langenhagen","langenselbold","langenzenn","langewiesen","lassan","laubach","laucha","lauchhammer","lauchheim","lauda","lauenburg","lauf","laufen","laufenburg","lauffen","lauingen","laupheim","lauscha","lauta","lauter","lauterbach","lauterecken","lauterstein","lebach","lebus","leer","lehesten","lehrte","leichlingen","leimen","leinefelde","leinfelden","leipheim","leipzig","leisnig","lemgo","lengenfeld","lengerich","lennestadt","lenzen","leonberg","leun","leuna","leutenberg","leutershausen","leutkirch","leverkusen","lich","lichtenau","lichtenau","lichtenberg","lichtenfels","lichtenfels","lichtenstein","liebenau","liebenwalde","lieberose","liebstadt","limbach","limburg","lindau","linden","lindenberg","lindenfels","lindow","lingen","linnich","linz","lippstadt","lohmar","lohne","lohr","loitz","lollar","lommatzsch","lorch","lorch","lorsch","lucka","luckau","luckenwalde","ludwigsburg","ludwigsfelde","ludwigshafen","ludwigslust","ludwigsstadt","lugau","lunzenau","lychen","lbau","lffingen","lhne","lningen","lrrach","lwenstein","lnitz","lbbecke","lbben","lbbenau","lbeck","lbtheen","lbz","lchow","ldenscheid","ldinghausen","lgde","lneburg","lnen","ltjenburg","ltzen","magdala","magdeburg","mahlberg","mainbernheim","mainburg","maintal","mainz","malchin","malchow","manderscheid","mannheim","mansfeld","marbach","marburg","marienberg","marienmnster","markdorf","markgrningen","markkleeberg","markneukirchen","markranstdt","marktbreit","marktheidenfeld","marktleuthen","marktoberdorf","marktredwitz","marktsteft","marl","marlow","marne","marsberg","maulbronn","maxhtte","mayen","mechernich","meckenheim","medebach","meerane","meerbusch","meersburg","meinerzhagen","meiningen","meisenheim","meien","meldorf","melle","mellrichstadt","melsungen","memmingen","menden","mendig","mengen","meppen","merkendorf","merseburg","merzig","meschede","mettmann","metzingen","meuselwitz","meyenburg","mekirch","mestetten","michelstadt","miesbach","miltenberg","mindelheim","minden","mirow","mittenwalde","mitterteich","mittweida","moers","monheim","monheim","monschau","montabaur","moosburg","moringen","mosbach","munderkingen","munich","munster","murrhardt","mylau","mrkisch","mckern","mckmhl","mlln","mnchengladbach","mrfelden","mssingen","mcheln","mgeln","mhlacker","mhlberg","mhldorf","mhlhausen","mhlheim","mhlheim","mlheim","mlheim","mllheim","mllrose","mnchberg","mncheberg","mnchenbernsdorf","mnnerstadt","mnsingen","mnster","mnstermaifeld","mnzenberg","nabburg","nagold","naila","nassau","nasttten","nauen","naumburg","naumburg","naunhof","nebra","neckarbischofsheim","neckargemnd","neckarsteinach","neckarsulm","neresheim","netphen","nettetal","netzschkau","neu","neu","neu","neubrandenburg","neubukow","neubulach","neuburg","neudenau","neuenburg","neuenbrg","neuenhaus","neuenrade","neuenstadt","neuenstein","neuerburg","neuffen","neuhaus","neukalen","neukirchen","neukirchen","neukloster","neumark","neumarkt","neumarkt","neumnster","neunburg","neunkirchen","neuruppin","neusalza","neuss","neustadt","neustadt","neustadt","neustadt","neustadt","neustadt","neustadt","neustadt","neustadt","neustadt","neustadt","neustadt","neustadt","neustrelitz","neus","neutraubling","neuwied","neutting","nidda","niddatal","nidderau","nideggen","niebll","niedenstein","nieder","niederkassel","niedernhall","niederstetten","niederstotzingen","nieheim","niemegk","nienburg","nienburg","nierstein","niesky","nittenau","norden","nordenham","norderney","norderstedt","nordhausen","nordhorn","northeim","nortorf","nossen","nuremberg","nrdlingen","nrtingen","ober","oberasbach","oberharz","oberhausen","oberhof","oberkirch","oberkochen","oberlungwitz","obermoschel","obernburg","oberndorf","obernkirchen","oberriexingen","obertshausen","oberursel","oberviechtach","oberweibach","oberwesel","oberwiesenthal","ochsenfurt","ochsenhausen","ochtrup","oderberg","oebisfelde","oederan","oelde","oelsnitz","oelsnitz","oer","oerlinghausen","oestrich","oettingen","offenbach","offenburg","ohrdruf","olbernhau","olching","oldenburg","oldenburg","olfen","olpe","olsberg","oppenau","oppenheim","oranienbaum","oranienburg","orlamnde","ornbau","ortenberg","ortrand","oschatz","oschersleben","osnabrck","osterburg","osterburken","osterfeld","osterhofen","osterholz","osterode","osterwieck","ostfildern","ostheim","osthofen","ostritz","otterberg","otterndorf","ottweiler","overath","owen","paderborn","papenburg","pappenheim","parchim","parsberg","pasewalk","passau","pattensen","pausa","pegau","pegnitz","peine","peitz","penig","penkun","penzberg","penzlin","perleberg","petershagen","pfaffenhofen","pfarrkirchen","pforzheim","pfreimd","pfullendorf","pfullingen","pfungstadt","philippsburg","pinneberg","pirmasens","pirna","plattling","plau","plaue","plauen","plettenberg","pleystein","plochingen","pln","pockau","pocking","pohlheim","polch","porta","potsdam","pottenstein","preetz","premnitz","prenzlau","pressath","preuisch","prichsenstadt","pritzwalk","prm","puchheim","pulheim","pulsnitz","putbus","putlitz","pneck","pttlingen","quakenbrck","quedlinburg","querfurt","quickborn","rabenau","radeberg","radebeul","radeburg","radevormwald","radolfzell","raguhn","rahden","rain","ramstein","ranis","ransbach","rastatt","rastenberg","rathenow","ratingen","ratzeburg","rauenberg","raunheim","rauschenberg","ravensburg","ravenstein","recklinghausen","rees","regen","regensburg","regis","rehau","rehburg","rehna","reichelsheim","reichenbach","reichenbach","reinbek","reinfeld","reinheim","remagen","remda","remscheid","remseck","renchen","rendsburg","rennerod","renningen","rerik","rethem","reutlingen","rheda","rhede","rheinau","rheinbach","rheinberg","rheinbllen","rheine","rheinfelden","rheinsberg","rheinstetten","rhens","rhinow","ribnitz","richtenberg","riedenburg","riedlingen","riedstadt","rieneck","riesa","rietberg","rinteln","rochlitz","rockenhausen","rodalben","rodenberg","rodewisch","rodgau","roding","romrod","ronneburg","ronnenberg","rosbach","rosenfeld","rosenheim","rosenthal","rostock","rotenburg","rotenburg","roth","rothenburg","rothenburg","rothenfels","rottenburg","rottenburg","rottweil","roleben","rowein","rudolstadt","ruhla","ruhland","runkel","rutesheim","rbel","rdental","rdermark","rmhild","rsrath","rtha","rthenbach","rttingen","rtz","rdesheim","rsselsheim","rthen","saalburg","saalfeld","saarbrcken","saarburg","saarlouis","sachsenhagen","sachsenheim","salzgitter","salzkotten","salzwedel","sandau","sandersdorf","sangerhausen","sankt","sankt","sankt","sarstedt","sassenberg","sassnitz","sayda","schalkau","schauenstein","scheer","scheibenberg","scheinfeld","schelklingen","schenefeld","schelitz","schieder","schifferstadt","schillingsfrst","schiltach","schirgiswalde","schkeuditz","schklen","schleiden","schleiz","schleswig","schlettau","schleusingen","schlieben","schlitz","schlotheim","schlo","schlchtern","schlsselfeld","schmalkalden","schmallenberg","schmlln","schnackenburg","schnaittenbach","schneeberg","schneverdingen","schongau","schopfheim","schorndorf","schortens","schotten","schramberg","schraplau","schriesheim","schrobenhausen","schrozberg","schwaan","schwabach","schwabmnchen","schwaigern","schwalbach","schwalmstadt","schwandorf","schwanebeck","schwarzenbach","schwarzenbach","schwarzenbek","schwarzenberg","schwarzenborn","schwarzheide","schwedt","schweich","schweinfurt","schwelm","schwentinental","schwerin","schwerte","schwetzingen","schwbisch","schwbisch","schmberg","schnau","schnau","schnberg","schnebeck","schneck","schnewalde","schningen","schnsee","schnwald","schppenstedt","schttorf","sebnitz","seehausen","seeland","seelow","seelze","seesen","sehnde","seifhennersdorf","selb","selbitz","seligenstadt","selm","selters","senden","sendenhorst","senftenberg","selach","siegburg","siegen","sigmaringen","simbach","simmern","sindelfingen","singen","sinsheim","sinzig","soest","solingen","solms","soltau","sondershausen","sonneberg","sonnewalde","sonthofen","sontra","spaichingen","spalt","spangenberg","speicher","spenge","speyer","spremberg","springe","sprockhvel","stade","stadt","stadtallendorf","stadtbergen","stadthagen","stadtilm","stadtlengsfeld","stadtlohn","stadtoldendorf","stadtprozelten","stadtroda","stadtsteinach","starnberg","staufen","staufenberg","stavenhagen","stafurt","stein","steinach","steinau","steinbach","steinbach","steinfurt","steinheim","steinheim","stendal","sternberg","stockach","stolberg","stollberg","stolpen","storkow","straelen","stralsund","strasburg","straubing","strausberg","strehla","stromberg","stutensee","stuttgart","sten","sthlingen","suhl","sulingen","sulz","sulzbach","sulzbach","sulzburg","sundern","syke","smmerda","sdliches","sen","tambach","tangerhtte","tangermnde","tann","tanna","tauberbischofsheim","taucha","taunusstein","tecklenburg","tegernsee","telgte","teltow","templin","tengen","tessin","teterow","tettnang","teublitz","teuchern","teupitz","teuschnitz","thale","thalheim","thannhausen","tharandt","themar","thum","tirschenreuth","titisee","tittmoning","todtnau","torgau","torgelow","tornesch","traben","traunreut","traunstein","trebbin","trebsen","treffurt","trendelburg","treuchtlingen","treuen","treuenbrietzen","triberg","tribsees","trier","triptis","trochtelfingen","troisdorf","trossingen","trostberg","tuttlingen","twistringen","tging","tnisvorst","tnning","tbingen","uebigau","ueckermnde","uelzen","uetersen","uffenheim","uhingen","ulm","ulmen","ulrichstein","ummerstadt","unkel","unna","unterschleiheim","usedom","usingen","uslar","vacha","vaihingen","vallendar","varel","vechta","velbert","velburg","velden","velen","vellberg","vellmar","velten","verden","veringenstadt","verl","versmold","vetschau","viechtach","viernheim","viersen","villingen","vilsbiburg","vilseck","vilshofen","visselhvede","vlotho","voerde","vogtsburg","vohburg","vohenstrau","volkach","volkmarsen","vreden","vhrenbach","vhringen","vlklingen","wachenheim","wadern","waghusel","wahlstedt","waiblingen","waibstadt","waischenfeld","waldbrl","waldeck","waldenbuch","waldenburg","waldenburg","waldershof","waldheim","waldkappel","waldkirch","waldkirchen","waldkraiburg","waldmnchen","waldsassen","waldshut","walldorf","walldrn","wallenfels","walsrode","waltershausen","waltrop","wanfried","wangen","wanzleben","warburg","waren","warendorf","warin","warstein","wassenberg","wasserburg","wassertrdingen","wasungen","wedel","weener","wegberg","wegeleben","wehr","weida","weiden","weikersheim","weil","weil","weilburg","weilheim","weilheim","weimar","weingarten","weinheim","weinsberg","weinstadt","weismain","weiterstadt","weienberg","weienburg","weienfels","weienhorn","weiensee","weienstadt","weienthurm","weiwasser","welzheim","welzow","wemding","wendlingen","werben","werdau","werder","werdohl","werl","wermelskirchen","wernau","werne","werneuchen","wernigerode","wertheim","werther","wertingen","wesel","wesenberg","wesselburen","wesseling","westerburg","westerstede","wetter","wetter","wettin","wetzlar","widdern","wiehe","wiehl","wiesbaden","wiesensteig","wiesloch","wiesmoor","wildau","wildberg","wildenfels","wildeshausen","wilhelmshaven","wilkau","willebadessen","willich","wilsdruff","wilster","wilthen","windischeschenbach","windsbach","winnenden","winsen","winterberg","wipperfrth","wirges","wismar","wissen","witten","wittenberg","wittenberge","wittenburg","wittichenau","wittingen","wittlich","wittmund","wittstock","witzenhausen","woldegk","wolfach","wolfenbttel","wolfhagen","wolframs","wolfratshausen","wolfsburg","wolfstein","wolgast","wolkenstein","wolmirstedt","worms","wriezen","wunsiedel","wunstorf","wuppertal","wurzbach","wurzen","wustrow","wyk","wchtersbach","wrrstadt","wrth","wrth","wrth","wlfrath","wrselen","wrzburg","xanten","zahna","zarrentin","zehdenick","zeil","zeitz","zell","zell","zell","zella","zerbst","zeulenroda","zeven","ziegenrck","zierenberg","ziesar","zirndorf","zittau","zossen","zschopau","zweibrcken","zwenkau","zwickau","zwiesel","zwingenberg","zwnitz","zrbig","zlpich","hringen","stringen","bach","berlingen"];o["Home Appliances"]=["airconditioner","airfryer","airioniser","aromalamp","atticfan","backboiler","barbecue","boxmangle","breadmaker","canopener","ceilingfan","cheesemelter","clothesdryer","clothesiron","coffeemaker","convectionoven","cornroaster","crepemaker","deepfryer","dishdrainer","dishwasher","espressomachine","fanheater","firepot","foodsteamer","futondryer","grill","hairdryer","hairiron","hotplate","humidifier","icebox","ironman","kettle","mangle","microwave","mousetrap","multicooker","oilheater","oven","oven","pancakemachine","patioheater","popcornmaker","pressurecooker","pressurefryer","radiator","refrigerator","ricecooker","ricepolisher","sandwichgrill","sandwichtoaster","sewingmachine","slowcooker","solarcooker","stove","stove","sumppump","television","tiepress","toaster","toasteroven","trouserpress","turkeyfryer","vacuumcleaner","vacuumfryer","waffleiron","washerdryer","washingmachine","waterboiler","watercooker","waterheater","windowfan"];o["Icelandic Forenames"]=["aage","aagot","aaron","abel","abela","abigael","abraham","ada","adam","adda","addi","add","add","adel","adela","adela","adran","adrana","adrel","adel","adlf","agata","agatha","agla","agnar","agnea","agnes","agneta","agni","aga","akira","alanta","alba","albert","alberta","albna","alda","aldar","aldn","alds","alena","aleta","aletta","alex","alexa","alexander","alexandra","alexandra","alexis","alexstrasa","alexa","alexus","alfa","alfons","alfred","alfre","alffa","ali","alice","alida","alla","allan","alli","all","alma","almar","alrekur","alrn","alva","alvar","alvilda","alvin","alda","alna","als","alsa","amadea","amal","amala","amanda","amela","amil","amila","amos","amy","amr","amra","am","anala","anastasa","anders","andra","andrea","andreas","andri","andr","andr","andrs","andrana","anes","anetta","anfinn","angantr","angela","angela","angelka","angi","anika","anita","anja","ann","anna","annabella","annalsa","annar","annarr","annas","anne","annel","annel","annes","annetta","anney","annika","anna","ann","anthony","anton","antona","antonus","antnus","anka","anna","anta","aprl","ara","aran","ards","arent","ares","arey","ari","arilus","arinbjrg","arinbjrn","aris","arisa","arja","armena","arna","arnald","arnaldur","arnar","arnberg","arnbergur","arnbjrg","arnbjrn","arnborg","arnds","arndr","arnes","arney","arnfinna","arnfinnur","arnfreyr","arnfrur","arngarur","arngeir","arngerur","arngils","arngrmur","arngunnur","arnheiur","arnhildur","arnika","arnkatla","arnkell","arnlaug","arnlaugur","arnleif","arnleifur","arnljt","arnljtur","arnln","arnmundur","arnmur","arnoddur","arnold","arnrs","arnrn","arnsteinn","arnviur","arnr","arnra","arnlfur","arnrur","arnr","arnra","aron","arthur","arthr","artr","ara","arana","aranna","arana","arel","arela","arella","arn","arna","ars","arus","asael","askja","askur","aspar","assa","astrid","asa","asr","atala","atena","athena","atla","atlanta","atlas","atli","aurora","austar","austmann","austmar","austri","auberg","aubergur","aubert","aubjrg","aubjrn","aubjrt","auds","augeir","aukell","auln","aumundur","auna","aun","aurn","auun","auunn","auur","auur","aulfur","axel","axelma","axela","aalberg","aalbergur","aalbert","aalbjrg","aalbjrn","aalbjrt","aalborg","aalborgar","aalds","aalfrur","aalgeir","aalheiur","aalmundur","aalrur","aalrs","aalsteina","aalsteinn","aalsteinunn","aalveig","aalvkingur","alf","aena","baldey","baldrn","baldur","baldvin","baldvina","baldwin","baltasar","bambi","barbara","barbra","barri","bari","bassi","bass","bastan","baugur","bebba","begga","beinir","beinteinn","beitir","bekan","belinda","bella","benedikt","benedikta","bengta","benidikt","benidikta","benjamn","benna","benney","benn","benon","bent","benta","bentey","bentna","benv","bena","benta","benn","benn","bera","berent","berg","bergds","bergey","bergfinnur","bergfrur","bergheiur","berghildur","berghreinn","bergjn","berglaug","berglind","bergljt","bergln","bergmann","bergmanna","bergmar","bergmundur","bergn","bergrn","bergrn","bergrs","bergrn","bergsteinn","bergsveina","bergsveinn","bergur","bergvin","bergr","bergra","berit","bernhard","bernhar","bernharur","berni","berndus","bernda","bersi","berta","bertel","bertha","bertram","bessi","bess","bestla","beta","betana","bets","bett","betel","bil","bill","birgir","birgit","birgitta","birkir","birna","birnir","birta","birtingur","birtir","birtna","bjargar","bjargds","bjargey","bjargheiur","bjarghildur","bjarglind","bjargmundur","bjargr","bjarkan","bjarkar","bjarkey","bjarki","bjarklind","bjarma","bjarmar","bjarmi","bjarnar","bjarnds","bjarney","bjarnfinnur","bjarnfreur","bjarnfrur","bjarngerur","bjarnharur","bjarnheiur","bjarnhildur","bjarnhinn","bjarni","bjarnlaug","bjarnlaugur","bjarnleifur","bjarnrn","bjarnsteinn","bjarnveig","bjarnlfur","bjarn","bjarnrur","bjarnr","bjarnra","bjartey","bjartmann","bjartmar","bjartmey","bjartur","bjartr","bjlan","bjlfur","bjrg","bjrgey","bjrgheiur","bjrghildur","bjrgmundur","bjrgvin","bjrglfur","bjrglfur","bjrk","bjrn","bjrney","bjrnfrur","bjrnlfur","bjrt","bley","blklukka","blds","blngur","blr","blr","blvar","bln","bla","blmey","bobba","boga","bogds","bogey","bogga","boghildur","bogi","bolli","borg","borgar","borgds","borghildur","borgn","borgrn","borglfur","borgr","borgra","botna","boi","braga","braghildur","bragi","brandds","brandur","brands","breki","bresi","brestir","briet","brigitta","brimar","brimds","brimhildur","brimi","brimir","brimrn","brit","britt","britta","brjnn","broddi","bruno","brynds","brynfrur","bryngeir","bryngerur","brynheiur","brynhildur","brynja","brynjar","brynjlfur","brynjlfur","brynleifur","brynmar","brynn","brynsteinn","bryntr","brynr","br","brk","brana","branna","bret","brmi","brmir","burkney","burkni","bylgja","bra","brur","bring","bringur","bron","bb","bna","bas","bel","bi","bt","bthildur","btlfur","brkur","bvar","bi","bri","camilla","caritas","carl","carla","carmen","cathinca","cecil","cecilia","cecila","cesar","charlotta","charlotte","christa","christel","christian","christina","christine","christopher","clara","csar","crus","dagbjartur","dagbjrg","dagbjrt","dagfari","dagfinnur","dagfrur","daggeir","daggrs","dagheiur","dagmann","dagmar","dagmey","dagn","dagnr","dagrn","dagur","dagr","dalbert","dalds","daley","dalla","dalli","dallilja","dalmann","dalmar","dalrs","dalvin","dala","damjan","damon","dan","dana","danelus","daney","danfrur","danheiur","danhildur","daniel","danival","dante","dana","danel","danela","danella","danval","dara","darri","dara","darus","dav","daey","dai","dana","debora","debra","demus","dend","dennis","denel","didda","dilja","dilj","dimma","dimmbl","dimmey","dirik","dofri","dolli","dominik","donna","doris","dorothea","drauma","draumey","draupnir","dreki","drengur","droplaug","drfa","drtt","drfn","dufgus","dufakur","dugfs","dvalinn","dynr","dja","da","dana","danna","dma","ds","dsa","dsella","dmedes","da","dmald","dmaldi","dmaldur","dmhildur","dnald","dnaldur","dr","dra","drey","dri","dris","drothea","drtea","drthea","dseus","dgg","dgun","da","dfa","di","dna","dnn","dnna","drborg","drfinna","dri","drleif","drley","drmundur","drunn","ebba","ebbi","ebeneser","ebenezer","eberg","ebonney","edda","eddi","edel","edgar","edil","edilon","edit","edith","edvard","edvin","edward","edlon","efema","efram","egeda","eggert","eggrn","eggr","egill","egla","eik","eikar","eileia","eilfur","einar","einbjrg","einds","einey","einfrur","einhildur","einir","einrn","einvarur","einna","einr","eir","eirds","eirfinna","eirn","eirka","eirkur","eirn","eivin","eivr","eiar","ein","eiunn","eiur","elba","elberg","elbert","eldar","eldbjrg","eldey","eldgrmur","eldjrn","eldlilja","eldmar","eldon","eldrn","eldur","eldr","eldra","eleina","elektra","elena","elenborg","elentnus","elfa","elfar","elfrur","elfur","elimar","elina","elinborg","elinr","elis","elisabeth","elka","ella","ellen","ellert","elley","elli","ellisif","ellii","elly","elln","ells","ell","elma","elmar","elna","elsa","elsabet","elsie","els","els","elva","elvar","elvi","elvin","elvira","elvis","elvra","elv","el","ela","ela","elana","elas","eleser","elmar","eln","elna","elnbergur","elnbet","elnbjrg","elnbjrt","elnborg","elnds","elngunnur","elnheiur","elnmundur","elnrs","eln","elnr","elrs","els","elsa","elsabet","elsabeth","elza","emanel","embla","embrek","emela","emelana","emelna","emerald","emeralda","emil","emila","emilana","emilanna","emil","emma","emmanel","emm","em","enea","eneka","engilbert","engilbjartur","engilbjrt","engiljn","engill","engilr","engilrs","engla","enika","enja","enok","enta","enla","eres","eric","erik","erika","erin","erla","erlar","erlen","erlendur","erling","erlingur","erln","ermenrekur","erna","ernest","ernir","ernst","eron","erpur","esekel","esja","esjar","eskja","esmeralda","esra","estefan","ester","esther","estiva","ethel","etna","eufema","eva","evald","evan","evelyn","evert","evey","evfema","evgena","evlala","evan","evta","ey","eyberg","eybjrg","eybjrt","eyborg","eyds","eyfrur","eygerur","eygl","eyhildur","eyja","eyjaln","eyjlfur","eylaugur","eyleif","eyleifur","eyln","eymar","eymundur","eyrkur","eyrs","eyrn","eysteinn","eyvar","eyveig","eyvindur","eyvr","eyrur","eyr","eyra","ena","evald","evar","evar","fabrisus","falgeir","falur","fannar","fannberg","fannds","fanney","fanngeir","fannlaug","fanny","fann","febrn","felix","fema","fengur","fenrir","ferdinand","ferdnand","fertram","feykir","filip","filippa","filippus","filippa","filipa","finn","finna","finnbjrg","finnbjrk","finnbjrn","finnboga","finnbogi","finnborg","finnds","finney","finnfrur","finngeir","finnjn","finnlaug","finnlaugur","finnrs","finnur","finnvarur","fjalar","fjallds","fjarki","fjla","fjlar","fjlmundur","fjlnir","fjlvar","fjrnir","flemming","flosi","flki","flra","flrent","flvent","folda","forni","fossmar","francis","frank","frankln","frans","fransiska","franz","franziska","fregn","freybjrn","freyds","freygarur","freygerur","freyja","freylaug","freyleif","freymar","freymundur","freymur","freyr","freysteinn","freyviur","freyr","friedrich","frigg","fritz","friberg","fribergur","fribert","fribjrg","fribjrn","fribjrt","friborg","frids","fridra","friey","frifinna","frifinnur","frigeir","frigerur","frijn","frijna","frilaug","frilaugur","frileif","frileifur","friln","frimann","frimar","frimey","frimundur","frin","fririk","fririka","fririkka","frirs","frirn","frisemd","fristeinn","friur","friveig","frivin","frijfur","frir","frira","frosti","frostrs","frn","frnn","frr","frmann","fra","frsteinn","frur","fri","frmar","frn","funi","fura","fylkir","ffnir","flki","fa","fdes","ffa","ffill","flki","fnn","fsi","gabriel","gabrel","gabrela","gabrella","gael","galdur","gamalel","garibaldi","garpur","garri","garar","gaui","gauja","gaukur","gauthildur","gauti","gautrekur","gautur","gautviur","gefjun","gefn","geir","geira","geirarur","geirbjrg","geirds","geirfinna","geirfinnur","geirfrur","geirharur","geirhildur","geirhjrtur","geirhvatur","geiri","geirlaug","geirlaugur","geirleifur","geirl","geirmundur","geirn","geirrur","geirrur","geirrn","geirtryggur","geirvaldur","geirlfur","geirjfur","geirrur","geisli","gellir","georg","georga","gerald","geri","gera","gerar","gerur","gestheiur","gestn","gestrn","gestur","gilbert","gill","gill","gilmar","gils","gilslaug","gissunn","gissur","gizur","gjaflaug","gjki","glora","gl","gla","glbjrt","glds","gley","gli","gl","glmur","gneisti","gn","gnpur","gnr","gottsklk","gottsveinn","goi","gomundur","grani","grankell","gregor","grein","greipur","greppur","gret","greta","gretar","grethe","grettir","grl","grt","grta","grtar","grma","grmar","grmey","grmheiur","grmhildur","grmkell","grmlaugur","grmnir","grmur","grmlfur","grmlfur","gra","gullbr","gulli","gullveig","gull","gumi","gumma","gunnar","gunnberg","gunnbjrg","gunnbjrn","gunnbjrt","gunnborg","gunnds","gunndr","gunndra","gunnella","gunnfinna","gunnfrur","gunngeir","gunnhallur","gunnhara","gunnheiur","gunnhildur","gunnjna","gunnlaug","gunnlaugur","gunnleif","gunnleifur","gunnl","gunnrur","gunnrn","gunnsteinn","gunnur","gunnvaldur","gunnveig","gunnvr","gunnlfur","gunnli","gunn","gunnr","gunnra","gunnrunn","gurr","gustav","gutti","guttormur","guberg","gubergur","gubjarni","gubjartur","gubjrg","gubjrn","gubjrt","guborg","gubrandur","guds","gufinna","gufinnur","gufreur","gufrur","gugeir","gujn","gujna","gulaug","gulaugur","guleif","guleifur","guleikur","guln","gumann","gumar","gumey","gumon","gumunda","gumundur","gumundna","guni","gun","gurur","gurur","gurur","gurn","gusteina","gusteinn","guvarur","guveig","guveigur","guvin","gur","gylfi","gyrir","gytta","gya","gyja","gyrur","gfa","gflaug","ga","gdeon","ggja","ggjar","ggur","gsela","gsla","gsley","gsli","gsln","gslrn","gslunn","gslna","gta","ga","gg","gi","gi","ga","gstaf","gstav","ggjar","gmir","hadda","haddi","haddur","hadd","hafberg","hafbjrg","hafborg","hafds","hafey","hafgrmur","haflia","haflii","haflna","hafnar","hafni","hafn","hafrs","hafrn","hafsteina","hafsteinn","hafr","hafra","hagaln","hagbarur","hagbert","haki","halla","hallbera","hallberg","hallbjrg","hallbjrn","hallborg","hallds","halldr","halldra","halley","hallfreur","hallfrur","hallgarur","hallgeir","hallgerur","hallgils","hallgrmur","hallgunnur","hallkatla","hallkell","hallmann","hallmar","hallmundur","halln","hallrn","hallsteinn","hallur","hallvarur","hallveig","hallvr","hallr","hamar","hanna","hannes","hanney","hannibal","hans","hansa","hansna","harald","haraldur","harpa","harri","harry","harr","hartmann","hartvig","hauksteinn","haukur","haukvaldur","hauur","heba","hebba","hedda","hed","heida","heikir","heilmur","heimir","heinrekur","heisi","heia","heiar","heiarr","heiberg","heibert","heibjrg","heibjrk","heibjrt","heibr","heids","heilaug","heilindur","heila","heimann","heimar","heimundur","hein","heirekur","heirs","heirn","heiur","heiveig","hekla","hektor","helen","helena","helga","helgi","hella","helma","helmt","hemmert","hendrik","hendrikka","henning","henn","henrietta","henrik","henrika","henry","henretta","henr","hera","herbert","herbjrg","herbjrn","herbjrt","herborg","herds","herfinnur","herfrur","hergeir","hergerur","hergill","hergils","herjlfur","herlaug","herlaugur","herleifur","herluf","hermann","hermundur","hermna","hermur","hersila","hersir","hersteinn","hersveinn","herta","hertha","hervar","hervarur","hervin","hervr","herrur","hilarus","hilbert","hilda","hildar","hildegard","hildibergur","hildibjrg","hildibrandur","hildigeir","hildigerur","hildiglmur","hildigunnur","hildimar","hildimundur","hildingur","hildir","hildirur","hildisif","hildir","hildur","hilma","hilmar","hilmir","himinbjrg","himri","hind","hinrik","hinrika","hinrikka","hjallkr","hjalta","hjaltaln","hjaltey","hjalti","hjarnar","hjlmar","hjlmds","hjlmey","hjlmfrur","hjlmgeir","hjlmgerur","hjlmrs","hjlmrn","hjlmtr","hjlmur","hjlmveig","hjlmr","hjrds","hjrfrur","hjrleif","hjrleifur","hjrn","hjrtfrur","hjrtur","hjrtr","hjrvar","hlagerur","hleiar","hleiur","hlini","hljmur","hlynur","hlds","hlgestur","hlr","hlf","hlfar","hln","hlar","hlberg","hlkk","hlmundur","hlur","hlvarur","hlver","hnefill","hnikar","hnikarr","holgeir","holger","holti","hrafn","hrafna","hrafnar","hrafnbergur","hrafnborg","hrafnds","hrafney","hrafnffa","hrafngerur","hrafnheiur","hrafnhildur","hrafnkatla","hrafnkell","hrafnlaug","hrafntinna","hrafntr","hrannar","hrappur","hraunar","hraunds","hrefna","hreggviur","hreimur","hreinds","hreinn","hreiar","hreimar","hringur","hrollaugur","hrolleifur","hrund","hrrekur","hrmnir","hraldur","hrar","hrbjartur","hri","hrlfds","hrlfur","hrmundur","hrgeir","hrmar","hrn","hrvar","hrlfur","hrnn","hrtur","hugberg","hugbjrg","hugbjrt","hugborg","hugds","hugi","huginn","hugleikur","hugljf","hugo","hugrn","hug","huld","hulda","huldar","huldrn","hulds","huxley","hvannar","hvnn","hyltir","hylur","hkon","hkona","hleygur","hlfdan","hlfdn","hmundur","hrekur","hrlaugur","hsteinn","hvar","hvarr","hvarur","hngur","hnir","hinn","hram","hlm","hlmar","hlmbert","hlmbjrg","hlmds","hlmfastur","hlmfrur","hlmgeir","hlmgrmur","hlmkell","hlmsteinn","hlmr","hseas","hdd","hgna","hgni","hrn","hrur","hskuldur","hur","hbert","hg","hmi","hna","hnbjrg","hnbogi","hnds","hngerur","hni","hnn","hnrur","ida","idda","illugi","ilmur","ilse","ilas","immanel","imm","ina","inda","india","indiana","indra","indrii","ind","inda","indana","indra","inga","ingberg","ingds","ingeborg","inger","ingey","ingheiur","inghildur","ingi","ingiberg","ingibergur","ingibert","ingibjartur","ingibjrg","ingibjrn","ingibjrt","ingiborg","ingifinna","ingifrur","ingigerur","ingilaug","ingileif","ingileifur","ingiln","ingimagn","ingimar","ingimara","ingimunda","ingimundur","ingirur","ingirs","ingisl","ingivaldur","ingiveig","ingir","ingjaldur","ingmar","ingrid","ingrn","ingunn","ingvaldur","ingvar","ingveldur","ingvi","inglfur","ingr","inna","irena","irene","irja","irma","irmeln","irm","irpa","isabel","isabella","ismael","issi","ia","iunn","jack","jafet","jagger","jaki","jakob","jakobna","jakop","jamil","jan","jana","jane","janetta","jannika","janus","jara","jarfi","jarl","jarla","jarn","jarrur","jasmn","jason","jenetta","jenna","jenni","jenny","jenn","jens","jensna","jeremas","jes","jesper","jess","jochum","johan","john","joshua","jovina","judith","julian","jrnbr","jrngerur","jrngrmur","jtgeir","jtmundur","jtvarur","ja","jakim","jann","janna","jds","jel","jfrur","jhann","jhanna","jhannes","ji","jln","jmar","jmundur","jn","jna","jnanna","jnar","jnas","jnasna","jnatan","jnbjrg","jnbjrn","jnbjrt","jnds","jndr","jndra","jney","jnfrur","jngeir","jnger","jnheiur","jnhildur","jninna","jnmundur","jnn","jnsteinn","jnda","jnna","jn","jnr","jra","jrlaug","jrunn","jrur","jsafat","jsavin","jsebna","jsef","jsefn","jsefna","jsep","jsteinn","jsa","jvin","jkla","jkull","jkulrs","jrfi","jrgen","jrgna","jrmundur","jrri","jrundur","jrvar","jrvi","jdea","jdit","jl","jla","jlan","jlana","jlanna","jletta","jlhuld","jlna","jlrs","jlus","jn","jn","jna","jnana","jnus","jrek","kai","kaj","kaja","kakali","kaktus","kala","kaldi","kaleb","kali","kalla","kalman","kalmann","kalmar","kamal","kamilla","kamma","kam","kapitola","kaprasus","kaptla","kara","karel","karen","karim","karin","karitas","karkur","karl","karla","karles","karli","karlinna","karlotta","karlna","karmen","karol","karolna","karvel","kar","karn","karna","kartas","kar","karln","karlna","karn","kaspar","kasper","kassandra","kastel","kata","katarna","katarnus","katerna","katharina","kathinka","katinka","katla","katrn","katrna","kat","kat","kaln","kell","kendra","keran","ketilbjrg","ketilbjrn","ketilfrur","ketill","ketilrur","kidd","kiljan","kilan","kira","kirsten","kirstn","kitt","kjalar","kjallakur","kjalvr","kjaran","kjartan","kjarval","kjrr","kji","klara","klemens","klementna","klemenz","klepatra","klda","klngur","knrr","kntur","koggi","kolbeinn","kolbjrg","kolbjrn","kolbr","kolbrn","kolds","kolfinna","kolfinnur","kolfreyja","kolgrma","kolgrmur","kolka","kolmar","kolskeggur","kolur","kolviur","konkorda","konn","konr","konstantnus","korka","korml","kormkur","kornela","kornelus","kort","korn","kraki","kris","krista","kristall","kristberg","kristbergur","kristbjrg","kristbjrn","kristborg","kristdr","kristel","kristens","kristensa","krister","kristey","kristfinnur","kristfrur","kristgeir","kristgerur","kristian","kristin","kristine","kristinn","kristjana","kristjn","kristjn","kristjna","kristlaug","kristlaugur","kristleifur","kristlind","kristln","kristmann","kristmar","kristmundur","kristn","kristofer","kristrs","kristrn","kristvaldur","kristvarur","kristveig","kristvin","kristvina","kristana","kristanna","kristn","kristna","kristfer","kristlna","krist","kristr","kristra","krumma","krummi","kra","kvasir","kveldlfur","kr","kra","kri","kja","kk","kpur","krekur","laila","lambert","lana","lara","lars","laufar","laufey","laufheiur","laufhildur","lauga","laugey","laugheiur","laugi","lauritz","lala","lea","leif","leifur","leiknir","leikn","leila","leilfur","lena","leo","leon","leonard","leonhard","leonra","lev","lex","leyla","le","lena","lenra","lepold","lilja","liljar","liljurs","lilj","lill","lilla","lillian","lilly","lill","lily","lil","lind","linda","lindar","lindberg","lindds","lingn","lisbeth","listaln","liv","ljsbjrg","ljsbr","ljslfur","ljtunn","ljtur","ljfur","lofn","loftur","loftveig","logey","logi","lokbr","loki","lotta","louisa","louise","lovsa","lomundur","ludvig","lukka","lundi","lydia","lyda","lyngar","lyngheiur","lr","lra","lrensna","lrent","lrentus","lretta","lrey","lrus","lla","lr","lam","lba","lf","lfds","ll","ln","lna","lnberg","lnbjrg","lnds","lneik","lney","lnhildur","lni","lsa","lsabet","lsandra","lsbet","lsebet","lv","la","lreley","lrens","lrenz","ltus","lca","lkas","lna","lsinda","lsa","lter","lther","lvsa","lsa","lvg","lvk","lvka","lda","lra","ltingur","lur","madd","magda","magdalena","magga","maggey","maggi","magg","magna","magnds","magnea","magnes","magney","magnfrur","magngeir","magnheiur","magnhildur","magni","magns","magnsna","magn","magnr","magnra","magalena","maj","maja","makan","malen","malena","malika","malla","mala","maln","malna","manda","manfred","manfre","manel","manela","manella","mar","mara","marbjrn","mards","marel","marela","marella","maren","marey","marfrur","margeir","margit","margot","margret","margrjet","margrt","margrmur","margunnur","marheiur","mari","maria","marie","marijn","marik","marinella","marin","marit","marja","marjn","mark","markrn","mark","marks","markr","marlaug","marlena","marln","marls","maron","marri","mars","marsa","marsellus","marsela","marselna","marsibil","marsila","mars","marta","marteinn","marten","martha","marthen","martin","martna","marvin","mary","marzibil","marzilus","mar","mara","maram","maran","marana","maranna","maras","marn","marna","marnella","marn","maron","mars","marsa","marsl","mart","maruerla","marus","marlna","mar","mathilda","mathas","matta","mattea","matthea","matthilda","matthildur","mattha","matthas","matti","mattana","mattas","mattna","matt","max","maxima","maximus","maa","mads","masl","meda","mekkin","mekkin","mekkn","melinda","melissa","melkorka","melkor","melklmur","melrakki","melrs","mensalder","merkr","messana","methsalem","metta","metsalem","mey","meyvant","michael","mikael","mikaela","mikaelna","mikjll","mikkael","mikkalna","mikkel","milda","mildinberg","mildrur","milla","mill","minerva","minna","minney","minn","miriam","mirja","mirjam","mirra","mist","mjallds","mjallhvt","mjaveig","mjll","mjllnir","mjlnir","moli","mona","monika","morgan","morgunsl","moritz","mosi","muggur","munda","mundheiur","mundhildur","mundna","muni","muninn","myrk","myrkvi","myrra","mbil","mlfrur","mlhildur","mlmfrur","mnads","mney","mni","mr","mra","mrus","ma","mas","mla","mmir","mmsa","mnerva","mr","mra","mranda","mrel","mtra","m","ma","mds","meiur","mey","mheiur","mi","mna","mnika","mnka","mri","mrits","mses","mi","mrk","mrur","mli","mr","mra","mrkjartan","mrn","nadia","nadja","nada","nana","nanna","nann","nans","naom","narfi","natalie","natala","natan","natanael","natanel","nathan","nam","neisti","nella","nell","nenna","nenni","neptnus","nicolas","nicole","nikanor","nikolai","nikolas","nikoletta","nikuls","nikta","niklna","nils","ninja","ninna","nibjrg","njla","njll","njla","njrur","nonni","norbert","norma","normann","normann","nttmrur","nttsl","nttlfur","n","nels","nls","nna","nn","na","nam","nel","ni","nni","nra","nri","ntt","nvember","nkkvi","nmi","nbjrg","nvar","obba","odda","oddbergur","oddbjrg","oddbjrn","oddfreyja","oddfreyr","oddfrur","oddgeir","oddgerur","oddhildur","oddi","oddkell","oddlaug","oddleif","oddleifur","oddmar","oddn","oddrn","oddsteinn","oddur","oddvar","oddveig","oddvr","oddr","oktava","oktavus","okt","oktva","oktvus","olaf","olav","olga","olgeir","oliver","olivert","olivia","oll","ora","orfeus","orka","ormar","ormheiur","ormhildur","ormur","orri","orvar","otkatla","otkell","otri","otta","otti","ott","otur","pamela","parmes","pars","patrek","patrekur","patricia","patrick","patrik","patrisa","pedr","per","perla","peta","peter","petra","petrea","petronella","petrna","petrnella","petrs","petrn","petrnella","pjetur","polly","poll","pra","pror","pla","plds","pley","plfrur","plhanna","plheiur","plhildur","pll","plmar","plmey","plmfrur","plmi","plrn","pln","plna","ptrna","ptrn","ptur","pa","rafael","rafn","rafnar","rafney","rafnhildur","rafnkell","ragna","ragnar","ragnbjrg","ragney","ragnfrur","ragnheiur","ragnhildur","ragel","rakel","ramna","randaln","randver","randur","rand","ranka","rannva","rannveig","rannver","rasmus","rea","rebekka","refur","reginbaldur","reginbjrg","reginn","regna","reidar","reifnir","reimar","rein","reinar","reinhart","reinhold","remek","renata","rex","reykdal","reyn","reynald","reynar","reynds","reynheiur","reynhildur","reynir","reyr","richard","rikhar","rikharur","rikka","ripley","rita","robert","rolf","ronald","ronja","ror","roxanna","rudolf","runi","runn","runlfur","rut","ruth","rn","rgeir","rhildur","rvarur","rkarur","rkey","rkhar","rkharur","rn","rta","r","rbert","rberta","rbjrg","rlant","rman","rme","rs","rsa","rsalind","rsala","rsanna","rsant","rsar","rsberg","rsbjrg","rsborg","rsela","rsenberg","rsey","rsfrur","rshildur","rsi","rsinberg","rsinkar","rsinkara","rsinkrans","rsinkransa","rska","rslaug","rslind","rslinda","rsln","rsmann","rsmary","rsmar","rsmunda","rsmundur","rsn","rfn","rgn","rgnvald","rgnvaldur","rgnvar","rkkvi","rskva","rull","rbar","rben","rb","rdlf","rn","rna","rnar","rnds","rnhildur","rrik","rr","rtur","sabrna","sabna","safr","saga","sakaras","salbjrg","salds","salgerur","salka","salma","salmann","salmar","saln","salome","salvar","salvr","saln","salna","salme","salmon","samson","samel","sandel","sandra","sandri","sandur","sanna","santa","sara","sarna","saxi","sebastian","sebastan","sefana","seifur","seimur","selena","selja","selka","selma","sena","septma","sera","serena","sesar","sesela","sesil","sesila","sesselja","sessela","sessila","sif","sigbergur","sigbert","sigbjartur","sigbjrn","sigds","sigdr","sigdra","sigfastur","sigfinnur","sigfreur","sigfr","sigfrur","sigfs","sigga","siggeir","siggerur","sighvatur","sigjn","siglaugur","sigmann","sigmar","sigmunda","sigmundur","signa","signar","signhildur","sign","sigri","sigrid","sigrkur","sigrur","sigrn","sigsteinn","sigtryggur","sigtr","sigur","sigurbaldur","sigurberg","sigurbergur","sigurbirna","sigurbjarni","sigurbjartur","sigurbjrg","sigurbjrn","sigurbjrt","sigurborg","sigurbrandur","sigurbra","sigurdrf","sigurdrfa","sigurds","sigurdr","sigurdra","sigurey","sigurfinna","sigurfinnur","sigurflj","sigurgeir","sigurgeira","sigurgestur","sigurgrmur","sigurgsli","sigurhanna","sigurhans","sigurhelga","sigurhildur","sigurhjrtur","sigurjn","sigurjna","sigurkarl","sigurlaug","sigurlaugur","sigurleif","sigurleifur","sigurlilja","sigurlinn","sigurlinni","sigurlii","sigurlogi","sigurls","sigurln","sigurlna","sigurmann","sigurmar","sigurmon","sigurmunda","sigurmundur","sigurnanna","sigurnas","sigurnjas","siguroddur","sigurpll","sigurrs","sigursteina","sigursteinn","sigursveinn","sigurunn","sigurvaldi","sigurveig","sigurvin","sigurvina","sigurst","sigursta","sigura","sigurur","sigurli","sigursk","sigurrn","sigurr","sigurra","sigvalda","sigvaldi","sigvarur","sigyn","sigrur","sigr","sigra","silfa","silfrn","silf","silja","silka","silla","silli","silva","silvana","silva","sindri","sirra","sirr","sirr","siv","siva","sjafnar","sjana","sjfn","skafti","skapti","skarpheiur","skarphinn","skefill","skeggi","skellir","skjldur","skorri","skrggur","skugga","skuggi","skuld","skr","skringur","skrnir","ski","skla","skli","sklna","skta","smiur","smyrill","smri","snjfrur","snjka","snjfrur","snjki","snjlaug","snjlaugur","snjlfur","snorra","snorri","snbjartur","snbjrg","snbjrn","snbjrt","snborg","snbr","snds","snfrur","snhlm","snlaug","snlaugur","snr","snringur","snrs","snrn","snvar","snvarr","snr","snt","soffanas","soffa","sofie","sofa","solveig","sonja","sonn","sophanas","sophia","sophie","sophus","spartakus","spori","spi","stanley","stapi","starkaur","starri","stasa","stefan","stefana","stefana","stefnir","stefn","stefnn","steina","steinar","steinarr","steinberg","steinbergur","steinbjrg","steinbjrn","steinborg","steinds","steindr","steindra","steiney","steinfinnur","steinfrur","steingerur","steingrmur","steinhildur","steini","steinkell","steinlaug","steinmann","steinmar","steinmur","steinn","steinrs","steinrur","steinrn","steinunn","steinvarur","steinvr","steinlfur","steinr","steinra","stella","stirnir","stjarna","stjarney","stormur","sturla","sturlaugur","sturri","styr","styrbjrn","styrgerur","styrkr","styrmir","styrr","stgheiur","stgrn","stgur","stna","strlfur","sumarlii","sumarlna","sumarrs","sunna","sunnefa","sunneva","sunniva","sunnva","susan","svafa","svafar","svala","svali","svalrn","svan","svana","svanberg","svanbergur","svanbjrg","svanbjrn","svanbjrt","svanborg","svands","svaney","svanfrur","svangeir","svanheiur","svanhildur","svanhvt","svanhlm","svani","svanlaug","svanlaugur","svanmundur","svanrs","svanur","svanrur","svanr","svava","svavar","svea","sveina","sveinar","sveinberg","sveinbjartur","sveinbjrg","sveinbjrn","sveinborg","sveinds","sveiney","sveinfrur","sveingerur","sveinhildur","sveinjn","sveinlaug","sveinlaugur","sveinmar","sveinn","sveinrs","sveinrn","sveinsna","sveinungi","sveinveig","sveinr","svend","sverre","sverrir","svfnir","svlnir","svrfuur","sylgja","sylva","sylvia","sylva","sberg","sbergur","sbjartur","sbjrg","sbjrn","sbjrt","sborg","sbr","sds","sfinna","sfrur","shildur","si","sla","slaug","slaugur","smann","smi","smunda","smundur","sn","sr","srs","srn","ssl","sunn","svald","svaldur","svar","svarr","svin","svr","sr","sa","smon","smona","smona","srnir","srus","ss","sta","svar","sfus","sfnas","skrates","sl","sla","slberg","slbergur","slbjartur","slbjrg","slbjrn","slbjrt","slborg","slbr","slbrn","slds","sldgg","sley","slfrur","slgerur","slhildur","slimann","slkatla","sllilja","slmar","slmundur","sln","slon","slrs","slrn","slveig","slver","slvin","slvr","sln","snata","slmundur","slva","slvar","slvey","slvi","slvna","sren","srli","sla","slamt","ssan","ssanna","srus","tala","tala","tamar","tamara","tandri","tanja","tanya","tanya","tana","tara","tarfur","tea","teitn","teitur","tekla","telma","tera","teresa","teresa","thea","thelma","theodr","theodra","theresa","thedr","thedra","thomas","thor","thorberg","thr","tindar","tindra","tindri","tindur","tinna","tinni","tirsa","tjaldur","tjrfi","tjrvi","tobas","todda","tolli","tonni","torbjrg","torfey","torfheiur","torfhildur","torfi","trausti","tristan","tristana","trostan","tryggva","tryggvi","tryggvna","tr","trmann","tumas","tumi","tyrfingur","ta","talilja","tbor","tbr","tmi","tmon","tmoteus","tmteus","tna","tstran","tbas","tb","ti","tka","tki","tmas","tr","tta","tr","tra","ubbi","uggi","ugla","ulrich","una","undna","uni","unna","unnar","unnbjrg","unnbjrn","unnds","unndr","unnsteinn","unnur","unnr","urar","urur","uxi","vagn","vagna","vagnbjrg","vagnfrur","vaka","vakur","vala","valberg","valbergur","valbjrg","valbjrk","valbjrn","valbjrt","valborg","valbrandur","valdemar","valdheiur","valdi","valdimar","valds","valdr","valentn","valentna","valentnus","valera","valey","valfrur","valgar","valgarur","valgeir","valgera","valgerur","valg","valhildur","valka","valkyrja","vallaur","vall","valmar","valmundur","valn","valrs","valrn","valsteinn","valter","valtr","valur","valva","valves","valant","val","valrur","valr","vanda","varmar","vara","vatnar","veig","veiga","veigar","veigur","venn","venus","ver","vera","vermundur","vernhar","vernharur","veronika","vernika","vernka","vestar","vestmar","vetrarrs","veturlii","vibeka","victor","victora","vigds","vigfs","vigg","vigln","vignir","vign","vigri","vigtr","vigur","vikar","viktor","viktoria","viktora","vilberg","vilbergur","vilbert","vilbjrn","vilbogi","vilborg","vilbrandur","vilds","vilfrur","vilgeir","vilgerur","vilhelm","vilhelmna","vilhjlmur","vili","viljar","vilji","villa","villi","villimey","vilma","vilmar","vilmundur","viln","vinbjrg","vincent","vindar","vinjar","vinn","vins","virgill","virgina","viar","vija","vijar","von","voney","vopni","vords","vorm","vli","vpni","vr","vbjrg","vbjrn","vds","vgeir","vgerur","vkell","vlaug","vlaugur","vmundur","vn","vsteinn","vbekka","vf","vfill","vgberg","vgdgg","vggunnur","vglundur","vgmar","vgmundur","vgsteinn","vgr","vkingur","vsa","var","vir","vla","vletta","vggur","vlundur","vrur","vttur","walter","werner","wilhelm","willard","william","willum","willy","ylfa","ylfur","ylja","ylur","ylva","ymir","yngvar","yngvi","ynja","yrja","yrkill","yrsa","zakara","zakaras","zophanas","zophonas","zphanas","zphonas","gst","gsta","gstna","ki","lfar","lfds","lfey","lfgeir","lfgerur","lfgrmur","lfheiur","lfhildur","lfrs","lfrn","lfsl","lfur","lfr","mundi","rbjartur","rbjrg","rbjrn","rbjrt","rds","rela","relus","rgeir","rgils","rlaug","rmann","rmey","rna","rnds","rney","rnheiur","rni","rnna","rn","rsl","rsll","rsl","rveig","rvk","rra","rn","rra","s","sa","sberg","sbergur","sbjrg","sbjrn","sborg","sds","sdr","sfrur","sgautur","sgeir","sgerur","sgils","sgrmur","shildur","si","skatla","skell","sla","slaug","slaugur","sleif","slkur","smar","smundur","sn","srs","srur","srn","st","sta","stbjrg","stbjrn","stbjrt","stds","stfrur","stgeir","stgerur","stheiur","sthildur","stmar","stmundur","strur","strkur","strur","strs","strn","stvald","stvaldur","stvar","stveig","stvin","strur","str","stra","svaldur","svarur","svr","slfur","sr","gileif","gir","sa","sgerur","sir","var","varr","vr","an","da","gor","ma","mi","na","r","ren","rena","ris","runn","sabel","sabella","sadra","safold","sak","salind","sar","sarr","sbjrg","sbjrn","sds","seldur","sey","sfold","sgeir","sgerur","shildur","sidr","sidra","sis","slaug","sleif","sleifur","slilja","smael","smar","smey","sold","srael","srn","ssl","sveig","sl","slfur","unn","va","van","var","da","feigur","fela","la","laf","lafur","lafa","lafna","lava","li","liver","liva","lna","lver","lf","mar","mi","sa","sk","skar","skln","svald","svaldur","svfur","tta","ttar","ttarr","inn","n","gmunda","gmundur","gn","gri","lnir","lrn","lveig","lver","lvir","ndlfur","nundur","rbrn","rk","rlaugur","rlygur","rn","rnlfur","rvar","sp","ssur","xar","a","ddi","lfa","lfar","lfds","lfey","lfgeir","lfheiur","lfhildur","lfhinn","lfkell","lfljtur","lfrn","lftr","lfur","lla","lrik","na","ndna","ranus","rana","rsla","ja","ma","mir","r","rar","rr","ala","angbrandur","eba","engill","eyr","eds","edra","ingey","inur","irandi","irik","jlfi","jstar","jstlfur","jann","jar","jbjrg","jbjrn","jgeir","jhildur","jleifur","jmar","jrekur","jvarur","jlfur","oka","oll","orberg","orbergur","orbjrg","orbjrn","orbrandur","orfinna","orfinnur","orgarur","orgautur","orgeir","orgerur","orgestur","orgils","orgnr","orgrma","orgrmur","orgsl","orkatla","orkell","orlaug","orlaugur","orleif","orleifur","orleikur","orlkur","ormar","ormundur","ormur","orri","orsteina","orsteinn","orstna","orvaldur","orvar","orvarur","rastar","rymur","r","rinn","rndur","rttur","rstur","ra","rmar","rur","ula","ura","ur","urur","ur","yri","yrill","yrnir","yrnirs","yr","r","ra","ranna","rar","rarinn","rarna","rbergur","rbjarni","rbjrg","rbjrn","rds","relfa","relfur","rey","rfrur","rgnr","rgrmur","rgunna","rgunnur","rhaddur","rhalla","rhalli","rhallur","rhanna","rheiur","rhildur","ri","rinn","rir","rkatla","rlaug","rlaugur","rleif","rleifur","rlindur","rmar","rmundur","rn","rodda","roddur","rormur","rsteina","rsteinn","rsteinunn","rstna","runn","rveig","rvr","ra","rur","rlfur","rrn","ll","fa"];o["Irish Forenames"]=["abbn","affraic","agaistn","aibhiln","aibhne","aifric","ailbhe","ailin","ailn","aindri","aindras","ainm","ainnleas","aislin","aisling","aislinn","aithche","ambrs","amhalgaidh","amhlaoibh","anluan","anmchadh","anne","antin","aodh","aodhagn","aodhamair","aodhnait","aodhn","aogn","aoibhe","aoibheann","aoibhin","aoibhinn","aoife","aonghus","ardghal","ardghar","art","artr","athracht","abhinn","bairre","baothghalach","barra","barrdhubh","basil","beacn","bearach","bearchn","bearnrd","beinidict","blanche","blinne","blth","blthnaid","bran","breandn","breanndn","breasal","brian","brighdn","brighid","brochadh","branainn","brd","brdn","brnach","buadhach","buadhnait","bbhinn","cacht","cailean","cainneach","cairbre","caitln","caitrn","caitrona","calbhach","canice","caoilfhionn","caoimhe","caoimhghn","caoimhn","caoln","caomhn","carraig","cathal","cathaoir","cathbharr","catraoine","ceallach","ceallachn","cearbhall","charles","charles","charles","ciamhnait","cian","ciannait","ciann","ciara","ciarn","cillian","cinnididh","cinnidigh","cionaodh","ciothruadh","cliodhna","clodagh","clona","cobhfhlaith","cobhlaith","coilean","coilen","coiln","coinneach","coireall","colla","colm","colmn","colum","comhghall","comhghan","comn","conaire","conall","conchobhar","conchubhar","conchr","conghalach","conmhac","conn","connla","connlaodh","conn","cormac","cosnamhach","criomthann","crostir","crchn","crnn","cuan","cuilen","cuimn","cyril","crthach","cchonnacht","cmhaighe","cmheadha","dabhag","dabhg","dainal","daire","damhnait","damhin","daniel","dara","david","deagln","dearbhfhorgaill","dearbhfhorghaill","dearbhla","dearbhil","deasmhumhnach","declan","deirdre","denis","dervilia","dianaimh","diarmaid","diarmait","doireann","domhnall","donn","donnchadh","donnchadha","donnn","dorothy","dubhaltach","dubhchobhlaigh","dubhghall","dubhghlas","dubhn","dubhg","dymphna","dith","dagln","dnall","dnlang","eachaidh","eachann","eachdhonn","eachthighearn","eamon","earcn","earnait","earnn","easnadh","edwina","eibhln","eibhln","eignach","eigneachn","eiln","eils","eimear","eimer","eimhear","eireamhn","eireamhn","eirnn","eithne","eochaidh","eoghainn","eoghan","eoin","ein","fachtna","faoiltighearna","faoln","fearadhach","fearchar","fearganainm","fearghal","fearghus","feargus","feary","feichn","feidhelm","feidhlim","felix","fergus","fiach","fiacha","fiachra","fiadhnait","finghin","finian","finnian","fintan","fionghuine","fionn","fionnbharr","fionnghuala","fionntn","fionnuala","fitheal","flann","flann","flannait","flannn","flora","fodhla","forbhlaith","froinsias","filbhe","filim","fthnaid","fthnat","fneamhain","fona","garbhn","gearid","geilis","glaisne","gobnait","gormfhlaith","gormlaith","grace","granya","greagoir","grinne","gragir","honora","iarfhlaith","iarlaith","iodhnait","irial","isaf","iseph","ids","jeremiah","john","kyle","labhrs","lachtna","lann","laoighseach","laoiseach","lasairfhona","lasairian","laurence","lewis","lewis","liam","lochlainn","lochlann","lomn","lonn","lorcn","lubhrs","lughaidh","maeleachlainn","maelsheachlainn","maelosa","mainchn","mairghrad","mairad","maiti","malachy","maodhg","maoilir","maoiln","maolcholm","maolcholuim","maolmhuire","maolmrdha","maolruadhin","marion","mathghamhain","meabh","meadhbh","mealla","meaveen","meibhn","meidhbhn","miodhnait","mortimer","muadhnait","muircheartach","muireach","muireadhach","muireann","muirgheal","muirgheas","muirinn","muiris","muirne","murchadh","mire","mirtn","mirn","mchel","mde","mirn","mr","naomhn","naos","neachtan","neasn","niall","nialln","niamh","niocls","nuala","nirn","nra","odharnait","odhrn","oilibhar","oireachtach","oisn","onra","oscar","peadar","peig","peigi","peign","pilib","proinsias","pdraig","pil","pl","raghnailt","raibhiln","rathnait","riain","risterd","ristard","roger","roibeard","roiberd","roibhiln","roibard","ros","ruadhn","ruaidhri","ruairi","ruair","ruari","ruaridh","ruar","ruibhiln","richal","ramann","ramonn","roghnach","rona","ronach","ris","risn","rnn","rs","sadhbh","saerbhreathach","saev","saoirse","saorfhlaith","saorla","saorlaith","sarah","seachnasach","seathan","senn","seoirse","seosamh","sen","serlas","siadhal","siaghal","sinad","siobhn","sioda","sline","sorcha","stofn","suibhne","sadna","safra","samas","samus","san","saonin","sle","somn","sthmaith","tadhg","taichleach","terry","tiarnach","tiarnn","tiernan","tighearnn","tighernach","timothy","tiobid","toirdhealbhach","toirleach","toms","torna","treabhair","tuathal","tuathflaith","todir","uaithne","uaitar","ualgharg","uallach","uasal","uilliam","uinseann","ultn","vivian","gastas","ils","ine","rdghal","rn","abha","adaoin","adbhrd","amon","anna","ann","ibhear","ignach","igneachn","imhear","imhn","inde","ireamhn","mer","tan","de","rfhlaith","rla","rlaith","na"];o["Italian Forenames"]=["achille","adamo","adelasia","adele","adelmo","adriana","adriano","agatha","agnolo","agostino","alberico","alberto","albina","aldo","alessandra","alessandro","alessia","alfredo","alina","alphons","amadeo","amanda","amedeo","amita","andrea","angelica","angelina","angelo","anita","annalisa","annetta","antonietta","antonio","arlo","armando","arsenio","arturo","aurora","baldassare","barbara","bartolomeo","beatrice","benedetto","benito","benvenuto","beppe","berenice","bernardo","bettina","bianca","biancamaria","bruno","camilla","camillo","carmelo","carmine","carolina","cassandra","caterina","cecilia","cesare","chiara","claudia","claudio","clelia","constantino","corrado","cosimo","costanzo","cristina","damiano","daniele","danilo","dante","daria","dario","davide","delfino","diana","dina","dino","domenico","donatella","durante","edoardo","elena","eliana","elisa","elmo","elvira","emiliana","emilio","emma","ennio","enrico","enzo","eraldo","erika","ermenegildo","ernesto","ettore","eugenia","eva","fabia","fabio","fabrizio","fausto","federico","federigo","ferdinando","fernanda","fiamma","filippa","filippo","fiorino","flavia","flavio","flora","francesca","francesco","fredo","fulvio","gabriele","gabriella","gaetano","gaspare","gastone","gemma","geppetto","giacinto","giacobbe","giacomo","giada","giampaolo","giampiero","gian","giancarlo","gianfrancesco","gianfranco","gianluca","gianluigi","gianmarco","gianna","gianni","gianpaolo","gianpietro","gilberto","gino","giorgia","giorgio","giovanna","giovanni","girolamo","giulia","giuliana","giuliano","giulietta","giulio","giuseppe","giuseppina","graziano","griselda","guarino","guglielmo","guido","gustavo","imelda","ingrid","irma","isa","isabella","ivo","jacopo","joseph","julia","lamberto","lando","lara","laureano","lauretta","leonardo","leone","liberto","licia","lilla","lina","livia","livio","lorenzo","luca","luchino","lucia","luciana","luciano","lucio","lucrezia","ludovica","ludovico","luigi","luisa","manuel","marcella","marcello","marco","maria","mariano","mariella","mario","marisa","marissa","martina","martino","massimiliano","massimo","matilda","matteo","maura","maurilio","maurizio","mauro","melania","melina","melissa","michela","michelangelo","michele","micheletto","michelotto","milena","milo","mirco","mirko","morena","nadia","napoleone","natalia","neri","niccol","nicholas","nicola","nicole","nicoletta","nicol","nina","nino","nunzio","omero","onofrio","orazio","oreste","orlando","ornella","osvaldo","ottavio","paloma","panfilo","paola","paolo","pascale","pasqual","pasquale","paulina","pellegrino","pierangelo","piergiorgio","piergiuseppe","pierluigi","piermaria","piersanti","pietro","pompeo","priscilla","puccio","rachel","raffaella","raffaello","renata","renato","renzo","riccardo","rita","roberto","rodolfo","rolando","romana","romina","romolo","rosa","rosalia","rosaria","rosario","rosina","ruggero","ruggiero","sabatino","salvatore","salvi","sandra","sandro","sante","santino","saverio","sebastian","serafina","serena","severino","silvestro","silvia","silvio","sonia","sophia","stefania","stefano","stella","susanna","tatiana","tazio","temistocle","tiziano","toni","torquato","tullio","ubaldo","ugo","umberto","valentina","valeria","valerio","vanessa","vanna","veronica","vincentio","vincenzo","virginia","viridiana","vito","vittoria","vittoria","vittorio","zaira","zanobi"];o["Japanese Cities"]=["abashiri","abiko","adachi","agano","ageo","aioi","aira","aisai","aizuwakamatsu","akabira","akaiwa","akashi","aki","akiruno","akishima","akita","akitakata","akune","ak","ama","amagasaki","amakusa","amami","anan","anj","annaka","aomori","arakawa","arao","arida","asago","asahi","asahikawa","asaka","asakuchi","asakura","ashibetsu","ashikaga","ashiya","aso","atami","atsugi","awa","awaji","awara","ayabe","ayase","azumino","band","beppu","bibai","bizen","bungotakada","bunkyo","buzen","chiba","chichibu","chigasaki","chikugo","chikuma","chikusei","chikushino","chino","chiry","chita","chitose","chiyoda","chfu","chshi","ch","ch","daisen","dait","date","date","dazaifu","ebetsu","ebina","ebino","echizen","edogawa","ena","eniwa","etajima","fuch","fuch","fuefuki","fuji","fujieda","fujiidera","fujimi","fujimino","fujinomiya","fujioka","fujisawa","fujiyoshida","fukagawa","fukaya","fukuchiyama","fukui","fukuoka","fukuroi","fukushima","fukutsu","fukuyama","funabashi","furano","fussa","futtsu","gamagri","gero","gifu","ginowan","gob","goj","gose","gosen","goshogawara","gotenba","got","guj","gyda","gtsu","habikino","hachimantai","hachinohe","hachiji","hadano","hagi","hakodate","hakui","hakusan","hamada","hamamatsu","hamura","hanamaki","handa","hannan","hann","hany","hashima","hashimoto","hasuda","hatsukaichi","hekinan","hida","hidaka","higashihiroshima","higashikagawa","higashikurume","higashimatsushima","higashimatsuyama","higashimurayama","higashine","higashiyamato","higashimi","higashisaka","hikari","hikone","himeji","himi","hino","hioki","hirado","hirakata","hirakawa","hiratsuka","hirosaki","hiroshima","hita","hitachi","hitachinaka","hitachimiya","hitachita","hitoyoshi","hokota","hokuto","hokuto","honj","hyga","hfu","ibara","ibaraki","ibusuki","ichihara","ichikawa","ichikikushikino","ichinomiya","ichinoseki","iga","iida","iiyama","iizuka","ikeda","iki","ikoma","imabari","imari","imizu","ina","inabe","inagi","inashiki","inazawa","inuyama","inzai","iruma","isa","isahaya","ise","isehara","isesaki","ishigaki","ishikari","ishinomaki","ishioka","isumi","itabashi","itako","itami","itoigawa","itoman","itoshima","it","iwade","iwaki","iwakuni","iwakura","iwamizawa","iwanuma","iwata","iyo","izu","izumi","izumi","izumisano","izumitsu","izumo","izunokuni","jetsu","js","jy","kadoma","kaga","kagoshima","kahoku","kai","kainan","kaizu","kaizuka","kakamigahara","kakegawa","kakogawa","kakuda","kama","kamagaya","kamaishi","kamakura","kameoka","kameyama","kami","kaminoyama","kamisu","kamo","kamogawa","kan'onji","kanazawa","kani","kanoya","kanuma","kanzaki","karatsu","kariya","kasai","kasama","kasaoka","kashiba","kashihara","kashima","kashima","kashiwa","kashiwara","kashiwazaki","kasuga","kasugai","kasukabe","kasumigaura","katagami","katano","katori","katsuragi","katsushika","katsuura","katsuyama","kat","kawachinagano","kawagoe","kawaguchi","kawanishi","kawasaki","kazo","kazuno","kesennuma","kikuchi","kikugawa","kimitsu","kinokawa","kirishima","kiry","kisarazu","kishiwada","kita","kitaakita","kitahiroshima","kitaibaraki","kitakami","kitakata","kitakysh","kitami","kitamoto","kitanagoya","kitsuki","kiyose","kiyosu","kizugawa","kobayashi","kobe","kodaira","koga","koga","koganei","kokubunji","komae","komagane","komaki","komatsu","komatsushima","komoro","konan","kosai","koshigaya","koto","kudamatsu","kuji","kuki","kumagaya","kumamoto","kumano","kunisaki","kunitachi","kurashiki","kurayoshi","kure","kurihara","kurobe","kuroishi","kurume","kusatsu","kushima","kushiro","kuwana","kyoto","kytanabe","kytango","kchi","kfu","kka","knan","knan","knosu","kriyama","kshi","ksh","machida","maebashi","maibara","maizuru","makinohara","makurazaki","maniwa","marugame","masuda","matsubara","matsudo","matsue","matsumoto","matsusaka","matsuura","matsuyama","meguro","midori","mihara","mikasa","miki","mima","mimasaka","minamata","minamiashigara","minamiawaji","minamibs","minamikysh","minamisatsuma","minamishimabara","minamisma","minato","mine","mino","minoh","minokamo","misato","misawa","mishima","mitaka","mito","mitoyo","mitsuke","miura","miyako","miyakojima","miyakonoj","miyama","miyawaka","miyazaki","miyazu","miyoshi","miyoshi","miyoshi","mizuho","mizunami","mobara","monbetsu","mooka","moriguchi","morioka","moriya","moriyama","motomiya","motosu","muk","munakata","murakami","murayama","muroran","muroto","musashimurayama","musashino","mutsu","myk","nabari","nagahama","nagai","nagano","nagaoka","nagaokaky","nagareyama","nagasaki","nagato","nago","nagoya","naha","naka","nakama","nakano","nakatsu","nakatsugawa","namegata","namerikawa","nan'y","nanao","nanj","nankoku","nantan","nanto","nara","narashino","narita","naruto","nasukarasuyama","nasushiobara","natori","nayoro","nemuro","nerima","neyagawa","nichinan","nihonmatsu","niigata","niihama","niimi","niiza","nikaho","nikk","ninohe","nirasaki","nishinomiya","nishinoomote","nishio","nishitky","nishiwaki","nisshin","nobeoka","noboribetsu","noda","nomi","nonoichi","noshiro","numata","numazu","ngata","obama","obanazawa","obihiro","odawara","oga","ogi","ogri","ojiya","okaya","okayama","okazaki","okegawa","okinawa","omaezaki","omitama","ono","onomichi","osaka","otaru","owariasahi","owase","oyabe","oyama","rikuzentakata","ritt","rumoi","rygasaki","sabae","sado","saga","sagae","sagamihara","saij","saikai","saiki","saitama","saito","sakado","sakai","sakai","sakaide","sakaiminato","sakata","saku","sakura","sakura","sakuragawa","sakurai","sanda","sanj","sanmu","sano","sanuki","sapporo","sasayama","sasebo","satsumasendai","satte","sayama","seiyo","seki","semboku","sendai","sennan","setagaya","seto","setouchi","settsu","shibata","shibetsu","shibukawa","shibushi","shibuya","shijnawate","shiki","shikokuch","shima","shimabara","shimada","shimanto","shimoda","shimonoseki","shimotsuke","shimotsuma","shinagawa","shing","shinjuku","shinj","shinshiro","shiogama","shiojiri","shirakawa","shiroi","shiroishi","shis","shizuoka","shbara","shnan","sodegaura","soo","special","suginami","suita","sukagawa","sukumo","sumida","sumoto","sunagawa","susaki","susono","suwa","suzaka","suzu","suzuka","sja","ska","sma","ssa","tachikawa","tagaj","tagawa","tahara","tainai","tait","tajimi","takahagi","takahama","takahashi","takaishi","takamatsu","takaoka","takarazuka","takasago","takasaki","takashima","takatsuki","takayama","takehara","takeo","taketa","takikawa","takizawa","taku","tama","tamana","tamano","tamba","tamura","tanabe","tarumizu","tatebayashi","tateyama","tatsuno","tend","tenri","toba","tochigi","toda","toki","tokoname","tokorozawa","tokushima","tomakomai","tome","tomigusuku","tomioka","tomisato","tonami","tondabayashi","toride","tosa","tosashimizu","toshima","tosu","tottori","towada","toyama","toyoake","toyohashi","toyokawa","toyonaka","toyooka","toyota","tsu","tsubame","tsuchiura","tsugaru","tsukuba","tsukubamirai","tsukumi","tsuru","tsuruga","tsurugashima","tsuruoka","tsushima","tsushima","tsuyama","tgane","tkai","tkamachi","tmi","tno","ton","ube","uda","ueda","uenohara","uji","uki","ukiha","unnan","unzen","uonuma","uozu","urasoe","urayasu","ureshino","uruma","usa","ushiku","usuki","utashinai","uto","utsunomiya","uwajima","wajima","wakayama","wakkanai","wak","warabi","yabu","yachimata","yachiyo","yaita","yaizu","yamaga","yamagata","yamagata","yamaguchi","yamanashi","yamato","yamatokriyama","yamatotakada","yame","yanagawa","yanai","yao","yashio","yasu","yasugi","yatomi","yatsushiro","yawata","yawatahama","yokkaichi","yokohama","yokosuka","yokote","yonago","yonezawa","yoshikawa","yoshinogawa","yotsukaid","yufu","yukuhashi","yurihonj","yuzawa","ybari","yki","zama","zentsji","zushi","bu","da","date","funato","gaki","ita","kawa","machi","me","mihachiman","mura","muta","no","noj","sakasayama","saki","sh","ta","ta","take","tawara","tsu","tsuki","zu"];o["Japanese Forenames"]=["ai","aiko","aimi","airi","akane","akari","akemi","aki","akie","akifumi","akihiko","akihiro","akihisa","akihito","akiko","akimasa","akimi","akimitsu","akina","akinobu","akinori","akio","akira","akisada","akishige","akito","akitoshi","akitsugu","akiyoshi","akiyuki","amane","ami","anri","anzu","aoi","arata","arihiro","arinaga","arinobu","aritomo","asako","asami","asao","asuka","asuka","asumi","asuna","atomu","atsuhiko","atsuhiro","atsuko","atsumi","atsuo","atsushi","atsuto","atsuya","aya","ayaka","ayako","ayame","ayana","ayane","ayano","ayu","ayuka","ayumi","ayumu","azuma","azumi","azusa","banri","bunji","bunta","chiaki","chie","chieko","chiemi","chiharu","chihiro","chiho","chika","chikara","chikayoshi","chinami","chinatsu","chisato","chitose","chiyako","chiyo","chiyoko","chizuko","chizuru","choki","chei","chichi","dai","daichi","daigo","daiki","dairoku","daishin","daisuke","daiz","eiichi","eiichiro","eiji","eijir","eikichi","eiko","eimi","einosuke","eishun","eisuke","eiz","emi","emiko","emiri","eri","erika","eriko","etsuji","etsuko","fujiko","fujio","fukumi","fumiaki","fumie","fumihiko","fumihiro","fumika","fumiko","fumio","fumito","fumiya","fusako","fusanosuke","fusazane","futoshi","fuyuki","fuyuko","gaku","gakuto","gen'ichi","gen'ichir","genjiro","genta","gentar","genzo","giichi","gin","goichi","goro","hachir","hajime","hakaru","hana","hanae","hanako","haru","haruaki","haruchika","harue","haruhi","haruhiko","haruhiro","haruhisa","haruka","haruki","haruko","harumi","haruna","harunobu","haruo","harutaka","haruto","haruyo","haruyoshi","hatsu","hatsue","hatsuo","hayanari","hayate","hayato","hazuki","heihachir","heisuke","hideaki","hideharu","hidehiko","hidehito","hideji","hidekazu","hideki","hideko","hidemasa","hidemi","hidemi","hidemitsu","hidenobu","hidenori","hideo","hideshi","hidetaka","hideto","hidetoshi","hidetsugu","hideyo","hideyoshi","hideyuki","hikari","hikaru","himeko","hinata","hiro","hiroaki","hiroe","hirofumi","hirohide","hirohisa","hiroji","hirokatsu","hirokazu","hiroki","hiroko","hirokuni","hiromasa","hiromi","hiromichi","hiromitsu","hiromori","hiromu","hironari","hironobu","hironori","hiroshi","hiroshige","hirotaka","hirotami","hiroto","hirotoki","hirotomo","hirotoshi","hirotsugu","hiroya","hiroyasu","hiroyo","hiroyoshi","hiroyuki","hisae","hisahito","hisako","hisamitsu","hisamoto","hisanobu","hisanori","hisao","hisashi","hisataka","hisateru","hisato","hisaya","hisaya","hisayasu","hisayo","hisayoshi","hisayuki","hitomi","hitoshi","hokuto","honami","hotaru","hozumi","ichiei","ichiko","ichir","ichiz","iehisa","iemasa","iemon","iesada","ikko","ikue","ikumi","ikuo","ikur","iori","ippei","isami","isamu","isao","issei","itaru","itsuki","itsuko","itsumi","iwao","izumi","jiichir","jin","jin'ichi","jinpachi","jiro","jitsuko","jun","jun'ichir","jun'ya","junichi","junji","junki","junko","junpei","junz","jichir","jji","jkichi","jtar","jbei","jkichi","jshir","jtar","jz","kaede","kagami","kagemori","kagetaka","kaguya","kaho","kahoru","kaiji","kaito","kakichi","kaku","kakuji","kan'ichi","kana","kanae","kanako","kaname","kanehira","kanehiro","kanematsu","kanemoto","kanesuke","kanetake","kaneto","kanetsugu","kaneyoshi","kankuro","kansuke","kaori","kaoru","karin","kasumi","katsuaki","katsuei","katsuhiko","katsuhiro","katsuhisa","katsuhito","katsuji","katsuki","katsukiyo","katsuko","katsumasa","katsumi","katsumoto","katsunaga","katsunari","katsunori","katsunosuke","katsuo","katsushi","katsusuke","katsutar","katsuteru","katsutomo","katsutoshi","katsuya","katsuyoshi","katsuyuki","kawai","kayo","kayoko","kazu","kazuaki","kazue","kazuharu","kazuhiko","kazuhiro","kazuhisa","kazuhito","kazuki","kazuko","kazuma","kazumasa","kazumi","kazunari","kazunori","kazuo","kazuoki","kazur","kazusa","kazushi","kazushige","kazutaka","kazuto","kazutoki","kazutoshi","kazuya","kazuyo","kazuyoshi","kazuyuki","kei","keigo","keiichi","keiichir","keiji","keijir","keij","keiki","keiki","keiko","keinosuke","keishi","keisuke","keita","keiz","ken","ken'ichi","ken'ichir","ken'y","kengo","kenji","kenjir","kenki","kenkichi","kensaku","kenshin","kensuke","kenta","kentaro","kento","kenzo","kesao","kihachi","kihachir","kihei","kiichir","kiko","kikue","kikuko","kikuo","kimiko","kimio","kimiya","kin'ichi","kin'ichir","kin'ya","kinji","kinjir","kintaro","kira","kisabur","kish","kiyoaki","kiyofumi","kiyohide","kiyohiko","kiyohiro","kiyoji","kiyokazu","kiyoko","kiyomoto","kiyonari","kiyonori","kiyoshi","kiyosue","kiyotaka","kiyotake","kiyoyuki","kogor","koharu","koji","kojiro","konomi","koson","kotaro","kotomi","kotori","kouta","koya","kozue","kumatar","kumi","kumiko","kuniaki","kunie","kunihiko","kunihiro","kunihisa","kuniko","kunimitsu","kunio","kunitake","kuniyuki","kuranosuke","kurenai","kurumi","kusuo","kyo","kyoko","kyukichi","kyhei","kyichi","kyji","kysuke","khei","kichi","kichir","kki","kkichi","knosuke","ksaku","ksei","kshir","ksuke","kz","maaya","machi","machiko","madoka","mahiro","maho","maiko","maki","makiko","makio","mako","makoto","mami","mamiko","mamoru","mana","manabu","manami","manjir","mantar","mao","mareo","mari","mariko","mari","masaaki","masabumi","masachika","masae","masafumi","masaharu","masahide","masahiko","masahiro","masahisa","masahito","masaichi","masaie","masaji","masakage","masakatsu","masakazu","masaki","masako","masakuni","masami","masamichi","masamitsu","masamori","masamune","masamura","masanao","masanobu","masanori","masao","masaomi","masaru","masashi","masashige","masataka","masatake","masatane","masateru","masato","masatomo","masatoshi","masatsugu","masaya","masayoshi","masayuki","masazumi","masumi","masuo","masuz","matabei","matsuchi","matsuki","matsuko","matsuo","matsushige","mayako","mayu","mayuko","mayumi","mayura","megu","megumi","mei","meiko","meisa","michiaki","michiharu","michihiko","michihiro","michihisa","michiko","michinori","michio","michiru","michir","michitaka","michitar","michiya","michiyo","michiyoshi","midori","mie","mieko","miho","miiko","mika","mikako","miki","mikiko","mikio","mikoto","miku","mikuni","mikuru","mimori","mina","minae","minako","minami","mineichi","mineko","mineo","minori","mirai","misaki","misako","misao","misato","mitsuaki","mitsugi","mitsugu","mitsuharu","mitsuhide","mitsuhiko","mitsuhira","mitsuhiro","mitsuhisa","mitsuki","mitsuko","mitsumasa","mitsumori","mitsunobu","mitsunori","mitsuo","mitsuomi","mitsuru","mitsusuke","mitsutaka","mitsuteru","mitsutoshi","mitsuyasu","mitsuyo","mitsuyo","mitsuyoshi","mitsuyuki","miu","miwa","miwako","miyabi","miyako","miyoko","miyu","miyuki","miyumi","miy","mizuho","mizuki","mizuko","mochiaki","moe","mokichi","momo","momoe","momoka","momoko","morihiko","morihiro","morikazu","morimasa","morio","moritaka","mosuke","motoaki","motoharu","motohiko","motohiro","motoichi","motojir","motoki","motoko","motomu","motonobu","motoshi","motoshige","motosuke","mototada","mototsugu","motoyasu","motoyuki","motozane","mukuro","munehiro","munemori","munenobu","munenori","muneo","muneshige","munetaka","munetoki","munetoshi","murashige","mutsuko","mutsumi","mutsuo","nagaharu","nagahide","nagako","nagamasa","nagamichi","naganao","naganori","nagatoki","nagatomo","nagisa","nami","namio","nana","nanako","nanami","nanase","nankichi","nao","naofumi","naohiko","naohiro","naohisa","naohito","naoji","naokatsu","naoki","naoko","naomasa","naomi","naomichi","naomori","naoshi","naotaka","naotake","naoto","naoya","naoyuki","naozumi","nariaki","nariakira","naritaka","nariyasu","nariyuki","naruhisa","naruhito","narumi","natsue","natsuki","natsuko","natsume","natsumi","noa","noboru","nobuaki","nobuatsu","nobuharu","nobuhiko","nobuhiro","nobuhisa","nobuhito","nobukatsu","nobukazu","nobuko","nobumasa","nobumitsu","nobumoto","nobunao","nobunari","nobuo","nobusada","nobusuke","nobutaka","nobuteru","nobutoki","nobutomo","nobutoshi","nobutsuna","nobuyasu","nobuyoshi","nobuyuki","nodoka","noriaki","norifumi","norifusa","norihiko","norihiro","norihito","norikazu","noriko","norimasa","norio","noriyasu","noriyo","noriyoshi","noriyuki","nozomi","nozomu","okimoto","okitsugu","omi","osamu","otoha","otohiko","otome","raizo","ran","rei","reiichi","reiji","reika","reiko","reiz","ren","rena","rentar","rie","rieko","riho","riichi","rika","rikichi","rikiya","riku","rin","rina","rinsh","risa","ritsuko","rokur","rumi","rumiko","runa","ruri","ruriko","ryoko","ryu","ry","ryhei","ryichi","ryji","ryka","ryma","rysei","rysuke","ryta","rytar","ryz","ryhei","ryichi","ryji","ryki","rynosuke","rysaku","rysei","rysuke","ryta","rytar","ryya","ryz","sabur","sachie","sachiko","sachio","sadaaki","sadaharu","sadahiko","sadako","sadao","sadatoshi","sadayoshi","sadazane","saeko","saiichi","sakae","saki","sakichi","sakie","sakiko","sakura","sakurako","sanae","saori","satoko","satomi","satonari","satoru","satoshi","satsuki","satsuo","sawako","saya","sayaka","sayako","sayoko","sayumi","sayuri","seigen","seigo","seih","seiichi","seiichir","seiji","seijin","seijir","seikichi","seiko","seishi","seishir","seiya","seiz","senkichi","setsuko","setsuna","shichir","shigeaki","shigefumi","shigeharu","shigehiro","shigehisa","shigekazu","shigeki","shigeko","shigemasa","shigematsu","shigemi","shigemitsu","shigenaga","shigenobu","shigenori","shigeo","shigeri","shigeru","shigetada","shigetaka","shigeto","shigetoshi","shigeyasu","shigeyoshi","shigeyuki","shiho","shiina","shik","shimako","shin","shin'ichi","shin'ichir","shinako","shingo","shinji","shinjir","shinj","shinkichi","shino","shinobu","shinpei","shinsaku","shinsuke","shinta","shintar","shinya","shinz","shion","shiori","shizue","shizuka","shizuko","shizuo","shoko","shuko","shuko","shun","shun'ichi","shun'ichir","shun'ya","shunji","shunkichi","shunpei","shunsaku","shunsuke","shuntar","shunz","sh","shgo","shhei","shichi","shji","shjir","shma","shsuke","shta","shtar","shya","shz","shgo","shhei","shichi","shji","shsaku","shsuke","shta","shz","sonosuke","sora","subaru","suehiro","suguru","sukehiro","sukemasa","suketoshi","suketsugu","sumika","sumiko","sumio","sumire","sumiyoshi","sunao","susumu","suzue","suzuko","sgen","sichi","sichir","sji","ssuke","star","tadaaki","tadachika","tadafumi","tadaharu","tadahiko","tadahiro","tadahito","tadakatsu","tadamasa","tadami","tadamori","tadanaga","tadanao","tadanari","tadanobu","tadanori","tadao","tadaoki","tadashi","tadataka","tadateru","tadatomo","tadatoshi","tadatsugu","tadatsune","tadayo","tadayoshi","tadayuki","taeko","taichi","taichir","taiga","taiichi","taiji","taiki","taishi","taisuke","taka","takaaki","takafumi","takahide","takahiko","takahiro","takahisa","takahito","takaki","takako","takamasa","takamitsu","takanobu","takanori","takao","takashi","takatomi","takatoshi","takatsugu","takauji","takaya","takayasu","takayoshi","takayuki","takeaki","takefumi","takeharu","takehiko","takehiro","takehisa","takehito","takeichi","takejir","takeko","takenaga","takenori","takeo","takeru","takeshi","taketo","taketora","taketoshi","takeya","takeyoshi","takez","taku","takuji","takuma","takumi","takuo","takur","takuto","takuya","takuz","tamaki","tamao","tamiko","tamio","tamotsu","tar","tateo","tatsuaki","tatsuhiko","tatsuhiro","tatsuhito","tatsuji","tatsuko","tatsuma","tatsumi","tatsunori","tatsuo","tatsur","tatsushi","tatsuya","tatsuyoshi","tatsuyuki","teiji","teijir","teiko","teiko","teiz","teppei","teru","teruaki","teruhiko","teruhisa","teruko","terumasa","terumi","terunobu","teruo","teruyoshi","teruyuki","tetsu","tetsuharu","tetsuji","tetsumasa","tetsuo","tetsur","tetsushi","tetsutar","tetsuya","tetsuz","togo","tokihiko","tokiko","tokio","tokuji","tokujir","tokuko","tokuo","tokur","tokutar","tomiko","tomio","tomo","tomoaki","tomochika","tomoe","tomoharu","tomohide","tomohiko","tomohiro","tomohisa","tomohito","tomoji","tomoka","tomokazu","tomoki","tomoko","tomomi","tomomichi","tomonobu","tomonori","tomotaka","tomoya","tomoyasu","tomoyo","tomoyoshi","tomoyuki","torahiko","toru","toshi","toshiaki","toshiharu","toshihide","toshihiko","toshihiro","toshihisa","toshihito","toshikatsu","toshikazu","toshiki","toshiko","toshimasa","toshimi","toshimichi","toshimitsu","toshinaga","toshinari","toshinobu","toshinori","toshio","toshir","toshitada","toshitaka","toshitsugu","toshiya","toshiyasu","toshiyuki","toshiz","toyoaki","toyohiko","toyokazu","toyoko","toyomatsu","toyoshige","toyoz","tsubasa","tsugio","tsukasa","tsuneharu","tsunehisa","tsunejir","tsuneko","tsunemi","tsunenori","tsuneo","tsuneyoshi","tsuneyuki","tsutomu","tsuyoshi","umanosuke","umeji","umeko","wakako","wataru","yaeko","yahiko","yahiro","yanosuke","yasuaki","yasue","yasufumi","yasuharu","yasuhide","yasuhiko","yasuhiro","yasuhisa","yasuji","yasujir","yasukazu","yasuki","yasuko","yasumasa","yasumi","yasumichi","yasunari","yasunobu","yasunori","yasuo","yasur","yasushi","yasutaka","yasutomo","yasutoshi","yasuyoshi","yasuyuki","yatar","yayoi","yoko","yorimitsu","yorinobu","yorishige","yoritaka","yoritsugu","yoritsune","yoriyuki","yoshi","yoshifumi","yoshihide","yoshihiko","yoshihiro","yoshihisa","yoshihito","yoshiie","yoshika","yoshikane","yoshikatsu","yoshikazu","yoshiki","yoshikiyo","yoshiko","yoshikuni","yoshimasa","yoshimatsu","yoshimi","yoshimichi","yoshinaga","yoshinao","yoshinari","yoshino","yoshinobu","yoshinori","yoshio","yoshir","yoshisada","yoshishige","yoshisuke","yoshitaka","yoshitake","yoshitar","yoshiteru","yoshito","yoshitomo","yoshitsugu","yoshiya","yoshiyasu","yoshiyuki","yugi","yugo","yui","yuka","yukari","yuki","yukie","yukiharu","yukihiko","yukihiro","yukiko","yukimasa","yukimura","yukina","yukinobu","yukinori","yukio","yukitaka","yukito","yukiya","yumeko","yumi","yumika","yumiko","yuri","yurie","yurika","yuriko","yurina","yutaka","yuzuru","y","y","yhei","yichi","yichir","yji","yjir","ysuke","yta","yz","y","ydai","yhei","yichi","yichir","yji","yjir","ykichi","yko","ysaku","ysei","yshi","ysuke","yta","ytar","yto","yya","yz","zenjiro","zenkichi","zentar","zenz"];o.Languages=["afrikaans","arabic","belarusian","bengali","bosnian","bulgarian","catalan","cherokee","chinese","croatian","czech","danish","dutch","english","estonian","filipino","finnish","french","german","greek","hawaiian","hebrew","hungarian","indonesian","italian","japanese","korean","latvian","lithuanian","malay","moldavian","norwegian","persian","polish","pomeranian","portuguese","romani","romanian","russian","serbian","slovak","slovenian","somali","spanish","swedish","thai","turkish","ukranian","uzbek","vietnamese"];o.Meats=["bacon","beef","beefliver","beefplate","beefshank","beefsteak","beeftongue","brisket","bushmeat","calfliver","chicken","crab","crabmeat","cutlet","darkmeat","duck","fishfillet","flanksteak","goat","goose","gooseliver","groundbeef","ham","horse","lamb","lean","loinchop","meat","meatball","meatchop","mince","mincemeat","mutton","patridge","pheasant","pigeon","pork","poultry","quail","rabbit","redmeat","ribchop","riblets","ribs","ribsteak","rumpsteak","shortribs","squab","steak","turkey","veal","venison","whitemeat","wildboar"];o.Minerals=["abelsonite","abenakiite","abernathyite","abhurite","abramovite","abswurmbachite","acanthite","achavalite","actinolite","acuminite","adamantine","adamite","adamsite","adelite","admontite","aegirine","aenigmatite","aerinite","aerugite","aeschynite","aeschynite","aeschynite","afghanite","afwillite","agardite","agate","agrellite","agrinierite","aguilarite","aheylite","ahlfeldite","aikinite","ajoite","akaganite","akatoreite","akdalaite","akhtenskite","akimotoite","akrochordite","aksaite","aktashite","alabandite","alabaster","alacrnite","alamosite","alarsite","albite","albrechtschraufite","aldermanite","aleksite","alexandrite","alforsite","algodonite","aliettite","allabogdanite","allactite","allanite","allanpringite","allargentum","alleghanyite","allingite","alloclasite","allophane","alluaivite","alluaudite","almandine","almarudite","alsakharovite","alstonite","altaite","althausite","althupite","altisite","alum","aluminite","aluminium","alunite","alunogen","amakinite","amarantite","amazonite","amber","amblygonite","ameghinite","amesite","amethyst","amicite","ammolite","amosite","amphibole","analcime","anandite","anapaite","anatase","ancylite","andalusite","andersonite","andesine","andorite","andradite","andyrobertsite","anglesite","anhydrite","ankerite","annabergite","annite","anorthite","anorthoclase","antarcticite","anthonyite","anthophyllite","antigorite","antimony","antitaenite","antlerite","antozonite","anyolite","apachite","apatite","aphthitalite","apophyllite","aquamarine","aragonite","arcanite","archerite","arctite","arcubisite","ardaite","arfvedsonite","argentite","argentite","argutite","argyrodite","armalcolite","arsenic","arseniosiderite","arsenoclasite","arsenolite","arsenopyrite","arthurite","artinite","artroeite","asbestos","ashburtonite","ashoverite","asisite","astrophyllite","atacamite","athabascaite","atheneite","aubertite","auerlite","augelite","augite","aurichalcite","auricupride","aurostibite","austinite","autunite","avalite","aventurine","avicennite","avogadrite","awaruite","axinite","azurite","babefphite","babingtonite","baddeleyite","bakerite","balangeroite","banalsite","baotite","bararite","barbertonite","barrerite","barstowite","baryte","barytocalcite","bassanite","bastnsite","baumhauerite","bauxite","bayldonite","bayleyite","bazzite","beckerite","becquerelite","benitoite","benstonite","bentonite","bentorite","beraunite","berborite","bergenite","berlinite","berryite","berthierite","bertrandite","beryl","beryllonite","beudantite","bicchulite","biehlite","billietite","billwiseite","biotite","birnessite","bischofite","bismite","bismuth","bismuthinite","bismutite","bityite","bixbite","bixbyite","blossite","bldite","bobfergusonite","boehmite","boleite","boltwoodite","bonaccordite","boracite","borax","bornite","botallackite","botryogen","boulangerite","bournonite","boussingaultite","bowenite","bowieite","braggite","brammallite","brassite","braunite","brazilianite","breithauptite","brewsterite","brezinaite","brianite","brianyoungite","briartite","bridgmanite","brochantite","brockite","brokenhillite","bromargyrite","bromellite","bronzite","brookite","brownleeite","brownmillerite","brucite","brushite","buddingtonite","buergerite","bukovite","bukovskyite","bultfonteinite","bunsenite","bursaite","bustamite","bystrite","bytownite","blinite","cabalzarite","cabriite","cacoxenite","cadmium","cadmoindite","cadmoselite","cadwaladerite","cafarsite","cafetite","cahnite","calaverite","calciborite","calcite","calderite","caledonite","calumetite","campigliaite","campylite","canavesite","cancrinite","canfieldite","carletonite","carlosruizite","carlsbergite","carminite","carnallite","carnelian","carnotite","carobbiite","carpathite","carpholite","carrollite","caryopilite","cassiterite","cattierite","cavansite","celadonite","celestine","celsian","cementite","cerite","cerium","cerussite","cervandonite","cervantite","cesanite","cesbronite","ceylonite","chabazite","chaidamuite","chalcanthite","chalcedony","chalcocite","chalcophyllite","chalcopyrite","challacolloite","chambersite","chamosite","changbaiite","chaoite","chapmanite","charoite","chatkalite","chesterite","chiastolite","chibaite","childrenite","chlorargyrite","chlorastrolite","chlorite","chloritoid","chlormayenite","chlorocalcite","chloroxiphite","chondrodite","chrisstanleyite","christite","chromite","chromium","chrysoberyl","chrysocolla","chrysoprase","chrysotile","chrysotile","chvaleticeite","cinnabar","citrine","clarkeite","claudetite","clausthalite","clearcreekite","cleusonite","cleveite","clinochrysotile","clinoclase","clinohedrite","clinohumite","clinoptilolite","clinozoisite","clintonite","cobaltite","coccinite","coconinoite","coesite","coffinite","cohenite","colemanite","colimaite","collinsite","coloradoite","coltan","columbite","combeite","conichalcite","connellite","cooperite","copiapite","copper","corderoite","cordierite","corkite","cornubite","cornwallite","corundum","cotunnite","covellite","coyoteite","creedite","cristobalite","crocidolite","crocoite","cronstedtite","crookesite","crossite","cryolite","cryptomelane","cubanite","cumberlandite","cummingtonite","cupalite","cuprite","cuprosklodowskite","cuprospinel","curite","cuspidine","cyanotrichite","cylindrite","cymophane","cymrite","cyrilovite","danalite","danburite","datolite","daubreite","daubrelite","davidite","dawsonite","delafossite","delessite","delvauxite","demesmaekerite","derriksite","descloizite","devilline","diaboleite","diadochite","diamond","diaspore","diatomite","dickite","digenite","dimorphite","diopside","dioptase","djerfisherite","djurleite","dmitryivanovite","dollaseite","dolomite","domeykite","donnayite","drysdallite","duftite","dumortierite","dundasite","dypingite","dyscrasite","dzhalindite","edenite","edingtonite","efremovite","ekanite","elbaite","elsmoreite","emerald","emery","emmonsite","empressite","enargite","enstatite","eosphorite","ephesite","epidote","epsomite","ericssonite","erionite","erythrite","eskolaite","esperite","ettringite","euchroite","euclase","eucryptite","eudialyte","euxenite","eveite","evenkite","eveslogite","fabianite","farneseite","fassaite","faujasite","faustite","fayalite","feldspar","feldspathoid","felsbnyaite","ferberite","fergusonite","feroxyhyte","ferricrete","ferrierite","ferrihydrite","ferrimolybdite","ferroactinolite","ferrocolumbite","ferrogedrite","ferrohortonolite","ferronigerite","ferropericlase","ferroselite","ferrotantalite","fettelite","fichtelite","fletcherite","fluckite","fluellite","fluoborite","fluocerite","fluorapatite","fluorapophyllite","fluorbuergerite","fluorcaphite","fluorellestadite","fluorite","fluorliddicoatite","fluororichterite","fluorspar","fluoruvite","fornacite","forsterite","fougrite","fourmarierite","fraipontite","francevillite","franckeite","francolite","frankamenite","frankdicksonite","frankhawthorneite","franklinite","franklinphilite","freibergite","freieslebenite","fukuchilite","gabrielite","gadolinite","gagarinite","gahnite","galaxite","galena","galkhaite","gananite","garnet","garnierite","gaspeite","gatehouseite","gaylussite","gedanite","gedrite","geerite","gehlenite","geigerite","geikielite","geocronite","georgerobinsonite","germanite","gersdorffite","getchellite","gibbsite","gilalite","gismondine","glauberite","glaucochroite","glaucodot","glauconite","glaucophane","glessite","gmelinite","godovikovite","goethite","gold","goldmanite","gonnardite","gordaite","gormanite","goslarite","graftonite","grandidierite","grandreefite","graphite","gratonite","greenalite","greenockite","gregoryite","greifensteinite","greigite","grossite","grossular","groutite","grunerite","guettardite","gugiaite","guilleminite","gummite","gunningite","guyanaite","gwihabaite","gypsum","hafnon","hagendorfite","haggertyite","haidingerite","haiweeite","halite","halloysite","halotrichite","hambergite","hanksite","hapkeite","hardystonite","harmotome","hatchettite","hauerite","hausmannite","hauyne","hawleyite","haxonite","hazenite","heazlewoodite","hectorite","hedenbergite","heliodor","heliotrope","hellyerite","hematite","hemihedrite","hemimorphite","hemusite","herbertsmithite","hercynite","herderite","hessite","hessonite","heulandite","hexaferrum","hibonite","hidalgoite","hiddenite","hilgardite","hisingerite","hirneite","hodgkinsonite","hoelite","hollandite","holmquistite","homilite","hopeite","hornblende","howlite","hsianghualite","hubeite","huemulite","humite","huntite","hureaulite","hutchinsonite","huttonite","hyalite","hyalophane","hydroboracite","hydrogrossular","hydrohalite","hydrokenoelsmoreite","hydromagnesite","hydrotalcite","hydroxylapatite","hydrozincite","hypersthene","hleniusite","hbnerite","ianbruceite","ice","icosahedrite","idocrase","idrialite","ikaite","illite","ilmenite","ilvaite","imogolite","indite","indium","inyoite","iodargyrite","iolite","iranite","iridium","iron","ixiolite","jacobsite","jadarite","jade","jadeite","jaffeite","jalpaite","jamesonite","janggunite","jarosewichite","jarosite","jasper","jeffersonite","jennite","jeremejevite","jerrygibbsite","jet","jimthompsonite","johannite","jolliffeite","jonesite","jordanite","julgoldite","junitoite","jurbanite","kaatialaite","kadyrelite","kaersutite","kainite","kainosite","kalininite","kalinite","kalsilite","kamacite","kambaldaite","kamiokite","kampfite","kanoite","kaolinite","karlite","kassite","kakite","kegelite","keilhauite","keilite","kermesite","kernite","kerolite","kesterite","keyite","khatyrkite","kieserite","kinoite","knebelite","knorringite","kobellite","kochite","kogarkoite","kolbeckite","kornerupine","kosmochlor","kostovite","kovdorskite","krantzite","kratochvlite","kremersite","krennerite","krieselite","krotite","krutovite","krhnkite","kukharenkoite","kunzite","kuratite","kurnakovite","kutnohorite","kyanite","kttigite","labradorite","lanarkite","langbeinite","langite","lansfordite","lanthanite","lapislazuli","laplandite","larimar","larnite","laumontite","laurionite","laurite","lautite","lavendulan","lawsonite","lazulite","lazurite","lead","leadhillite","lechatelierite","legrandite","leifite","leightonite","lepidocrocite","lepidolite","letovicite","leucite","leucophanite","leucophoenicite","libethenite","liebigite","lignite","limonite","linarite","lindgrenite","linnaeite","lipscombite","liroconite","litharge","lithiophilite","livingstonite","lizardite","lodestone","loellingite","lonsdaleite","loparite","lorenzenite","lorndite","loveringite","lublinite","ludlamite","ludwigite","lulzacite","lyonsite","lvyne","lpezite","macaulayite","macdonaldite","mackinawite","madocite","magadiite","maghemite","magnesia","magnesioferrite","magnesiohastingsite","magnesiopascoite","magnesite","magnetite","majorite","malachite","malacolite","malayaite","manganite","manganocolumbite","manganosite","manganotantalite","manganvesuvianite","marcasite","margaritasite","margarite","marialite","maricite","mariposite","marrite","marthozite","mascagnite","massicot","masuyite","matlockite","maucherite","mawsonite","mckelveyite","meerschaum","meionite","melanite","melanophlogite","melanterite","melilite","mellite","melonite","mendipite","mendozite","meneghinite","menilite","mercury","mereheadite","merenskyite","meridianiite","merrillite","mesolite","messelite","metacinnabar","metatorbernite","metazeunerite","meyerhofferite","miargyrite","mica","microcline","microlite","millerite","millosevichite","mimetite","minium","minnesotaite","minyulite","mirabilite","mixite","moganite","mohite","mohrite","moissanite","molybdenite","molybdite","monazite","monohydrocalcite","monticellite","montmorillonite","mooihoekite","moolooite","mordenite","morganite","moschellandsbergite","mosesite","mottramite","motukoreaite","mullite","mundite","murdochite","muscovite","musgravite","nabalamprophyllite","nabesite","nacrite","nadorite","nagygite","nahcolite","naldrettite","nambulite","narsarsukite","natrolite","natron","natrophilite","nekrasovite","nelenite","nenadkevichite","nepheline","nephrite","neptunite","nichromite","nickel","nickeline","niedermayrite","niningerite","niobite","niobitetantalite","nissonite","niter","nitratine","nobleite","nontronite","norbergite","normandite","northupite","nosean","nsutite","nyerereite","npouite","obsidian","okenite","oldhamite","olgite","oligoclase","olivenite","olivine","omphacite","onyx","opal","ordezite","oregonite","orpiment","orthochrysotile","orthoclase","osarizawaite","osmium","osumilite","otavite","ottrelite","otwayite","pabstite","painite","palagonite","palladium","palygorskite","panethite","panguite","papagoite","parachrysotile","paragonite","paralaurionite","paramelaconite","pararealgar","pargasite","parisite","parsonsite","parthite","pascoite","patrnite","paulingite","paulscherrerite","pearceite","pecoraite","pectolite","pelagosite","penikisite","penroseite","pentagonite","pentlandite","perhamite","periclase","pericline","peridot ","perite","perlite","perovskite","petalite","petzite","pezzottaite","pharmacolite","pharmacosiderite","phenakite","phengite","phillipsite","phlogopite","phoenicochroite","phosgenite","phosphophyllite","phosphorite","phosphuranylite","pickeringite","picropharmacolite","piemontite","pigeonite","pimelite","pinalite","pinnoite","pitchblende","piypite","plagioclase","plancheite","platinum","plattnerite","playfairite","plessite","plumbogummite","polarite","pollucite","polybasite","polycrase","polydymite","polyhalite","portlandite","posnjakite","poudretteite","povondraite","powellite","prehnite","proustite","pseudobrookite","pseudomalachite","pseudowollastonite","psilomelane","pumicite","pumpellyite","purpurite","putnisite","pyrargyrite","pyrite","pyrochlore","pyrolusite","pyromorphite","pyrope","pyrophanite","pyrophyllite","pyroxene","pyroxferroite","pyroxmangite","pyrrhotite","pkknenite","qingsongite","quartz","quenstedtite","quintinite","rambergite","rameauite","rammelsbergite","rapidcreekite","rashleighite","raspite","realgar","reidite","reinerite","renierite","rheniite","rhodium","rhodochrosite","rhodolite","rhodonite","rhodplumsite","rhomboclase","richterite","rickardite","riebeckite","ringwoodite","roaldite","robertsite","rockcrystal","rodalquilarite","romanchite","romeite","rosasite","roscoelite","roselite","rosenbergite","rosequartz","rosickite","roumanite","routhierite","rozenite","rubicline","ruby","ruizite","russellite","ruthenium","rutherfordine","rutile","rynersonite","sabatierite","sabieite","sabinaite","sacrofanite","safflorite","salammoniac","saleeite","saliotite","salzburgite","samarskite","sampleite","samsonite","samuelsonite","sanbornite","saneroite","sanidine","santabarbaraite","santite","saponite","sapphire","sapphirine","sarabauite","sard","sarkinite","sassolite","satinspar","satterlyite","sauconite","sborgite","scapolite","scheelite","schmiederite","schoepite","schorl","schreibersite","schreyerite","schrckingerite","schwertmannite","schferite","scolecite","scorodite","scorzalite","scrutinyite","seamanite","searlesite","seeligerite","segelerite","seifertite","sekaninaite","selenite","selenium","seligmannite","sellaite","semseyite","senarmontite","sepiolite","serendibite","serpentine","serpierite","sewardite","shandite","shattuckite","shigaite","shortite","shungite","siderite","siderophyllite","siderotil","siegenite","silicate","silicon","sillimanite","silver","simetite","simonellite","simpsonite","sincosite","sinkankasite","sinoite","skaergaardite","sklodowskite","skutterudite","smaltite","smectite","smithsonite","smokyquartz","soapstone","sodalite","sodaniter","soddyite","sonolite","spectrolite","sperrylite","spertiniite","spessartine","spessartite","sphalerite","sphene","spherocobaltite","spinel","spodumene","spurrite","stannite","stannoidite","stantienite","staurolite","steacyite","steatite","stellerite","stephanite","stercorite","stibarsen","stibiconite","stibiopalladinite","stibnite","stichtite","stilbite","stilleite","stillwaterite","stillwellite","stilpnomelane","stishovite","stolzite","strashimirite","strengite","stromeyerite","strontianite","struvite","studenitsite","studtite","sttzite","suanite","suessite","sugilite","sulfur","sunstone","sursassite","susannite","sussexite","svanbergite","sweetite","switzerite","sylvanite","sylvite","synchysite","syngenite","srandite","taaffeite","tachyhydrite","taenite","talc","talmessite","talnakhite","tamarugite","tangeite","tantalite","tantite","tanzanite","tapiolite","taranakite","tarapacaite","tarbuttite","tausonite","teallite","tellurite","tellurium","tellurobismuthite","temagamite","tennantite","tenorite","tephroite","terlinguaite","teruggite","tetradymite","tetrahedrite","tetrataenite","thaumasite","thenardite","thermonatrite","thiospinel","thomasclarkite","thomsenolite","thomsonite","thorianite","thorite","thortveitite","thulite","thuringite","tiemannite","tienshanite","tin","tinaksite","tincalconite","titanite","titanium","titanowodginite","tobermorite","todorokite","tokyoite","tongbaite","topaz","torbernite","tourmaline","tranquillityite","travertine","tremolite","trevorite","tridymite","triphylite","triplite","triploidite","tripuhyite","troilite","trona","tsavorite","tschermakite","tschermigite","tsumcorite","tsumebite","tugtupite","tungsten","tungstite","tuperssuatsiaite","turquoise","tusionite","tyrolite","tyrrellite","tyuyamunite","uchucchacuaite","uklonskovite","ulexite","ullmannite","ulrichite","ultramarine","ulvspinel","umangite","umber","umbite","unakite","upalite","uralite","uraninite","uranocircite","uranophane","uranopilite","urea","uricite","urusovite","ussingite","utahite","uvarovite","uytenbogaardtite","vaesite","valentinite","valleriite","vanadinite","vanadiocarpholite","vanadium","vantasselite","vanuralite","variscite","vaterite","vauquelinite","vauxite","veatchite","vermiculite","vesuvianite","villiaumite","violarite","vishnevite","vivianite","vladimirite","vlasovite","volborthite","vulcanite","wad","wadsleyite","wagnerite","wairakite","wakabayashilite","wakefieldite","walfordite","wardite","warikahnite","warwickite","wassonite","wavellite","weddellite","weeksite","weilite","weissite","weloganite","whewellite","whiteite","whitlockite","willemite","wiluite","witherite","wodginite","wolframite","wollastonite","woodhouseite","wulfenite","wurtzite","wyartite","wstite","xanthiosite","xanthoconite","xanthoxenite","xenophyllite","xenotime","xiangjiangite","xieite","xifengite","xilingolite","ximengite","xingzhongite","xitieshanite","xocolatlite","xocomecatlite","xonotlite","yeelimite","yttrialite","yttrocerite","yttrocolumbite","yttropyrochlore","yuksporite","zabuyelite","zaccagnaite","zaherite","zajacite","zakharovite","zanazziite","zaratite","zarite","zektzerite","zemannite","zeolite","zeunerite","zhanghengite","zharchikhite","zhemchuzhnikovite","zhonghuacerite","ziesite","zimbabweite","zinalsite","zincite","zinclipscombite","zincmelanterite","zincobotryogen","zincochromite","zincolivenite","zinkenite","zinnwaldite","zippeite","zircon","zirconolite","zircophyllite","zirkelite","znucalite","zoisite","zorite","zunyite","zussmanite","zykaite","kermanite"];o["Modern Pokemon"]=["abomasnow","abra","absol","accelgor","aegislash","aerodactyl","aggron","aipom","alakazam","alomomola","altaria","amaura","ambipom","amoonguss","ampharos","anorith","arbok","arcanine","arceus","archen","archeops","ariados","armaldo","aromatisse","aron","articuno","audino","aurorus","avalugg","axew","azelf","azumarill","azurill","bagon","baltoy","banette","barbaracle","barboach","basculin","bastiodon","bayleef","beartic","beautifly","beedrill","beheeyem","beldum","bellossom","bellsprout","bergmite","bewear","bibarel","bidoof","binacle","bisharp","blastoise","blaziken","blissey","blitzle","boldore","bonsly","bouffalant","braixen","braviary","breloom","bronzong","bronzor","bruxish","budew","buizel","bulbasaur","buneary","bunnelby","burmy","butterfree","cacnea","cacturne","camerupt","carbink","carnivine","carracosta","carvanha","cascoon","castform","caterpie","celebi","chandelure","chansey","charizard","charjabug","charmander","charmeleon","chatot","cherrim","cherubi","chesnaught","chespin","chikorita","chimchar","chimecho","chinchou","chingling","cinccino","clamperl","clauncher","clawitzer","claydol","clefable","clefairy","cleffa","cloyster","cobalion","cofagrigus","combee","combusken","conkeldurr","corphish","corsola","cottonee","cradily","cranidos","crawdaunt","cresselia","croagunk","crobat","croconaw","crustle","cryogonal","cubchoo","cubone","cutiefly","cyndaquil","darkrai","darmanitan","darumaka","dedenne","deerling","deino","delcatty","delibird","delphox","deoxys","dewgong","dewott","dialga","diancie","diggersby","diglett","ditto","dodrio","doduo","donphan","doublade","dragalge","dragonair","dragonite","drampa","drapion","dratini","drifblim","drifloon","drilbur","drowzee","druddigon","ducklett","dugtrio","dunsparce","duosion","durant","dusclops","dusknoir","duskull","dustox","dwebble","eelektrik","eelektross","eevee","ekans","electabuzz","electivire","electrike","electrode","elekid","elgyem","emboar","emolga","empoleon","entei","escavalier","espeon","espurr","excadrill","exeggcute","exeggutor","exploud","farfetchd","fearow","feebas","fennekin","feraligatr","ferroseed","ferrothorn","finneon","flaaffy","flabb","flareon","fletchinder","fletchling","floatzel","floette","florges","flygon","foongus","forretress","fraxure","frillish","froakie","frogadier","froslass","furfrou","furret","gabite","gallade","galvantula","garbodor","garchomp","gardevoir","gastly","gastrodon","genesect","gengar","geodude","gible","gigalith","girafarig","giratina","glaceon","glalie","glameow","gligar","gliscor","gloom","gogoat","golbat","goldeen","golduck","golem","golett","golurk","goodra","goomy","gorebyss","gothita","gothitelle","gothorita","gourgeist","granbull","graveler","greninja","grimer","grotle","groudon","grovyle","growlithe","grubbin","grumpig","gulpin","gurdurr","gyarados","happiny","hariyama","haunter","hawlucha","haxorus","heatmor","heatran","heliolisk","helioptile","heracross","herdier","hippopotas","hippowdon","hitmonchan","hitmonlee","hitmontop","hooh","honchkrow","honedge","hoopa","hoothoot","hoppip","horsea","houndoom","houndour","huntail","hydreigon","hypno","igglybuff","illumise","infernape","inkay","ivysaur","jellicent","jigglypuff","jirachi","jolteon","joltik","jumpluff","jynx","kabuto","kabutops","kadabra","kakuna","kangaskhan","karrablast","kecleon","keldeo","kingdra","kingler","kirlia","klang","klefki","klink","klinklang","koffing","komala","krabby","kricketot","kricketune","krokorok","krookodile","kyogre","kyurem","lairon","lampent","landorus","lanturn","lapras","larvesta","larvitar","latias","latios","leafeon","leavanny","ledian","ledyba","lickilicky","lickitung","liepard","lileep","lilligant","lillipup","linoone","litleo","litten","litwick","lombre","lopunny","lotad","loudred","lucario","ludicolo","lugia","lumineon","lunala","lunatone","luvdisc","luxio","luxray","machamp","machoke","machop","magby","magcargo","magearna","magikarp","magmar","magmortar","magnemite","magneton","magnezone","makuhita","malamar","mamoswine","manaphy","mandibuzz","manectric","mankey","mantine","mantyke","maractus","mareep","marill","marowak","marshtomp","masquerain","mawile","medicham","meditite","meganium","meloetta","meowstic","meowth","mesprit","metagross","metang","metapod","mewtwo","mew","mienfoo","mienshao","mightyena","milotic","miltank","mimejr","mimikkyu","minccino","minun","misdreavus","mismagius","moltres","monferno","mothim","mrmime","mudkip","muk","munchlax","munna","murkrow","musharna","natu","nidoking","nidoqueen","nidoran","nidoran","nidorina","nidorino","nincada","ninetales","ninjask","noctowl","noibat","noivern","nosepass","numel","nuzleaf","octillery","oddish","omanyte","omastar","onix","oshawott","pachirisu","palkia","palpitoad","pancham","pangoro","panpour","pansage","pansear","paras","parasect","patrat","pawniard","pelipper","persian","petilil","phanpy","phantump","phione","pichu","pidgeot","pidgeotto","pidgey","pidove","pignite","pikachu","pikipek","piloswine","pineco","pinsir","piplup","plusle","politoed","poliwag","poliwhirl","poliwrath","ponyta","poochyena","popplio","porygon","porygon","porygonz","primeape","prinplup","probopass","psyduck","pumpkaboo","pupitar","purrloin","purugly","pyroar","quagsire","quilava","quilladin","qwilfish","raichu","raikou","ralts","rampardos","rapidash","raticate","rattata","rayquaza","regice","regigigas","regirock","registeel","relicanth","remoraid","reshiram","reuniclus","rhydon","rhyhorn","rhyperior","riolu","rockruff","roggenrola","roselia","roserade","rotom","rowlet","rufflet","sableye","salamence","salandit","samurott","sandile","sandshrew","sandslash","sawk","sawsbuck","scatterbug","sceptile","scizor","scolipede","scrafty","scraggy","scyther","seadra","seaking","sealeo","seedot","seel","seismitoad","sentret","serperior","servine","seviper","sewaddle","sharpedo","shaymin","shedinja","shelgon","shellder","shellos","shelmet","shieldon","shiftry","shinx","shroomish","shuckle","shuppet","sigilyph","silcoon","simipour","simisage","simisear","skarmory","skiddo","skiploom","skitty","skorupi","skrelp","skuntank","slaking","slakoth","sliggoo","slowbro","slowking","slowpoke","slugma","slurpuff","smeargle","smoochum","sneasel","snivy","snorlax","snorunt","snover","snubbull","solgaleo","solosis","solrock","spearow","spewpa","spheal","spinarak","spinda","spiritomb","spoink","spritzee","squirtle","stantler","staraptor","staravia","starly","starmie","staryu","steelix","stoutland","stunfisk","stunky","sudowoodo","suicune","sunflora","sunkern","surskit","swablu","swadloon","swalot","swampert","swanna","swellow","swinub","swirlix","swoobat","sylveon","taillow","talonflame","tangela","tangrowth","tapu koko","tauros","teddiursa","tentacool","tentacruel","tepig","terrakion","throh","thundurus","timburr","tirtouga","togedemaru","togekiss","togepi","togetic","torchic","torkoal","tornadus","torterra","totodile","toxicroak","tranquill","trapinch","treecko","trevenant","tropius","trubbish","turtwig","tympole","tynamo","typhlosion","tyranitar","tyrantrum","tyrogue","tyrunt","umbreon","unfezant","unown","ursaring","uxie","vanillish","vanillite","vanilluxe","vaporeon","venipede","venomoth","venonat","venusaur","vespiquen","vibrava","victini","victreebel","vigoroth","vikavolt","vileplume","virizion","vivillon","volbeat","volcanion","volcarona","voltorb","vullaby","vulpix","wailmer","wailord","walrein","wartortle","watchog","weavile","weedle","weepinbell","weezing","whimsicott","whirlipede","whiscash","whismur","wigglytuff","wingull","wobbuffet","woobat","wooper","wormadam","wurmple","wynaut","xatu","xerneas","yamask","yanma","yanmega","yungoos","yveltal","zangoose","zapdos","zebstrika","zekrom","zigzagoon","zoroark","zorua","zubat","zweilous","zygarde"];o["Musical Instruments"]=["accordion","airhorn","arpeggione","autoharp","bagpipes","bass","bassdrum","bassethorn","bassflute","bassguitar","bongo","bugle","bullroarer","celesta","clapsticks","clarinet","clavinet","cornet","crumhorn","doublebass","drum","drumkit","electricguitar","euphonium","flugelhorn","flumpet","flute","flutina","glockenspiel","guitar","handpan","harmonica","harp","harpsichord","horn","keyboard","lute","lyre","marimba","obo","oud","piano","piccolo","pipe","pitchpipe","psaltery","recorder","saxhorn","saxophone","saxotromba","saxtuba","steelpan","tinwhistle","triangle","trombone","trumpet","trumpet","tuba","turntable","vibraphone","viola","violin","violino","wheelharp","wobbleboard","woodblock","xylophone"];o["Musical Styles"]=["acappella","acidhouse","acidjazz","acidrock","acoustic","afrobeat","afrocubanjazz","afropop","aleatoric","alternativecountry","alternativedance","alternativehiphop","alternativemetal","alternativerock","ambient","ambientindustrial","americana","anarchopunk","anime","antifolk","apala","arabicpop","argentinerock","arsnova","artpop","artpunk","artrock","avantgarde","avantgardejazz","avantgardemetal","bacbal","ballad","ballata","ballet","barndance","baroque","bass","bassline","batrumba","beatboxing","bebop","bigbeat","biomusic","bitpop","blackmetal","bluegrass","blues","bluesballad","bluesrock","bossanova","bounce","brass","breakbeat","breakcore","breakstep","britfunk","britishblues","britpop","brokenbeat","brostep","bubblegumdance","bubblegumpop","bunraku","bushballad","cabaret","cadencelypso","calypso","canon","cantiga","cantopop","carol","cellorock","celtic","celticfusion","celtichiphop","celticmetal","celticpunk","celticreggae","celticrock","chachacha","chamber","chamberjazz","chamberpop","charanga","chicagoblues","chicagohouse","chicagosoul","chickenscratch","chillout","chillwave","chiptune","christiancountry","christianelectronic","christianhardcore","christianhiphop","christianmetal","christianpunk","christianrock","christianska","christmascarol","christmasmusic","churchmusic","classical","classiccountry","classicrock","coldwave","concerto","cooljazz","country","countryblues","countrypop","countryrap","countryrock","crunk","crunkcore","dance","dancehall","dancepop","dancepunk","dancerock","darkambient","darkcabaret","darkcore","darkstep","darkwave","deathcore","deathdoom","deathgrind","deathindustrial","deathmetal","deathrock","deephouse","deltablues","descarga","detroitblues","detroittechno","digitalhardcore","dirtyrap","disco","discopolo","divahouse","dixieland","doommetal","dreampop","drone","dronemetal","drumstep","dub","dubstep","dubstyle","dubtronica","dutchjazz","easycore","easylistening","electricblues","electricfolk","electro","electroclash","electroindustrial","electronica","electronicdance","electronicmusic","electronicrock","electropop","electropunk","electroswing","elevatormusic","emo","eurobeat","eurodance","eurodisco","eurohouse","europop","eurotrance","experimental","experimentalrock","extrememetal","fingerstyle","flamenco","folk","folkock","folkjazz","folkmetal","folkpop","folkpunk","folktronica","freakbeat","freejazz","freemusic","freestyle","funk","funkmetal","funkrock","funkyhouse","furnitureusic","fusionjazz","futurepop","gangsterrap","garagehouse","garagerock","ghettohouse","ghettotech","girlgroup","glammetal","glampunk","glamrock","glitch","gospel","gothicmetal","gothicrock","gregorianchant","grime","grindcore","groovemetal","grunge","grupera","gypsyjazz","gypsypunk","hardbop","hardcorehiphop","hardcorepunk","hardcoretechno","hardhouse","hardrock","hardstep","hardstyle","hardtrance","harmonicablues","heavymetal","highlife","hiphop","hiphouse","hiplife","horrorcore","horrorpunk","hymn","impressionist","improvisational","incidental","indie","indiefolk","indiepop","indierock","indietronica","indojazz","industrial","industrialdeathmetal","industrialhiphop","industrialmetal","industrialrock","instrumental","instrumentalrock","irishfolk","irishrebel","jam","janglepop","jazz","jazzblues","jazzfunk","jazzfusion","jazzrap","jingle","jitterbug","jive","jpop","jrock","jungle","kpop","latinmetal","latinpop","liquidfunk","louisianablues","lounge","loversrock","mathcore","mathrock","medievalfolkrock","medievalmetal","melodic","melodichardcore","melodicmetalcore","memphisblues","memphissoul","metalcore","miamibass","microhouse","minijazz","minimal","minimaltechno","minimaltrance","minstrel","minuet","modernclassical","modernrock","musicdrama","musichall","neoclassical","neoclassicaldarkwave","neoclassicalmetal","neofolk","neoprogressiverock","neopsychedelia","neosoul","nerdcore","newprog","newrave","newwave","nintendocore","noise","noisepop","noiserock","nordicfolk","northernsoul","numetal","opera","orchestra","organum","paganmetal","paganrock","palmwine","pianoblues","plainchant","popfolk","popmusic","poppunk","poprap","poprock","pornocore","postdisco","postgrunge","postindustrial","postmetal","postminimalism","postpunk","postrock","postromanticism","powerduo","powerelectronics","powermetal","powernoise","powerpop","powertrio","powerviolence","praisesong","progressivebluegrass","progressiveelectronic","progressivefolk","progressivehouse","progressivemetal","progressiverock","progressivetrance","protopunk","psychedelicrock","psychedelictrance","psychobilly","pubrock","punkblues","punkjazz","punkrock","queercore","raggamuffin","ragtime","rave","reggae","reggaedancehall","reggaefusion","reggaehighlife","reggaeton","renaissancemusic","requiem","retro","rhapsody","rhumba","rhymingspiritual","rock","rockabilly","rockopera","rocksteady","rococo","rootsreggae","rootsrock","rootsrockreggae","rumba","sadcore","salsa","salsaerotica","salsaromantica","saltarello","samba","sambareggae","sambarock","shockrock","ska","skapunk","skatepunk","sludgemetal","smoothjazz","softrock","soulblues","souljazz","soulmusic","southerngospel","southernharmony","southernhiphop","southernmetal","southernrock","southernsoul","spaceagepop","spacemusic","spacerock","speedcore","speedgarage","speedmetal","stonermetal","stonerrock","straightedge","streetbass","stringquartet","sunshinepop","surfballads","surfinstrumental","surfmusic","surfpop","surfrock","swampblues","swamppop","swamprock","symphonicmetal","symphonicpoem","symphonicrock","symphony","synthpop","synthwave","techhouse","techno","technoid","techstep","techtonik","techtrance","texasblues","thrashmetal","thrashcore","turbofolk","tweepop","undergroundmusic","urbanfolk","vaporwave","vaudeville","vikingmetal","vocalhouse","vocaljazz","vocalmusic","vocaloid","waltz","westernswing","worldbeat","worldmusic","yodeling","yopop"];o["Mythical Humanoids"]=["adlet","ala","angel","asterius","aswang","bannik","blafard","boggart","brownie","bugbear","bunyip","caliban","centaur","changeling","clurichaun","cyclopes","demon","devil","doppelganger","draugar","dryad","duduri","dullahan","dwarf","elf","empusa","encantado","ent","erinyes","fairy","faun","fiura","gargoyle","garuda","ghoul","giant","giantess","gigantes","gnome","goblin","gorgon","gremlin","grendel","gwishin","hag","haltija","harpy","hibagon","hobbit","hobgoblins","huldra","imp","incubus","incubus","jengu","jinn","jorogumo","jotuns","kappa","kikimora","kitsune","knocker","kobold","korrigan","lamia","lamia","lares","leprechaun","lich","little people","lycanthrope","manticore","menehune","mermaid","merman","minotaur","monaciello","monopod","mothman","mummy","naga","naiad","nereid","nix","nukekubi","nuno","nymph","oceanid","ogre","ogre","ogress","oni","orc","ork","pan","pixie","poltergeist","pombero","pugot","redcap","rusalka","samebito","sandman","satyr","seelie","selkie","sidhe","siren","sphinx","spriggan","sprite","succubus","sylph","tengu","tennin","tikbalang","titan","tiyanak","triton","troll","troll","trow","tyress","undine","valkyrie","vampire","vetter","vila","wendigo","werecat","werehyena","werewolf","yeren","yeti","yukionna","zombie"];o["Norse Deity Forenames"]=["baduhenna","baldr","beyla","bil","bragi","brynhildr","dellingr","eir","eir","forseti","freyja","freyr","frigg","fulla","gefjun","geirah","geiravr","geirdriful","geirskgul","geirnul","gersemi","gerr","gn","gullveig","gunnr","gur","gll","gndul","hariasa","heimdallr","herfjtur","herja","hermr","hervr","hildr","hjalmrimul","hjrrimul","hlagur","hln","hlkk","hnoss","hretha","hrist","hrund","hr","hnir","ilmr","irpa","iunn","kra","lofn","loki","lurr","meili","mist","mni","nanna","nerthus","njrun","njrr","odin","randgrr","reginleif","rindr","rn","rgrr","rta","sandraudiga","sanngrir","saxnt","sif","sigrdrfa","sigrn","sigyn","sinthgunt","sjfn","skalmld","skai","skeggld","skuld","skgul","snotra","svei","svipul","syn","sga","sl","tanfana","thor","tr","ullr","vili","viarr","vli","vr","v","vr","zisa","r","lrn","orgerr","rima","rr","rr","gn","ostre"];o["Original Pokemon"]=["abra","aerodactyl","alakazam","arbok","arcanine","articuno","beedrill","bellsprout","blastoise","bulbasaur","butterfree","caterpie","chansey","charizard","charmander","charmeleon","clefable","clefairy","cloyster","cubone","dewgong","diglett","ditto","dodrio","doduo","dragonair","dragonite","dratini","drowzee","dugtrio","eevee","ekans","electabuzz","electrode","exeggcute","exeggutor","farfetchd","fearow","flareon","gastly","gengar","geodude","gloom","golbat","goldeen","golduck","golem","graveler","grimer","growlithe","gyarados","haunter","hitmonchan","hitmonlee","horsea","hypno","ivysaur","jigglypuff","jolteon","jynx","kabuto","kabutops","kadabra","kakuna","kangaskhan","kingler","koffing","krabby","lapras","lickitung","machamp","machoke","machop","magikarp","magmar","magnemite","magneton","mankey","marowak","meowth","metapod","mew","mewtwo","mime","moltres","muk","nidoking","nidoqueen","nidoran","nidoran","nidorina","nidorino","ninetales","oddish","omanyte","omastar","onix","paras","parasect","persian","pidgeot","pidgeotto","pidgey","pikachu","pinsir","poliwag","poliwhirl","poliwrath","ponyta","porygon","primeape","psyduck","raichu","rapidash","raticate","rattata","rhydon","rhyhorn","sandshrew","sandslash","scyther","seadra","seaking","seel","shellder","slowbro","slowpoke","snorlax","spearow","squirtle","starmie","staryu","tangela","tauros","tentacool","tentacruel","vaporeon","venomoth","venonat","venusaur","victreebel","vileplume","voltorb","vulpix","wartortle","weedle","weepinbell","weezing","wigglytuff","zapdos","zubat"];o["Places In Cumbria"]=["abbeytown","ackenthwaite","adgarley","aglionby","aiketgate","aikhead","aikshaw","aikton","ainstable","aisgill","albyfield","aldingham","aldoth","allenwood","allerdale","allerdale","allhallows","allithwaite","allonby","alston","alstonmoor","ambleside","angerton","annaside","anthorn","appleby","applethwaite","arkleby","arlecdon","armaside","armathwaite","arnaby","arnside","arradfoot","arthuret","asby","ashgill","askerton","askham","aspatria","aughertree","ayside","backbarrow","baggrow","baldwinholme","bampton","bamptongrange","bandrakehead","banks","barbergreen","barbon","barclose","bardsea","barepot","barras","barrow","barrowisland","barrowsgreen","barton","bassenthwaite","baycliff","bayles","beanthwaite","beaumont","beckbottom","beckces","beckermet","beckfoot","beckhead","beckside","beetham","belah","bellevue","berrier","bewaldeth","bewcastle","biggar","biglands","birkby","birkerthwaite","blackbeck","blackcombe","blackdyke","blackford","blackpoolgate","blackwell","blagill","blawith","bleatarn","blencarn","blencogo","blencow","blindbothel","blindcrake","blitterlees","bolton","boltongate","boltonlowhouses","boltonnewhouses","boltons","boltonwoodlane","bomby","bonninggate","boot","bootle","borrowdale","botcherby","bothel","bousteadhill","bouth","bowlandbridge","bowmanstead","bowscale","bowston","brackenber","brackenlands","brackenthwaite","braithwaite","brampton","brandlingill","bransty","branthwaite","brathay","braystones","braytonpark","bretherdalehead","bridekirk","bridgefield","bridgefoot","briery","brigham","brigsteer","brisco","briscoe","broadoak","broadwath","brockleymoor","bromfield","broom","brothybeck","brough","brougham","broughsowerby","broughton","broughtonbeck","broughtoncross","broughtoneast","broughtonmills","broughtonmoor","broughtonwest","brownber","browtop","brunstock","brunthwaite","buckabank","bullgill","burghbysands","burneside","burnrigg","burrells","burtholme","burthwaite","busk","buttermere","butterwick","caldbeck","calder","calderbridge","calthwaite","calva","cambeckbridge","camerton","canalfoot","cardew","cardewlees","cardurnock","cargo","cark","carlatton","carlisle","carrbank","cartmel","cartmelfell","carwinley","casterton","castlecarrock","castlesowerby","castletown","catbank","catlowdy","catterlen","causewayend","causewayhead","cautley","chalkfoot","chapel","chapelstile","chestnuthill","churchbrough","claife","clappersgate","clawthorpe","cleabarrow","cleator","cleatormoor","cliburn","clifton","cliftondykes","cockermouth","cocklake","cockleybeck","colby","coldbeck","colthouse","colton","commonend","coniston","corbyhill","corkickle","corney","cotehill","cotes","coulderton","coupland","cowenhead","cowgill","crackenthorpe","croasdale","crofton","croglin","crook","crooklands","crosby","crosbygarrett","crosbyravensworth","crosbyvilla","croslandspark","crosscanonby","crossend","crossgates","crosslands","crosthwaite","culgaith","cumbria","cumdivock","cummersdale","cumrew","cumwhinton","cumwhitton","currock","dacre","dale","dalebottom","dalemain","dalston","dalton","dean","deanscales","dearham","deepthwaite","dendron","dent","dentonholme","distington","dockray","dovenby","downhall","dragleybeck","drigg","drumburgh","drumleaning","drybeck","dubwath","duddonbridge","dufton","dundraw","dungeonghyll","durdar","dykesfield","eaglesfield","eamontbridge","eastcurthwaite","edderside","edenhall","edentown","egremont","egtonwithnewland","ellenborough","ellonby","elterwater","embleton","endmoor","ennerdalebridge","eskdale","eskdalegreen","eskett","etterby","ewanrigg","fairhill","fararnside","farend","farlam","farleton","farsawrey","faugh","fawcettforest","fellside","fenton","fieldbroughton","fingland","finsthwaite","firbank","fletchertown","flimby","flitholme","flookburgh","floristonrigg","forceforge","foresthead","fornside","fothergill","foulbridge","foxfield","frizington","gaisgill","galligill","gamblesby","gamelsby","garlands","garnettbridge","garrigill","garsdale","garsdalehead","garthrow","garths","gatebeck","gatefoot","gatesgarth","gawthrop","gawthwaite","geltsdale","gilcrux","gilsland","glasson","glasson","glassonby","gleaston","glencoyne","glenridding","goadsbarrow","goodyhills","goosegreen","gosforth","grangefell","grasmere","grassgarth","grayrigg","graysongreen","greatasby","greatblencow","greatbroughton","greatclifton","greatcorby","greatcrosthwaite","greatlangdale","greatmusgrave","greatormside","greatorton","greatsalkeld","greatstrickland","greaturswick","greenbank","greengill","greenhead","greenhill","greenholme","greenodd","greenquarter","greenrow","greenwell","greysouthen","greystoke","greystone","grinsdale","grisedale","grizebeck","grizedale","gullomholme","hackthorpe","haile","hailforth","hale","halfpenny","hallbankgate","hallbeck","halldunnerdale","hallowbank","hallsanton","hallthwaites","hallwaberthwaite","haltcliff","hampsfield","hardendale","haresceugh","harker","harkermarsh","harraby","harrington","harriston","hartley","hartsop","hassness","haverigg","haverthwaite","hawcoat","hawksdale","hawkshead","hawksheadhill","hawsbank","hayton","hayton","hazelrigg","hazelslack","headsnook","heaning","heathwaite","hegglelane","helbeck","helsington","helton","helvellyn","hensingham","hesket","hethersgill","highbankhill","highbewaldeth","highbiggins","highbridge","highcasterton","highcrosby","highcunsey","highgreen","highhesket","highhill","highireby","highknipe","highlaws","highlorton","highmoor","highnewton","highoaks","highrigg","highrow","highscales","highside","highwray","hilltop","hilton","hincaster","hodbarrow","holker","hollins","holme","holmeabbey","holmelow","holmrook","holmwrangle","honisterpass","hopebeck","hornsby","houghton","how","howgate","howgill","hugill","hunsonby","hurst","hutton","huttonend","huttonsoil","hycemoor","hyton","ireleth","irthington","isel","ivegill","jericho","johnby","kaber","keekle","keisley","kelbarrow","keld","kelleth","kells","kelsick","kendal","kentmere","kentrigg","kentsbank","keswick","killington","kilnhill","kingmoor","kingsmeaburn","kingstown","kingwater","kinkryhill","kirkbampton","kirkhouse","kirklandguards","kirklinton","kirklintonmiddle","kirkoswald","kirksanton","lakeside","lambfoot","langdale","langwathby","leadgate","leasgill","legburthwaite","lessonhall","levens","littlebeck","littlebroughton","littleclifton","littlelangdale","littletown","lockhills","longburgh","longlands","longmarton","longpark","longthwaite","loweswater","lowick","lowther","martindale","mawbray","mealbank","mealsgate","melmerby","micklethwaite","middleton","midgeholme","milburn","millom","milnthorpe","milton","mockerkin","monkhill","moorrow","moresby","morland","morton","mosedale","muncaster","mungrisdale","murton","nateby","natland","nearsawrey","nenthall","nenthead","nethertown","netherwasdale","newcowper","newhutton","newland","newlands","newton","newtonarlosh","newtonreigny","newtonrigg","newtown","northdykes","northscale","oddendale","oldhutton","ormside","orthwaite","orton","oughterside","oulton","ousby","outhgill","oxenholme","oxenpark","papcastle","parsonby","parton","patterdale","pennington","penrith","penruddock","petterilgreen","pielisland","plumbland","plumpton","ponsonby","pooleybridge","rampside","raughtonhead","ravenglass","ravenstonedale","renwick","rickerby","roanhead","rockcliffe","roose","roosebeck","rosside","rosthwaite","roundthwaite","ruckcroft","ruleholme","rusland","rydal","sadgill","santonbridge","satterthwaite","scaleby","scalebyhill","scotby","seascale","seathwaite","seatoller","seaton","sedbergh","sedgwick","selside","shap","shoregill","siddick","silecroft","silloth","silverband","skelton","skelwithbridge","skinburness","skirwith","skitby","slackhead","smithfield","sockbridge","southwaite","sparkbridge","stair","stanah","stapleton","staveley","stbees","stockdalewath","stonehouse","sunderland","swarthmoor","swindale","tarns","templesowerby","thiefside","thornhill","thornthwaite","threapland","threlkeld","thursby","thwaites","tirril","todhills","torpenhow","torver","troutbeck","troutbeckbridge","uldale","ulpha","ulverston","underbarrow","underskiddaw","upperdenton","upton","vickerstown","waberthwaite","walton","warcop","warwickbridge","wasdale","wasdalehead","watchgate","watendlath","watermillock","waverton","westnewton","westward","wetheral","wetsleddale","whale","whicham","whitehaven","wiggonby","wigton","wilton","windermere","winscales","winton","witherslack","wolsty","woodend","woodend","woodland","workington","wreay","wythburn","wythopmill","yanwath","yarlside","yearngill","yottenfews"];o["Plants Common Names"]=["africanrice","alder","almond","ambrosia","amyroot","apple","apricot","arfaj","arrowwood","ash","ashleavedmaple","asianrice","azolla","babyrose","bamboo","banana","bankcress","baobab","bay","baylaurel","bean","bearberry","bearcorn","beech","bermudacress","bindweed","birch","birdsnest","bittercress","bittersweet","bitterweed","blackalder","blackash","blackberry","blackbirch","blackcap","blackcherry","blackhaw","blackiehead","blackmaple","blackoak","blackraspberry","blackweed","blueash","blueberry","blueoak","boleanbirch","bowwood","box","boxelder","boxwood","brier","brittlebush","broadleaf","brownbetty","buckeye","buffaloweed","bulbouscress","bullnettle","buroak","butterflyweed","cabbage","caneash","canoebirch","carrot","carrotweed","championoak","cherry","cherrybirch","chestnut","chiggerflower","christmasfern","chrysanthemum","cinnamon","clove","clover","clumpfoot","coakum","coastliveoak","coconut","coffeeplant","colicweed","collard","colwort","commonalder","coneflower","corkoak","cornel","cornelian","cornsowthistle","cornthistle","corydalis","cottonplant","creekmaple","cress","crowfoot","crowsnest","crowstoes","cucumber","cursedthistle","cutleafmaple","daisy","damerocket","deadlynightshade","deadnettle","devilsbite","devilsnose","devilsplague","dewberry","dindle","dogwood","drumstick","duckretten","duscle","dyeleaves","dyersoak","earthgall","eucalyptus","eytelia","falsealder","falsebox","fellenwort","felonwood","felonwort","fennel","ferns","feverbush","feverfew","fig","flax","fluxroot","fumewort","gallberry","garget","garlic","garlicmustard","garlicroot","gilliflower","goldenbuttons","goldengarlic","goldenglow","goosetongue","gordaldo","grapefruit","grapevine","grayalder","graybirch","greenash","greenthistle","groundberry","gutweed","haldi","hardthistle","haresthistle","harlequin","hayfever","healingblade","hedgeplant","hellebore","hemp","hempdogbane","henplant","hogweed","holly","honeymesquite","horsecane","horsenettle","houndsberry","houseleek","huckleberry","indianhemp","indianposy","inkberry","inkberryholly","ironwood","islandoak","itchweed","ivy","jackinthebush","jalap","judastree","juneberry","juniper","keek","kinnikinnik","kousa","kudzu","laceflower","lambscress","lambsfoot","landcress","lavender","leek","lemon","lettuce","lilac","lilyleek","lovevine","lowrose","mahoganybirch","maize","mango","maple","mapleash","mapleash","meadowholly","mesquite","milfoil","milkthistle","milkweed","milkytassel","mirbeckoak","moosemaple","moosewood","morel","mosquitofern","mulberry","neem","nettle","nightshade","noddingthistle","northernoak","nosebleed","oak","olive","onion","orangeroot","osage","osageapple","paperbirch","parsley","parsnip","pea","peach","peanut","pear","pellitory","pennyhedge","pepperroot","perennialthistle","pigeonberry","pine","pineapple","pinoak","pistachio","plane","plantain","pleurisyroot","poisonberry","poisonflower","poisonivy","poke","pokeroot","pokeweed","polecatweed","polkweed","poplar","poppy","possumhaw","potato","prairierose","pricklythistle","pudina","purpleraspberry","quercitron","radicalweed","ragweed","ragwort","ramblerrose","rantipole","rapeseed","raspberry","redash","redbirch","redbrush","redbud","redmulberry","redoak","redweed","rheumatismroot","rhubarb","ribwort","rice","riverash","riverbirch","rivermaple","roadweed","rocket","rocketcress","rose","rosemary","rumcherry","rye","sandbrier","sanguinary","saskatoon","scarletberry","scoke","scotchcap","scruboak","scurvycress","scurvygrass","serviceberry","shadblow","shadbush","silkweed","silverbirch","silvermaple","skunkcabbage","skunkweed","snakeberry","sneezeweed","sneezewort","snowdrop","softmaple","sorrel","sowthistle","spanishoak","speckledalder","speedwell","spicebirch","spoolwood","spottedoak","springcress","squawbush","stagbush","stammerwort","stickweed","strawberry","stripedalder","stripedmaple","sugarcane","sugarmaple","sugarplum","summerlilac","sunflower","swallowwort","swallowwort","swampash","swampcabbage","swampholly","swampmaple","swampoak","swampsilkweed","sweetbirch","sweetpotato","sweetrocket","swinethistle","swinies","swordferns","sycamore","tansy","tasselweed","tea","thimbleberry","thimbleweed","thistle","thousandleaf","thousandseal","thyme","tickleweed","tobaccoplant","tomato","toothwort","touchmenot","treadsoftly","treeonion","trillium","tuberroot","tulip","tulsi","uplandcress","valleyoak","vanillaorchid","viburnum","violet","violetbloom","virginbower","wakerobin","walnut","waterash","waterbirch","waterfern","watermaple","waybread","waythistle","weepingbirch","weepingbirch","wheat","whitealder","whiteash","whitebirch","whitebirch","whitemaple","whitemulberry","whiteoak","whiteroot","whitetansy","wildblackcherry","wildcherry","wildcotton","wildgarlic","wildhops","wildrose","wildtansy","willow","windroot","wineberry","winterberry","wintercress","winterrocket","woodbine","woodynightshade","wormwood","woundrocket","woundwort","yam","yarrow","yellowbirch","yellowdaisy","yellowfumewort","yellowrocket","yellowwood","zedoary"];o.Pokemon=["abra","aerodactyl","alakazam","arbok","arcanine","articuno","beedrill","bellsprout","blastoise","bulbasaur","butterfree","caterpie","chansey","charizard","charmander","charmeleon","clefable","clefairy","cloyster","cubone","dewgong","diglett","ditto","dodrio","doduo","dragonair","dragonite","dratini","drowzee","dugtrio","eevee","ekans","electabuzz","electrode","exeggcute","exeggutor","farfetchd","fearow","flareon","gastly","gengar","geodude","gloom","golbat","goldeen","golduck","golem","graveler","grimer","growlithe","gyarados","haunter","hitmonchan","hitmonlee","horsea","hypno","ivysaur","jigglypuff","jolteon","jynx","kabuto","kabutops","kadabra","kakuna","kangaskhan","kingler","koffing","krabby","lapras","lickitung","machamp","machoke","machop","magikarp","magmar","magnemite","magneton","mankey","marowak","meowth","metapod","mew","mewtwo","mime","moltres","muk","nidoking","nidoqueen","nidoran","nidoran","nidorina","nidorino","ninetales","oddish","omanyte","omastar","onix","paras","parasect","persian","pidgeot","pidgeotto","pidgey","pikachu","pinsir","poliwag","poliwhirl","poliwrath","ponyta","porygon","primeape","psyduck","raichu","rapidash","raticate","rattata","rhydon","rhyhorn","sandshrew","sandslash","scyther","seadra","seaking","seel","shellder","slowbro","slowpoke","snorlax","spearow","squirtle","starmie","staryu","tangela","tauros","tentacool","tentacruel","vaporeon","venomoth","venonat","venusaur","victreebel","vileplume","voltorb","vulpix","wartortle","weedle","weepinbell","weezing","wigglytuff","zapdos","zubat"];o["Pokemon Modern"]=["abomasnow","abra","absol","accelgor","aegislash","aerodactyl","aggron","aipom","alakazam","alomomola","altaria","amaura","ambipom","amoonguss","ampharos","anorith","arbok","arcanine","arceus","archen","archeops","ariados","armaldo","aromatisse","aron","articuno","audino","aurorus","avalugg","axew","azelf","azumarill","azurill","bagon","baltoy","banette","barbaracle","barboach","basculin","bastiodon","bayleef","beartic","beautifly","beedrill","beheeyem","beldum","bellossom","bellsprout","bergmite","bewear","bibarel","bidoof","binacle","bisharp","blastoise","blaziken","blissey","blitzle","boldore","bonsly","bouffalant","braixen","braviary","breloom","bronzong","bronzor","bruxish","budew","buizel","bulbasaur","buneary","bunnelby","burmy","butterfree","cacnea","cacturne","camerupt","carbink","carnivine","carracosta","carvanha","cascoon","castform","caterpie","celebi","chandelure","chansey","charizard","charjabug","charmander","charmeleon","chatot","cherrim","cherubi","chesnaught","chespin","chikorita","chimchar","chimecho","chinchou","chingling","cinccino","clamperl","clauncher","clawitzer","claydol","clefable","clefairy","cleffa","cloyster","cobalion","cofagrigus","combee","combusken","conkeldurr","corphish","corsola","cottonee","cradily","cranidos","crawdaunt","cresselia","croagunk","crobat","croconaw","crustle","cryogonal","cubchoo","cubone","cutiefly","cyndaquil","darkrai","darmanitan","darumaka","dedenne","deerling","deino","delcatty","delibird","delphox","deoxys","dewgong","dewott","dialga","diancie","diggersby","diglett","ditto","dodrio","doduo","donphan","doublade","dragalge","dragonair","dragonite","drampa","drapion","dratini","drifblim","drifloon","drilbur","drowzee","druddigon","ducklett","dugtrio","dunsparce","duosion","durant","dusclops","dusknoir","duskull","dustox","dwebble","eelektrik","eelektross","eevee","ekans","electabuzz","electivire","electrike","electrode","elekid","elgyem","emboar","emolga","empoleon","entei","escavalier","espeon","espurr","excadrill","exeggcute","exeggutor","exploud","farfetch'd","fearow","feebas","fennekin","feraligatr","ferroseed","ferrothorn","finneon","flaaffy","flabb","flareon","fletchinder","fletchling","floatzel","floette","florges","flygon","foongus","forretress","fraxure","frillish","froakie","frogadier","froslass","furfrou","furret","gabite","gallade","galvantula","garbodor","garchomp","gardevoir","gastly","gastrodon","genesect","gengar","geodude","gible","gigalith","girafarig","giratina","glaceon","glalie","glameow","gligar","gliscor","gloom","gogoat","golbat","goldeen","golduck","golem","golett","golurk","goodra","goomy","gorebyss","gothita","gothitelle","gothorita","gourgeist","granbull","graveler","greninja","grimer","grotle","groudon","grovyle","growlithe","grubbin","grumpig","gulpin","gurdurr","gyarados","happiny","hariyama","haunter","hawlucha","haxorus","heatmor","heatran","heliolisk","helioptile","heracross","herdier","hippopotas","hippowdon","hitmonchan","hitmonlee","hitmontop","hooh","honchkrow","honedge","hoopa","hoothoot","hoppip","horsea","houndoom","houndour","huntail","hydreigon","hypno","igglybuff","illumise","infernape","inkay","ivysaur","jellicent","jigglypuff","jirachi","jolteon","joltik","jumpluff","jynx","kabuto","kabutops","kadabra","kakuna","kangaskhan","karrablast","kecleon","keldeo","kingdra","kingler","kirlia","klang","klefki","klink","klinklang","koffing","komala","krabby","kricketot","kricketune","krokorok","krookodile","kyogre","kyurem","lairon","lampent","landorus","lanturn","lapras","larvesta","larvitar","latias","latios","leafeon","leavanny","ledian","ledyba","lickilicky","lickitung","liepard","lileep","lilligant","lillipup","linoone","litleo","litten","litwick","lombre","lopunny","lotad","loudred","lucario","ludicolo","lugia","lumineon","lunala","lunatone","luvdisc","luxio","luxray","machamp","machoke","machop","magby","magcargo","magearna","magikarp","magmar","magmortar","magnemite","magneton","magnezone","makuhita","malamar","mamoswine","manaphy","mandibuzz","manectric","mankey","mantine","mantyke","maractus","mareep","marill","marowak","marshtomp","masquerain","mawile","medicham","meditite","meganium","meloetta","meowstic","meowth","mesprit","metagross","metang","metapod","mewtwo","mew","mienfoo","mienshao","mightyena","milotic","miltank","mimejr","mimikkyu","minccino","minun","misdreavus","mismagius","moltres","monferno","mothim","mrmime","mudkip","muk","munchlax","munna","murkrow","musharna","natu","nidoking","nidoqueen","nidoran","nidoran","nidorina","nidorino","nincada","ninetales","ninjask","noctowl","noibat","noivern","nosepass","numel","nuzleaf","octillery","oddish","omanyte","omastar","onix","oshawott","pachirisu","palkia","palpitoad","pancham","pangoro","panpour","pansage","pansear","paras","parasect","patrat","pawniard","pelipper","persian","petilil","phanpy","phantump","phione","pichu","pidgeot","pidgeotto","pidgey","pidove","pignite","pikachu","pikipek","piloswine","pineco","pinsir","piplup","plusle","politoed","poliwag","poliwhirl","poliwrath","ponyta","poochyena","popplio","porygon","porygon","porygonz","primeape","prinplup","probopass","psyduck","pumpkaboo","pupitar","purrloin","purugly","pyroar","quagsire","quilava","quilladin","qwilfish","raichu","raikou","ralts","rampardos","rapidash","raticate","rattata","rayquaza","regice","regigigas","regirock","registeel","relicanth","remoraid","reshiram","reuniclus","rhydon","rhyhorn","rhyperior","riolu","rockruff","roggenrola","roselia","roserade","rotom","rowlet","rufflet","sableye","salamence","salandit","samurott","sandile","sandshrew","sandslash","sawk","sawsbuck","scatterbug","sceptile","scizor","scolipede","scrafty","scraggy","scyther","seadra","seaking","sealeo","seedot","seel","seismitoad","sentret","serperior","servine","seviper","sewaddle","sharpedo","shaymin","shedinja","shelgon","shellder","shellos","shelmet","shieldon","shiftry","shinx","shroomish","shuckle","shuppet","sigilyph","silcoon","simipour","simisage","simisear","skarmory","skiddo","skiploom","skitty","skorupi","skrelp","skuntank","slaking","slakoth","sliggoo","slowbro","slowking","slowpoke","slugma","slurpuff","smeargle","smoochum","sneasel","snivy","snorlax","snorunt","snover","snubbull","solgaleo","solosis","solrock","spearow","spewpa","spheal","spinarak","spinda","spiritomb","spoink","spritzee","squirtle","stantler","staraptor","staravia","starly","starmie","staryu","steelix","stoutland","stunfisk","stunky","sudowoodo","suicune","sunflora","sunkern","surskit","swablu","swadloon","swalot","swampert","swanna","swellow","swinub","swirlix","swoobat","sylveon","taillow","talonflame","tangela","tangrowth","tapu koko","tauros","teddiursa","tentacool","tentacruel","tepig","terrakion","throh","thundurus","timburr","tirtouga","togedemaru","togekiss","togepi","togetic","torchic","torkoal","tornadus","torterra","totodile","toxicroak","tranquill","trapinch","treecko","trevenant","tropius","trubbish","turtwig","tympole","tynamo","typhlosion","tyranitar","tyrantrum","tyrogue","tyrunt","umbreon","unfezant","unown","ursaring","uxie","vanillish","vanillite","vanilluxe","vaporeon","venipede","venomoth","venonat","venusaur","vespiquen","vibrava","victini","victreebel","vigoroth","vikavolt","vileplume","virizion","vivillon","volbeat","volcanion","volcarona","voltorb","vullaby","vulpix","wailmer","wailord","walrein","wartortle","watchog","weavile","weedle","weepinbell","weezing","whimsicott","whirlipede","whiscash","whismur","wigglytuff","wingull","wobbuffet","woobat","wooper","wormadam","wurmple","wynaut","xatu","xerneas","yamask","yanma","yanmega","yungoos","yveltal","zangoose","zapdos","zebstrika","zekrom","zigzagoon","zoroark","zorua","zubat","zweilous","zygarde"];o["Roman Deities"]=["abeona","abudantia","adeona","aequitas","aera","aeternitas","africus","alemonia","angerona","angita","anna","antevorte","aphrodite","apollo","aquilo","ares","artemis","asclepius","athena","attis","aurora","auster","bacchus","bellona","bona","bubona","camenaees","candelifera","cardea","carmenta","carnea","ceres","cinxia","clementia","cloacina","coelus","concordia","conditor","consus","convector","copia","corus","cunina","cupid","cybele","dea","dea","decima","demeter","devera","deverra","dia","diana","dis","disciplina","discordia","dius","egestes","empanda","endovelicus","eventus","fabulinus","fama","fauna","faunus","faunus","faustitas","favonius","febris","felicitas","feronia","fides","flora","fontus","fornax","fortuna","fulgora","furies","furina","hephaestus","hera","hercules","hermes","hestia","honos","indivia","isis","janus","juno","jupiter","juturna","juventas","lactans","lares","laverna","liber","libera","liberalitas","libertas","libitina","lima","lucifer","lucina","luna","maia","maiesta","manes","mania","mars","matuta","meditrina","mefitas","mellona","mena","menrva","mens","mercury","messor","minerva","mithras","moneta","mors","morta","muta","mutinus","naenia","necessitas","nemestrinus","neptune","nona","nox","nundina","obarator","occator","ops","orbona","orcus","pales","parcaes","pax","penates","picus","pietas","poena","pomona","portunes","porus","poseidon","postverta","potina","priapus","prorsa","providentia","pudicitia","puta","quirinus","quiritis","robigo","robigus","roma","rumina","salus","sancus","saritor","saturn","securitas","semonia","serapis","silvanus","sol","sol","somnus","sors","spes","stata","stimula","strenua","suadela","subrincinator","summanus","tellus","tempestes","terminus","terra","trivia","vacuna","veiovis","venus","veritas","vertumnus","vesta","victoria","viduus","viriplacaa","virtus","vitumnus","volturnus","volumna","vulcan","vulturnus","zeus"];o["Roman Emperor Forenames"]=["aemilian","alexander","alexios","anastasios","anastasius","andronikos","anthemius","antoninus","arcadius","artabasdos","augustus","aurelian","avitus","balbinus","basil","basiliscus","caligula","caracalla","carinus","carus","claudius","claudius","commodus","constans","constans","constantine","constantius","constantius","didius","diocletian","domitian","elagabalus","florian","galba","galerius","gallienus","geta","glycerius","gordian","gordian","gratian","hadrian","heraclius","heraklonas","honorius","hostilian","irene","isaac","joannes","john","jovian","julian","julius","justin","justinian","leo","leontios","libius","licinius","lucius","macrinus","magnus","majorian","manuel","marcian","marcus","maurice","maxentius","maximian","maximinus","michael","nero","nerva","nikephoros","numerian","olybrius","otho","pertinax","petronius","philippikos","phocas","probus","pupienus","quintillus","romanos","romulus","septimius","severus","staurakios","tacitus","theodora","theodosios","theodosius","theodosius","theophilos","tiberius","tiberius","titus","trajan","trebonianus","valens","valentinian","valerian","vespasian","vetranio","vitellius","zeno","zoe"];o["Russian Forenames"]=["aaron","abagor","abamon","abataly","abdaikl","abdullah","abel","abelyar","abid","abijah","abily","abnody","abo","abram","aburom","adrian","afanasy","agafa","agafangel","agafiya","agafodor","agafokliya","agafon","agafonik","agafonika","agap","agapa","agapion","agapit","agapiya","agapy","agat","agatha","agav","agavva","albert","alexey","alla","alya","amvrosy","anastasia","anatoly","andrey","angelika","anna","anton","anya","arina","artemy","artyom","aurora","avda","avdakt","avdelay","avdey","avdifaks","avdiky","avdiyes","avdon","avdotya","avel","avelina","avenir","avenira","aventin","aventina","averky","avessalom","avgar","avgury","avgust","avgusta","avgustin","avgustina","aviafa","avian","avim","avimelekh","avip","avit","aviv","aviva","avksenty","avksily","avksivy","avkt","avlida","avram","avrelian","avreliya","avrely","avrey","avreya","avros","avsey","avtonom","avtonoma","avudim","avundy","avva","avvakir","avvakum","bogdan","boris","borislav","boyan","branislav","damir","danica","daniel","daniil","danilo","daria","dario","darko","david","diana","dmitry","ekaterina","elena","elina","galenka","galina","gennadiya","gennady","genrikh","georgy","gerasim","gniewomir","grigory","grischa","igor","ilarion","ilya","inal","inna","irina","ivan","jaroslav","joseph","katja","katya","kira","kirill","konstantin","konstantine","lada","lana","lena","leonid","libna","ljuba","lubomir","ludmila","ludomir","lukyan","lyubov","magdalena","margarita","maria","marta","masha","maxim","mikhail","milan","milena","milica","milorad","mira","miroslav","mstislav","nadezhda","nadia","nail","nastja","natacha","natalia","natasha","nicholas","nicole","nikita","nina","nonna","odette","oksana","oleg","olga","osip","ossip","panteley","pavel","pavsikakiy","petya","piotr","polina","pyotr","rachel","radmila","radomir","radoslav","radul","raisa","rasim","ratimir","robert","roman","rostislav","ruslan","rustem","sambor","sneana","sobieslaw","sonia","sophia","stanimir","stanislav","stanislava","stefania","svetlana","svetoslav","sviatoslav","tamara","tanya","tatiana","timofey","timur","tonya","vadim","valentina","valeria","valery","vanya","vasilisa","velimir","veniamin","vera","viacheslav","viktor","viktoriya","vitomir","vlada","vladan","vladimir","vladislav","volodymyr","vsevolod","yakov","yefim","yegor","yekaterina","yelena","yermolay","yulia","yury","zenaida","zinoviy","zinovy","zora","zoran","zoya"];o["Satellites Natural"]=["adrastea","aegaeon","aegir","aitne","albiorix","amalthea","ananke","anthe","aoede","arche","ariel","atlas","autonoe","bebhionn","belinda","bergelmir","bestla","bianca","caliban","callirrhoe","callisto","calypso","carme","carpo","ceres","chaldene","cordelia","cressida","cupid","cyllene","daphnis","deimos","desdemona","despina","dia","dione","dysnomia","earth","elara","enceladus","erinome","eris","erriapus","euanthe","eukelade","euporie","europa","eurydome","farbauti","fenrir","ferdinand","fornjot","francisco","galatea","ganymede","greip","halimede","harpalyke","hati","haumea","hegemone","helene","helike","hermippe","herse","himalia","hyperion","hyrrokkin","iapetus","ijiraq","io","iocaste","isonoe","janus","jarnsaxa","juliet","jupiter","kale","kallichore","kalyke","kari","kerberos","kiviuq","kore","laomedeia","larissa","leda","loge","lysithea","mab","margaret","mars","megaclite","mercury","methone","metis","mimas","miranda","mneme","mundilfari","naiad","namaka","narvi","neptune","nereid","neso","oberon","ophelia","orthosie","paaliaq","pallene","pan","pandora","pasiphae","pasithee","perdita","phobos","phoebe","pluto","polydeuces","portia","praxidike","prometheus","prospero","proteus","psamathe","puck","rhea","rosalind","sao","saturn","setebos","siarnaq","sinope","skathi","skoll","sponde","stephano","styx","surtur","suttungr","sycorax","tarqeq","tarvos","taygete","telesto","tethys","thalassa","thebe","thelxinoe","themisto","thrymr","thyone","titan","titania","trinculo","triton","umbriel","uranus","venus","xi","ymir"];o["Scottish Surnames"]=["aileanach","ailpeanach","allanach","ambarsan","andarsan","anndrasdan","arasgain","baran","barrach","beitean","bhodhsa","bhsa","blacach","blr","blrach","bochanan","boid","breac","breathnach","brothaigh","bruis","brus","brigheach","brn","buideach","buidheach","buids","buiseid","bnach","bideach","cailbhin","caileanach","caimbeul","caimbeulach","camran","camshron","camshronach","cananach","canonach","caoidheach","caolaisdean","catach","catan","catanach","ceallach","ceanadach","ceannaideach","cearrach","ceiteach","ciar","ciarach","ciogach","coineagan","crannach","creag","criatharach","cuimeanach","cuimein","cuimeineach","cidh","camp","campach","cmhan","dalais","deir","deireach","druimeanach","druimein","druimeineach","druiminn","dubh","dubhach","dunaid","dunaidh","dmhnallach","dbhghlas","dghallach","dghlas","dghlasach","eabarcrombaigh","fearghasdan","fionnlasdan","flimean","foirbeis","foirbeiseach","forsidh","friseal","frisealach","flais","gall","gallach","geadais","geadasach","gearailteach","gilios","gillandrais","gilleasbaig","gilleasbuig","gillechriosd","gillechrost","giobsan","glas","gobha","grannd","grannda","granndach","greum","greumach","griogal","griogalach","griogarach","guaire","guinne","gunnach","gutraidh","grdan","grdanach","latharnach","lathurna","leamhanach","leamhnach","leideach","lobhdain","loganach","loudain","los","losach","ltair","macabhra","macabhsalain","macadaidh","macadhaimh","macaididh","macailein","macailpein","macalasdair","macambrais","macamhalghaidh","macamhlaidh","macamhlaigh","macanndaidh","macanndra","macanndrais","macaodhagain","macaoidh","macaoidhein","macaomalain","macaonghais","macara","macartain","macartair","macasgaidh","macasgaill","macasgain","macbeatha","macbeathag","macbharrais","macbheatha","macbheathaig","macbheathain","macbhigein","macbhiocair","macbhlthain","macbhradain","macbhraonaigh","macbhrghdeinn","macbhididh","macbhtair","maccaibe","maccailein","maccain","maccaisgein","maccalmain","maccaluim","maccaog","maccaoig","maccardaidh","maccarmaig","maccathachaidh","maccathail","maccathain","maccathasaigh","maccathbhaidh","maccathbharra","macceallaig","macceallaigh","macceallair","maccearnaigh","maccearraich","macceasain","macchoinnich","maccianain","macciarain","maccinidh","macciomalain","maccionadha","macclambroch","maccnaimhin","maccnusachainn","maccodrum","maccoinnich","maccoinnigh","maccolla","maccomhainn","macconaill","macconnain","maccorcadail","maccormaig","maccosgraigh","maccrain","maccreamhain","maccriomain","maccrithein","maccrosain","maccruimein","maccrsdein","maccrin","maccuaig","maccuidhein","maccuilcein","maccuinn","maccuinnleis","maccuirc","maccuithein","maccullach","maccullaich","maccumasgaigh","maccumhais","maccuthais","maccba","macciseam","maccmhain","maccmhghan","maccga","macdhersa","macdhiarmaid","macdhonnchaidh","macdhrostain","macdhubhaich","macdhubhaig","macdhubhshth","macdhubhthaich","macdhuibh","macdhunlibhe","macdhibhidh","macdhmhnaill","macdhghaill","macdhnshlibhe","macdiarmaid","maceachaidh","maceachainn","maceachairn","maceacharna","macealair","macealar","maceamailinn","maceanain","maceanraig","maceghainn","macfhearchair","macfhearghail","macfhearghais","macfhilib","macfhiongain","macfhionghain","macfhionnlaigh","macfhitheachain","macfhlaithbheartaich","macfhraing","macfhraingein","macfigeinn","macfrdeinn","macfuirigh","macgairbheith","macgaradh","macghearailt","macghille","macgille","macgilleain","macgillearnain","macgilleasbaig","macgilleathain","macgillebhreac","macgillebhrth","macgillebhrghde","macgillebhin","macgillechaluim","macgillechrosd","macgilledhonaghart","macgilledhuibh","macgillefhialain","macgilleghlais","macgillemhartainn","macgilleriabhaich","macgilleseathanaich","macgillein","macgillfhaolagain","macgillfhiontag","macgilliosa","macgilloig","macgillonaidh","macgiobain","macglaisein","macgobhainn","macgoraidh","macgoraidh","macgriogair","macguaire","macgumaraid","maciain","macillanndrais","macillanndrais","macillaodhagain","macilldhera","macille","macillearnain","macilleasbaig","macilleathain","macilleathainn","macillebheathain","macillebhlthain","macillebhreac","macillebhris","macillebhrth","macillebhrghde","macillebhuidh","macillebhuidhe","macillebhin","macillebhin","macillechaluim","macillechatain","macillechathbhaidh","macillechiar","macillechiar","macillechiarain","macillechomhghain","macillechonaill","macillechruim","macillechrosd","macilledhonaghart","macilledhubhthaich","macilledhuibh","macilledhuibh","macilledhuinn","macilledhmhnaich","macilleghlais","macilleghuinnein","macilleghuirm","macillemhaoil","macillemhearnaig","macillemhoire","macillemhrtainn","macillemhcheil","macillemhcheil","macillemhire","macillenaoimh","macillenaoimh","macillepheadair","macillephdraig","macilleriabhaich","macilleriabhaich","macilleruaidh","macilleruaidh","macillesheathain","macillesheathanaich","macillesheathnaich","macillethmhais","macillein","macillfhaolagain","macillfhaolain","macillfheargain","macillfhialain","macillfhinnein","macillfhinnein","macillfhinntain","macillfhionndaig","macillfhionndaig","macillfhionndain","macillianain","macilliomchadha","macilliosa","macilloig","macillonchon","macillonfhaidh","macillosa","macilluidhir","macillidich","macillmheir","macillosa","maciomhair","macionmhainn","maciosaig","maclabhrainn","maclabhruinn","maclachlainn","maclagain","maclamraich","maclaomainn","maclathagain","macleid","macleir","maclianain","macliuthar","maclothaidh","maclughaidh","macluinge","macluirg","maclulaich","maclcaidh","maclcais","macmhaighstir","macmhanachain","macmhannain","macmhaoilein","macmhaoirn","macmhaolagain","macmhaolain","macmhaolbheatha","macmhaolchaluim","macmhaoldmhnaich","macmhaolosa","macmharais","macmharcais","macmhata","macmhatha","macmhathain","macmhiadhchain","macmhoirein","macmhorgain","macmhuircheartaich","macmhuirich","macmhunna","macmhurardaich","macmhurchaidh","macmhnais","macmhrtainn","macmhinn","macmhcheil","macmhrdha","macnaois","macnaomhain","macneacail","macneachdain","macneis","macnia","macniallghais","macniallghuis","macniocail","macnobaill","macnill","macnll","macphaid","macphaidein","macphail","macphairce","macpheadair","macpheadarain","macpheadrais","macpheidearain","macphilip","macphdraig","macphic","macphidein","macphil","macphrlain","macphil","macrabaidh","macraghnaill","macraibeirt","macraoimhin","macraoiridh","macraonaill","macrath","macriada","macriocaird","macrisnidh","macrob","macrobaidh","macroibeirt","macroithridh","macruairidh","macrusachainn","macrild","macrdeinn","macrgh","macshanndaidh","macshealbhaigh","macsherais","macshersa","macshimidh","macshithich","macshitrig","macshomhairle","macshuibhne","macshm","macsiridh","macsporain","macsuain","macsual","macthaidhg","mactherlaich","macthom","macthomaidh","macthorcadail","macthorcaill","macthmhais","macthmais","mactiridh","mactuirc","macualraig","macuaraig","macuchtraigh","macuilleim","macuirigh","macuirigh","macuisdein","macurardaidh","macurardaigh","macurchadain","macurchaidh","macusbaig","macidh","macisdein","maoileanach","maoliosa","matasan","mathanach","matharnach","mawr","moireach","moireasdan","moireasdanach","morgan","morganach","munna","mrnach","mrr","mrtainn","minn","minnearach","niocalsan","padarsan","paorach","peadarsan","peucag","peutan","preas","puidreach","rathais","robasan","robasdan","roid","roideach","ros","rosach","rothach","ruadh","ruiseal","rs","rsach","sailcirc","salmond","scottish","scottish","seadh","seadhg","seagha","seaghach","seathanach","sginnearach","sgot","sgin","singleir","siosal","siosalach","smios","stibhart","stibhartach","sutharlainn","sutharlan","suthurlanach","sdrach","talmhach","tod","todt","tolmach","tuairnear","tulach","tileach","tillear","ualas","umphraidh","urchadainn","urchardan","omharach"];o.Sports=["abseiling","aerobatics","aikido","air acing","airsoft","angling","archery","autocross","autograss","axethrowing","backpacking","backstroke","badminton","bagatelle","balancebeam","ball","ballooning","bando","bandy","bangerracing","barbilliards","barrelracing","bartitsu","baseball","basejumping","basketball","batontwirling","beachsoccer","beachtennis","beachvolleyball","beagling","billiards","biribol","blackball","bobsleigh","bodyboarding","bodybuilding","bottlepool","bouldering","bowlliards","boxing","breaststroke","broomball","bucketball","bullriding","bushwhacking","campdrafting","canoeing","canyoneering","cardstacking","casterboarding","casting","catchwrestling","coastalrowing","coasteering","cockfighting","corkball","cowboy","creeking","cribbage","cricket","crosscountry","curling","cutting","cycling","cyclocross","deerhunting","desertracing","dicestacking","dinghysailing","dirtjumping","discdog","discgolf","diving","dodgeball","dodgedisc","dragracing","drifting","eightball","fastnet","fencing","figureskating","fistball","fivepins","fives","floor","floorball","flutterguts","flyfishing","flyingtrapeze","folkrace","folkwrestling","football","footvolley","formularacing","foxhunting","freeboarding","freeboating","freediving","freerunning","freestyle","geocaching","gigracing","gliding","goalball","grasstrack","greekwrestling","gymnastics","handball","handball","hanggliding","harecoursing","harnessracing","highbar","hiking","hillclimbing","hockey","hoop","hooverball","horseracing","iceclimbing","icefishing","icehockey","iceracing","icespeedway","iceyachting","jousting","judo","juggling","jujutsu","karate","kartracing","kendo","kenjutsu","kickball","kickboxing","kilikiti","kiteboarding","kitebuggying","kitefighting","kitelandboarding","kitesurfing","kneeboarding","kungfu","lacrosse","landsailing","lasertag","letterboxing","longball","longboarding","luge","matball","matchplay","medleyrelay","miniaturegolf","motocross","mountainboarding","mountaineering","mudbogging","netball","ninjutsu","offroading","orienteering","paintball","parachuting","paragliding","paramotoring","parasailing","parkour","poleclimbing","polo","polocrosse","pool","powerlifting","punchball","racewalking","racketlon","racquetball","racquets","rafting","rallycross","rallying","reining","ribbon","ringball","ringette","ringo","riverboarding","rodeo","rope","ropeclimbing","ropejumping","roping","rundown","sailing","sandboarding","sanshou","scootering","scubadiving","seakayaking","shootboxing","shootfighting","showjumping","skateboarding","skibobbing","skijumping","skimboarding","skitouring","skydiving","skysurfing","slacklining","slamball","snooker","snooker","snorkelling","snowboarding","snowkiting","softball","softball","softtennis","spearfishing","speedball","speedgolf","speedminton","speedpool","speedskiing","squash","steeplechase","streetball","streetboarding","streetracing","sumowrestling","supercross","supermoto","surfboat","surfing","swordfighting","tennis","testcricket","throwball","tobogganing","trackcycling","trackracing","trampolining","trapeze","truckracing","ultimate","unicycling","vault","volleyball","wakeboarding","wakesurfing","walking","wallyball","waterpolo","watervolleyball","windsurfing","wireball","wrestling"];o["Stars Proper Names"]=["acamar","achernar","achird","acrab","acrux","acubens","adhafera","adhara","ain","aladfar","alamak","alathfar","alaraph","albaldah","albali","albireo","alchiba","alcor","alcyone","aldebaran","alderamin","aldhafera","aldhibah","aldib","alfirk","algedi","algenib","algenib","algieba","algol","algorab","alhajoth","alhena","alioth","alkaid","alkalurops","alkes","alkurah","almach","alnasl","alnilam","alnitak","alniyat","alphard","alphecca","alpheratz","alrai","alrakis","alrami","alrischa","alsafi","alsciaukat","alshain","alshat","altair","altais","altarf","alterf","aludra","alwaid","alya","alzir","ancha","angetenar","ankaa","antares","arcturus","arich","arided","arkab","armus","arneb","arrakis","ascella","asellus","ashlesha","askella","aspidiske","asterion","asterope","atik","atlas","atria","auva","avior","azaleh","azelfafage","azha","azimech","azmidiske","baham","baten","becrux","beid","bellatrix","benetnasch","betelgeuse","botein","brachium","canopus","capella","caph","caphir","castor","castula","celbalrai","celaeno","chara","chara","cheleb","chertan","coxa","caiam","cursa","cynosura","dabih","decrux","deneb","denebola","dheneb","diadem","diphda","dnoces","dschubba","dubhe","duhr","edasich","electra","elmuthalleth","elnath","eltanin","enif","errai","etamin","fomalhaut","furud","gacrux","gatria","gemma","gianfar","giedi","giennah","girtab","gomeisa","gorgonea","graffias","grafias","grassias","grumium","hadar","hadir","haedus","haldus","hamal","hassaleh","hydrus","heka","heze","hoedus","homam","hyadum","hydrobius","izar","jabbah","jih","kabdhilinan","kaffaljidhma","kajam","kastra","keid","kitalpha","kleeia","kochab","kornephoros","kraz","ksora","kuma","lesath","maasym","mahasim","maia","marfark","marfik","markab","matar","mebsuta","media","megrez","meissa","mekbuda","menchib","menkab","menkalinan","menkar","menkent","menkib","merak","merga","merope","mesarthim","miaplacidus","mimosa","minchir","minelava","minkar","mintaka","mira","mirach","miram","mirfak","mirzam","misam","mizar","mothallah","muliphein","muphrid","murzim","naos","nash","nashira","navi","nekkar","nembus","neshmet","nihal","nunki","nusakan","okul","peacock","phact","phad","pherkad","pherkard","pleione","pollux","porrima","praecipua","procyon","propus","proximacentauri","pulcherrim","rana","rasalas","rastaban","regor","regulus","rigel","rotanev","ruchba","ruchbah","rukbat","sabik","sadachbia","sadalbari","sadalmelik","sadalsuud","sadatoni","sadira","sadr","sadlamulk","saiph","saiph","salm","sargas","sarin","sceptrum","scheat","scheddi","schedar","segin","seginus","sham","shaula","sheliak","sheratan","sinistra","sirius","situla","skat","spica","sterope","sualocin","subra","suhail","suhel","sulafat","sol","syrma","tabit","tarazet","taygeta","terebellum","thabit","theemin","unukalhai","vega","vindemiatrix","wasat","wei","wezen","wezn","yildun","zaniah","zaurak","zavijava","zedaron","zelphah","zibal","zosma","zubenelgenubi","zubenelgubi","zubeneschemali","zubenhakrabi"];o["Swedish Forenames"]=["adam","adrian","agnes","albin","alex","alexander","alfred","ali","alice","alicia","alma","alva","alvin","amanda","amelia","anna","anton","aron","arvid","astrid","august","axel","benjamin","carl","casper","celine","charlie","colin","cornelia","daniel","dante","david","ebba","ebbe","eddie","edith","edvin","edward","elias","elin","elina","elis","elisa","elise","ella","ellen","ellie","ellinor","elliot","elsa","elton","elvin","elvira","emelie","emil","emilia","emma","emmy","erik","ester","felicia","felix","filip","filippa","frank","freja","gabriel","greta","gustav","hampus","hanna","harry","hedda","henry","hilda","hilma","hjalmar","hugo","ida","ines","ingrid","iris","isabella","isabelle","isak","ivar","jack","jacob","jasmine","joel","john","joline","jonathan","josef","julia","julian","juni","kevin","klara","leah","leia","leo","leon","liam","lilly","linn","linnea","linus","lisa","liv","livia","loke","loui","lova","love","lovis","lovisa","lucas","ludvig","luna","lykke","maja","majken","malte","maria","matilda","matteo","max","maximilian","meja","melissa","melker","melvin","milo","milton","minna","mio","mira","moa","mohamed","molly","my","mrta","nathalie","nellie","neo","nicole","nils","noah","noel","nora","nova","novalie","oliver","olivia","olle","oscar","otto","rasmus","ronja","rut","saga","sally","sam","samuel","sara","sebastian","selma","sigge","signe","sigrid","simon","siri","sixten","sofia","stella","stina","svante","svea","tage","thea","theo","theodor","tilda","tilde","tindra","tuva","tyra","valter","vera","victoria","vidar","viggo","viktor","vilgot","ville","vincent","wilhelm","william","wilma","wilmer"];o["Swiss Cities"]=["aarau","aarberg","aarburg","adliswil","agno","aigle","allschwil","altdorf","altsttten","amriswil","appenzell","arbon","ascona","aubonne","avenches","baar","baden","basel","bellinzona","bern","beromnster","biasca","biel","bienne","binningen","birsfelden","bischofszell","boudry","bremgarten","brig","brugg","buchs","bulle","burgdorf","blach","carouge","cham","chur","conthey","coppet","cossonay","croglio","cudrefin","cully","davos","delmont","diessenhofen","dietikon","dbendorf","ebikon","eglisau","einsiedeln","elgg","emmen","erlach","frauenfeld","freienbach","fribourg","geneva","gland","glarus","gordola","gossau","grandcour","grandson","greifensee","grenchen","gruyres","grningen","herisau","hermance","horgen","horw","huttwil","ilanz","ittigen","kaiserstuhl","klingnau","kloten","kreuzlingen","kriens","kniz","ksnacht","kssnacht","lachen","lancy","langenthal","laufen","laufenburg","laupen","lausanne","lenzburg","leuk","lichtensteig","liestal","locarno","losone","lucerne","lugano","lutry","lyss","maienfeld","martigny","meilen","mellingen","mendrisio","meyrin","monthey","montreux","morcote","morges","moudon","moutier","muri","murten","muttenz","mnchenstein","mnsingen","neuchtel","neuhausen","neunkirch","nidau","nyon","oftringen","olten","onex","opfikon","orbe","orsires","ostermundigen","payerne","porrentruy","pratteln","prilly","pully","regensberg","regensdorf","reinach","renens","rheinau","rheineck","rheinfelden","richterswil","riehen","rolle","romainmtier","romont","rorschach","rue","rti","saillon","sala","sargans","sarnen","schaffhausen","schlieren","schwyz","sembrancher","sempach","sierre","sion","solothurn","spiez2","splgen","spreitenbach","stans","steckborn","steffisburg","stfa","sursee","thalwil","thun","thusis","thnex","unterseen","uster","uznach","uzwil","valangin","vernier","versoix","vevey","villeneuve","visp","volketswil","waldenburg","walenstadt","wallisellen","werdenberg","wettingen","wetzikon","wiedlisbach","wil","willisau","winterthur","wohlen","worb","wdenswil","zofingen","zollikon","zug","zurich","zurzach","challens"];o["Theological Angels"]=["abaddon","abathar","adriel","ahriman","ambriel","amesha","anael","angel","arariel","archangel","ariel","azazel","azrael","barachiel","bene","camael","cassiel","cherub","cherubim","daniel","dardail","dominions","dumah","eremiel","gabriel","gadreel","grigori","hadraniel","hahasiah","hamalat","haniel","harut","hashmal","hesediel","imamiah","israfil","jegudiel","jehoel","jequn","jerahmeel","jophiel","kerubiel","kiraman","kushiel","leliel","lucifer","maalik","marut","mebahiah","metatron","michael","muaqqibat","munkar","muriel","nakir","nanael","netzach","nithael","nuriel","pahaliah","penemue","phanuel","powers","poyel","principalities","puriel","qaphsiel","raguel","raphael","raziel","remiel","sachiel","samael","sandalphon","sariel","schemhampharae","selaphiel","seraph","seraphiel","seraphim","shamsiel","simiel","temeluchus","tennin","thrones","tzaphqiel","uriel","uzziel","vehuel","virtues","wormwood","zachariel","zadkiel","zaphkiel","zephon","zophiel"];o["Theological Demons"]=["abaddon","abezethibou","abraxas","abyzou","adramelech","aeshma","agaliarept","agares","agiel","agrat","ahriman","aim","aka","ala","alal","alastor","allocer","alloces","allu","amaymon","amdusias","amy","anamalech","ancitif","andhaka","andras","andrealphus","andromalius","angra","antichrist","anzu","apollyon","archon","armaros","arunasura","asag","asakku","asbel","asmodai","asmodeus","astaroth","asura","azazel","azi","baal","babi","bael","bakasura","balam","balberith","bali","banshee","baphomet","barbas","barbatos","barong","bathin","bathym","beelzebub","behemoth","beherit","beleth","belial","belphegor","berith","bhta","bifrons","boruta","botis","buer","bukavac","bune","bushyasta","caacrinolaas","caassimolar","cain","canio","cerbere","charun","chax","chemosh","choronzon","cimeies","cimejes","classyalabolas","corson","crocell","culsu","daeva","dagon","dajjal","danjal","dantalion","davy","decarabia","demiurge","demogorgon","devil","drekavac","dzoavits","eblis","eisheth","eligos","flauros","flavros","focalor","foraii","foras","forcas","forcas","forneus","furcas","furfur","gaap","gaderel","gaki","gamigin","ghoul","glasya","gomory","gorgon","gremory","grigori","gualichu","guayota","gusion","gusoin","gusoyn","haagenti","haborym","halphas","hantu","hauras","haures","havres","ifrit","incubus","ipes","ipos","jikininki","jinn","kabandha","kabhanda","kali","kasadya","killakee","kimaris","kokabiel","krampus","kroni","kumbhakarna","lechies","legion","lempo","leraie","leraje","leviathan","leyak","lili","lilim","lilin","lilith","lucifer","lucifuge","malaphar","malephar","malphas","malthus","mammon","mara","marax","marchosias","maricha","marthim","masih","mastema","mathim","mephistopheles","merihem","moloch","morax","morpheus","murmur","naamah","naberius","naberus","namtar","ninurta","onoskelis","orcus","orias","oriax","ornias","orobas","ose","paimon","pazuzu","pelesit","penemue","phenex","pithius","pocong","pontianak","procell","pruflas","puloman","rahab","rakshasa","rangda","raum","ravan","ronove","rusalka","sabnock","saleos","samael","satan","seir","semyaz","shax","shedim","sitri","solas","sthenno","stolas","suanggi","succubus","surgat","tannin","toyol","tuchulcha","ukobach","valac","valefar","vanth","vapula","vassago","vepar","vine","wendigo","xaphan","xezbeth","yeqon","yeterel","zagan","zepar","ziminiar","rdg"];o["Tolkienesque Forenames"]=["abattrik","adalgrim","adanedhel","adanel","adrahil","adnakhr","aegnor","aerin","agarwaen","aikanro","aiwendil","alatar","alatriel","alcarin","aldamir","aldarion","aldaron","aldor","alfwine","amandil","amandil","amdr","amlaith","amras","amrod","amroth","amrothos","anair","anardil","anborn","ancalagon","ancalimon","ancalim","andrast","andreth","andrg","anducal","anfauglir","angbor","angrod","annatar","anrion","arador","araglas","aragorn","aragost","arahad","arahael","aranarth","arantar","aranuir","araphant","araphor","arassuil","aratan","aratar","arathorn","araval","aravir","aravorn","aredhel","argeleb","argon","argonui","arien","aros","arthedain","arthedain","arvedui","arvegil","arveleg","arwen","asfaloth","atanamir","atanatar","aul","ausir","avranc","azaghl","azog","baldor","balin","baragund","barahir","barahir","baran","bard","barliman","bauglir","belecthor","beleg","belegorn","belegund","belemir","belladonna","beorn","bereg","beregond","beren","bergil","bert","berylla","berthiel","berthiel","bifur","bofur","boldog","bolg","bolger","bombadil","bombur","borin","boromir","boron","borondir","brand","brandir","brego","bregolas","bregor","brodda","brytta","bucca","bor","br","calembel","calimehtar","calion","calmacil","calmacil","caranthir","carcharoth","castamir","celeborn","celebrimbor","celebrindor","celebran","celegorm","celepharn","cemendur","ceorl","cirion","ciryaher","ciryandil","ciryatan","ciryon","cotton","curufin","curunr","crdan","daeron","denethor","dernhelm","derwine","dior","dori","dorlas","draugluin","duilin","durin","dwalin","din","dagol","dor","ds","ecthelion","egalmoth","eilinel","elanor","elbereth","eldacar","eldarion","elemmakil","elendil","elendor","elendur","elenna","elenw","elessar","elfhelm","elfhild","elfwine","elladan","elmar","elmo","elrohir","elrond","elros","elu","elven","elwing","elw","emeldir","emeri","enel","enely","eorl","eradan","erendis","erestor","erkenbrand","estel","estelmo","est","erendil","erendur","ernil","ernur","erwen","el","enw","falassion","faniel","faramir","fastred","felarf","fengel","ferumbras","finarfin","findis","finduilas","finduilas","fingolfin","fingon","finrod","finvain","finw","folcwine","fortinbras","freca","frerin","fra","fralf","frawine","frr","fuinur","fundin","fanor","fli","friel","galador","galadriel","galdor","gamil","gamling","gandalf","gerontius","ghnburi","gildor","gilgalad","gilrain","gimilkhd","gimilzr","gimli","ginglith","girion","glanhr","glaurung","glorfindel","glin","glredhel","goldberry","goldwine","golfimbul","gollum","gorbag","gorlim","gormadoc","gorthaur","gothmog","gram","grimbold","grishnkh","grma","grr","gwaihir","gwathir","gwindor","hador","halbarad","haldad","haldan","haldar","haldir","haleth","hallas","halmir","handir","hardang","hareth","helm","herion","herucalmo","herumor","herunmen","hirgon","hiril","hostamir","huan","hundar","huor","hyarmendacil","hma","hrin","ibn","idril","ilmar","ilvatar","ilvatar","imbar","imin","iminy","imrahil","indis","inglor","ingw","inziladn","inzilbth","irim","irmo","isildur","isilmo","isilm","isumbras","ivriniel","khaml","khm","king","kli","kvion","lagduf","lalaith","legolas","lenw","lindir","lobelia","lotho","lugdush","lurtz","lod","lthien","mablung","maedhros","maeglin","maglor","magor","mahtan","maiar","malach","mallor","malvegil","manthor","manw","marach","mauhr","meleth","melian","meneldil","meneldur","meriadoc","minalcar","minardil","minastir","minyatur","mithrandir","morgoth","morwen","morwen","muzgash","mrielar","mrielserind","mm","nahar","narmacil","narvi","nerdanel","nessa","nienna","nienor","nimloth","nimrodel","nori","nin","nmo","nniel","nlimon","nm","ohtar","olw","olrin","ondoher","ori","ornendil","orodreth","orom","oropher","orophin","oss","ostoher","paladin","palantir","pallando","pelendur","pengolodh","peregrin","pervinca","pharazn","primula","radagast","ran","rmendacil","rmil","sador","saeros","sakalthr","salgant","salmar","saruman","sauron","scatha","shadowfax","shagrat","shelob","silmarin","singollo","siriondil","smaug","smagol","snowmane","soronto","strider","srion","tarannon","tarcil","tarondor","tata","tati","telchar","telemmait","telemnar","telperin","telumehtar","thengel","thingol","thorin","thorondir","thorondor","thranduil","thrin","thrr","thoden","thodred","thodwyn","tilion","tindomiel","tinviel","tulkas","tuor","turambar","turgon","trin","ufthak","uglk","uinen","uldor","ulfang","ulfast","ulmo","ulwarth","umbardacil","undmiel","ungoliant","uol","urwen","vair","valacar","valandil","valandur","vanimeld","varda","vardamir","vidugavia","vidumavi","vinyarion","vorondil","voronw","voronw","vna","walda","wormtongue","yavanna","yvien","zimraphel","zimraphel","zimrathn","omer","omund","othain","othod","owyn","rild","in"];o.Websites=["adobe","alibaba","aliexpress","amazon","amazon","apple","ask","baidu","bing","bitbucket","blogger","blogspot","bongacams","chase","craigslist","digg","diply","dropbox","ebay","facebook","flipkart","github","google","google","haosou","imgur","instagram","linkedin","microsoft","naver","netflix","nicovideo","outbrain","paypal","pinterest","pixnet","rakuten","reddit","sina","slashdot","sohu","stackoverflow","taobao","tencent","tmall","tumblr","twitter","weibo","whatsapp","wikipedia","windowslive","wordpress","xvideos","yahoo","yahoo","yandex","youtube"];o["Werewolf Forenames"]=["accalia","adalwolf","adalwolfa","adolpha","adolphus","amaguk","amarog","amoux","amwolf","ardolf","ardwolf","audolf","bardalph","bardolf","beowulf","biryuk","bleddyn","bledig","bleidd","bodolf","botewolf","botolf","botwolf","cana","canagan","chann","chanteloup","conall","conan","cuan","dolph","dolphus","ethelwulf","eyolf","faolan","farkas","felan","fenris","freki","fridolf","friduwulf","geirolf","guadalupe","gunnolf","honiahaka","hrolf","hrolleif","ingolf","ivaylo","landga","leidolf","leloo","lobo","loup","lowell","lupe","luperca","lupo","lupu","lupus","lyall","lykaios","maccon","maengun","maheegan","mahigan","maicoh","maiyun","makoce","mingan","mohegan","nashoba","nuntis","odolf","odwolfe","olcan","onai","phelan","radolf","raff","ralph","rand","randale","randall","randi","randolph","ranulfo","raoul","raul","rendall","reule","rezso","rodolfo","rolf","rudi","rudolph","sandalio","seff","shunkaha","singarti","sirhaan","skll","susi","tala","tasha","tate","tchono","toralu","udolf","udolph","ujku","ulf","ulfred","ulger","ullok","ulmar","ulmer","ulric","ulvelaik","uwais","varg","velvel","vilkas","vilks","vuk","vukasin","weylyn","wolfgang","wolfram","wolfrik","woolsey","wulfgar","ylva"];l.GITHUB_URL="https://github.com/Tw1ddle/word-reactor";l.WEBSITE_URL="http://www.samcodes.co.uk/project/word-reactor/";l.TWITTER_URL="https://twitter.com/Sam_Twidale/status/756230840821092352";l.BALL_CONTAINER_CLASSNAME="ballContainer";l.CONTENT_WRAPPER_CLASSNAME="contentWrapper";l.INNER_CONTENT_CLASSNAME="innerContent";l.FRAME_TIMEOUT_TIME_SECONDS=3;l.GRAVITY_STRENGTH=600;l.topicGroups=[[new f("American Desserts","#35203b"),new f("British Desserts","#cf4a30")],[new f("Musical Styles","#28687c"),new f("Musical Instruments","#0f384a")],[new f("Clothing","#16193b"),new f("Colours","#35478c")],[new f("Fruit","#93004f"),new f("Meats","#009f43"),new f("Breakfast Cereals","#000093")],[new f("Original Pokemon","#222222"),new f("Animals","#444444"),new f("Modern Pokemon","#666666")],[new f("American Forenames","#ff8000"),new f("Japanese Forenames","#cccc52"),new f("Tolkienesque Forenames","#129b33")],[new f("English Towns","#8cbeb2"),new f("German Towns","#f3b562"),new f("Japanese Cities","#aa6060")]];l.backgroundTappingTopic=l.topicGroups[0][0];y.__toStr={}.toString;N.epsilon=1e-8;N.fluidAngularDragFriction=2.5;N.fluidAngularDrag=100;N.fluidVacuumDrag=.5;N.fluidLinearDrag=.5;N.collisionSlop=.2;N.collisionSlopCCD=.5;N.distanceThresholdCCD=.05;N.staticCCDLinearThreshold=.05;N.staticCCDAngularThreshold=.005;N.bulletCCDLinearThreshold=.125;N.bulletCCDAngularThreshold=.0125;N.dynamicSweepLinearThreshold=17;N.dynamicSweepAngularThreshold=.6;N.angularCCDSlipScale=.75;N.arbiterExpirationDelay=6;N.staticFrictionThreshold=2;N.elasticThreshold=20;N.sleepDelay=60;N.linearSleepThreshold=.2;N.angularSleepThreshold=.4;N.contactBiasCoef=.3;N.contactStaticBiasCoef=.6;N.contactContinuousBiasCoef=.4;N.contactContinuousStaticBiasCoef=.5;N.constraintLinearSlop=.1;N.constraintAngularSlop=.001;N.illConditionedThreshold=2e8;V.zpp_internalAlloc=false;jt.zpp_internalAlloc=false;Yt.zpp_internalAlloc=false;hn.FMAX=1e100;pn._Constraint=0;pn._Interactor=0;pn._CbType=0;pn._CbSet=0;pn._Listener=0;pn._ZPP_SimpleVert=0;pn._ZPP_SimpleSeg=0;pn._Space=0;pn._InteractionGroup=0;dn.internal=false;xn.ANY_SHAPE=new M;xn.ANY_BODY=new M;xn.ANY_COMPOUND=new M;xn.ANY_CONSTRAINT=new M;Tn.internal=false;Tn.id_ImmState_ACCEPT=1;Tn.id_ImmState_IGNORE=2;Tn.id_ImmState_ALWAYS=4;Tn.id_GravMassMode_DEFAULT=0;Tn.id_GravMassMode_FIXED=1;Tn.id_GravMassMode_SCALED=2;Tn.id_InertiaMode_DEFAULT=0;Tn.id_InertiaMode_FIXED=1;Tn.id_MassMode_DEFAULT=0;Tn.id_MassMode_FIXED=1;Tn.id_BodyType_STATIC=1;Tn.id_BodyType_DYNAMIC=2;Tn.id_BodyType_KINEMATIC=3;Tn.id_ListenerType_BODY=0;Tn.id_PreFlag_ACCEPT=1;Tn.id_ListenerType_CONSTRAINT=1;Tn.id_PreFlag_IGNORE=2;Tn.id_ListenerType_INTERACTION=2;Tn.id_PreFlag_ACCEPT_ONCE=3;Tn.id_ListenerType_PRE=3;Tn.id_PreFlag_IGNORE_ONCE=4;Tn.id_CbEvent_BEGIN=0;Tn.id_InteractionType_COLLISION=1;Tn.id_CbEvent_ONGOING=6;Tn.id_InteractionType_SENSOR=2;Tn.id_CbEvent_END=1;Tn.id_InteractionType_FLUID=4;Tn.id_CbEvent_WAKE=2;Tn.id_InteractionType_ANY=7;Tn.id_CbEvent_SLEEP=3;Tn.id_CbEvent_BREAK=4;Tn.id_CbEvent_PRE=5;Tn.id_Winding_UNDEFINED=0;Tn.id_Winding_CLOCKWISE=1;Tn.id_Winding_ANTICLOCKWISE=2;Tn.id_ValidationResult_VALID=0;Tn.id_ValidationResult_DEGENERATE=1;Tn.id_ValidationResult_CONCAVE=2;Tn.id_ValidationResult_SELF_INTERSECTING=3;Tn.id_ShapeType_CIRCLE=0;Tn.id_ShapeType_POLYGON=1;Tn.id_Broadphase_DYNAMIC_AABB_TREE=0;Tn.id_Broadphase_SWEEP_AND_PRUNE=1;Tn.id_ArbiterType_COLLISION=1;Tn.id_ArbiterType_SENSOR=2;Tn.id_ArbiterType_FLUID=4;Nn.internal=false;Nn.types=[function(e){var t;if(Tn.ListenerType_BODY==null){Tn.internal=true;Tn.ListenerType_BODY=new R;Tn.internal=false}t=Tn.ListenerType_BODY;return t}(this),function(e){var t;if(Tn.ListenerType_CONSTRAINT==null){Tn.internal=true;Tn.ListenerType_CONSTRAINT=new R;Tn.internal=false}t=Tn.ListenerType_CONSTRAINT;return t}(this),function(e){var t;if(Tn.ListenerType_INTERACTION==null){Tn.internal=true;Tn.ListenerType_INTERACTION=new R;Tn.internal=false}t=Tn.ListenerType_INTERACTION;return t}(this),function(e){var t;if(Tn.ListenerType_PRE==null){Tn.internal=true;Tn.ListenerType_PRE=new R;Tn.internal=false}t=Tn.ListenerType_PRE;return t}(this)];Nn.events=[function(e){var t;if(Tn.CbEvent_BEGIN==null){Tn.internal=true;Tn.CbEvent_BEGIN=new O;Tn.internal=false}t=Tn.CbEvent_BEGIN;return t}(this),function(e){var t;if(Tn.CbEvent_END==null){Tn.internal=true;Tn.CbEvent_END=new O;Tn.internal=false}t=Tn.CbEvent_END;return t}(this),function(e){var t;if(Tn.CbEvent_WAKE==null){Tn.internal=true;Tn.CbEvent_WAKE=new O;Tn.internal=false}t=Tn.CbEvent_WAKE;return t}(this),function(e){var t;if(Tn.CbEvent_SLEEP==null){Tn.internal=true;Tn.CbEvent_SLEEP=new O;Tn.internal=false}t=Tn.CbEvent_SLEEP;return t}(this),function(e){var t;if(Tn.CbEvent_BREAK==null){Tn.internal=true;Tn.CbEvent_BREAK=new O;Tn.internal=false}t=Tn.CbEvent_BREAK;return t}(this),function(e){var t;if(Tn.CbEvent_PRE==null){Tn.internal=true;Tn.CbEvent_PRE=new O;Tn.internal=false}t=Tn.CbEvent_PRE;return t}(this),function(e){var t;if(Tn.CbEvent_ONGOING==null){Tn.internal=true;Tn.CbEvent_ONGOING=new O;Tn.internal=false}t=Tn.CbEvent_ONGOING;return t}(this)];An.UCbSet=new Sn;An.VCbSet=new Sn;An.WCbSet=new Sn;An.UCbType=new Ln;An.VCbType=new Ln;An.WCbType=new Ln;Un.internal=false;Un.COL=1;Un.FLUID=4;Un.SENSOR=2;Un.types=[null,function(e){var t;if(Tn.ArbiterType_COLLISION==null){Tn.internal=true;Tn.ArbiterType_COLLISION=new ot;Tn.internal=false}t=Tn.ArbiterType_COLLISION;return t}(this),function(e){var t;if(Tn.ArbiterType_SENSOR==null){Tn.internal=true;Tn.ArbiterType_SENSOR=new ot;Tn.internal=false}t=Tn.ArbiterType_SENSOR;return t}(this),null,function(e){var t;if(Tn.ArbiterType_FLUID==null){Tn.internal=true;Tn.ArbiterType_FLUID=new ot;Tn.internal=false}t=Tn.ArbiterType_FLUID;return t}(this)];Xn.FACE1=0;Xn.FACE2=1;Xn.CIRCLE=2;Vn.internal=false;Kn.SHAPE=1;Kn.BODY=2;Zn.flowpoly=new Yn;Zn.flowsegs=new Yn;tr.internal=false;ar.internal=false;cr.me=new cr;cr.look_march=[-1,224,56,216,14,-1,54,214,131,99,-1,91,141,109,181,85];vr.nextId=0;gr.internal=false;Pr.types=[null,function(e){var t;if(Tn.BodyType_STATIC==null){Tn.internal=true;Tn.BodyType_STATIC=new Rt;Tn.internal=false}t=Tn.BodyType_STATIC;return t}(this),function(e){var t;if(Tn.BodyType_DYNAMIC==null){Tn.internal=true;Tn.BodyType_DYNAMIC=new Rt;Tn.internal=false}t=Tn.BodyType_DYNAMIC;return t}(this),function(e){var t;if(Tn.BodyType_KINEMATIC==null){Tn.internal=true;Tn.BodyType_KINEMATIC=new Rt;Tn.internal=false}t=Tn.BodyType_KINEMATIC;return t}(this)];Pr.cur_graph_depth=0;jr.WAKE=1;jr.PROPS=2;jr.ANGDRAG=4;jr.ARBITERS=8;Fr.types=[function(e){var t;if(Tn.ShapeType_CIRCLE==null){Tn.internal=true;Tn.ShapeType_CIRCLE=new un;Tn.internal=false}t=Tn.ShapeType_CIRCLE;return t}(this),function(e){var t;if(Tn.ShapeType_POLYGON==null){Tn.internal=true;Tn.ShapeType_POLYGON=new un;Tn.internal=false}t=Tn.ShapeType_POLYGON;return t}(this)];qr.internal=false;Xr.tmpaabb=new Gn;Vr.FATTEN=3;Vr.VEL_STEPS=2;ds.internal=false;vs.internal=false;ms.internal=false;gs.internal=false;ys.internal=false;bs.internal=false;ws.internal=false;Es.internal=false;Ss.internal=false;xs.internal=false;Ts.internal=false;Ns.internal=false;Cs.internal=false;ks.internal=false;Ls.internal=false;l.main()})(typeof console!="undefined"?console:{log:function(){}},typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this)